len=0,last=0
0:rf.commitIndex = 0, rf.lastApplied = 0
len=0,last=0
len=0,last=0
len=0,last=0
len=0,last=0
Test: partitions, many clients (3A) ...
2023/09/23 03:26:38 Iteration 0
2023/09/23 03:26:38 PUT begin
1:rf.commitIndex = 0, rf.lastApplied = 0
2:rf.commitIndex = 0, rf.lastApplied = 0
4:rf.commitIndex = 0, rf.lastApplied = 0
2023/09/23 03:26:38 PUT begin
2023/09/23 03:26:38 PUT begin
2023/09/23 03:26:38 PUT begin
2023/09/23 03:26:38 PUT begin
3:rf.commitIndex = 0, rf.lastApplied = 0
4 follow -> candidate
4 begin to elect
4 term is 1
0 vote now -> 4
3 vote now -> 4
2 vote now -> 4
4: vote num is 2
1 vote now -> 4
4: vote num is 3
4 is leader
4: vote num is 1
4: vote num is 2
---------------
4接受新命令{%!d(string=Put) %!d(string=4) %!d(string=) 1867579256866231016 1},term is 1,len is 1
---------------
---------------
4接受新命令{%!d(string=Put) %!d(string=1) %!d(string=) 672816327287623235 1},term is 1,len is 2
---------------
---------------
4接受新命令{%!d(string=Put) %!d(string=0) %!d(string=) 4346951758130697083 1},term is 1,len is 3
---------------
---------------
4接受新命令{%!d(string=Put) %!d(string=2) %!d(string=) 3167499095888228886 1},term is 1,len is 4
---------------
---------------
4接受新命令{%!d(string=Put) %!d(string=3) %!d(string=) 1065774344220344240 1},term is 1,len is 5
---------------
4 begin to append 0
prevlogindex = 0, lastIndex = 0
4 begin to append 1
prevlogindex = 0, lastIndex = 0
4 begin to append 2
prevlogindex = 0, lastIndex = 0
4 begin to append 3
prevlogindex = 0, lastIndex = 0
测试：3节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 0
updateIndex = 0, lastIndex = 0
3更新log，长度5
3 return success! num is 1
nextIndex = 1, lastIndex = 0, len = 5
3:rf.commitIndex = 0, rf.lastApplied = 0
测试：0节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 0
updateIndex = 0, lastIndex = 0
0更新log，长度5
0:rf.commitIndex = 0, rf.lastApplied = 0
测试：2节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 0
updateIndex = 0, lastIndex = 0
测试：1节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 0
2更新log，长度5
updateIndex = 0, lastIndex = 0
1更新log，长度5
0 return success! num is 2
nextIndex = 1, lastIndex = 0, len = 5
1 max is 5
2 max is 5
4:commitIndex -> 5
[4][1][0] apply index = 1, commit is 5
4:{1}unlock now
4:{1}unlock end
4:{1}lock now
4:{1}lock end
[4][1][0] apply index = 2, commit is 5
4:{2}unlock now
4:{2}unlock end
2:rf.commitIndex = 0, rf.lastApplied = 0
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Put key:4, 
1 return success! num is 1
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 4  1867579256866231016 1} 1 1 false [] 0 0}处理完成,通知index = [1]的channel
nextIndex = 1, lastIndex = 0, len = 5
1:rf.commitIndex = 0, rf.lastApplied = 0
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 4  1867579256866231016 1} 1 1 false [] 0 0}处理完成,通知完成index = [1]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Put key:1, 
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 1  672816327287623235 1} 2 1 false [] 0 0}处理完成,通知index = [2]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 1  672816327287623235 1} 2 1 false [] 0 0}处理完成,通知完成index = [2]的channel
4:{2}lock now
4:{2}lock end
[4][1][0] apply index = 3, commit is 5
4:{3}unlock now
4:{3}unlock end
2 return success! num is 2
4:{3}lock now
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Put key:0, 
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[1],replyMsg: { 1 true}
kvserver[4]: pre删除通道index: 1
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[2],replyMsg: { 1 true}
nextIndex = 1, lastIndex = 0, len = 5
kvserver[4]: pre删除通道index: 2
1 max is 5
2 max is 5
4:commitIndex -> 5
4:{3}lock end
[4][1][0] apply index = 4, commit is 5
4:{4}unlock now
4:{4}unlock end
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 0  4346951758130697083 1} 3 1 false [] 0 0}处理完成,通知index = [3]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 0  4346951758130697083 1} 3 1 false [] 0 0}处理完成,通知完成index = [3]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Put key:2, 
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 2  3167499095888228886 1} 4 1 false [] 0 0}处理完成,通知index = [4]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 2  3167499095888228886 1} 4 1 false [] 0 0}处理完成,通知完成index = [4]的channel
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[3],replyMsg: { 1 true}
kvserver[4]: pre删除通道index: 3
kvserver[4]: begin删除通道index: 3
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 3
kvserver[4]: begin删除通道index: 1
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 1
2023/09/23 03:26:38 PUT end
2023/09/23 03:26:38 4: client new get 4
4:{4}lock now
4:{4}lock end
[4][1][0] apply index = 5, commit is 5
4:{5}unlock now
4:{5}unlock end
4:{5}lock now
4:{5}lock end
4:rf.commitIndex = 5, rf.lastApplied = 5
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[4],replyMsg: { 1 true}
kvserver[4]: pre删除通道index: 4
kvserver[4]: begin删除通道index: 4
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 4
2023/09/23 03:26:38 PUT end
2023/09/23 03:26:38 0: client new get 0
kvserver[4]: begin删除通道index: 2
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 2
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 2},term is 1,len is 6
---------------
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Put key:3, 
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 3  1065774344220344240 1} 5 1 false [] 0 0}处理完成,通知index = [5]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Put 3  1065774344220344240 1} 5 1 false [] 0 0}处理完成,通知完成index = [5]的channel
2023/09/23 03:26:38 PUT end
2023/09/23 03:26:38 2: client new get 2
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 2},term is 1,len is 7
---------------
2023/09/23 03:26:38 PUT end
2023/09/23 03:26:38 1: client new append x 1 0 y
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 2},term is 1,len is 8
---------------
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[5],replyMsg: { 1 true}
kvserver[4]: pre删除通道index: 5
kvserver[4]: begin删除通道index: 5
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 5
2023/09/23 03:26:38 PUT end
2023/09/23 03:26:38 3: client new get 3
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 0 y) 672816327287623235 2},term is 1,len is 9
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 2},term is 1,len is 10
---------------
4 begin to append 0
prevlogindex = 5, lastIndex = 0
4 begin to append 1
prevlogindex = 5, lastIndex = 0
4 begin to append 2
prevlogindex = 5, lastIndex = 0
4 begin to append 3
prevlogindex = 5, lastIndex = 0
测试：2节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 5
updateIndex = 5, lastIndex = 0
测试：3节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 5
updateIndex = 5, lastIndex = 0
2更新log，长度10
3更新log，长度10
[3][1][0] apply index = 1, commit is 5
3:{1}unlock now
3:{1}unlock end
3:{1}lock now
3:{1}lock end
[3][1][0] apply index = 2, commit is 5
3:{2}unlock now
3:{2}unlock end
[2][1][0] apply index = 1, commit is 5
2:{1}unlock now
2:{1}unlock end
2:{1}lock now
2:{1}lock end
[2][1][0] apply index = 2, commit is 5
2023/09/23 03:26:38 CommandApply!!!!!!!!!
2:{2}unlock now
2:{2}unlock end
[3]Put key:4, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
3 return success! num is 1
nextIndex = 6, lastIndex = 0, len = 10
测试：1节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 5
updateIndex = 5, lastIndex = 0
[3]Put key:1, 
1更新log，长度10
测试：0节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 5
updateIndex = 5, lastIndex = 0
1 return success! num is 2
nextIndex = 6, lastIndex = 0, len = 10
1 max is 10
2 max is 10
4:commitIndex -> 10
2 return success! num is 1
nextIndex = 6, lastIndex = 0, len = 10
[1][1][0] apply index = 1, commit is 5
1:{1}unlock now
1:{1}unlock end
1:{1}lock now
1:{1}lock end
[1][1][0] apply index = 2, commit is 5
1:{2}unlock now
1:{2}unlock end
[4][1][0] apply index = 6, commit is 10
4:{6}unlock now
4:{6}unlock end
4:{6}lock now
4:{6}lock end
[4][1][0] apply index = 7, commit is 10
4:{7}unlock now
4:{7}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Put key:4, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Put key:1, 
1:{2}lock now
1:{2}lock end
[1][1][0] apply index = 3, commit is 5
1:{3}unlock now
1:{3}unlock end
1:{3}lock now
1:{3}lock end
[1][1][0] apply index = 4, commit is 5
1:{4}unlock now
1:{4}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:4, 
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 4  1867579256866231016 2} 6 1 false [] 0 0}处理完成,通知index = [6]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 4  1867579256866231016 2} 6 1 false [] 0 0}处理完成,通知完成index = [6]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:2, 
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 2  3167499095888228886 2} 7 1 false [] 0 0}处理完成,通知index = [7]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 2  3167499095888228886 2} 7 1 false [] 0 0}处理完成,通知完成index = [7]的channel
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[7],replyMsg.value: 
reply value is 
kvserver[4]: pre删除通道index: 7
kvserver[4]: begin删除通道index: 7
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 7
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Put key:0, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Put key:2, 
1:{4}lock now
1:{4}lock end
[1][1][0] apply index = 5, commit is 5
1:{5}unlock now
1:{5}unlock end
1:{5}lock now
1:{5}lock end
1:rf.commitIndex = 5, rf.lastApplied = 5
4:{7}lock now
4:{7}lock end
[4][1][0] apply index = 8, commit is 10
4:{8}unlock now
4:{8}unlock end
4:{8}lock now
4:{8}lock end
[4][1][0] apply index = 9, commit is 10
4:{9}unlock now
4:{9}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:0, 
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 0  4346951758130697083 2} 8 1 false [] 0 0}处理完成,通知index = [8]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 0  4346951758130697083 2} 8 1 false [] 0 0}处理完成,通知完成index = [8]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 1 x 1 0 y 672816327287623235 2} 9 1 false [] 0 0}处理完成,通知index = [9]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 1 x 1 0 y 672816327287623235 2} 9 1 false [] 0 0}处理完成,通知完成index = [9]的channel
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[9],replyMsg: {x 1 0 y 1 true}
kvserver[4]: pre删除通道index: 9
kvserver[4]: begin删除通道index: 9
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 9
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[6],replyMsg.value: 
reply value is 
kvserver[4]: pre删除通道index: 6
kvserver[4]: begin删除通道index: 6
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 6
OK:i num is 4, key is 2, return 
2023/09/23 03:26:38 2: client new append x 2 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Put key:3, 
4:{9}lock now
4:{9}lock end
[4][1][0] apply index = 10, commit is 10
4:{10}unlock now
4:{10}unlock end
4:{10}lock now
4:{10}lock end
4:rf.commitIndex = 10, rf.lastApplied = 10
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:3, 
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 3  1065774344220344240 2} 10 1 false [] 0 0}处理完成,通知index = [10]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 3  1065774344220344240 2} 10 1 false [] 0 0}处理完成,通知完成index = [10]的channel
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[8],replyMsg.value: 
reply value is 
kvserver[4]: pre删除通道index: 8
kvserver[4]: begin删除通道index: 8
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 8
OK:i num is 2, key is 0, return 
2023/09/23 03:26:38 0: client new append x 0 0 y
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 0 y) 4346951758130697083 3},term is 1,len is 11
---------------
2023/09/23 03:26:38 1: client new append x 1 1 y
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 0 y) 3167499095888228886 3},term is 1,len is 12
---------------
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[10],replyMsg.value: 
reply value is 
kvserver[4]: pre删除通道index: 10
kvserver[4]: begin删除通道index: 10
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 10
OK:i num is 2, key is 3, return 
2023/09/23 03:26:38 3: client new append x 3 0 y
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 0 y) 1065774344220344240 3},term is 1,len is 13
---------------
OK:i num is 3, key is 4, return 
2023/09/23 03:26:38 4: client new append x 4 0 y
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 1 y) 672816327287623235 3},term is 1,len is 14
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 0 y) 1867579256866231016 3},term is 1,len is 15
---------------
3:{2}lock now
3:{2}lock end
[3][1][0] apply index = 3, commit is 5
3:{3}unlock now
3:{3}unlock end
3:{3}lock now
3:{3}lock end
[3][1][0] apply index = 4, commit is 5
3:{4}unlock now
3:{4}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Put key:0, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Put key:2, 
3:{4}lock now
3:{4}lock end
[3][1][0] apply index = 5, commit is 5
3:{5}unlock now
3:{5}unlock end
3:{5}lock now
3:{5}lock end
3:rf.commitIndex = 5, rf.lastApplied = 5
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Put key:3, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Put key:4, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Put key:1, 
2:{2}lock now
2:{2}lock end
[2][1][0] apply index = 3, commit is 5
2:{3}unlock now
2:{3}unlock end
2:{3}lock now
2:{3}lock end
[2][1][0] apply index = 4, commit is 5
2:{4}unlock now
2:{4}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Put key:0, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Put key:2, 
2:{4}lock now
2:{4}lock end
[2][1][0] apply index = 5, commit is 5
2:{5}unlock now
2:{5}unlock end
2:{5}lock now
2:{5}lock end
2:rf.commitIndex = 5, rf.lastApplied = 5
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Put key:3, 
0更新log，长度10
[0][1][0] apply index = 1, commit is 5
0:{1}unlock now
0:{1}unlock end
0:{1}lock now
0:{1}lock end
[0][1][0] apply index = 2, commit is 5
0:{2}unlock now
0:{2}unlock end
0 return success! num is 2
nextIndex = 6, lastIndex = 0, len = 15
1 max is 10
2 max is 10
4:commitIndex -> 10
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Put key:4, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Put key:1, 
0:{2}lock now
0:{2}lock end
[0][1][0] apply index = 3, commit is 5
0:{3}unlock now
0:{3}unlock end
0:{3}lock now
0:{3}lock end
[0][1][0] apply index = 4, commit is 5
0:{4}unlock now
0:{4}unlock end
4:rf.commitIndex = 10, rf.lastApplied = 10
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Put key:0, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Put key:2, 
0:{4}lock now
0:{4}lock end
[0][1][0] apply index = 5, commit is 5
0:{5}unlock now
0:{5}unlock end
0:{5}lock now
0:{5}lock end
0:rf.commitIndex = 5, rf.lastApplied = 5
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Put key:3, 
4 begin to append 0
prevlogindex = 10, lastIndex = 0
4 begin to append 1
prevlogindex = 10, lastIndex = 0
4 begin to append 2
prevlogindex = 10, lastIndex = 0
4 begin to append 3
prevlogindex = 10, lastIndex = 0
测试：1节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 10
测试：2节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 10
updateIndex = 10, lastIndex = 0
updateIndex = 10, lastIndex = 0
1更新log，长度15
2更新log，长度15
2 return success! num is 1
nextIndex = 11, lastIndex = 0, len = 15
1 return success! num is 2
nextIndex = 11, lastIndex = 0, len = 15
[1][1][0] apply index = 6, commit is 10
1 max is 15
1:{6}unlock now
[2][1][0] apply index = 6, commit is 10
1:{6}unlock end
2:{6}unlock now
1:{6}lock now
2 max is 15
1:{6}lock end
4:commitIndex -> 15
[1][1][0] apply index = 7, commit is 10
1:{7}unlock now
[4][1][0] apply index = 11, commit is 15
4:{11}unlock now
2023/09/23 03:26:38 CommandApply!!!!!!!!!
4:{11}unlock end
4:{11}lock now
[1]Get key:4, 
2:{6}unlock end
2:{6}lock now
2023/09/23 03:26:38 CommandApply!!!!!!!!!
2:{6}lock end
[4]append key:0, x 0 0 y
[2][1][0] apply index = 7, commit is 10
2023/09/23 03:26:38 CommandApply!!!!!!!!!
2:{7}unlock now
4:{11}lock end
[4][1][0] apply index = 12, commit is 15
[2]Get key:4, 
4:{12}unlock now
1:{7}unlock end
1:{7}lock now
1:{7}lock end
[1][1][0] apply index = 8, commit is 10
1:{8}unlock now
1:{8}unlock end
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 0 x 0 0 y 4346951758130697083 3} 11 1 false [] 0 0}处理完成,通知index = [11]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Get key:2, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Get key:0, 
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 0 x 0 0 y 4346951758130697083 3} 11 1 false [] 0 0}处理完成,通知完成index = [11]的channel
2:{7}unlock end
4:{12}unlock end
2:{7}lock now
2:{7}lock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2][1][0] apply index = 8, commit is 10
[4]append key:2, x 2 0 y
2:{8}unlock now
2:{8}unlock end
4:{12}lock now
4:{12}lock end
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 2 x 2 0 y 3167499095888228886 3} 12 1 false [] 0 0}处理完成,通知index = [12]的channel
[4][1][0] apply index = 13, commit is 15
4:{13}unlock now
4:{13}unlock end
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[11],replyMsg: {x 0 0 y 1 true}
kvserver[4]: pre删除通道index: 11
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 2 x 2 0 y 3167499095888228886 3} 12 1 false [] 0 0}处理完成,通知完成index = [12]的channel
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[12],replyMsg: {x 2 0 y 1 true}
4:{13}lock now
kvserver[4]: pre删除通道index: 12
4:{13}lock end
kvserver[4]: begin删除通道index: 12
[4][1][0] apply index = 14, commit is 15
4:{14}unlock now
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 12
4:{14}unlock end
1:{8}lock now
1:{8}lock end
[1][1][0] apply index = 9, commit is 10
1:{9}unlock now
1:{9}unlock end
1:{9}lock now
1:{9}lock end
[1][1][0] apply index = 10, commit is 10
1:{10}unlock now
1:{10}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Get key:2, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Get key:0, 
2:{8}lock now
2:{8}lock end
[2][1][0] apply index = 9, commit is 10
2:{9}unlock now
2:{9}unlock end
2:{9}lock now
2:{9}lock end
[2][1][0] apply index = 10, commit is 10
2:{10}unlock now
2:{10}unlock end
kvserver[4]: begin删除通道index: 11
2023/09/23 03:26:38 2: client new append x 2 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Get key:3, 
1:{10}lock now
1:{10}lock end
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 11
1:rf.commitIndex = 10, rf.lastApplied = 10
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Get key:3, 
2:{10}lock now
2023/09/23 03:26:38 CommandApply!!!!!!!!!
2:{10}lock end
2:rf.commitIndex = 10, rf.lastApplied = 10
[4]append key:3, x 3 0 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 3 x 3 0 y 1065774344220344240 3} 13 1 false [] 0 0}处理完成,通知index = [13]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 3 x 3 0 y 1065774344220344240 3} 13 1 false [] 0 0}处理完成,通知完成index = [13]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 1 x 1 1 y 672816327287623235 3} 14 1 false [] 0 0}处理完成,通知index = [14]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 1 x 1 1 y 672816327287623235 3} 14 1 false [] 0 0}处理完成,通知完成index = [14]的channel
2023/09/23 03:26:38 0: client new append x 0 1 y
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[13],replyMsg: {x 3 0 y 1 true}
kvserver[4]: pre删除通道index: 13
kvserver[4]: begin删除通道index: 13
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 13
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[14],replyMsg: {x 1 0 yx 1 1 y 1 true}
kvserver[4]: pre删除通道index: 14
kvserver[4]: begin删除通道index: 14
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 14
4:{14}lock now
4:{14}lock end
[4][1][0] apply index = 15, commit is 15
4:{15}unlock now
4:{15}unlock end
4:{15}lock now
4:{15}lock end
4:rf.commitIndex = 15, rf.lastApplied = 15
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 4 x 4 0 y 1867579256866231016 3} 15 1 false [] 0 0}处理完成,通知index = [15]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 4 x 4 0 y 1867579256866231016 3} 15 1 false [] 0 0}处理完成,通知完成index = [15]的channel
2023/09/23 03:26:38 1: client new get 1
2023/09/23 03:26:38 3: client new append x 3 1 y
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[15],replyMsg: {x 4 0 y 1 true}
kvserver[4]: pre删除通道index: 15
kvserver[4]: begin删除通道index: 15
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 15
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 1 y) 3167499095888228886 4},term is 1,len is 16
---------------
2023/09/23 03:26:38 4: client new get 4
---------------
4接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 4},term is 1,len is 17
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 1 y) 1065774344220344240 4},term is 1,len is 18
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 1 y) 4346951758130697083 4},term is 1,len is 19
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 4},term is 1,len is 20
---------------
测试：0节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 10
updateIndex = 10, lastIndex = 0
0更新log，长度15
[0][1][0] apply index = 6, commit is 10
0:{6}unlock now
0:{6}unlock end
0:{6}lock now
0:{6}lock end
[0][1][0] apply index = 7, commit is 10
0:{7}unlock now
0:{7}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Get key:4, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Get key:2, 
0:{7}lock now
0:{7}lock end
[0][1][0] apply index = 8, commit is 10
0:{8}unlock now
0:{8}unlock end
0:{8}lock now
0:{8}lock end
[0][1][0] apply index = 9, commit is 10
0:{9}unlock now
0:{9}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Get key:0, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 y
0:{9}lock now
0:{9}lock end
[0][1][0] apply index = 10, commit is 10
0:{10}unlock now
0:{10}unlock end
0:{10}lock now
0:{10}lock end
0:rf.commitIndex = 10, rf.lastApplied = 10
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Get key:3, 
0 return success! num is 1
nextIndex = 11, lastIndex = 0, len = 20
测试：3节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 10
updateIndex = 10, lastIndex = 0
3更新log，长度15
3 return success! num is 2
[3][1][0] apply index = 6, commit is 10
3:{6}unlock now
3:{6}unlock end
3:{6}lock now
3:{6}lock end
[3][1][0] apply index = 7, commit is 10
3:{7}unlock now
3:{7}unlock end
nextIndex = 11, lastIndex = 0, len = 20
1 max is 15
2 max is 15
4:commitIndex -> 15
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Get key:4, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Get key:2, 
4:rf.commitIndex = 15, rf.lastApplied = 15
3:{7}lock now
3:{7}lock end
[3][1][0] apply index = 8, commit is 10
3:{8}unlock now
3:{8}unlock end
3:{8}lock now
3:{8}lock end
[3][1][0] apply index = 9, commit is 10
3:{9}unlock now
3:{9}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Get key:0, 
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 y
3:{9}lock now
3:{9}lock end
[3][1][0] apply index = 10, commit is 10
3:{10}unlock now
3:{10}unlock end
3:{10}lock now
3:{10}lock end
3:rf.commitIndex = 10, rf.lastApplied = 10
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Get key:3, 
4 begin to append 0
prevlogindex = 15, lastIndex = 0
4 begin to append 1
prevlogindex = 15, lastIndex = 0
4 begin to append 2
prevlogindex = 15, lastIndex = 0
4 begin to append 3
prevlogindex = 15, lastIndex = 0
测试：0节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 15
updateIndex = 15, lastIndex = 0
0更新log，长度20
测试：2节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 15
updateIndex = 15, lastIndex = 0
[0][1][0] apply index = 11, commit is 15
0:{11}unlock now
0:{11}unlock end
0:{11}lock now
2023/09/23 03:26:38 CommandApply!!!!!!!!!
0:{11}lock end
[0][1][0] apply index = 12, commit is 15
0:{12}unlock now
0:{12}unlock end
测试：3节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 15
updateIndex = 15, lastIndex = 0
2更新log，长度20
测试：1节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 15
updateIndex = 15, lastIndex = 0
[2][1][0] apply index = 11, commit is 15
2:{11}unlock now
2:{11}unlock end
2:{11}lock now
2:{11}lock end
[2][1][0] apply index = 12, commit is 15
2:{12}unlock now
2:{12}unlock end
1更新log，长度20
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1][1][0] apply index = 11, commit is 15
1:{11}unlock now
1:{11}unlock end
1:{11}lock now
1:{11}lock end
[1][1][0] apply index = 12, commit is 15
1:{12}unlock now
1:{12}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 y
0 return success! num is 1
[2]append key:0, x 0 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 y
[2]append key:2, x 2 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 y
nextIndex = 16, lastIndex = 0, len = 20
2:{12}lock now
2:{12}lock end
[2][1][0] apply index = 13, commit is 15
2:{13}unlock now
2:{13}unlock end
2:{13}lock now
2:{13}lock end
[2][1][0] apply index = 14, commit is 15
2023/09/23 03:26:38 CommandApply!!!!!!!!!
2:{14}unlock now
2:{14}unlock end
0:{12}lock now
0:{12}lock end
2 return success! num is 2
1:{12}lock now
1:{12}lock end
[1][1][0] apply index = 13, commit is 15
1:{13}unlock now
1:{13}unlock end
1:{13}lock now
1:{13}lock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1][1][0] apply index = 14, commit is 15
1:{14}unlock now
1:{14}unlock end
[0][1][0] apply index = 13, commit is 15
0:{13}unlock now
0:{13}unlock end
0:{13}lock now
0:{13}lock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0][1][0] apply index = 14, commit is 15
0:{14}unlock now
0:{14}unlock end
3更新log，长度20
[3][1][0] apply index = 11, commit is 15
3:{11}unlock now
3:{11}unlock end
3:{11}lock now
2023/09/23 03:26:38 CommandApply!!!!!!!!!
3:{11}lock end
[3][1][0] apply index = 12, commit is 15
3:{12}unlock now
3:{12}unlock end
[2]append key:3, x 3 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
2:{14}lock now
2:{14}lock end
[2][1][0] apply index = 15, commit is 15
nextIndex = 16, lastIndex = 0, len = 20
[1]append key:3, x 3 0 y
1 max is 20
2 max is 20
1:{14}lock now
4:commitIndex -> 20
1:{14}lock end
[1][1][0] apply index = 15, commit is 15
[3]append key:0, x 0 0 y
1:{15}unlock now
1:{15}unlock end
1 return success! num is 1
3:{12}lock now
nextIndex = 16, lastIndex = 0, len = 20
2:{15}unlock now
2:{15}unlock end
3 return success! num is 2
3:{12}lock end
nextIndex = 16, lastIndex = 0, len = 20
[3][1][0] apply index = 13, commit is 15
1 max is 20
3:{13}unlock now
2 max is 20
3:{13}unlock end
4:commitIndex -> 20
[0]append key:3, x 3 0 y
[4][1][0] apply index = 16, commit is 20
4:{16}unlock now
0:{14}lock now
0:{14}lock end
[0][1][0] apply index = 15, commit is 15
0:{15}unlock now
0:{15}unlock end
4:{16}unlock end
4:{16}lock now
4:{16}lock end
[4][1][0] apply index = 17, commit is 20
4:{17}unlock now
4:{17}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 y
[2]append key:4, x 4 0 y
2:{15}lock now
2:{15}lock end
2:rf.commitIndex = 15, rf.lastApplied = 15
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 2 x 2 1 y 3167499095888228886 4} 16 1 false [] 0 0}处理完成,通知index = [16]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 2 x 2 1 y 3167499095888228886 4} 16 1 false [] 0 0}处理完成,通知完成index = [16]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 1  672816327287623235 4} 17 1 false [] 0 0}处理完成,通知index = [17]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 y
1:{15}lock now
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[17],replyMsg.value: x 1 0 yx 1 1 y
1:{15}lock end
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 1  672816327287623235 4} 17 1 false [] 0 0}处理完成,通知完成index = [17]的channel
1:rf.commitIndex = 15, rf.lastApplied = 15
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[16],replyMsg: {x 2 0 yx 2 1 y 1 true}
0:{15}lock now
0:{15}lock end
0:rf.commitIndex = 15, rf.lastApplied = 15
2023/09/23 03:26:38 CommandApply!!!!!!!!!
3:{13}lock now
3:{13}lock end
[3][1][0] apply index = 14, commit is 15
3:{14}unlock now
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 y
reply value is x 1 0 yx 1 1 y
kvserver[4]: pre删除通道index: 17
kvserver[4]: begin删除通道index: 17
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 17
4:{17}lock now
4:{17}lock end
[4][1][0] apply index = 18, commit is 20
4:{18}unlock now
4:{18}unlock end
4:{18}lock now
4:{18}lock end
[4][1][0] apply index = 19, commit is 20
4:{19}unlock now
4:{19}unlock end
[0]append key:4, x 4 0 y
3:{14}unlock end
3:{14}lock now
3:{14}lock end
[3][1][0] apply index = 15, commit is 15
3:{15}unlock now
3:{15}unlock end
OK:i num is 3, key is 1, return x 1 0 yx 1 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:38 1: client new get 1
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 y
kvserver[4]: pre删除通道index: 16
kvserver[4]: begin删除通道index: 16
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 16
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 3 x 3 1 y 1065774344220344240 4} 18 1 false [] 0 0}处理完成,通知index = [18]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 3 x 3 1 y 1065774344220344240 4} 18 1 false [] 0 0}处理完成,通知完成index = [18]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 0 x 0 1 y 4346951758130697083 4} 19 1 false [] 0 0}处理完成,通知index = [19]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 0 x 0 1 y 4346951758130697083 4} 19 1 false [] 0 0}处理完成,通知完成index = [19]的channel
2023/09/23 03:26:38 2: client new get 2
3:{15}lock now
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[18],replyMsg: {x 3 0 yx 3 1 y 1 true}
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[19],replyMsg: {x 0 0 yx 0 1 y 1 true}
kvserver[4]: pre删除通道index: 19
kvserver[4]: begin删除通道index: 19
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 19
4:{19}lock now
4:{19}lock end
kvserver[4]: pre删除通道index: 18
kvserver[4]: begin删除通道index: 18
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 18
[4][1][0] apply index = 20, commit is 20
4:{20}unlock now
4:{20}unlock end
3:{15}lock end
3:rf.commitIndex = 15, rf.lastApplied = 15
4:{20}lock now
4:{20}lock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 y
4:rf.commitIndex = 20, rf.lastApplied = 20
2023/09/23 03:26:38 3: client new append x 3 2 y
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 5},term is 1,len is 21
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 5},term is 1,len is 22
---------------
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 4  1867579256866231016 4} 20 1 false [] 0 0}处理完成,通知index = [20]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 4  1867579256866231016 4} 20 1 false [] 0 0}处理完成,通知完成index = [20]的channel
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[20],replyMsg.value: x 4 0 y
reply value is x 4 0 y
kvserver[4]: pre删除通道index: 20
kvserver[4]: begin删除通道index: 20
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 20
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 2 y) 1065774344220344240 5},term is 1,len is 23
---------------
OK:i num is 3, key is 4, return x 4 0 y
2023/09/23 03:26:38 4: client new get 4
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 5},term is 1,len is 24
---------------
2023/09/23 03:26:38 0: client new append x 0 2 y
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 2 y) 4346951758130697083 5},term is 1,len is 25
---------------
4 begin to append 0
prevlogindex = 20, lastIndex = 0
4 begin to append 1
prevlogindex = 20, lastIndex = 0
4 begin to append 2
prevlogindex = 20, lastIndex = 0
4 begin to append 3
prevlogindex = 20, lastIndex = 0
测试：2节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 20
updateIndex = 20, lastIndex = 0
2更新log，长度25
测试：0节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 20
updateIndex = 20, lastIndex = 0
0更新log，长度25
0 return success! num is 1
nextIndex = 21, lastIndex = 0, len = 25
测试：1节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 20
updateIndex = 20, lastIndex = 0
1更新log，长度25
[1][1][0] apply index = 16, commit is 20
1:{16}unlock now
1:{16}unlock end
1:{16}lock now
1:{16}lock end
[1][1][0] apply index = 17, commit is 20
1:{17}unlock now
1:{17}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 y
1:{17}lock now
1:{17}lock end
[1][1][0] apply index = 18, commit is 20
1:{18}unlock now
1:{18}unlock end
1:{18}lock now
1:{18}lock end
[1][1][0] apply index = 19, commit is 20
1:{19}unlock now
1:{19}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 y
测试：3节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 20
updateIndex = 20, lastIndex = 0
3更新log，长度25
3 return success! num is 2
nextIndex = 21, lastIndex = 0, len = 25
1 max is 25
2 max is 25
4:commitIndex -> 25
[2][1][0] apply index = 16, commit is 20
2:{16}unlock now
2:{16}unlock end
2:{16}lock now
2:{16}lock end
[2][1][0] apply index = 17, commit is 20
2:{17}unlock now
2:{17}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 y
2:{17}lock now
2:{17}lock end
[2][1][0] apply index = 18, commit is 20
2:{18}unlock now
2:{18}unlock end
2:{18}lock now
2:{18}lock end
[2][1][0] apply index = 19, commit is 20
2:{19}unlock now
2:{19}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 y
2 return success! num is 1
nextIndex = 21, lastIndex = 0, len = 25
[0][1][0] apply index = 16, commit is 20
0:{16}unlock now
0:{16}unlock end
0:{16}lock now
0:{16}lock end
[0][1][0] apply index = 17, commit is 20
0:{17}unlock now
0:{17}unlock end
1:{19}lock now
1:{19}lock end
[1][1][0] apply index = 20, commit is 20
1:{20}unlock now
1:{20}unlock end
1:{20}lock now
1:{20}lock end
1:rf.commitIndex = 20, rf.lastApplied = 20
[3][1][0] apply index = 16, commit is 20
3:{16}unlock now
3:{16}unlock end
3:{16}lock now
3:{16}lock end
[3][1][0] apply index = 17, commit is 20
3:{17}unlock now
3:{17}unlock end
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 y
3:{17}lock now
3:{17}lock end
[3][1][0] apply index = 18, commit is 20
3:{18}unlock now
3:{18}unlock end
3:{18}lock now
3:{18}lock end
[3][1][0] apply index = 19, commit is 20
3:{19}unlock now
3:{19}unlock end
[4][1][0] apply index = 21, commit is 25
4:{21}unlock now
4:{21}unlock end
4:{21}lock now
4:{21}lock end
[4][1][0] apply index = 22, commit is 25
4:{22}unlock now
4:{22}unlock end
2:{19}lock now
2:{19}lock end
[2][1][0] apply index = 20, commit is 20
2:{20}unlock now
2:{20}unlock end
2:{20}lock now
2:{20}lock end
2:rf.commitIndex = 20, rf.lastApplied = 20
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 y
1 return success! num is 2
nextIndex = 21, lastIndex = 0, len = 25
1 max is 25
2 max is 25
4:commitIndex -> 25
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 y
3:{19}lock now
3:{19}lock end
[3][1][0] apply index = 20, commit is 20
3:{20}unlock now
3:{20}unlock end
3:{20}lock now
3:{20}lock end
3:rf.commitIndex = 20, rf.lastApplied = 20
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 2  3167499095888228886 5} 21 1 false [] 0 0}处理完成,通知index = [21]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 2  3167499095888228886 5} 21 1 false [] 0 0}处理完成,通知完成index = [21]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 1  672816327287623235 5} 22 1 false [] 0 0}处理完成,通知index = [22]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 1  672816327287623235 5} 22 1 false [] 0 0}处理完成,通知完成index = [22]的channel
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[22],replyMsg.value: x 1 0 yx 1 1 y
reply value is x 1 0 yx 1 1 y
kvserver[4]: pre删除通道index: 22
kvserver[4]: begin删除通道index: 22
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 22
0:{17}lock now
0:{17}lock end
[0][1][0] apply index = 18, commit is 20
0:{18}unlock now
0:{18}unlock end
0:{18}lock now
0:{18}lock end
[0][1][0] apply index = 19, commit is 20
0:{19}unlock now
0:{19}unlock end
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[21],replyMsg.value: x 2 0 yx 2 1 y
reply value is x 2 0 yx 2 1 y
kvserver[4]: pre删除通道index: 21
kvserver[4]: begin删除通道index: 21
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 21
4:{22}lock now
4:{22}lock end
[4][1][0] apply index = 23, commit is 25
4:{23}unlock now
4:{23}unlock end
4:{23}lock now
4:{23}lock end
[4][1][0] apply index = 24, commit is 25
4:{24}unlock now
4:{24}unlock end
OK:i num is 3, key is 1, return x 1 0 yx 1 1 y
2023/09/23 03:26:38 1: client new get 1
---------------
4接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 6},term is 1,len is 26
---------------
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 y
0:{19}lock now
0:{19}lock end
[0][1][0] apply index = 20, commit is 20
0:{20}unlock now
0:{20}unlock end
0:{20}lock now
0:{20}lock end
0:rf.commitIndex = 20, rf.lastApplied = 20
OK:i num is 4, key is 2, return x 2 0 yx 2 1 y
2023/09/23 03:26:38 2: client new append x 2 2 y
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 3 x 3 2 y 1065774344220344240 5} 23 1 false [] 0 0}处理完成,通知index = [23]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 3 x 3 2 y 1065774344220344240 5} 23 1 false [] 0 0}处理完成,通知完成index = [23]的channel
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 4  1867579256866231016 5} 24 1 false [] 0 0}处理完成,通知index = [24]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Get 4  1867579256866231016 5} 24 1 false [] 0 0}处理完成,通知完成index = [24]的channel
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[23],replyMsg: {x 3 0 yx 3 1 yx 3 2 y 1 true}
kvserver[4]: pre删除通道index: 23
kvserver[4]: begin删除通道index: 23
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 23
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 y
4:{24}lock now
4:{24}lock end
[4][1][0] apply index = 25, commit is 25
4:{25}unlock now
4:{25}unlock end
4:{25}lock now
4:{25}lock end
4:rf.commitIndex = 25, rf.lastApplied = 25
2023/09/23 03:26:38 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 0 x 0 2 y 4346951758130697083 5} 25 1 false [] 0 0}处理完成,通知index = [25]的channel
2023/09/23 03:26:38 kvserver[4]: applyMsg: {true {Append 0 x 0 2 y 4346951758130697083 5} 25 1 false [] 0 0}处理完成,通知完成index = [25]的channel
2023/09/23 03:26:38 kvserver[4]: PUTAPPEND获取到通知结果,index=[25],replyMsg: {x 0 0 yx 0 1 yx 0 2 y 1 true}
kvserver[4]: pre删除通道index: 25
kvserver[4]: begin删除通道index: 25
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 25
2023/09/23 03:26:38 kvserver[4]: GET获取到通知结果,index=[24],replyMsg.value: x 4 0 y
reply value is x 4 0 y
kvserver[4]: pre删除通道index: 24
kvserver[4]: begin删除通道index: 24
2023/09/23 03:26:38 kvserver[4]: 成功删除通道index: 24
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 2 y) 3167499095888228886 6},term is 1,len is 27
---------------
2023/09/23 03:26:38 0: client new append x 0 3 y
OK:i num is 3, key is 4, return x 4 0 y
2023/09/23 03:26:38 4: client new append x 4 1 y
2023/09/23 03:26:38 3: client new append x 3 3 y
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 3 y) 4346951758130697083 6},term is 1,len is 28
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 1 y) 1867579256866231016 6},term is 1,len is 29
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 3 y) 1065774344220344240 6},term is 1,len is 30
---------------
4 begin to append 0
prevlogindex = 25, lastIndex = 0
4 begin to append 1
prevlogindex = 25, lastIndex = 0
4 begin to append 2
prevlogindex = 25, lastIndex = 0
4 begin to append 3
prevlogindex = 25, lastIndex = 0
测试：3节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 25
updateIndex = 25, lastIndex = 0
测试：0节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 25
updateIndex = 25, lastIndex = 0
3更新log，长度30
0更新log，长度30
[3][1][0] apply index = 21, commit is 25
3:{21}unlock now
3:{21}unlock end
3:{21}lock now
3:{21}lock end
[3][1][0] apply index = 22, commit is 25
3:{22}unlock now
3:{22}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 y
0 return success! num is 1
nextIndex = 26, lastIndex = 0, len = 30
3 return success! num is 2
nextIndex = 26, lastIndex = 0, len = 30
1 max is 30
2 max is 30
4:commitIndex -> 30
3:{22}lock now
3:{22}lock end
[3][1][0] apply index = 23, commit is 25
3:{23}unlock now
3:{23}unlock end
3:{23}lock now
3:{23}lock end
[3][1][0] apply index = 24, commit is 25
3:{24}unlock now
3:{24}unlock end
[4][1][0] apply index = 26, commit is 30
4:{26}unlock now
4:{26}unlock end
4:{26}lock now
4:{26}lock end
测试：1节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 25
[4][1][0] apply index = 27, commit is 30
4:{27}unlock now
4:{27}unlock end
updateIndex = 25, lastIndex = 0
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Get 1  672816327287623235 6} 26 1 false [] 0 0}处理完成,通知index = [26]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Get 1  672816327287623235 6} 26 1 false [] 0 0}处理完成,通知完成index = [26]的channel
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 2 x 2 2 y 3167499095888228886 6} 27 1 false [] 0 0}处理完成,通知index = [27]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 2 x 2 2 y 3167499095888228886 6} 27 1 false [] 0 0}处理完成,通知完成index = [27]的channel
4:{27}lock now
4:{27}lock end
[4][1][0] apply index = 28, commit is 30
4:{28}unlock now
4:{28}unlock end
4:{28}lock now
4:{28}lock end
[4][1][0] apply index = 29, commit is 30
4:{29}unlock now
4:{29}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 0 x 0 3 y 4346951758130697083 6} 28 1 false [] 0 0}处理完成,通知index = [28]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 0 x 0 3 y 4346951758130697083 6} 28 1 false [] 0 0}处理完成,通知完成index = [28]的channel
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 4 x 4 1 y 1867579256866231016 6} 29 1 false [] 0 0}处理完成,通知index = [29]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 4 x 4 1 y 1867579256866231016 6} 29 1 false [] 0 0}处理完成,通知完成index = [29]的channel
1更新log，长度30
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND获取到通知结果,index=[29],replyMsg: {x 4 0 yx 4 1 y 1 true}
kvserver[4]: pre删除通道index: 29
kvserver[4]: begin删除通道index: 29
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 29
[0][1][0] apply index = 21, commit is 25
3:{24}lock now
0:{21}unlock now
3:{24}lock end
0:{21}unlock end
[3][1][0] apply index = 25, commit is 25
3:{25}unlock now
2023/09/23 03:26:39 CommandApply!!!!!!!!!
3:{25}unlock end
3:{25}lock now
[0]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 y
[1][1][0] apply index = 21, commit is 25
1:{21}unlock now
1:{21}unlock end
2023/09/23 03:26:39 kvserver[4]: GET获取到通知结果,index=[26],replyMsg.value: x 1 0 yx 1 1 y
reply value is x 1 0 yx 1 1 y
kvserver[4]: pre删除通道index: 26
kvserver[4]: begin删除通道index: 26
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 26
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND获取到通知结果,index=[27],replyMsg: {x 2 0 yx 2 1 yx 2 2 y 1 true}
kvserver[4]: pre删除通道index: 27
kvserver[4]: begin删除通道index: 27
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 27
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND获取到通知结果,index=[28],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 y 1 true}
kvserver[4]: pre删除通道index: 28
kvserver[4]: begin删除通道index: 28
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 28
4:{29}lock now
4:{29}lock end
[4][1][0] apply index = 30, commit is 30
4:{30}unlock now
4:{30}unlock end
4:{30}lock now
4:{30}lock end
4:rf.commitIndex = 30, rf.lastApplied = 30
2023/09/23 03:26:39 4: client new append x 4 2 y
0:{21}lock now
0:{21}lock end
[0][1][0] apply index = 22, commit is 25
0:{22}unlock now
0:{22}unlock end
0:{22}lock now
0:{22}lock end
[0][1][0] apply index = 23, commit is 25
0:{23}unlock now
0:{23}unlock end
1:{21}lock now
1:{21}lock end
[1][1][0] apply index = 22, commit is 25
1:{22}unlock now
1:{22}unlock end
OK:i num is 3, key is 1, return x 1 0 yx 1 1 y
2023/09/23 03:26:39 1: client new get 1
2023/09/23 03:26:39 2: client new get 2
2023/09/23 03:26:39 0: client new append x 0 4 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 3 x 3 3 y 1065774344220344240 6} 30 1 false [] 0 0}处理完成,通知index = [30]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 3 x 3 3 y 1065774344220344240 6} 30 1 false [] 0 0}处理完成,通知完成index = [30]的channel
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND获取到通知结果,index=[30],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 y 1 true}
kvserver[4]: pre删除通道index: 30
kvserver[4]: begin删除通道index: 30
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 30
2023/09/23 03:26:39 3: client new append x 3 4 y
---------------
4接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 7},term is 1,len is 31
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 4 y) 4346951758130697083 7},term is 1,len is 32
---------------
0:{23}lock now
0:{23}lock end
[0][1][0] apply index = 24, commit is 25
0:{24}unlock now
0:{24}unlock end
0:{24}lock now
0:{24}lock end
[0][1][0] apply index = 25, commit is 25
0:{25}unlock now
0:{25}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 y
0:{25}lock now
0:{25}lock end
0:rf.commitIndex = 25, rf.lastApplied = 25
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 4 y) 1065774344220344240 7},term is 1,len is 33
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 2 y) 1867579256866231016 7},term is 1,len is 34
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 7},term is 1,len is 35
---------------
3:{25}lock end
3:rf.commitIndex = 25, rf.lastApplied = 25
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 y
1:{22}lock now
1:{22}lock end
[1][1][0] apply index = 23, commit is 25
1:{23}unlock now
1:{23}unlock end
1:{23}lock now
1:{23}lock end
[1][1][0] apply index = 24, commit is 25
1:{24}unlock now
1:{24}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 y
1:{24}lock now
1:{24}lock end
[1][1][0] apply index = 25, commit is 25
1:{25}unlock now
1:{25}unlock end
1:{25}lock now
1:{25}lock end
1:rf.commitIndex = 25, rf.lastApplied = 25
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 y
1 return success! num is 1
nextIndex = 26, lastIndex = 0, len = 35
测试：2节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 25
updateIndex = 25, lastIndex = 0
2更新log，长度30
[2][1][0] apply index = 21, commit is 25
2:{21}unlock now
2:{21}unlock end
2:{21}lock now
2:{21}lock end
[2][1][0] apply index = 22, commit is 25
2:{22}unlock now
2:{22}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 y
2:{22}lock now
2:{22}lock end
[2][1][0] apply index = 23, commit is 25
2:{23}unlock now
2:{23}unlock end
2:{23}lock now
2:{23}lock end
[2][1][0] apply index = 24, commit is 25
2:{24}unlock now
2:{24}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 y
2:{24}lock now
2:{24}lock end
[2][1][0] apply index = 25, commit is 25
2:{25}unlock now
2:{25}unlock end
2:{25}lock now
2:{25}lock end
2:rf.commitIndex = 25, rf.lastApplied = 25
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 y
2 return success! num is 2
nextIndex = 26, lastIndex = 0, len = 35
1 max is 30
2 max is 30
4:commitIndex -> 30
4:rf.commitIndex = 30, rf.lastApplied = 30
4 begin to append 0
prevlogindex = 30, lastIndex = 0
4 begin to append 1
prevlogindex = 30, lastIndex = 0
4 begin to append 2
prevlogindex = 30, lastIndex = 0
4 begin to append 3
prevlogindex = 30, lastIndex = 0
测试：3节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 30
updateIndex = 30, lastIndex = 0
3更新log，长度35
3 return success! num is 1
nextIndex = 31, lastIndex = 0, len = 35
测试：2节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 30
updateIndex = 30, lastIndex = 0
2更新log，长度35
[3][1][0] apply index = 26, commit is 30
3:{26}unlock now
3:{26}unlock end
3:{26}lock now
3:{26}lock end
[3][1][0] apply index = 27, commit is 30
3:{27}unlock now
3:{27}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 y
3:{27}lock now
3:{27}lock end
[3][1][0] apply index = 28, commit is 30
3:{28}unlock now
3:{28}unlock end
3:{28}lock now
3:{28}lock end
[3][1][0] apply index = 29, commit is 30
3:{29}unlock now
3:{29}unlock end
2 return success! num is 2
nextIndex = 31, lastIndex = 0, len = 35
1 max is 35
2 max is 35
4:commitIndex -> 35
[4][1][0] apply index = 31, commit is 35
4:{31}unlock now
4:{31}unlock end
4:{31}lock now
4:{31}lock end
[4][1][0] apply index = 32, commit is 35
4:{32}unlock now
4:{32}unlock end
[2][1][0] apply index = 26, commit is 30
2:{26}unlock now
2:{26}unlock end
2:{26}lock now
2:{26}lock end
[2][1][0] apply index = 27, commit is 30
2:{27}unlock now
2:{27}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 y
测试：0节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 30
updateIndex = 30, lastIndex = 0
0更新log，长度35
测试：1节点term为1，leader发送term为1, 接收5个, PrevLogIndex is 30
updateIndex = 30, lastIndex = 0
1更新log，长度35
[1][1][0] apply index = 26, commit is 30
1:{26}unlock now
1:{26}unlock end
1:{26}lock now
1:{26}lock end
[1][1][0] apply index = 27, commit is 30
1:{27}unlock now
1:{27}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 y
1:{27}lock now
1:{27}lock end
[1][1][0] apply index = 28, commit is 30
1:{28}unlock now
1:{28}unlock end
1:{28}lock now
1:{28}lock end
[1][1][0] apply index = 29, commit is 30
1:{29}unlock now
1:{29}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 y
1:{29}lock now
1:{29}lock end
[1][1][0] apply index = 30, commit is 30
1:{30}unlock now
1:{30}unlock end
1:{30}lock now
1:{30}lock end
1:rf.commitIndex = 30, rf.lastApplied = 30
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Get 1  672816327287623235 7} 31 1 false [] 0 0}处理完成,通知index = [31]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Get 1  672816327287623235 7} 31 1 false [] 0 0}处理完成,通知完成index = [31]的channel
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 0 x 0 4 y 4346951758130697083 7} 32 1 false [] 0 0}处理完成,通知index = [32]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 0 x 0 4 y 4346951758130697083 7} 32 1 false [] 0 0}处理完成,通知完成index = [32]的channel
4:{32}lock now
4:{32}lock end
[4][1][0] apply index = 33, commit is 35
4:{33}unlock now
4:{33}unlock end
4:{33}lock now
4:{33}lock end
[4][1][0] apply index = 34, commit is 35
4:{34}unlock now
4:{34}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 3 x 3 4 y 1065774344220344240 7} 33 1 false [] 0 0}处理完成,通知index = [33]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 3 x 3 4 y 1065774344220344240 7} 33 1 false [] 0 0}处理完成,通知完成index = [33]的channel
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 4 x 4 2 y 1867579256866231016 7} 34 1 false [] 0 0}处理完成,通知index = [34]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Append 4 x 4 2 y 1867579256866231016 7} 34 1 false [] 0 0}处理完成,通知完成index = [34]的channel
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND获取到通知结果,index=[34],replyMsg: {x 4 0 yx 4 1 yx 4 2 y 1 true}
kvserver[4]: pre删除通道index: 34
kvserver[4]: begin删除通道index: 34
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 34
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 y
2:{27}lock now
2:{27}lock end
[2][1][0] apply index = 28, commit is 30
2:{28}unlock now
2:{28}unlock end
2:{28}lock now
2:{28}lock end
[2][1][0] apply index = 29, commit is 30
2:{29}unlock now
2:{29}unlock end
3:{29}lock now
3:{29}lock end
[3][1][0] apply index = 30, commit is 30
3:{30}unlock now
3:{30}unlock end
3:{30}lock now
3:{30}lock end
3:rf.commitIndex = 30, rf.lastApplied = 30
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
[0][1][0] apply index = 26, commit is 30
0:{26}unlock now
0:{26}unlock end
0:{26}lock now
0:{26}lock end
[0][1][0] apply index = 27, commit is 30
0:{27}unlock now
0:{27}unlock end
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 y
0 return success! num is 1
nextIndex = 31, lastIndex = 0, len = 35
1 return success! num is 2
nextIndex = 31, lastIndex = 0, len = 35
1 max is 35
2 max is 35
4:commitIndex -> 35
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:39 kvserver[4]: GET获取到通知结果,index=[31],replyMsg.value: x 1 0 yx 1 1 y
reply value is x 1 0 yx 1 1 y
kvserver[4]: pre删除通道index: 31
kvserver[4]: begin删除通道index: 31
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 31
OK:i num is 3, key is 1, return x 1 0 yx 1 1 y
2023/09/23 03:26:39 1: client new append x 1 2 y
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 2 y) 672816327287623235 8},term is 1,len is 36
---------------
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND获取到通知结果,index=[32],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y 1 true}
kvserver[4]: pre删除通道index: 32
kvserver[4]: begin删除通道index: 32
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 32
2023/09/23 03:26:39 0: client new get 0
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND获取到通知结果,index=[33],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y 1 true}
kvserver[4]: pre删除通道index: 33
kvserver[4]: begin删除通道index: 33
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 33
4:{34}lock now
4:{34}lock end
[4][1][0] apply index = 35, commit is 35
4:{35}unlock now
4:{35}unlock end
4:{35}lock now
4:{35}lock end
4:rf.commitIndex = 35, rf.lastApplied = 35
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Get 2  3167499095888228886 7} 35 1 false [] 0 0}处理完成,通知index = [35]的channel
2023/09/23 03:26:39 kvserver[4]: applyMsg: {true {Get 2  3167499095888228886 7} 35 1 false [] 0 0}处理完成,通知完成index = [35]的channel
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 y
2:{29}lock now
2:{29}lock end
[2][1][0] apply index = 30, commit is 30
2:{30}unlock now
2:{30}unlock end
2:{30}lock now
2:{30}lock end
2:rf.commitIndex = 30, rf.lastApplied = 30
2023/09/23 03:26:39 CommandApply!!!!!!!!!
2023/09/23 03:26:39 3: client new get 3
0:{27}lock now
0:{27}lock end
[0][1][0] apply index = 28, commit is 30
0:{28}unlock now
0:{28}unlock end
0:{28}lock now
0:{28}lock end
[0][1][0] apply index = 29, commit is 30
0:{29}unlock now
0:{29}unlock end
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:39 4: client new append x 4 3 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 y
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 8},term is 1,len is 37
---------------
0:{29}lock now
0:{29}lock end
[0][1][0] apply index = 30, commit is 30
0:{30}unlock now
0:{30}unlock end
0:{30}lock now
0:{30}lock end
0:rf.commitIndex = 30, rf.lastApplied = 30
2023/09/23 03:26:39 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:39 kvserver[4]: GET获取到通知结果,index=[35],replyMsg.value: x 2 0 yx 2 1 yx 2 2 y
reply value is x 2 0 yx 2 1 yx 2 2 y
kvserver[4]: pre删除通道index: 35
kvserver[4]: begin删除通道index: 35
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 35
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:39 2: client new get 2
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 3 y) 1867579256866231016 8},term is 1,len is 38
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 8},term is 1,len is 39
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 8},term is 1,len is 40
---------------
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND处理请求超时: {Append 1 x 1 2 y 672816327287623235 8}
kvserver[4]: pre删除通道index: 36
kvserver[4]: begin删除通道index: 36
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 36
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 2 y) 672816327287623235 8},term is 1,len is 41
---------------
2023/09/23 03:26:39 kvserver[4]: GET处理请求超时: {Get 0  4346951758130697083 8}
kvserver[4]: pre删除通道index: 37
kvserver[4]: begin删除通道index: 37
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 37
2023/09/23 03:26:39 kvserver[4]: PUTAPPEND处理请求超时: {Append 4 x 4 3 y 1867579256866231016 8}
kvserver[4]: pre删除通道index: 38
kvserver[4]: begin删除通道index: 38
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 38
2023/09/23 03:26:39 kvserver[4]: GET处理请求超时: {Get 3  1065774344220344240 8}
kvserver[4]: pre删除通道index: 39
kvserver[4]: begin删除通道index: 39
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 39
2023/09/23 03:26:39 kvserver[4]: GET处理请求超时: {Get 2  3167499095888228886 8}
kvserver[4]: pre删除通道index: 40
kvserver[4]: begin删除通道index: 40
2023/09/23 03:26:39 kvserver[4]: 成功删除通道index: 40
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 8},term is 1,len is 42
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 8},term is 1,len is 43
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 8},term is 1,len is 44
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 3 y) 1867579256866231016 8},term is 1,len is 45
---------------
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
0 follow -> candidate
0 begin to elect
0 term is 2
2:投票检查35,35,1,1,2,1
2 vote now -> 0
3:投票检查35,35,1,1,2,1
3 vote now -> 0
1:投票检查35,35,1,1,2,1
1 vote now -> 0
0: vote num is 2
0: vote num is 3
0 is leader
0: vote num is 1
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
0 begin to append 1
prevlogindex = 35, lastIndex = 0
0 begin to append 2
prevlogindex = 35, lastIndex = 0
0 begin to append 3
prevlogindex = 35, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：1节点term为2，leader发送term为2, 接收0个, PrevLogIndex is 35
1 return success! num is 1
nextIndex = 36, lastIndex = 0, len = 35
测试：3节点term为2，leader发送term为2, 接收0个, PrevLogIndex is 35
3 return success! num is 2
nextIndex = 36, lastIndex = 0, len = 35
1 max is 0
2 max is 0
3:rf.commitIndex = 30, rf.lastApplied = 30
1:rf.commitIndex = 30, rf.lastApplied = 30
测试：2节点term为2，leader发送term为2, 接收0个, PrevLogIndex is 35
2:rf.commitIndex = 30, rf.lastApplied = 30
2 return success! num is 1
nextIndex = 36, lastIndex = 0, len = 35
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
0 begin to append 1
prevlogindex = 35, lastIndex = 0
0 begin to append 2
prevlogindex = 35, lastIndex = 0
0 begin to append 3
prevlogindex = 35, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：2节点term为2，leader发送term为2, 接收0个, PrevLogIndex is 35
2:rf.commitIndex = 30, rf.lastApplied = 30
测试：1节点term为2，leader发送term为2, 接收0个, PrevLogIndex is 35
测试：3节点term为2，leader发送term为2, 接收0个, PrevLogIndex is 35
2 return success! num is 1
nextIndex = 36, lastIndex = 0, len = 35
3:rf.commitIndex = 30, rf.lastApplied = 30
1:rf.commitIndex = 30, rf.lastApplied = 30
1 return success! num is 2
nextIndex = 36, lastIndex = 0, len = 35
1 max is 0
2 max is 0
3 return success! num is 1
nextIndex = 36, lastIndex = 0, len = 35
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
2023/09/23 03:26:40 kvserver[4]: PUTAPPEND处理请求超时: {Append 1 x 1 2 y 672816327287623235 8}
kvserver[4]: pre删除通道index: 41
kvserver[4]: begin删除通道index: 41
2023/09/23 03:26:40 kvserver[4]: 成功删除通道index: 41
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 2 y) 672816327287623235 8},term is 2,len is 36
---------------
2023/09/23 03:26:40 kvserver[4]: GET处理请求超时: {Get 0  4346951758130697083 8}
kvserver[4]: pre删除通道index: 42
kvserver[4]: begin删除通道index: 42
2023/09/23 03:26:40 kvserver[4]: 成功删除通道index: 42
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 8},term is 2,len is 37
---------------
2023/09/23 03:26:40 kvserver[4]: GET处理请求超时: {Get 3  1065774344220344240 8}
2023/09/23 03:26:40 kvserver[4]: GET处理请求超时: {Get 2  3167499095888228886 8}
kvserver[4]: pre删除通道index: 43
kvserver[4]: begin删除通道index: 43
2023/09/23 03:26:40 kvserver[4]: 成功删除通道index: 43
kvserver[4]: pre删除通道index: 44
kvserver[4]: begin删除通道index: 44
2023/09/23 03:26:40 kvserver[4]: 成功删除通道index: 44
2023/09/23 03:26:40 kvserver[4]: PUTAPPEND处理请求超时: {Append 4 x 4 3 y 1867579256866231016 8}
kvserver[4]: pre删除通道index: 45
kvserver[4]: begin删除通道index: 45
2023/09/23 03:26:40 kvserver[4]: 成功删除通道index: 45
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 8},term is 2,len is 38
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 3 y) 1867579256866231016 8},term is 2,len is 39
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 8},term is 2,len is 40
---------------
0 begin to append 1
prevlogindex = 35, lastIndex = 0
0 begin to append 2
prevlogindex = 35, lastIndex = 0
0 begin to append 3
prevlogindex = 35, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：1节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 35
updateIndex = 35, lastIndex = 0
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 35
updateIndex = 35, lastIndex = 0
4 begin to append 0
prevlogindex = 35, lastIndex = 0
4 begin to append 1
prevlogindex = 35, lastIndex = 0
4 begin to append 2
prevlogindex = 35, lastIndex = 0
4 begin to append 3
prevlogindex = 35, lastIndex = 0
1更新log，长度40
3更新log，长度40
1:rf.commitIndex = 30, rf.lastApplied = 30
1 return success! num is 1
nextIndex = 36, lastIndex = 0, len = 40
3:rf.commitIndex = 30, rf.lastApplied = 30
3 return success! num is 2
nextIndex = 36, lastIndex = 0, len = 40
1 max is 40
2 max is 40
0:commitIndex -> 40
[0][2][0] apply index = 31, commit is 40
0:{31}unlock now
0:{31}unlock end
0:{31}lock now
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{31}lock end
[0][2][0] apply index = 32, commit is 40
0:{32}unlock now
0:{32}unlock end
[0]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{32}lock now
0:{32}lock end
[0][2][0] apply index = 33, commit is 40
0:{33}unlock now
0:{33}unlock end
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{33}lock now
0:{33}lock end
[0][2][0] apply index = 34, commit is 40
0:{34}unlock now
0:{34}unlock end
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{34}lock now
0:{34}lock end
[0][2][0] apply index = 35, commit is 40
0:{35}unlock now
0:{35}unlock end
[0]append key:4, x 4 0 yx 4 1 yx 4 2 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 y
0:{35}lock now
0:{35}lock end
[0][2][0] apply index = 36, commit is 40
0:{36}unlock now
0:{36}unlock end
0:{36}lock now
0:{36}lock end
[0][2][0] apply index = 37, commit is 40
0:{37}unlock now
0:{37}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 1 x 1 2 y 672816327287623235 8} 36 2 false [] 0 0}处理完成,通知index = [36]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 1 x 1 2 y 672816327287623235 8} 36 2 false [] 0 0}处理完成,通知完成index = [36]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 8} 37 2 false [] 0 0}处理完成,通知index = [37]的channel
0:{37}lock now
0:{37}lock end
[0][2][0] apply index = 38, commit is 40
0:{38}unlock now
0:{38}unlock end
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 8} 37 2 false [] 0 0}处理完成,通知完成index = [37]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 8} 38 2 false [] 0 0}处理完成,通知index = [38]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 8} 38 2 false [] 0 0}处理完成,通知完成index = [38]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[36],replyMsg: {x 1 0 yx 1 1 yx 1 2 y 2 true}
kvserver[0]: pre删除通道index: 36
kvserver[0]: begin删除通道index: 36
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 36
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[37],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
0:{38}lock now
0:{38}lock end
[0][2][0] apply index = 39, commit is 40
0:{39}unlock now
0:{39}unlock end
0:{39}lock now
0:{39}lock end
[0][2][0] apply index = 40, commit is 40
0:{40}unlock now
0:{40}unlock end
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2023/09/23 03:26:40 1: client new append x 1 3 y
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[38],replyMsg.value: x 2 0 yx 2 1 yx 2 2 y
kvserver[0]: pre删除通道index: 37
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 3 y 1867579256866231016 8} 39 2 false [] 0 0}处理完成,通知index = [39]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 3 y 1867579256866231016 8} 39 2 false [] 0 0}处理完成,通知完成index = [39]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
reply value is x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[39],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 y 2 true}
kvserver[0]: pre删除通道index: 38
kvserver[0]: begin删除通道index: 37
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 37
0:{40}lock now
0:{40}lock end
0:rf.commitIndex = 40, rf.lastApplied = 40
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 3 y) 672816327287623235 9},term is 2,len is 41
---------------
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 0: client new get 0
kvserver[0]: pre删除通道index: 39
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 8} 40 2 false [] 0 0}处理完成,通知index = [40]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 8} 40 2 false [] 0 0}处理完成,通知完成index = [40]的channel
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[40],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
kvserver[0]: begin删除通道index: 38
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 9},term is 2,len is 42
---------------
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 35
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 38
updateIndex = 35, lastIndex = 0
2更新log，长度40
kvserver[0]: begin删除通道index: 39
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 39
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:40 2: client new append x 2 3 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
kvserver[0]: pre删除通道index: 40
kvserver[0]: begin删除通道index: 40
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 40
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:40 3: client new get 3
2023/09/23 03:26:40 4: client new get 4
2:rf.commitIndex = 30, rf.lastApplied = 30
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 9},term is 2,len is 43
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 9},term is 2,len is 44
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 3 y) 3167499095888228886 9},term is 2,len is 45
---------------
2 return success! num is 1
nextIndex = 36, lastIndex = 0, len = 45
测试：1节点term为2，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
4 AppOutOfDate follow -> candidate
测试：1节点term为2，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为2，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 40, lastIndex = 0
0 begin to append 3
prevlogindex = 40, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
4 follow -> candidate
4 begin to elect
4 term is 3
1:投票检查40,45,2,1,3,2
测试：1节点term为3，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 40
updateIndex = 40, lastIndex = 0
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 40
updateIndex = 40, lastIndex = 0
3更新log，长度45
[3][2][0] apply index = 31, commit is 40
3:{31}unlock now
3:{31}unlock end
3:{31}lock now
3 return success! num is 1
nextIndex = 41, lastIndex = 0, len = 45
3:{31}lock end
[3][2][0] apply index = 32, commit is 40
3:{32}unlock now
3:{32}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
3:{32}lock now
3:{32}lock end
[3][2][0] apply index = 33, commit is 40
3:{33}unlock now
3:{33}unlock end
3:{33}lock now
3:{33}lock end
[3][2][0] apply index = 34, commit is 40
3:{34}unlock now
3:{34}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 y
3:{34}lock now
3:{34}lock end
[3][2][0] apply index = 35, commit is 40
3:{35}unlock now
3:{35}unlock end
3:{35}lock now
3:{35}lock end
[3][2][0] apply index = 36, commit is 40
3:{36}unlock now
3:{36}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 y
3:{36}lock now
3:{36}lock end
[3][2][0] apply index = 37, commit is 40
3:{37}unlock now
3:{37}unlock end
3:{37}lock now
3:{37}lock end
[3][2][0] apply index = 38, commit is 40
3:{38}unlock now
3:{38}unlock end
2更新log，长度45
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 y
3:{38}lock now
3:{38}lock end
[3][2][0] apply index = 39, commit is 40
3:{39}unlock now
3:{39}unlock end
3:{39}lock now
3:{39}lock end
[3][2][0] apply index = 40, commit is 40
3:{40}unlock now
3:{40}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
[2][2][0] apply index = 31, commit is 40
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2:{31}unlock now
2:{31}unlock end
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2:{31}lock now
2:{31}lock end
3:{40}lock now
[2][2][0] apply index = 32, commit is 40
2:{32}unlock now
2:{32}unlock end
3:{40}lock end
3:rf.commitIndex = 40, rf.lastApplied = 40
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2 return success! num is 2
nextIndex = 41, lastIndex = 0, len = 45
1 max is 45
2 max is 45
0:commitIndex -> 45
2:{32}lock now
2:{32}lock end
[2][2][0] apply index = 33, commit is 40
2:{33}unlock now
2:{33}unlock end
2:{33}lock now
2:{33}lock end
[2][2][0] apply index = 34, commit is 40
2:{34}unlock now
2:{34}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0][2][0] apply index = 41, commit is 45
[2]append key:4, x 4 0 yx 4 1 yx 4 2 y
2:{34}lock now
0:{41}unlock now
2:{34}lock end
0:{41}unlock end
[2][2][0] apply index = 35, commit is 40
0:{41}lock now
2:{35}unlock now
0:{41}lock end
2:{35}unlock end
[0][2][0] apply index = 42, commit is 45
0:{42}unlock now
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{42}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2:{35}lock now
2:{35}lock end
[2][2][0] apply index = 36, commit is 40
2:{36}unlock now
2:{36}unlock end
2:{36}lock now
2:{36}lock end
[2][2][0] apply index = 37, commit is 40
2:{37}unlock now
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 1 x 1 3 y 672816327287623235 9} 41 2 false [] 0 0}处理完成,通知index = [41]的channel
[2]append key:1, x 1 0 yx 1 1 yx 1 2 y
2:{37}unlock end
2:{37}lock now
2:{37}lock end
[2][2][0] apply index = 38, commit is 40
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 1 x 1 3 y 672816327287623235 9} 41 2 false [] 0 0}处理完成,通知完成index = [41]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2:{38}unlock now
2:{38}unlock end
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 9} 42 2 false [] 0 0}处理完成,通知index = [42]的channel
2:{38}lock now
2:{38}lock end
[2][2][0] apply index = 39, commit is 40
2:{39}unlock now
2:{39}unlock end
0:{42}lock now
0:{42}lock end
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 9} 42 2 false [] 0 0}处理完成,通知完成index = [42]的channel
[0][2][0] apply index = 43, commit is 45
0:{43}unlock now
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[41],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 y 2 true}
0:{43}unlock end
0:{43}lock now
0:{43}lock end
[0][2][0] apply index = 44, commit is 45
kvserver[0]: pre删除通道index: 41
kvserver[0]: begin删除通道index: 41
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{44}unlock now
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 41
0:{44}unlock end
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:40 1: client new get 1
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2:{39}lock now
2:{39}lock end
[2][2][0] apply index = 40, commit is 40
2:{40}unlock now
2:{40}unlock end
2:{40}lock now
2:{40}lock end
2:rf.commitIndex = 40, rf.lastApplied = 40
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[42],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 9} 43 2 false [] 0 0}处理完成,通知index = [43]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 9} 43 2 false [] 0 0}处理完成,通知完成index = [43]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[43],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
0:{44}lock now
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 10},term is 2,len is 46
---------------
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 9} 44 2 false [] 0 0}处理完成,通知index = [44]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 9} 44 2 false [] 0 0}处理完成,通知完成index = [44]的channel
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[44],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 y
kvserver[0]: pre删除通道index: 44
kvserver[0]: begin删除通道index: 44
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 44
0:{44}lock end
[0][2][0] apply index = 45, commit is 45
0:{45}unlock now
0:{45}unlock end
0:{45}lock now
0:{45}lock end
0:rf.commitIndex = 45, rf.lastApplied = 45
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 2 x 2 3 y 3167499095888228886 9} 45 2 false [] 0 0}处理完成,通知index = [45]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 2 x 2 3 y 3167499095888228886 9} 45 2 false [] 0 0}处理完成,通知完成index = [45]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[45],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 y 2 true}
kvserver[0]: pre删除通道index: 45
kvserver[0]: begin删除通道index: 45
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 45
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
kvserver[0]: pre删除通道index: 42
kvserver[0]: begin删除通道index: 42
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 42
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:40 4: client new get 4
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
kvserver[0]: pre删除通道index: 43
kvserver[0]: begin删除通道index: 43
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 43
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:40 3: client new append x 3 5 y
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 0: client new append x 0 5 y
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 10},term is 2,len is 47
---------------
2023/09/23 03:26:40 2: client new append x 2 4 y
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 5 y) 1065774344220344240 10},term is 2,len is 48
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 5 y) 4346951758130697083 10},term is 2,len is 49
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 4 y) 3167499095888228886 10},term is 2,len is 50
---------------
测试：1节点term为3，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为3，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为3，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为3，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为3，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为3，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为3，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 45, lastIndex = 0
0 begin to append 3
prevlogindex = 45, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 45
updateIndex = 45, lastIndex = 0
3更新log，长度50
[3][2][0] apply index = 41, commit is 45
3:{41}unlock now
3:{41}unlock end
3:{41}lock now
3 return success! num is 1
nextIndex = 46, lastIndex = 0, len = 50
2023/09/23 03:26:40 CommandApply!!!!!!!!!
3:{41}lock end
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
[3][2][0] apply index = 42, commit is 45
3:{42}unlock now
3:{42}unlock end
3:{42}lock now
3:{42}lock end
[3][2][0] apply index = 43, commit is 45
3:{43}unlock now
3:{43}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
3:{43}lock now
3:{43}lock end
[3][2][0] apply index = 44, commit is 45
3:{44}unlock now
3:{44}unlock end
3:{44}lock now
3:{44}lock end
[3][2][0] apply index = 45, commit is 45
3:{45}unlock now
2023/09/23 03:26:40 CommandApply!!!!!!!!!
3:{45}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
3:{45}lock now
3:{45}lock end
3:rf.commitIndex = 45, rf.lastApplied = 45
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 45
updateIndex = 45, lastIndex = 0
2更新log，长度50
[2][2][0] apply index = 41, commit is 45
2:{41}unlock now
2:{41}unlock end
2:{41}lock now
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2:{41}lock end
[2][2][0] apply index = 42, commit is 45
2:{42}unlock now
2:{42}unlock end
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2:{42}lock now
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2:{42}lock end
[2][2][0] apply index = 43, commit is 45
2:{43}unlock now
2:{43}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2:{43}lock now
2:{43}lock end
[2][2][0] apply index = 44, commit is 45
2:{44}unlock now
2:{44}unlock end
2:{44}lock now
2:{44}lock end
[2][2][0] apply index = 45, commit is 45
2:{45}unlock now
2:{45}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2:{45}lock now
2:{45}lock end
2:rf.commitIndex = 45, rf.lastApplied = 45
2 return success! num is 2
nextIndex = 46, lastIndex = 0, len = 50
1 max is 50
2 max is 50
0:commitIndex -> 50
[0][2][0] apply index = 46, commit is 50
0:{46}unlock now
0:{46}unlock end
0:{46}lock now
0:{46}lock end
[0][2][0] apply index = 47, commit is 50
0:{47}unlock now
0:{47}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 10} 46 2 false [] 0 0}处理完成,通知index = [46]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 10} 46 2 false [] 0 0}处理完成,通知完成index = [46]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 10} 47 2 false [] 0 0}处理完成,通知index = [47]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 10} 47 2 false [] 0 0}处理完成,通知完成index = [47]的channel
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[46],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 y
kvserver[0]: pre删除通道index: 46
kvserver[0]: begin删除通道index: 46
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 46
0:{47}lock now
0:{47}lock end
[0][2][0] apply index = 48, commit is 50
0:{48}unlock now
0:{48}unlock end
0:{48}lock now
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[47],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 y
0:{48}lock end
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 y
[0][2][0] apply index = 49, commit is 50
0:{49}unlock now
0:{49}unlock end
kvserver[0]: pre删除通道index: 47
kvserver[0]: begin删除通道index: 47
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 47
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 3 x 3 5 y 1065774344220344240 10} 48 2 false [] 0 0}处理完成,通知index = [48]的channel
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 1: client new get 1
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 3 x 3 5 y 1065774344220344240 10} 48 2 false [] 0 0}处理完成,通知完成index = [48]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 0 x 0 5 y 4346951758130697083 10} 49 2 false [] 0 0}处理完成,通知index = [49]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 0 x 0 5 y 4346951758130697083 10} 49 2 false [] 0 0}处理完成,通知完成index = [49]的channel
0:{49}lock now
0:{49}lock end
[0][2][0] apply index = 50, commit is 50
0:{50}unlock now
0:{50}unlock end
0:{50}lock now
0:{50}lock end
0:rf.commitIndex = 50, rf.lastApplied = 50
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:40 4: client new append x 4 4 y
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[48],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y 2 true}
kvserver[0]: pre删除通道index: 48
kvserver[0]: begin删除通道index: 48
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 48
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[49],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y 2 true}
kvserver[0]: pre删除通道index: 49
kvserver[0]: begin删除通道index: 49
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 49
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 11},term is 2,len is 51
---------------
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 2 x 2 4 y 3167499095888228886 10} 50 2 false [] 0 0}处理完成,通知index = [50]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 2 x 2 4 y 3167499095888228886 10} 50 2 false [] 0 0}处理完成,通知完成index = [50]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[50],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y 2 true}
kvserver[0]: pre删除通道index: 50
kvserver[0]: begin删除通道index: 50
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 50
2023/09/23 03:26:40 3: client new get 3
2023/09/23 03:26:40 2: client new append x 2 5 y
2023/09/23 03:26:40 0: client new append x 0 6 y
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 4 y) 1867579256866231016 11},term is 2,len is 52
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 5 y) 3167499095888228886 11},term is 2,len is 53
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 11},term is 2,len is 54
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 6 y) 4346951758130697083 11},term is 2,len is 55
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 50, lastIndex = 0
0 begin to append 3
prevlogindex = 50, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 50
updateIndex = 50, lastIndex = 0
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 50
updateIndex = 50, lastIndex = 0
3更新log，长度55
[3][2][0] apply index = 46, commit is 50
3:{46}unlock now
3:{46}unlock end
3:{46}lock now
3:{46}lock end
[3][2][0] apply index = 47, commit is 50
3:{47}unlock now
3:{47}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
3:{47}lock now
3:{47}lock end
[3][2][0] apply index = 48, commit is 50
3:{48}unlock now
3:{48}unlock end
3:{48}lock now
3:{48}lock end
[3][2][0] apply index = 49, commit is 50
3:{49}unlock now
3:{49}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
3 return success! num is 1
3:{49}lock now
nextIndex = 51, lastIndex = 0, len = 55
3:{49}lock end
[3][2][0] apply index = 50, commit is 50
3:{50}unlock now
3:{50}unlock end
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
3:{50}lock now
3:{50}lock end
3:rf.commitIndex = 50, rf.lastApplied = 50
2更新log，长度55
[2][2][0] apply index = 46, commit is 50
2:{46}unlock now
2:{46}unlock end
2:{46}lock now
2:{46}lock end
[2][2][0] apply index = 47, commit is 50
2:{47}unlock now
2:{47}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2:{47}lock now
2:{47}lock end
[2][2][0] apply index = 48, commit is 50
2:{48}unlock now
2:{48}unlock end
2:{48}lock now
2:{48}lock end
[2][2][0] apply index = 49, commit is 50
2:{49}unlock now
2:{49}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2:{49}lock now
2:{49}lock end
[2][2][0] apply index = 50, commit is 50
2:{50}unlock now
2:{50}unlock end
2:{50}lock now
2:{50}lock end
2:rf.commitIndex = 50, rf.lastApplied = 50
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2 return success! num is 2
nextIndex = 51, lastIndex = 0, len = 55
1 max is 55
2 max is 55
0:commitIndex -> 55
[0][2][0] apply index = 51, commit is 55
0:{51}unlock now
0:{51}unlock end
0:{51}lock now
0:{51}lock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0][2][0] apply index = 52, commit is 55
0:{52}unlock now
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
0:{52}unlock end
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 11} 51 2 false [] 0 0}处理完成,通知index = [51]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 11} 51 2 false [] 0 0}处理完成,通知完成index = [51]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 4 y 1867579256866231016 11} 52 2 false [] 0 0}处理完成,通知index = [52]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 4 y 1867579256866231016 11} 52 2 false [] 0 0}处理完成,通知完成index = [52]的channel
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[51],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 y
kvserver[0]: pre删除通道index: 51
kvserver[0]: begin删除通道index: 51
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 51
0:{52}lock now
0:{52}lock end
[0][2][0] apply index = 53, commit is 55
0:{53}unlock now
0:{53}unlock end
0:{53}lock now
0:{53}lock end
[0][2][0] apply index = 54, commit is 55
0:{54}unlock now
0:{54}unlock end
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[52],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y 2 true}
kvserver[0]: pre删除通道index: 52
kvserver[0]: begin删除通道index: 52
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 52
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 2 x 2 5 y 3167499095888228886 11} 53 2 false [] 0 0}处理完成,通知index = [53]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 2 x 2 5 y 3167499095888228886 11} 53 2 false [] 0 0}处理完成,通知完成index = [53]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 11} 54 2 false [] 0 0}处理完成,通知index = [54]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 11} 54 2 false [] 0 0}处理完成,通知完成index = [54]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[53],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y 2 true}
kvserver[0]: pre删除通道index: 53
kvserver[0]: begin删除通道index: 53
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 53
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 1: client new get 1
0:{54}lock now
0:{54}lock end
[0][2][0] apply index = 55, commit is 55
0:{55}unlock now
0:{55}unlock end
0:{55}lock now
0:{55}lock end
0:rf.commitIndex = 55, rf.lastApplied = 55
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 0 x 0 6 y 4346951758130697083 11} 55 2 false [] 0 0}处理完成,通知index = [55]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 0 x 0 6 y 4346951758130697083 11} 55 2 false [] 0 0}处理完成,通知完成index = [55]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[55],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y 2 true}
kvserver[0]: pre删除通道index: 55
kvserver[0]: begin删除通道index: 55
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 55
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[54],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
kvserver[0]: pre删除通道index: 54
kvserver[0]: begin删除通道index: 54
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 54
2023/09/23 03:26:40 2: client new get 2
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 12},term is 2,len is 56
---------------
2023/09/23 03:26:40 4: client new append x 4 5 y
2023/09/23 03:26:40 0: client new append x 0 7 y
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:40 3: client new append x 3 6 y
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 12},term is 2,len is 57
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 6 y) 1065774344220344240 12},term is 2,len is 58
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 5 y) 1867579256866231016 12},term is 2,len is 59
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 7 y) 4346951758130697083 12},term is 2,len is 60
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 55, lastIndex = 0
0 begin to append 3
prevlogindex = 55, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 55
updateIndex = 55, lastIndex = 0
3更新log，长度60
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 55
updateIndex = 55, lastIndex = 0
2更新log，长度60
2 return success! num is 1
nextIndex = 56, lastIndex = 0, len = 60
[2][2][0] apply index = 51, commit is 55
2:{51}unlock now
2:{51}unlock end
2:{51}lock now
2:{51}lock end
[2][2][0] apply index = 52, commit is 55
2:{52}unlock now
2:{52}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2:{52}lock now
2:{52}lock end
[2][2][0] apply index = 53, commit is 55
2:{53}unlock now
2:{53}unlock end
2:{53}lock now
2:{53}lock end
[2][2][0] apply index = 54, commit is 55
2:{54}unlock now
2:{54}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2:{54}lock now
2:{54}lock end
[2][2][0] apply index = 55, commit is 55
2:{55}unlock now
2:{55}unlock end
2:{55}lock now
2:{55}lock end
2:rf.commitIndex = 55, rf.lastApplied = 55
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
[3][2][0] apply index = 51, commit is 55
3:{51}unlock now
3:{51}unlock end
3:{51}lock now
3:{51}lock end
[3][2][0] apply index = 52, commit is 55
3:{52}unlock now
3:{52}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
3:{52}lock now
3:{52}lock end
[3][2][0] apply index = 53, commit is 55
3:{53}unlock now
3:{53}unlock end
3:{53}lock now
3:{53}lock end
[3][2][0] apply index = 54, commit is 55
3:{54}unlock now
3:{54}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
3:{54}lock now
3:{54}lock end
[3][2][0] apply index = 55, commit is 55
3:{55}unlock now
3:{55}unlock end
3:{55}lock now
3:{55}lock end
3:rf.commitIndex = 55, rf.lastApplied = 55
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
3 return success! num is 2
nextIndex = 56, lastIndex = 0, len = 60
1 max is 60
2 max is 60
0:commitIndex -> 60
[0][2][0] apply index = 56, commit is 60
0:{56}unlock now
0:{56}unlock end
0:{56}lock now
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{56}lock end
[0][2][0] apply index = 57, commit is 60
0:{57}unlock now
0:{57}unlock end
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 12} 56 2 false [] 0 0}处理完成,通知index = [56]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 12} 56 2 false [] 0 0}处理完成,通知完成index = [56]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{57}lock now
0:{57}lock end
[0][2][0] apply index = 58, commit is 60
0:{58}unlock now
0:{58}unlock end
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[56],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 12} 57 2 false [] 0 0}处理完成,通知index = [57]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 12} 57 2 false [] 0 0}处理完成,通知完成index = [57]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
kvserver[0]: pre删除通道index: 56
kvserver[0]: begin删除通道index: 56
0:{58}lock now
0:{58}lock end
[0][2][0] apply index = 59, commit is 60
0:{59}unlock now
0:{59}unlock end
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 56
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[57],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 y
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 3 x 3 6 y 1065774344220344240 12} 58 2 false [] 0 0}处理完成,通知index = [58]的channel
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 3 x 3 6 y 1065774344220344240 12} 58 2 false [] 0 0}处理完成,通知完成index = [58]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[58],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y 2 true}
kvserver[0]: pre删除通道index: 58
kvserver[0]: begin删除通道index: 58
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 58
2023/09/23 03:26:40 2: client new get 2
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 5 y 1867579256866231016 12} 59 2 false [] 0 0}处理完成,通知index = [59]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 5 y 1867579256866231016 12} 59 2 false [] 0 0}处理完成,通知完成index = [59]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[59],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y 2 true}
kvserver[0]: pre删除通道index: 59
kvserver[0]: begin删除通道index: 59
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 59
2023/09/23 03:26:40 3: client new append x 3 7 y
2023/09/23 03:26:40 4: client new append x 4 6 y
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 13},term is 2,len is 61
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 7 y) 1065774344220344240 13},term is 2,len is 62
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 6 y) 1867579256866231016 13},term is 2,len is 63
---------------
0:{59}lock now
0:{59}lock end
[0][2][0] apply index = 60, commit is 60
0:{60}unlock now
0:{60}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 0 x 0 7 y 4346951758130697083 12} 60 2 false [] 0 0}处理完成,通知index = [60]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 0 x 0 7 y 4346951758130697083 12} 60 2 false [] 0 0}处理完成,通知完成index = [60]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[60],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y 2 true}
kvserver[0]: pre删除通道index: 60
kvserver[0]: begin删除通道index: 60
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 60
2023/09/23 03:26:40 0: client new append x 0 8 y
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 8 y) 4346951758130697083 13},term is 2,len is 64
---------------
0:{60}lock now
0:{60}lock end
0:rf.commitIndex = 60, rf.lastApplied = 60
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 y
kvserver[0]: pre删除通道index: 57
kvserver[0]: begin删除通道index: 57
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 57
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 1: client new get 1
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 13},term is 2,len is 65
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 60, lastIndex = 0
0 begin to append 3
prevlogindex = 60, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 60
updateIndex = 60, lastIndex = 0
2更新log，长度65
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 60
updateIndex = 60, lastIndex = 0
3更新log，长度65
[3][2][0] apply index = 56, commit is 60
3:{56}unlock now
3:{56}unlock end
3:{56}lock now
3:{56}lock end
[3][2][0] apply index = 57, commit is 60
3:{57}unlock now
3:{57}unlock end
[2][2][0] apply index = 56, commit is 60
2:{56}unlock now
2:{56}unlock end
2:{56}lock now
2:{56}lock end
[2][2][0] apply index = 57, commit is 60
2:{57}unlock now
2:{57}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2 return success! num is 1
nextIndex = 61, lastIndex = 0, len = 65
3 return success! num is 2
nextIndex = 61, lastIndex = 0, len = 65
1 max is 65
2 max is 65
0:commitIndex -> 65
[0][2][0] apply index = 61, commit is 65
0:{61}unlock now
0:{61}unlock end
0:{61}lock now
0:{61}lock end
[0][2][0] apply index = 62, commit is 65
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{62}unlock now
0:{62}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2:{57}lock now
2:{57}lock end
[2][2][0] apply index = 58, commit is 60
2:{58}unlock now
2:{58}unlock end
2:{58}lock now
2:{58}lock end
[2][2][0] apply index = 59, commit is 60
2:{59}unlock now
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2:{59}unlock end
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 13} 61 2 false [] 0 0}处理完成,通知index = [61]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 13} 61 2 false [] 0 0}处理完成,通知完成index = [61]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 3 x 3 7 y 1065774344220344240 13} 62 2 false [] 0 0}处理完成,通知index = [62]的channel
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
3:{57}lock now
3:{57}lock end
[3][2][0] apply index = 58, commit is 60
3:{58}unlock now
3:{58}unlock end
3:{58}lock now
3:{58}lock end
[3][2][0] apply index = 59, commit is 60
3:{59}unlock now
3:{59}unlock end
2:{59}lock now
2:{59}lock end
[2][2][0] apply index = 60, commit is 60
2:{60}unlock now
2:{60}unlock end
0:{62}lock now
0:{62}lock end
[0][2][0] apply index = 63, commit is 65
0:{63}unlock now
0:{63}unlock end
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 3 x 3 7 y 1065774344220344240 13} 62 2 false [] 0 0}处理完成,通知完成index = [62]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 6 y 1867579256866231016 13} 63 2 false [] 0 0}处理完成,通知index = [63]的channel
0:{63}lock now
0:{63}lock end
[0][2][0] apply index = 64, commit is 65
0:{64}unlock now
0:{64}unlock end
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[61],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[62],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y 2 true}
kvserver[0]: pre删除通道index: 62
2:{60}lock now
2:{60}lock end
2:rf.commitIndex = 60, rf.lastApplied = 60
3:{59}lock now
3:{59}lock end
[3][2][0] apply index = 60, commit is 60
3:{60}unlock now
3:{60}unlock end
3:{60}lock now
3:{60}lock end
3:rf.commitIndex = 60, rf.lastApplied = 60
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[63],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y 2 true}
kvserver[0]: pre删除通道index: 63
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 6 y 1867579256866231016 13} 63 2 false [] 0 0}处理完成,通知完成index = [63]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
0:{64}lock now
0:{64}lock end
[0][2][0] apply index = 65, commit is 65
0:{65}unlock now
0:{65}unlock end
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
kvserver[0]: pre删除通道index: 61
kvserver[0]: begin删除通道index: 61
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 61
kvserver[0]: begin删除通道index: 62
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 62
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 2: client new get 2
kvserver[0]: begin删除通道index: 63
2023/09/23 03:26:40 3: client new get 3
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 63
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:40 4: client new append x 4 7 y
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 14},term is 2,len is 66
---------------
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 0 x 0 8 y 4346951758130697083 13} 64 2 false [] 0 0}处理完成,通知index = [64]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 0 x 0 8 y 4346951758130697083 13} 64 2 false [] 0 0}处理完成,通知完成index = [64]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 13} 65 2 false [] 0 0}处理完成,通知index = [65]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 13} 65 2 false [] 0 0}处理完成,通知完成index = [65]的channel
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[65],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 y
kvserver[0]: pre删除通道index: 65
kvserver[0]: begin删除通道index: 65
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 65
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[64],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y 2 true}
kvserver[0]: pre删除通道index: 64
kvserver[0]: begin删除通道index: 64
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 64
2023/09/23 03:26:40 0: client new get 0
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 1: client new get 1
0:{65}lock now
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 7 y) 1867579256866231016 14},term is 2,len is 67
---------------
0:{65}lock end
0:rf.commitIndex = 65, rf.lastApplied = 65
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 14},term is 2,len is 68
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 14},term is 2,len is 69
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 14},term is 2,len is 70
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 65, lastIndex = 0
0 begin to append 3
prevlogindex = 65, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 65
updateIndex = 65, lastIndex = 0
3更新log，长度70
[3][2][0] apply index = 61, commit is 65
3:{61}unlock now
3:{61}unlock end
3:{61}lock now
2023/09/23 03:26:40 CommandApply!!!!!!!!!
3:{61}lock end
[3][2][0] apply index = 62, commit is 65
3:{62}unlock now
3:{62}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
3:{62}lock now
3:{62}lock end
[3][2][0] apply index = 63, commit is 65
3:{63}unlock now
3:{63}unlock end
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 65
updateIndex = 65, lastIndex = 0
2更新log，长度70
[2][2][0] apply index = 61, commit is 65
2:{61}unlock now
2:{61}unlock end
2:{61}lock now
2:{61}lock end
[2][2][0] apply index = 62, commit is 65
2:{62}unlock now
2:{62}unlock end
3 return success! num is 1
nextIndex = 66, lastIndex = 0, len = 70
2 return success! num is 2
nextIndex = 66, lastIndex = 0, len = 70
1 max is 70
2 max is 70
0:commitIndex -> 70
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
3:{63}lock now
3:{63}lock end
[3][2][0] apply index = 64, commit is 65
3:{64}unlock now
3:{64}unlock end
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2:{62}lock now
2:{62}lock end
[2][2][0] apply index = 63, commit is 65
2:{63}unlock now
2:{63}unlock end
2:{63}lock now
2:{63}lock end
[2][2][0] apply index = 64, commit is 65
2:{64}unlock now
2:{64}unlock end
[0][2][0] apply index = 66, commit is 70
0:{66}unlock now
0:{66}unlock end
0:{66}lock now
0:{66}lock end
[0][2][0] apply index = 67, commit is 70
0:{67}unlock now
0:{67}unlock end
3:{64}lock now
3:{64}lock end
[3][2][0] apply index = 65, commit is 65
3:{65}unlock now
3:{65}unlock end
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
3:{65}lock now
3:{65}lock end
3:rf.commitIndex = 65, rf.lastApplied = 65
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2:{64}lock now
2:{64}lock end
[2][2][0] apply index = 65, commit is 65
2:{65}unlock now
2:{65}unlock end
2:{65}lock now
2:{65}lock end
2:rf.commitIndex = 65, rf.lastApplied = 65
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 14} 66 2 false [] 0 0}处理完成,通知index = [66]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 14} 66 2 false [] 0 0}处理完成,通知完成index = [66]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[66],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 7 y 1867579256866231016 14} 67 2 false [] 0 0}处理完成,通知index = [67]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 7 y 1867579256866231016 14} 67 2 false [] 0 0}处理完成,通知完成index = [67]的channel
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
kvserver[0]: pre删除通道index: 66
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[67],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y 2 true}
kvserver[0]: begin删除通道index: 66
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 66
0:{67}lock now
0:{67}lock end
[0][2][0] apply index = 68, commit is 70
0:{68}unlock now
0:{68}unlock end
0:{68}lock now
0:{68}lock end
[0][2][0] apply index = 69, commit is 70
0:{69}unlock now
0:{69}unlock end
kvserver[0]: pre删除通道index: 67
kvserver[0]: begin删除通道index: 67
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 67
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:40 4: client new append x 4 8 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 14} 68 2 false [] 0 0}处理完成,通知index = [68]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 14} 68 2 false [] 0 0}处理完成,通知完成index = [68]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[68],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
0:{69}lock now
0:{69}lock end
[0][2][0] apply index = 70, commit is 70
0:{70}unlock now
0:{70}unlock end
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 14} 69 2 false [] 0 0}处理完成,通知index = [69]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 14} 69 2 false [] 0 0}处理完成,通知完成index = [69]的channel
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 14} 70 2 false [] 0 0}处理完成,通知index = [70]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 14} 70 2 false [] 0 0}处理完成,通知完成index = [70]的channel
0:{70}lock now
0:{70}lock end
0:rf.commitIndex = 70, rf.lastApplied = 70
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[70],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
kvserver[0]: pre删除通道index: 70
2023/09/23 03:26:40 2: client new get 2
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[69],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 y
kvserver[0]: begin删除通道index: 70
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 70
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
kvserver[0]: pre删除通道index: 68
kvserver[0]: begin删除通道index: 68
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 68
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 y
kvserver[0]: pre删除通道index: 69
kvserver[0]: begin删除通道index: 69
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 69
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 15},term is 2,len is 71
---------------
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:40 0: client new get 0
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:40 3: client new get 3
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:40 1: client new append x 1 4 y
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 8 y) 1867579256866231016 15},term is 2,len is 72
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 15},term is 2,len is 73
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 15},term is 2,len is 74
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 4 y) 672816327287623235 15},term is 2,len is 75
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 70, lastIndex = 0
0 begin to append 3
prevlogindex = 70, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 70
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 70
updateIndex = 70, lastIndex = 0
3更新log，长度75
[3][2][0] apply index = 66, commit is 70
3:{66}unlock now
3:{66}unlock end
3:{66}lock now
3:{66}lock end
[3][2][0] apply index = 67, commit is 70
3:{67}unlock now
3:{67}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
3 return success! num is 1
nextIndex = 71, lastIndex = 0, len = 75
3:{67}lock now
3:{67}lock end
[3][2][0] apply index = 68, commit is 70
3:{68}unlock now
3:{68}unlock end
3:{68}lock now
3:{68}lock end
[3][2][0] apply index = 69, commit is 70
3:{69}unlock now
3:{69}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
3:{69}lock now
3:{69}lock end
[3][2][0] apply index = 70, commit is 70
3:{70}unlock now
3:{70}unlock end
3:{70}lock now
3:{70}lock end
3:rf.commitIndex = 70, rf.lastApplied = 70
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
updateIndex = 70, lastIndex = 0
2更新log，长度75
[2][2][0] apply index = 66, commit is 70
2:{66}unlock now
2:{66}unlock end
2:{66}lock now
2:{66}lock end
[2][2][0] apply index = 67, commit is 70
2:{67}unlock now
2:{67}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2:{67}lock now
2:{67}lock end
[2][2][0] apply index = 68, commit is 70
2:{68}unlock now
2:{68}unlock end
2:{68}lock now
2:{68}lock end
[2][2][0] apply index = 69, commit is 70
2:{69}unlock now
2:{69}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2:{69}lock now
2:{69}lock end
[2][2][0] apply index = 70, commit is 70
2:{70}unlock now
2:{70}unlock end
2:{70}lock now
2:{70}lock end
2:rf.commitIndex = 70, rf.lastApplied = 70
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2 return success! num is 2
nextIndex = 71, lastIndex = 0, len = 75
1 max is 75
2 max is 75
0:commitIndex -> 75
[0][2][0] apply index = 71, commit is 75
0:{71}unlock now
0:{71}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 15} 71 2 false [] 0 0}处理完成,通知index = [71]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 15} 71 2 false [] 0 0}处理完成,通知完成index = [71]的channel
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[71],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
kvserver[0]: pre删除通道index: 71
kvserver[0]: begin删除通道index: 71
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 71
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:40 2: client new append x 2 6 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 6 y) 3167499095888228886 16},term is 2,len is 76
---------------
0:{71}lock now
0:{71}lock end
[0][2][0] apply index = 72, commit is 75
0:{72}unlock now
0:{72}unlock end
0:{72}lock now
0:{72}lock end
[0][2][0] apply index = 73, commit is 75
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
0:{73}unlock now
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 8 y 1867579256866231016 15} 72 2 false [] 0 0}处理完成,通知index = [72]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 4 x 4 8 y 1867579256866231016 15} 72 2 false [] 0 0}处理完成,通知完成index = [72]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[72],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y 2 true}
kvserver[0]: pre删除通道index: 72
kvserver[0]: begin删除通道index: 72
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 72
2023/09/23 03:26:40 4: client new get 4
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 16},term is 2,len is 77
---------------
0:{73}unlock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 15} 73 2 false [] 0 0}处理完成,通知index = [73]的channel
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[73],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
kvserver[0]: pre删除通道index: 73
kvserver[0]: begin删除通道index: 73
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 73
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:40 0: client new append x 0 9 y
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 9 y) 4346951758130697083 16},term is 2,len is 78
---------------
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 15} 73 2 false [] 0 0}处理完成,通知完成index = [73]的channel
0:{73}lock now
0:{73}lock end
[0][2][0] apply index = 74, commit is 75
0:{74}unlock now
0:{74}unlock end
0:{74}lock now
0:{74}lock end
2023/09/23 03:26:40 CommandApply!!!!!!!!!
[0][2][0] apply index = 75, commit is 75
0:{75}unlock now
0:{75}unlock end
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 15} 74 2 false [] 0 0}处理完成,通知index = [74]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 15} 74 2 false [] 0 0}处理完成,通知完成index = [74]的channel
2023/09/23 03:26:40 CommandApply!!!!!!!!!
2023/09/23 03:26:40 kvserver[0]: GET获取到通知结果,index=[74],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 1 x 1 4 y 672816327287623235 15} 75 2 false [] 0 0}处理完成,通知index = [75]的channel
2023/09/23 03:26:40 kvserver[0]: applyMsg: {true {Append 1 x 1 4 y 672816327287623235 15} 75 2 false [] 0 0}处理完成,通知完成index = [75]的channel
2023/09/23 03:26:40 kvserver[0]: PUTAPPEND获取到通知结果,index=[75],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y 2 true}
0:{75}lock now
0:{75}lock end
0:rf.commitIndex = 75, rf.lastApplied = 75
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
kvserver[0]: pre删除通道index: 74
kvserver[0]: begin删除通道index: 74
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 74
kvserver[0]: pre删除通道index: 75
kvserver[0]: begin删除通道index: 75
2023/09/23 03:26:40 kvserver[0]: 成功删除通道index: 75
2023/09/23 03:26:40 1: client new append x 1 5 y
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 5 y) 672816327287623235 16},term is 2,len is 79
---------------
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:40 3: client new append x 3 8 y
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 8 y) 1065774344220344240 16},term is 2,len is 80
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 75, lastIndex = 0
0 begin to append 3
prevlogindex = 75, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 75
updateIndex = 75, lastIndex = 0
2更新log，长度80
[2][2][0] apply index = 71, commit is 75
2:{71}unlock now
2:{71}unlock end
2:{71}lock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2:{71}lock end
[2][2][0] apply index = 72, commit is 75
2:{72}unlock now
2:{72}unlock end
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 75
updateIndex = 75, lastIndex = 0
3更新log，长度80
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2:{72}lock now
2:{72}lock end
[2][2][0] apply index = 73, commit is 75
2:{73}unlock now
2:{73}unlock end
2:{73}lock now
2:{73}lock end
[2][2][0] apply index = 74, commit is 75
2:{74}unlock now
2:{74}unlock end
2 return success! num is 1
nextIndex = 76, lastIndex = 0, len = 80
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2:{74}lock now
2:{74}lock end
[2][2][0] apply index = 75, commit is 75
2:{75}unlock now
2:{75}unlock end
2:{75}lock now
2:{75}lock end
2:rf.commitIndex = 75, rf.lastApplied = 75
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
[3][2][0] apply index = 71, commit is 75
3:{71}unlock now
3:{71}unlock end
3:{71}lock now
3:{71}lock end
[3][2][0] apply index = 72, commit is 75
3:{72}unlock now
3:{72}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
3:{72}lock now
3:{72}lock end
[3][2][0] apply index = 73, commit is 75
3:{73}unlock now
3:{73}unlock end
3:{73}lock now
3:{73}lock end
[3][2][0] apply index = 74, commit is 75
3:{74}unlock now
3:{74}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
3:{74}lock now
3:{74}lock end
[3][2][0] apply index = 75, commit is 75
3:{75}unlock now
3:{75}unlock end
3:{75}lock now
3:{75}lock end
3:rf.commitIndex = 75, rf.lastApplied = 75
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
3 return success! num is 2
nextIndex = 76, lastIndex = 0, len = 80
1 max is 80
2 max is 80
0:commitIndex -> 80
[0][2][0] apply index = 76, commit is 80
0:{76}unlock now
0:{76}unlock end
0:{76}lock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
0:{76}lock end
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
[0][2][0] apply index = 77, commit is 80
0:{77}unlock now
0:{77}unlock end
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 2 x 2 6 y 3167499095888228886 16} 76 2 false [] 0 0}处理完成,通知index = [76]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 2 x 2 6 y 3167499095888228886 16} 76 2 false [] 0 0}处理完成,通知完成index = [76]的channel
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[76],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y 2 true}
0:{77}lock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
0:{77}lock end
[0][2][0] apply index = 78, commit is 80
0:{78}unlock now
0:{78}unlock end
kvserver[0]: pre删除通道index: 76
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 16} 77 2 false [] 0 0}处理完成,通知index = [77]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 16} 77 2 false [] 0 0}处理完成,通知完成index = [77]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
kvserver[0]: begin删除通道index: 76
0:{78}lock now
0:{78}lock end
[0][2][0] apply index = 79, commit is 80
0:{79}unlock now
0:{79}unlock end
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 76
2023/09/23 03:26:41 2: client new get 2
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[77],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 17},term is 2,len is 81
---------------
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 0 x 0 9 y 4346951758130697083 16} 78 2 false [] 0 0}处理完成,通知index = [78]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 0 x 0 9 y 4346951758130697083 16} 78 2 false [] 0 0}处理完成,通知完成index = [78]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
kvserver[0]: pre删除通道index: 77
kvserver[0]: begin删除通道index: 77
0:{79}lock now
0:{79}lock end
[0][2][0] apply index = 80, commit is 80
0:{80}unlock now
0:{80}unlock end
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[78],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y 2 true}
kvserver[0]: pre删除通道index: 78
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 77
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 5 y 672816327287623235 16} 79 2 false [] 0 0}处理完成,通知index = [79]的channel
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 5 y 672816327287623235 16} 79 2 false [] 0 0}处理完成,通知完成index = [79]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
kvserver[0]: begin删除通道index: 78
0:{80}lock now
0:{80}lock end
0:rf.commitIndex = 80, rf.lastApplied = 80
2023/09/23 03:26:41 4: client new get 4
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 78
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 17},term is 2,len is 82
---------------
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[79],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y 2 true}
2023/09/23 03:26:41 0: client new get 0
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[0]: pre删除通道index: 79
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 17},term is 2,len is 83
---------------
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 3 x 3 8 y 1065774344220344240 16} 80 2 false [] 0 0}处理完成,通知index = [80]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 3 x 3 8 y 1065774344220344240 16} 80 2 false [] 0 0}处理完成,通知完成index = [80]的channel
kvserver[0]: begin删除通道index: 79
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[80],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y 2 true}
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 79
kvserver[0]: pre删除通道index: 80
2023/09/23 03:26:41 1: client new append x 1 6 y
kvserver[0]: begin删除通道index: 80
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 80
2023/09/23 03:26:41 3: client new get 3
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 6 y) 672816327287623235 17},term is 2,len is 84
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 17},term is 2,len is 85
---------------
4 begin to elect
4 term is 4
1:投票检查40,45,2,1,4,3
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 80, lastIndex = 0
0 begin to append 3
prevlogindex = 80, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
1 follow -> candidate
1 begin to elect
1 term is 5
4:投票检查45,40,1,2,5,4
4 vote now -> 1
1: vote num is 2
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 80
updateIndex = 80, lastIndex = 0
2更新log，长度85
[2][2][0] apply index = 76, commit is 80
2:{76}unlock now
2:{76}unlock end
2:{76}lock now
2:{76}lock end
[2][2][0] apply index = 77, commit is 80
2:{77}unlock now
2:{77}unlock end
2 return success! num is 1
nextIndex = 81, lastIndex = 0, len = 85
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2:{77}lock now
2:{77}lock end
[2][2][0] apply index = 78, commit is 80
2:{78}unlock now
2:{78}unlock end
2:{78}lock now
2:{78}lock end
[2][2][0] apply index = 79, commit is 80
2:{79}unlock now
2:{79}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2:{79}lock now
2:{79}lock end
[2][2][0] apply index = 80, commit is 80
2:{80}unlock now
2:{80}unlock end
2:{80}lock now
2:{80}lock end
2:rf.commitIndex = 80, rf.lastApplied = 80
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 80
updateIndex = 80, lastIndex = 0
3更新log，长度85
3 return success! num is 2
nextIndex = 81, lastIndex = 0, len = 85
1 max is 85
2 max is 85
0:commitIndex -> 85
[0][2][0] apply index = 81, commit is 85
0:{81}unlock now
0:{81}unlock end
0:{81}lock now
0:{81}lock end
[0][2][0] apply index = 82, commit is 85
0:{82}unlock now
0:{82}unlock end
[3][2][0] apply index = 76, commit is 80
3:{76}unlock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
3:{76}unlock end
3:{76}lock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 17} 81 2 false [] 0 0}处理完成,通知index = [81]的channel
3:{76}lock end
[3][2][0] apply index = 77, commit is 80
3:{77}unlock now
3:{77}unlock end
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
3:{77}lock now
3:{77}lock end
[3][2][0] apply index = 78, commit is 80
3:{78}unlock now
3:{78}unlock end
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 17} 81 2 false [] 0 0}处理完成,通知完成index = [81]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[81],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 17} 82 2 false [] 0 0}处理完成,通知index = [82]的channel
0:{82}lock now
0:{82}lock end
[0][2][0] apply index = 83, commit is 85
0:{83}unlock now
0:{83}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
3:{78}lock now
3:{78}lock end
[3][2][0] apply index = 79, commit is 80
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 17} 82 2 false [] 0 0}处理完成,通知完成index = [82]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
3:{79}unlock now
3:{79}unlock end
0:{83}lock now
0:{83}lock end
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[82],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
[0][2][0] apply index = 84, commit is 85
0:{84}unlock now
0:{84}unlock end
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
3:{79}lock now
3:{79}lock end
[3][2][0] apply index = 80, commit is 80
3:{80}unlock now
3:{80}unlock end
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 17} 83 2 false [] 0 0}处理完成,通知index = [83]的channel
3:{80}lock now
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 17} 83 2 false [] 0 0}处理完成,通知完成index = [83]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
0:{84}lock now
0:{84}lock end
[0][2][0] apply index = 85, commit is 85
0:{85}unlock now
0:{85}unlock end
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
kvserver[0]: pre删除通道index: 81
kvserver[0]: begin删除通道index: 81
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
kvserver[0]: pre删除通道index: 82
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[83],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 81
kvserver[0]: begin删除通道index: 82
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 82
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
kvserver[0]: pre删除通道index: 83
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 2: client new get 2
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
3:{80}lock end
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 6 y 672816327287623235 17} 84 2 false [] 0 0}处理完成,通知index = [84]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 6 y 672816327287623235 17} 84 2 false [] 0 0}处理完成,通知完成index = [84]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[84],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y 2 true}
3:rf.commitIndex = 80, rf.lastApplied = 80
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[0]: pre删除通道index: 84
0:{85}lock now
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 17} 85 2 false [] 0 0}处理完成,通知index = [85]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 17} 85 2 false [] 0 0}处理完成,通知完成index = [85]的channel
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[85],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
0:{85}lock end
0:rf.commitIndex = 85, rf.lastApplied = 85
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 4: client new get 4
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[0]: pre删除通道index: 85
kvserver[0]: begin删除通道index: 83
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 83
kvserver[0]: begin删除通道index: 84
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 84
2023/09/23 03:26:41 1: client new append x 1 7 y
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:41 0: client new append x 0 10 y
kvserver[0]: begin删除通道index: 85
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 85
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 3: client new get 3
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 18},term is 2,len is 86
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 10 y) 4346951758130697083 18},term is 2,len is 87
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 7 y) 672816327287623235 18},term is 2,len is 88
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 18},term is 2,len is 89
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 18},term is 2,len is 90
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 85, lastIndex = 0
0 begin to append 3
prevlogindex = 85, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 85
updateIndex = 85, lastIndex = 0
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 85
updateIndex = 85, lastIndex = 0
3更新log，长度90
2更新log，长度90
[3][2][0] apply index = 81, commit is 85
3:{81}unlock now
3:{81}unlock end
3:{81}lock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
3:{81}lock end
[3][2][0] apply index = 82, commit is 85
3:{82}unlock now
3:{82}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
3:{82}lock now
3:{82}lock end
[3][2][0] apply index = 83, commit is 85
3:{83}unlock now
3:{83}unlock end
[2][2][0] apply index = 81, commit is 85
2:{81}unlock now
2:{81}unlock end
2:{81}lock now
2:{81}lock end
[2][2][0] apply index = 82, commit is 85
2:{82}unlock now
2:{82}unlock end
3 return success! num is 1
nextIndex = 86, lastIndex = 0, len = 90
2 return success! num is 2
nextIndex = 86, lastIndex = 0, len = 90
1 max is 90
2 max is 90
0:commitIndex -> 90
[0][2][0] apply index = 86, commit is 90
0:{86}unlock now
0:{86}unlock end
0:{86}lock now
0:{86}lock end
[0][2][0] apply index = 87, commit is 90
0:{87}unlock now
0:{87}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 18} 86 2 false [] 0 0}处理完成,通知index = [86]的channel
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
3:{83}lock now
3:{83}lock end
[3][2][0] apply index = 84, commit is 85
3:{84}unlock now
3:{84}unlock end
3:{84}lock now
3:{84}lock end
[3][2][0] apply index = 85, commit is 85
3:{85}unlock now
3:{85}unlock end
2:{82}lock now
2:{82}lock end
[2][2][0] apply index = 83, commit is 85
2:{83}unlock now
2:{83}unlock end
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 18} 86 2 false [] 0 0}处理完成,通知完成index = [86]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
0:{87}lock now
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[86],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 CommandApply!!!!!!!!!
0:{87}lock end
[0][2][0] apply index = 88, commit is 90
0:{88}unlock now
0:{88}unlock end
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
3:{85}lock now
3:{85}lock end
3:rf.commitIndex = 85, rf.lastApplied = 85
2:{83}lock now
2:{83}lock end
[2][2][0] apply index = 84, commit is 85
2:{84}unlock now
2:{84}unlock end
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 0 x 0 10 y 4346951758130697083 18} 87 2 false [] 0 0}处理完成,通知index = [87]的channel
2:{84}lock now
2:{84}lock end
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 0 x 0 10 y 4346951758130697083 18} 87 2 false [] 0 0}处理完成,通知完成index = [87]的channel
[2][2][0] apply index = 85, commit is 85
2:{85}unlock now
2:{85}unlock end
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[87],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y 2 true}
2:{85}lock now
2:{85}lock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2:rf.commitIndex = 85, rf.lastApplied = 85
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
kvserver[0]: pre删除通道index: 86
0:{88}lock now
0:{88}lock end
[0][2][0] apply index = 89, commit is 90
0:{89}unlock now
0:{89}unlock end
kvserver[0]: pre删除通道index: 87
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 7 y 672816327287623235 18} 88 2 false [] 0 0}处理完成,通知index = [88]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 7 y 672816327287623235 18} 88 2 false [] 0 0}处理完成,通知完成index = [88]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
kvserver[0]: begin删除通道index: 86
0:{89}lock now
0:{89}lock end
[0][2][0] apply index = 90, commit is 90
0:{90}unlock now
0:{90}unlock end
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 86
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[88],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y 2 true}
kvserver[0]: pre删除通道index: 88
kvserver[0]: begin删除通道index: 88
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 88
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 1: client new append x 1 8 y
kvserver[0]: begin删除通道index: 87
2023/09/23 03:26:41 4: client new append x 4 9 y
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 87
2023/09/23 03:26:41 0: client new get 0
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 18} 89 2 false [] 0 0}处理完成,通知index = [89]的channel
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 19},term is 2,len is 91
---------------
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 18} 89 2 false [] 0 0}处理完成,通知完成index = [89]的channel
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[89],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 8 y) 672816327287623235 19},term is 2,len is 92
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 9 y) 1867579256866231016 19},term is 2,len is 93
---------------
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 18} 90 2 false [] 0 0}处理完成,通知index = [90]的channel
0:{90}lock now
0:{90}lock end
0:rf.commitIndex = 90, rf.lastApplied = 90
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[0]: pre删除通道index: 89
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 18} 90 2 false [] 0 0}处理完成,通知完成index = [90]的channel
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[90],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
kvserver[0]: begin删除通道index: 89
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 89
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
kvserver[0]: pre删除通道index: 90
kvserver[0]: begin删除通道index: 90
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 90
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 2: client new get 2
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 19},term is 2,len is 94
---------------
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 3: client new get 3
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 19},term is 2,len is 95
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 90, lastIndex = 0
0 begin to append 3
prevlogindex = 90, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 90
updateIndex = 90, lastIndex = 0
2更新log，长度95
2 return success! num is 1
nextIndex = 91, lastIndex = 0, len = 95
[2][2][0] apply index = 86, commit is 90
2:{86}unlock now
2:{86}unlock end
2:{86}lock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2:{86}lock end
[2][2][0] apply index = 87, commit is 90
2:{87}unlock now
2:{87}unlock end
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2:{87}lock now
2:{87}lock end
[2][2][0] apply index = 88, commit is 90
2:{88}unlock now
2:{88}unlock end
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 90
updateIndex = 90, lastIndex = 0
3更新log，长度95
[3][2][0] apply index = 86, commit is 90
3:{86}unlock now
3:{86}unlock end
3:{86}lock now
3:{86}lock end
[3][2][0] apply index = 87, commit is 90
3:{87}unlock now
3:{87}unlock end
3 return success! num is 2
nextIndex = 91, lastIndex = 0, len = 95
1 max is 95
2 max is 95
0:commitIndex -> 95
[0][2][0] apply index = 91, commit is 95
0:{91}unlock now
0:{91}unlock end
0:{91}lock now
0:{91}lock end
[0][2][0] apply index = 92, commit is 95
0:{92}unlock now
0:{92}unlock end
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
3:{87}lock now
3:{87}lock end
[3][2][0] apply index = 88, commit is 90
3:{88}unlock now
3:{88}unlock end
2:{88}lock now
2:{88}lock end
[2][2][0] apply index = 89, commit is 90
2:{89}unlock now
2:{89}unlock end
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 19} 91 2 false [] 0 0}处理完成,通知index = [91]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 19} 91 2 false [] 0 0}处理完成,通知完成index = [91]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[91],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
0:{92}lock now
0:{92}lock end
[0][2][0] apply index = 93, commit is 95
0:{93}unlock now
0:{93}unlock end
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 8 y 672816327287623235 19} 92 2 false [] 0 0}处理完成,通知index = [92]的channel
2:{89}lock now
2:{89}lock end
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
3:{88}lock now
3:{88}lock end
[3][2][0] apply index = 89, commit is 90
3:{89}unlock now
3:{89}unlock end
[2][2][0] apply index = 90, commit is 90
2:{90}unlock now
2:{90}unlock end
2:{90}lock now
2:{90}lock end
2:rf.commitIndex = 90, rf.lastApplied = 90
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 8 y 672816327287623235 19} 92 2 false [] 0 0}处理完成,通知完成index = [92]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
kvserver[0]: pre删除通道index: 91
kvserver[0]: begin删除通道index: 91
0:{93}lock now
0:{93}lock end
[0][2][0] apply index = 94, commit is 95
0:{94}unlock now
0:{94}unlock end
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[92],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y 2 true}
kvserver[0]: pre删除通道index: 92
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 91
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:41 0: client new append x 0 11 y
3:{89}lock now
3:{89}lock end
[3][2][0] apply index = 90, commit is 90
3:{90}unlock now
3:{90}unlock end
3:{90}lock now
3:{90}lock end
3:rf.commitIndex = 90, rf.lastApplied = 90
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 4 x 4 9 y 1867579256866231016 19} 93 2 false [] 0 0}处理完成,通知index = [93]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 4 x 4 9 y 1867579256866231016 19} 93 2 false [] 0 0}处理完成,通知完成index = [93]的channel
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[93],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y 2 true}
kvserver[0]: begin删除通道index: 92
0:{94}lock now
0:{94}lock end
[0][2][0] apply index = 95, commit is 95
0:{95}unlock now
0:{95}unlock end
kvserver[0]: pre删除通道index: 93
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 92
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2023/09/23 03:26:41 1: client new append x 1 9 y
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 11 y) 4346951758130697083 20},term is 2,len is 96
---------------
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 19} 94 2 false [] 0 0}处理完成,通知index = [94]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 19} 94 2 false [] 0 0}处理完成,通知完成index = [94]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 19} 95 2 false [] 0 0}处理完成,通知index = [95]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 19} 95 2 false [] 0 0}处理完成,通知完成index = [95]的channel
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[95],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[0]: pre删除通道index: 95
kvserver[0]: begin删除通道index: 95
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 95
0:{95}lock now
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[94],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
kvserver[0]: pre删除通道index: 94
kvserver[0]: begin删除通道index: 94
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 94
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 2: client new get 2
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 9 y) 672816327287623235 20},term is 2,len is 97
---------------
0:{95}lock end
0:rf.commitIndex = 95, rf.lastApplied = 95
kvserver[0]: begin删除通道index: 93
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 93
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 3: client new append x 3 9 y
2023/09/23 03:26:41 4: client new get 4
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 20},term is 2,len is 98
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 9 y) 1065774344220344240 20},term is 2,len is 99
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 20},term is 2,len is 100
---------------
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 95, lastIndex = 0
0 begin to append 3
prevlogindex = 95, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：3节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 95
updateIndex = 95, lastIndex = 0
3更新log，长度100
测试：2节点term为2，leader发送term为2, 接收5个, PrevLogIndex is 95
updateIndex = 95, lastIndex = 0
3 return success! num is 1
nextIndex = 96, lastIndex = 0, len = 100
[3][2][0] apply index = 91, commit is 95
3:{91}unlock now
3:{91}unlock end
3:{91}lock now
3:{91}lock end
[3][2][0] apply index = 92, commit is 95
3:{92}unlock now
3:{92}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
3:{92}lock now
3:{92}lock end
[3][2][0] apply index = 93, commit is 95
3:{93}unlock now
3:{93}unlock end
3:{93}lock now
3:{93}lock end
[3][2][0] apply index = 94, commit is 95
3:{94}unlock now
3:{94}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
3:{94}lock now
3:{94}lock end
[3][2][0] apply index = 95, commit is 95
3:{95}unlock now
3:{95}unlock end
3:{95}lock now
3:{95}lock end
3:rf.commitIndex = 95, rf.lastApplied = 95
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2更新log，长度100
[2][2][0] apply index = 91, commit is 95
2:{91}unlock now
2 return success! num is 2
nextIndex = 96, lastIndex = 0, len = 100
1 max is 100
2 max is 100
0:commitIndex -> 100
[0][2][0] apply index = 96, commit is 100
0:{96}unlock now
0:{96}unlock end
0:{96}lock now
0:{96}lock end
[0][2][0] apply index = 97, commit is 100
0:{97}unlock now
0:{97}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 0 x 0 11 y 4346951758130697083 20} 96 2 false [] 0 0}处理完成,通知index = [96]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 0 x 0 11 y 4346951758130697083 20} 96 2 false [] 0 0}处理完成,通知完成index = [96]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 9 y 672816327287623235 20} 97 2 false [] 0 0}处理完成,通知index = [97]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 1 x 1 9 y 672816327287623235 20} 97 2 false [] 0 0}处理完成,通知完成index = [97]的channel
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[97],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y 2 true}
kvserver[0]: pre删除通道index: 97
kvserver[0]: begin删除通道index: 97
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 97
2:{91}unlock end
2:{91}lock now
2:{91}lock end
[2][2][0] apply index = 92, commit is 95
2:{92}unlock now
2:{92}unlock end
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[96],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 y 2 true}
kvserver[0]: pre删除通道index: 96
kvserver[0]: begin删除通道index: 96
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 96
2023/09/23 03:26:41 0: client new append x 0 12 y
0:{97}lock now
0:{97}lock end
[0][2][0] apply index = 98, commit is 100
0:{98}unlock now
0:{98}unlock end
0:{98}lock now
0:{98}lock end
[0][2][0] apply index = 99, commit is 100
0:{99}unlock now
0:{99}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 20} 98 2 false [] 0 0}处理完成,通知index = [98]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 20} 98 2 false [] 0 0}处理完成,通知完成index = [98]的channel
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 3 x 3 9 y 1065774344220344240 20} 99 2 false [] 0 0}处理完成,通知index = [99]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Append 3 x 3 9 y 1065774344220344240 20} 99 2 false [] 0 0}处理完成,通知完成index = [99]的channel
0:{99}lock now
0:{99}lock end
[0][2][0] apply index = 100, commit is 100
0:{100}unlock now
0:{100}unlock end
0:{100}lock now
0:{100}lock end
0:rf.commitIndex = 100, rf.lastApplied = 100
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 20} 100 2 false [] 0 0}处理完成,通知index = [100]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 20} 100 2 false [] 0 0}处理完成,通知完成index = [100]的channel
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[100],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
kvserver[0]: pre删除通道index: 100
kvserver[0]: begin删除通道index: 100
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 100
2023/09/23 03:26:41 1: client new get 1
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2:{92}lock now
2:{92}lock end
[2][2][0] apply index = 93, commit is 95
2:{93}unlock now
2:{93}unlock end
2:{93}lock now
2:{93}lock end
[2][2][0] apply index = 94, commit is 95
2:{94}unlock now
2:{94}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2:{94}lock now
2:{94}lock end
[2][2][0] apply index = 95, commit is 95
2:{95}unlock now
2:{95}unlock end
2:{95}lock now
2:{95}lock end
2:rf.commitIndex = 95, rf.lastApplied = 95
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[98],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
kvserver[0]: pre删除通道index: 98
kvserver[0]: begin删除通道index: 98
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 98
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND获取到通知结果,index=[99],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y 2 true}
kvserver[0]: pre删除通道index: 99
kvserver[0]: begin删除通道index: 99
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 99
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 12 y) 4346951758130697083 21},term is 2,len is 101
---------------
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 2: client new get 2
2023/09/23 03:26:41 3: client new get 3
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:41 4: client new append x 4 10 y
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 21},term is 2,len is 102
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 21},term is 2,len is 103
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 21},term is 2,len is 104
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 1867579256866231016 21},term is 2,len is 105
---------------
测试：1节点term为5，leader发送term为2, 接收45个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
0 AppOutOfDate follow -> candidate
测试：1节点term为5，leader发送term为2, 接收25个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
测试：1节点term为5，leader发送term为2, 接收15个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
测试：1节点term为5，leader发送term为2, 接收30个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
测试：1节点term为5，leader发送term为2, 接收20个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
测试：1节点term为5，leader发送term为2, 接收55个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
测试：1节点term为5，leader发送term为2, 接收35个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
3:投票检查100,40,2,2,5,2
测试：1节点term为5，leader发送term为2, 接收5个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
测试：1节点term为5，leader发送term为2, 接收10个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
0:投票检查105,40,2,2,5,5
2:投票检查100,40,2,2,5,2
测试：1节点term为5，leader发送term为2, 接收60个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
测试：1节点term为5，leader发送term为2, 接收50个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
测试：1节点term为5，leader发送term为2, 接收40个, PrevLogIndex is 40
网络分区AppOutOfDate,reply is 1
0 follow -> candidate
0 begin to elect
0 term is 6
3:投票检查100,105,2,2,6,5
3 vote now -> 0
0: vote num is 2
1:投票检查40,105,2,2,6,5
1 vote now -> 0
2:投票检查100,105,2,2,6,5
2 vote now -> 0
0: vote num is 3
0 is leader
0: vote num is 1
0 begin to append 1
prevlogindex = 105, lastIndex = 0
0 begin to append 2
prevlogindex = 105, lastIndex = 0
0 begin to append 3
prevlogindex = 105, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：3节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 100
测试：1节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 40
reply XLen is 41
0 nextIndex change to 41
nextIndex = 41, lastIndex = 0, len = 105
测试：2节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 100
reply XLen is 101
0 nextIndex change to 101
nextIndex = 101, lastIndex = 0, len = 105
reply XLen is 101
0 nextIndex change to 101
nextIndex = 101, lastIndex = 0, len = 105
0 begin to append 1
prevlogindex = 40, lastIndex = 0
0 begin to append 2
prevlogindex = 100, lastIndex = 0
0 begin to append 3
prevlogindex = 100, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：1节点term为6，leader发送term为6, 接收65个, PrevLogIndex is 40
updateIndex = 40, lastIndex = 0
1更新log，长度105
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 100
[1][6][0] apply index = 31, commit is 100
1:{31}unlock now
1:{31}unlock end
1:{31}lock now
1:{31}lock end
[1][6][0] apply index = 32, commit is 100
1:{32}unlock now
1:{32}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
1:{32}lock now
1:{32}lock end
[1][6][0] apply index = 33, commit is 100
1:{33}unlock now
1:{33}unlock end
1:{33}lock now
1:{33}lock end
[1][6][0] apply index = 34, commit is 100
1:{34}unlock now
1:{34}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 y
1:{34}lock now
1:{34}lock end
[1][6][0] apply index = 35, commit is 100
1:{35}unlock now
1:{35}unlock end
1:{35}lock now
1:{35}lock end
[1][6][0] apply index = 36, commit is 100
1:{36}unlock now
1:{36}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 y
1:{36}lock now
1:{36}lock end
[1][6][0] apply index = 37, commit is 100
1:{37}unlock now
1:{37}unlock end
1:{37}lock now
1:{37}lock end
[1][6][0] apply index = 38, commit is 100
1:{38}unlock now
1:{38}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 y
1:{38}lock now
1:{38}lock end
[1][6][0] apply index = 39, commit is 100
1:{39}unlock now
1:{39}unlock end
1:{39}lock now
1:{39}lock end
[1][6][0] apply index = 40, commit is 100
1:{40}unlock now
1:{40}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
1:{40}lock now
1:{40}lock end
[1][6][0] apply index = 41, commit is 100
1:{41}unlock now
1:{41}unlock end
1:{41}lock now
1:{41}lock end
[1][6][0] apply index = 42, commit is 100
1:{42}unlock now
1:{42}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
1:{42}lock now
1:{42}lock end
[1][6][0] apply index = 43, commit is 100
1:{43}unlock now
1:{43}unlock end
1:{43}lock now
1:{43}lock end
[1][6][0] apply index = 44, commit is 100
1:{44}unlock now
1:{44}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
1:{44}lock now
1:{44}lock end
[1][6][0] apply index = 45, commit is 100
1:{45}unlock now
1:{45}unlock end
1:{45}lock now
1:{45}lock end
[1][6][0] apply index = 46, commit is 100
1:{46}unlock now
1:{46}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
1:{46}lock now
1:{46}lock end
[1][6][0] apply index = 47, commit is 100
1:{47}unlock now
1:{47}unlock end
1:{47}lock now
1:{47}lock end
[1][6][0] apply index = 48, commit is 100
1:{48}unlock now
1:{48}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
1:{48}lock now
1:{48}lock end
[1][6][0] apply index = 49, commit is 100
1:{49}unlock now
1:{49}unlock end
1:{49}lock now
1:{49}lock end
[1][6][0] apply index = 50, commit is 100
1:{50}unlock now
1:{50}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
1:{50}lock now
1:{50}lock end
[1][6][0] apply index = 51, commit is 100
1:{51}unlock now
1:{51}unlock end
1:{51}lock now
1:{51}lock end
[1][6][0] apply index = 52, commit is 100
1:{52}unlock now
1:{52}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
1:{52}lock now
1:{52}lock end
[1][6][0] apply index = 53, commit is 100
1:{53}unlock now
1:{53}unlock end
1:{53}lock now
1:{53}lock end
[1][6][0] apply index = 54, commit is 100
1:{54}unlock now
1:{54}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
1:{54}lock now
1:{54}lock end
[1][6][0] apply index = 55, commit is 100
1:{55}unlock now
1:{55}unlock end
1:{55}lock now
1:{55}lock end
[1][6][0] apply index = 56, commit is 100
1:{56}unlock now
1:{56}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
1:{56}lock now
1:{56}lock end
[1][6][0] apply index = 57, commit is 100
1:{57}unlock now
1:{57}unlock end
1:{57}lock now
1:{57}lock end
[1][6][0] apply index = 58, commit is 100
1:{58}unlock now
1:{58}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
1:{58}lock now
1:{58}lock end
[1][6][0] apply index = 59, commit is 100
1:{59}unlock now
1:{59}unlock end
1:{59}lock now
1:{59}lock end
[1][6][0] apply index = 60, commit is 100
1:{60}unlock now
1:{60}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
1:{60}lock now
1:{60}lock end
[1][6][0] apply index = 61, commit is 100
1:{61}unlock now
1:{61}unlock end
1:{61}lock now
1:{61}lock end
[1][6][0] apply index = 62, commit is 100
1:{62}unlock now
1:{62}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
1:{62}lock now
1:{62}lock end
[1][6][0] apply index = 63, commit is 100
1:{63}unlock now
1:{63}unlock end
1:{63}lock now
1:{63}lock end
[1][6][0] apply index = 64, commit is 100
1:{64}unlock now
1:{64}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
1:{64}lock now
1:{64}lock end
[1][6][0] apply index = 65, commit is 100
1:{65}unlock now
1:{65}unlock end
1:{65}lock now
1:{65}lock end
[1][6][0] apply index = 66, commit is 100
1:{66}unlock now
1:{66}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
1:{66}lock now
1:{66}lock end
[1][6][0] apply index = 67, commit is 100
1:{67}unlock now
1:{67}unlock end
1:{67}lock now
1:{67}lock end
[1][6][0] apply index = 68, commit is 100
1:{68}unlock now
1:{68}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
1:{68}lock now
1:{68}lock end
[1][6][0] apply index = 69, commit is 100
1:{69}unlock now
1:{69}unlock end
1:{69}lock now
1:{69}lock end
[1][6][0] apply index = 70, commit is 100
1:{70}unlock now
1:{70}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
1:{70}lock now
1:{70}lock end
[1][6][0] apply index = 71, commit is 100
1:{71}unlock now
1:{71}unlock end
1:{71}lock now
1:{71}lock end
[1][6][0] apply index = 72, commit is 100
1:{72}unlock now
1:{72}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
1:{72}lock now
1:{72}lock end
[1][6][0] apply index = 73, commit is 100
1:{73}unlock now
1:{73}unlock end
1:{73}lock now
1:{73}lock end
[1][6][0] apply index = 74, commit is 100
1:{74}unlock now
1:{74}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
1:{74}lock now
1:{74}lock end
[1][6][0] apply index = 75, commit is 100
1:{75}unlock now
1:{75}unlock end
1:{75}lock now
1:{75}lock end
[1][6][0] apply index = 76, commit is 100
1:{76}unlock now
1:{76}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
1:{76}lock now
1:{76}lock end
[1][6][0] apply index = 77, commit is 100
1:{77}unlock now
1:{77}unlock end
1:{77}lock now
1:{77}lock end
[1][6][0] apply index = 78, commit is 100
1:{78}unlock now
1:{78}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
1:{78}lock now
1:{78}lock end
[1][6][0] apply index = 79, commit is 100
1:{79}unlock now
1:{79}unlock end
1:{79}lock now
1:{79}lock end
[1][6][0] apply index = 80, commit is 100
1:{80}unlock now
1:{80}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
1:{80}lock now
1:{80}lock end
[1][6][0] apply index = 81, commit is 100
1:{81}unlock now
1:{81}unlock end
1:{81}lock now
1:{81}lock end
[1][6][0] apply index = 82, commit is 100
1:{82}unlock now
1:{82}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
1:{82}lock now
1:{82}lock end
[1][6][0] apply index = 83, commit is 100
1:{83}unlock now
1:{83}unlock end
1:{83}lock now
1:{83}lock end
[1][6][0] apply index = 84, commit is 100
1:{84}unlock now
1:{84}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
1:{84}lock now
1:{84}lock end
[1][6][0] apply index = 85, commit is 100
1:{85}unlock now
1:{85}unlock end
1:{85}lock now
1:{85}lock end
[1][6][0] apply index = 86, commit is 100
1:{86}unlock now
1:{86}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
1:{86}lock now
1:{86}lock end
[1][6][0] apply index = 87, commit is 100
1:{87}unlock now
1:{87}unlock end
1:{87}lock now
1:{87}lock end
[1][6][0] apply index = 88, commit is 100
1:{88}unlock now
1:{88}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
1:{88}lock now
1:{88}lock end
[1][6][0] apply index = 89, commit is 100
1:{89}unlock now
1:{89}unlock end
1:{89}lock now
1:{89}lock end
[1][6][0] apply index = 90, commit is 100
1:{90}unlock now
1:{90}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
1:{90}lock now
1:{90}lock end
[1][6][0] apply index = 91, commit is 100
1:{91}unlock now
1:{91}unlock end
1:{91}lock now
1:{91}lock end
[1][6][0] apply index = 92, commit is 100
1:{92}unlock now
1:{92}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
1:{92}lock now
1:{92}lock end
[1][6][0] apply index = 93, commit is 100
1:{93}unlock now
1:{93}unlock end
1:{93}lock now
1:{93}lock end
[1][6][0] apply index = 94, commit is 100
1:{94}unlock now
1:{94}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
1:{94}lock now
1:{94}lock end
[1][6][0] apply index = 95, commit is 100
1:{95}unlock now
1:{95}unlock end
1:{95}lock now
1:{95}lock end
[1][6][0] apply index = 96, commit is 100
1:{96}unlock now
1:{96}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 y
1:{96}lock now
1:{96}lock end
[1][6][0] apply index = 97, commit is 100
1:{97}unlock now
1:{97}unlock end
1:{97}lock now
1:{97}lock end
[1][6][0] apply index = 98, commit is 100
1:{98}unlock now
1:{98}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
1:{98}lock now
1:{98}lock end
[1][6][0] apply index = 99, commit is 100
1:{99}unlock now
1:{99}unlock end
1:{99}lock now
1:{99}lock end
[1][6][0] apply index = 100, commit is 100
1:{100}unlock now
1:{100}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
1:{100}lock now
1:{100}lock end
1:rf.commitIndex = 100, rf.lastApplied = 100
1 return success! num is 1
nextIndex = 41, lastIndex = 0, len = 105
测试：3节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 100
updateIndex = 100, lastIndex = 0
3更新log，长度105
[3][6][0] apply index = 96, commit is 100
3:{96}unlock now
3:{96}unlock end
3:{96}lock now
3:{96}lock end
[3][6][0] apply index = 97, commit is 100
3:{97}unlock now
3:{97}unlock end
3 return success! num is 2
nextIndex = 101, lastIndex = 0, len = 105
1 max is 105
2 max is 105
return because max = 105, last = 0, 2 != 6
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
3:{97}lock now
3:{97}lock end
[3][6][0] apply index = 98, commit is 100
3:{98}unlock now
3:{98}unlock end
3:{98}lock now
3:{98}lock end
[3][6][0] apply index = 99, commit is 100
3:{99}unlock now
3:{99}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
3:{99}lock now
3:{99}lock end
[3][6][0] apply index = 100, commit is 100
3:{100}unlock now
3:{100}unlock end
3:{100}lock now
3:{100}lock end
3:rf.commitIndex = 100, rf.lastApplied = 100
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
updateIndex = 100, lastIndex = 0
2更新log，长度105
[2][6][0] apply index = 96, commit is 100
2:{96}unlock now
2:{96}unlock end
2:{96}lock now
2:{96}lock end
[2][6][0] apply index = 97, commit is 100
2:{97}unlock now
2:{97}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2:{97}lock now
2:{97}lock end
[2][6][0] apply index = 98, commit is 100
2:{98}unlock now
2:{98}unlock end
2:{98}lock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2:{98}lock end
[2][6][0] apply index = 99, commit is 100
2:{99}unlock now
2:{99}unlock end
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2 return success! num is 1
nextIndex = 101, lastIndex = 0, len = 105
2:{99}lock now
2:{99}lock end
[2][6][0] apply index = 100, commit is 100
2:{100}unlock now
2:{100}unlock end
2:{100}lock now
2023/09/23 03:26:41 CommandApply!!!!!!!!!
2:{100}lock end
2:rf.commitIndex = 100, rf.lastApplied = 100
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
0 begin to append 1
prevlogindex = 105, lastIndex = 0
0 begin to append 2
prevlogindex = 105, lastIndex = 0
0 begin to append 3
prevlogindex = 105, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：3节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
测试：1节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
3:rf.commitIndex = 100, rf.lastApplied = 100
3 return success! num is 1
nextIndex = 106, lastIndex = 0, len = 105
测试：2节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
2:rf.commitIndex = 100, rf.lastApplied = 100
1:rf.commitIndex = 100, rf.lastApplied = 100
1 return success! num is 2
nextIndex = 106, lastIndex = 0, len = 105
1 max is 105
2 max is 105
return because max = 105, last = 0, 2 != 6
2 return success! num is 1
nextIndex = 106, lastIndex = 0, len = 105
4 follow -> candidate
4 begin to elect
4 term is 6
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND处理请求超时: {Append 0 x 0 12 y 4346951758130697083 21}
kvserver[0]: pre删除通道index: 101
kvserver[0]: begin删除通道index: 101
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 101
2023/09/23 03:26:41 kvserver[0]: GET处理请求超时: {Get 1  672816327287623235 21}
kvserver[0]: pre删除通道index: 102
kvserver[0]: begin删除通道index: 102
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 102
2023/09/23 03:26:41 kvserver[0]: GET处理请求超时: {Get 2  3167499095888228886 21}
kvserver[0]: pre删除通道index: 103
kvserver[0]: begin删除通道index: 103
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 103
2023/09/23 03:26:41 kvserver[0]: GET处理请求超时: {Get 3  1065774344220344240 21}
kvserver[0]: pre删除通道index: 104
kvserver[0]: begin删除通道index: 104
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 104
2023/09/23 03:26:41 kvserver[0]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 1867579256866231016 21}
kvserver[0]: pre删除通道index: 105
kvserver[0]: begin删除通道index: 105
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 105
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 21},term is 6,len is 106
---------------
0 begin to append 1
prevlogindex = 105, lastIndex = 0
0 begin to append 2
prevlogindex = 105, lastIndex = 0
0 begin to append 3
prevlogindex = 105, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：1节点term为6，leader发送term为6, 接收1个, PrevLogIndex is 105
updateIndex = 105, lastIndex = 0
1更新log，长度106
测试：3节点term为6，leader发送term为6, 接收1个, PrevLogIndex is 105
updateIndex = 105, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收1个, PrevLogIndex is 105
updateIndex = 105, lastIndex = 0
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 12 y) 4346951758130697083 21},term is 6,len is 107
---------------
2更新log，长度106
1:rf.commitIndex = 100, rf.lastApplied = 100
2:rf.commitIndex = 100, rf.lastApplied = 100
3更新log，长度106
3:rf.commitIndex = 100, rf.lastApplied = 100
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 21},term is 6,len is 108
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 21},term is 6,len is 109
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 1867579256866231016 21},term is 6,len is 110
---------------
1 return success! num is 1
nextIndex = 106, lastIndex = 0, len = 110
2 return success! num is 2
nextIndex = 106, lastIndex = 0, len = 110
1 max is 106
2 max is 106
0:commitIndex -> 106
3 return success! num is 1
nextIndex = 106, lastIndex = 0, len = 110
[0][6][0] apply index = 101, commit is 106
0:{101}unlock now
0:{101}unlock end
0:{101}lock now
0:{101}lock end
[0][6][0] apply index = 102, commit is 106
0:{102}unlock now
0:{102}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
0:{102}lock now
0:{102}lock end
[0][6][0] apply index = 103, commit is 106
0:{103}unlock now
0:{103}unlock end
0:{103}lock now
0:{103}lock end
[0][6][0] apply index = 104, commit is 106
0:{104}unlock now
0:{104}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
0:{104}lock now
0:{104}lock end
[0][6][0] apply index = 105, commit is 106
0:{105}unlock now
0:{105}unlock end
0:{105}lock now
0:{105}lock end
[0][6][0] apply index = 106, commit is 106
0:{106}unlock now
0:{106}unlock end
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:41 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 21} 106 6 false [] 0 0}处理完成,通知index = [106]的channel
2023/09/23 03:26:41 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 21} 106 6 false [] 0 0}处理完成,通知完成index = [106]的channel
0:{106}lock now
0:{106}lock end
0:rf.commitIndex = 106, rf.lastApplied = 106
2023/09/23 03:26:41 kvserver[0]: GET获取到通知结果,index=[106],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
kvserver[0]: pre删除通道index: 106
kvserver[0]: begin删除通道index: 106
2023/09/23 03:26:41 kvserver[0]: 成功删除通道index: 106
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:41 1: client new get 1
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 22},term is 6,len is 111
---------------
0 begin to append 1
prevlogindex = 106, lastIndex = 0
0 begin to append 2
prevlogindex = 106, lastIndex = 0
0 begin to append 3
prevlogindex = 106, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 106
updateIndex = 106, lastIndex = 0
2更新log，长度111
2 return success! num is 1
nextIndex = 107, lastIndex = 0, len = 111
[2][6][0] apply index = 101, commit is 106
2:{101}unlock now
2:{101}unlock end
2:{101}lock now
2:{101}lock end
[2][6][0] apply index = 102, commit is 106
2:{102}unlock now
2:{102}unlock end
测试：3节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 106
updateIndex = 106, lastIndex = 0
3更新log，长度111
3 return success! num is 2
nextIndex = 107, lastIndex = 0, len = 111
1 max is 111
2 max is 111
0:commitIndex -> 111
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2:{102}lock now
2:{102}lock end
[2][6][0] apply index = 103, commit is 106
2:{103}unlock now
2:{103}unlock end
2:{103}lock now
2:{103}lock end
[2][6][0] apply index = 104, commit is 106
2:{104}unlock now
2:{104}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
[3][6][0] apply index = 101, commit is 106
3:{101}unlock now
3:{101}unlock end
3:{101}lock now
3:{101}lock end
[3][6][0] apply index = 102, commit is 106
3:{102}unlock now
3:{102}unlock end
[0][6][0] apply index = 107, commit is 111
0:{107}unlock now
0:{107}unlock end
0:{107}lock now
0:{107}lock end
[0][6][0] apply index = 108, commit is 111
0:{108}unlock now
0:{108}unlock end
2:{104}lock now
2:{104}lock end
[2][6][0] apply index = 105, commit is 106
2:{105}unlock now
2:{105}unlock end
2:{105}lock now
2:{105}lock end
[2][6][0] apply index = 106, commit is 106
2:{106}unlock now
2:{106}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
3:{102}lock now
3:{102}lock end
[3][6][0] apply index = 103, commit is 106
3:{103}unlock now
3:{103}unlock end
3:{103}lock now
3:{103}lock end
[3][6][0] apply index = 104, commit is 106
3:{104}unlock now
3:{104}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
3:{104}lock now
3:{104}lock end
[3][6][0] apply index = 105, commit is 106
3:{105}unlock now
3:{105}unlock end
3:{105}lock now
3:{105}lock end
[3][6][0] apply index = 106, commit is 106
3:{106}unlock now
3:{106}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
3:{106}lock now
3:{106}lock end
3:rf.commitIndex = 106, rf.lastApplied = 106
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 21} 108 6 false [] 0 0}处理完成,通知index = [108]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 21} 108 6 false [] 0 0}处理完成,通知完成index = [108]的channel
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[108],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
kvserver[0]: pre删除通道index: 108
kvserver[0]: begin删除通道index: 108
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 108
2:{106}lock now
2:{106}lock end
2:rf.commitIndex = 106, rf.lastApplied = 106
0:{108}lock now
0:{108}lock end
[0][6][0] apply index = 109, commit is 111
0:{109}unlock now
0:{109}unlock end
0:{109}lock now
0:{109}lock end
[0][6][0] apply index = 110, commit is 111
0:{110}unlock now
0:{110}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 21} 109 6 false [] 0 0}处理完成,通知index = [109]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 21} 109 6 false [] 0 0}处理完成,通知完成index = [109]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[109],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
kvserver[0]: pre删除通道index: 109
kvserver[0]: begin删除通道index: 109
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 109
0:{110}lock now
0:{110}lock end
[0][6][0] apply index = 111, commit is 111
0:{111}unlock now
0:{111}unlock end
0:{111}lock now
0:{111}lock end
0:rf.commitIndex = 111, rf.lastApplied = 111
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 3: client new get 3
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 2: client new append x 2 7 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 22} 111 6 false [] 0 0}处理完成,通知index = [111]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 22} 111 6 false [] 0 0}处理完成,通知完成index = [111]的channel
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[111],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
kvserver[0]: pre删除通道index: 111
kvserver[0]: begin删除通道index: 111
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 111
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 22},term is 6,len is 112
---------------
测试：1节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 106
updateIndex = 106, lastIndex = 0
1更新log，长度111
[1][6][0] apply index = 101, commit is 106
1:{101}unlock now
1:{101}unlock end
1:{101}lock now
1:{101}lock end
[1][6][0] apply index = 102, commit is 106
1:{102}unlock now
1:{102}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
1:{102}lock now
1:{102}lock end
[1][6][0] apply index = 103, commit is 106
1:{103}unlock now
1:{103}unlock end
1:{103}lock now
1:{103}lock end
[1][6][0] apply index = 104, commit is 106
1:{104}unlock now
1:{104}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
1:{104}lock now
1:{104}lock end
[1][6][0] apply index = 105, commit is 106
1:{105}unlock now
1:{105}unlock end
1:{105}lock now
1:{105}lock end
[1][6][0] apply index = 106, commit is 106
1:{106}unlock now
1:{106}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
1:{106}lock now
1:{106}lock end
1:rf.commitIndex = 106, rf.lastApplied = 106
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:42 1: client new append x 1 10 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 7 y) 3167499095888228886 22},term is 6,len is 113
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 10 y) 672816327287623235 23},term is 6,len is 114
---------------
1 return success! num is 1
nextIndex = 107, lastIndex = 0, len = 114
0 begin to append 1
prevlogindex = 111, lastIndex = 0
0 begin to append 2
prevlogindex = 111, lastIndex = 0
0 begin to append 3
prevlogindex = 111, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：3节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 111
updateIndex = 111, lastIndex = 0
3更新log，长度114
测试：1节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 111
updateIndex = 111, lastIndex = 0
1更新log，长度114
[1][6][0] apply index = 107, commit is 111
1:{107}unlock now
1:{107}unlock end
1:{107}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
1:{107}lock end
[1][6][0] apply index = 108, commit is 111
1:{108}unlock now
1:{108}unlock end
1:{108}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
1:{108}lock end
[1][6][0] apply index = 109, commit is 111
1:{109}unlock now
1:{109}unlock end
[3][6][0] apply index = 107, commit is 111
3:{107}unlock now
3:{107}unlock end
3:{107}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
3:{107}lock end
[3][6][0] apply index = 108, commit is 111
3:{108}unlock now
3:{108}unlock end
3:{108}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
3:{108}lock end
[3][6][0] apply index = 109, commit is 111
3:{109}unlock now
3:{109}unlock end
3 return success! num is 1
nextIndex = 112, lastIndex = 0, len = 114
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
3:{109}lock now
3:{109}lock end
[3][6][0] apply index = 110, commit is 111
3:{110}unlock now
3:{110}unlock end
1 return success! num is 2
nextIndex = 112, lastIndex = 0, len = 114
1 max is 114
2 max is 114
0:commitIndex -> 114
测试：2节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 111
updateIndex = 111, lastIndex = 0
2更新log，长度114
[0][6][0] apply index = 112, commit is 114
0:{112}unlock now
0:{112}unlock end
0:{112}lock now
0:{112}lock end
[0][6][0] apply index = 113, commit is 114
0:{113}unlock now
0:{113}unlock end
[2][6][0] apply index = 107, commit is 111
2:{107}unlock now
2:{107}unlock end
2:{107}lock now
2:{107}lock end
[2][6][0] apply index = 108, commit is 111
2:{108}unlock now
2:{108}unlock end
2 return success! num is 1
nextIndex = 112, lastIndex = 0, len = 114
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
1:{109}lock now
1:{109}lock end
[1][6][0] apply index = 110, commit is 111
1:{110}unlock now
1:{110}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
3:{110}lock now
3:{110}lock end
[3][6][0] apply index = 111, commit is 111
3:{111}unlock now
3:{111}unlock end
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2:{108}lock now
2:{108}lock end
[2][6][0] apply index = 109, commit is 111
2:{109}unlock now
2:{109}unlock end
2:{109}lock now
2:{109}lock end
[2][6][0] apply index = 110, commit is 111
2:{110}unlock now
2:{110}unlock end
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
1:{110}lock now
1:{110}lock end
[1][6][0] apply index = 111, commit is 111
1:{111}unlock now
1:{111}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
3:{111}lock now
3:{111}lock end
3:rf.commitIndex = 111, rf.lastApplied = 111
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 22} 112 6 false [] 0 0}处理完成,通知index = [112]的channel
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2:{110}lock now
2:{110}lock end
[2][6][0] apply index = 111, commit is 111
2:{111}unlock now
2:{111}unlock end
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 22} 112 6 false [] 0 0}处理完成,通知完成index = [112]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
0:{113}lock now
0:{113}lock end
[0][6][0] apply index = 114, commit is 114
0:{114}unlock now
0:{114}unlock end
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[112],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 7 y 3167499095888228886 22} 113 6 false [] 0 0}处理完成,通知index = [113]的channel
1:{111}lock now
1:{111}lock end
1:rf.commitIndex = 111, rf.lastApplied = 111
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2:{111}lock now
2:{111}lock end
2:rf.commitIndex = 111, rf.lastApplied = 111
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 7 y 3167499095888228886 22} 113 6 false [] 0 0}处理完成,通知完成index = [113]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
0:{114}lock now
0:{114}lock end
0:rf.commitIndex = 114, rf.lastApplied = 114
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
kvserver[0]: pre删除通道index: 112
kvserver[0]: begin删除通道index: 112
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[113],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y 6 true}
kvserver[0]: pre删除通道index: 113
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 112
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 1 x 1 10 y 672816327287623235 23} 114 6 false [] 0 0}处理完成,通知index = [114]的channel
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 1 x 1 10 y 672816327287623235 23} 114 6 false [] 0 0}处理完成,通知完成index = [114]的channel
kvserver[0]: begin删除通道index: 113
2023/09/23 03:26:42 3: client new get 3
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[114],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y 6 true}
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 113
kvserver[0]: pre删除通道index: 114
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 23},term is 6,len is 115
---------------
kvserver[0]: begin删除通道index: 114
2023/09/23 03:26:42 2: client new append x 2 8 y
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 114
2023/09/23 03:26:42 1: client new append x 1 11 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 8 y) 3167499095888228886 23},term is 6,len is 116
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 11 y) 672816327287623235 24},term is 6,len is 117
---------------
0 begin to append 1
prevlogindex = 114, lastIndex = 0
0 begin to append 2
prevlogindex = 114, lastIndex = 0
0 begin to append 3
prevlogindex = 114, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 114
updateIndex = 114, lastIndex = 0
2更新log，长度117
测试：3节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 114
updateIndex = 114, lastIndex = 0
3更新log，长度117
[2][6][0] apply index = 112, commit is 114
测试：1节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 114
updateIndex = 114, lastIndex = 0
1更新log，长度117
2 return success! num is 1
nextIndex = 115, lastIndex = 0, len = 117
[1][6][0] apply index = 112, commit is 114
1:{112}unlock now
1:{112}unlock end
1:{112}lock now
1:{112}lock end
[1][6][0] apply index = 113, commit is 114
1:{113}unlock now
1:{113}unlock end
1 return success! num is 2
nextIndex = 115, lastIndex = 0, len = 117
1 max is 117
2 max is 117
0:commitIndex -> 117
[0][6][0] apply index = 115, commit is 117
0:{115}unlock now
0:{115}unlock end
0:{115}lock now
0:{115}lock end
[0][6][0] apply index = 116, commit is 117
0:{116}unlock now
0:{116}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
1:{113}lock now
1:{113}lock end
[1][6][0] apply index = 114, commit is 114
1:{114}unlock now
1:{114}unlock end
1:{114}lock now
1:{114}lock end
1:rf.commitIndex = 114, rf.lastApplied = 114
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 23} 115 6 false [] 0 0}处理完成,通知index = [115]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 23} 115 6 false [] 0 0}处理完成,通知完成index = [115]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 8 y 3167499095888228886 23} 116 6 false [] 0 0}处理完成,通知index = [116]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 8 y 3167499095888228886 23} 116 6 false [] 0 0}处理完成,通知完成index = [116]的channel
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[115],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
kvserver[0]: pre删除通道index: 115
kvserver[0]: begin删除通道index: 115
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 115
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 3: client new append x 3 10 y
0:{116}lock now
0:{116}lock end
[0][6][0] apply index = 117, commit is 117
0:{117}unlock now
0:{117}unlock end
0:{117}lock now
0:{117}lock end
0:rf.commitIndex = 117, rf.lastApplied = 117
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[116],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y 6 true}
kvserver[0]: pre删除通道index: 116
kvserver[0]: begin删除通道index: 116
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 116
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 1 x 1 11 y 672816327287623235 24} 117 6 false [] 0 0}处理完成,通知index = [117]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 1 x 1 11 y 672816327287623235 24} 117 6 false [] 0 0}处理完成,通知完成index = [117]的channel
2023/09/23 03:26:42 2: client new append x 2 9 y
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 10 y) 1065774344220344240 24},term is 6,len is 118
---------------
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[117],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y 6 true}
kvserver[0]: pre删除通道index: 117
kvserver[0]: begin删除通道index: 117
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 117
2023/09/23 03:26:42 1: client new get 1
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 25},term is 6,len is 119
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 9 y) 3167499095888228886 24},term is 6,len is 120
---------------
2:{112}unlock now
2:{112}unlock end
2:{112}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2:{112}lock end
[2][6][0] apply index = 113, commit is 114
2:{113}unlock now
2:{113}unlock end
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2:{113}lock now
2:{113}lock end
[2][6][0] apply index = 114, commit is 114
2:{114}unlock now
2:{114}unlock end
2:{114}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2:{114}lock end
2:rf.commitIndex = 114, rf.lastApplied = 114
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
[3][6][0] apply index = 112, commit is 114
3:{112}unlock now
3:{112}unlock end
3:{112}lock now
3:{112}lock end
[3][6][0] apply index = 113, commit is 114
3:{113}unlock now
3:{113}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
3:{113}lock now
3:{113}lock end
[3][6][0] apply index = 114, commit is 114
3:{114}unlock now
3:{114}unlock end
3:{114}lock now
3:{114}lock end
3:rf.commitIndex = 114, rf.lastApplied = 114
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
3 return success! num is 1
nextIndex = 115, lastIndex = 0, len = 120
0 begin to append 1
prevlogindex = 117, lastIndex = 0
0 begin to append 2
prevlogindex = 117, lastIndex = 0
0 begin to append 3
prevlogindex = 117, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 117
updateIndex = 117, lastIndex = 0
2更新log，长度120
测试：1节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 117
updateIndex = 117, lastIndex = 0
1更新log，长度120
测试：3节点term为6，leader发送term为6, 接收3个, PrevLogIndex is 117
updateIndex = 117, lastIndex = 0
[2][6][0] apply index = 115, commit is 117
2:{115}unlock now
2:{115}unlock end
2:{115}lock now
2:{115}lock end
[2][6][0] apply index = 116, commit is 117
2:{116}unlock now
2:{116}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
2 return success! num is 1
nextIndex = 118, lastIndex = 0, len = 120
1 return success! num is 2
nextIndex = 118, lastIndex = 0, len = 120
1 max is 120
2 max is 120
0:commitIndex -> 120
[0][6][0] apply index = 118, commit is 120
0:{118}unlock now
0:{118}unlock end
0:{118}lock now
0:{118}lock end
[0][6][0] apply index = 119, commit is 120
0:{119}unlock now
0:{119}unlock end
[1][6][0] apply index = 115, commit is 117
1:{115}unlock now
1:{115}unlock end
1:{115}lock now
1:{115}lock end
[1][6][0] apply index = 116, commit is 117
1:{116}unlock now
1:{116}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
1:{116}lock now
1:{116}lock end
[1][6][0] apply index = 117, commit is 117
1:{117}unlock now
1:{117}unlock end
1:{117}lock now
1:{117}lock end
1:rf.commitIndex = 117, rf.lastApplied = 117
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2:{116}lock now
2:{116}lock end
[2][6][0] apply index = 117, commit is 117
2:{117}unlock now
2:{117}unlock end
2:{117}lock now
2:{117}lock end
2:rf.commitIndex = 117, rf.lastApplied = 117
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 3 x 3 10 y 1065774344220344240 24} 118 6 false [] 0 0}处理完成,通知index = [118]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 3 x 3 10 y 1065774344220344240 24} 118 6 false [] 0 0}处理完成,通知完成index = [118]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 25} 119 6 false [] 0 0}处理完成,通知index = [119]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 25} 119 6 false [] 0 0}处理完成,通知完成index = [119]的channel
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[118],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y 6 true}
kvserver[0]: pre删除通道index: 118
kvserver[0]: begin删除通道index: 118
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 118
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
0:{119}lock now
0:{119}lock end
[0][6][0] apply index = 120, commit is 120
0:{120}unlock now
0:{120}unlock end
0:{120}lock now
0:{120}lock end
0:rf.commitIndex = 120, rf.lastApplied = 120
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 9 y 3167499095888228886 24} 120 6 false [] 0 0}处理完成,通知index = [120]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 9 y 3167499095888228886 24} 120 6 false [] 0 0}处理完成,通知完成index = [120]的channel
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[119],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
kvserver[0]: pre删除通道index: 119
kvserver[0]: begin删除通道index: 119
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 119
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:42 1: client new append x 1 12 y
3更新log，长度120
3 return success! num is 1
nextIndex = 118, lastIndex = 0, len = 120
[3][6][0] apply index = 115, commit is 117
3:{115}unlock now
3:{115}unlock end
3:{115}lock now
3:{115}lock end
[3][6][0] apply index = 116, commit is 117
3:{116}unlock now
3:{116}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
3:{116}lock now
3:{116}lock end
[3][6][0] apply index = 117, commit is 117
3:{117}unlock now
3:{117}unlock end
3:{117}lock now
3:{117}lock end
3:rf.commitIndex = 117, rf.lastApplied = 117
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:42 3: client new append x 3 11 y
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[120],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y 6 true}
kvserver[0]: pre删除通道index: 120
kvserver[0]: begin删除通道index: 120
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 120
2023/09/23 03:26:42 2: client new append x 2 10 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 10 y) 3167499095888228886 25},term is 6,len is 121
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 11 y) 1065774344220344240 25},term is 6,len is 122
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 12 y) 672816327287623235 26},term is 6,len is 123
---------------
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND处理请求超时: {Append 0 x 0 12 y 4346951758130697083 21}
kvserver[0]: pre删除通道index: 107
kvserver[0]: begin删除通道index: 107
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 107
2023/09/23 03:26:42 0: client new get 0
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 22},term is 6,len is 124
---------------
0 begin to append 1
prevlogindex = 120, lastIndex = 0
0 begin to append 2
prevlogindex = 120, lastIndex = 0
0 begin to append 3
prevlogindex = 120, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：3节点term为6，leader发送term为6, 接收4个, PrevLogIndex is 120
updateIndex = 120, lastIndex = 0
3更新log，长度124
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 1867579256866231016 21}
[3][6][0] apply index = 118, commit is 120
3:{118}unlock now
3:{118}unlock end
3:{118}lock now
3:{118}lock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3][6][0] apply index = 119, commit is 120
3:{119}unlock now
3:{119}unlock end
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
kvserver[0]: pre删除通道index: 110
测试：2节点term为6，leader发送term为6, 接收4个, PrevLogIndex is 120
updateIndex = 120, lastIndex = 0
2更新log，长度124
测试：1节点term为6，leader发送term为6, 接收4个, PrevLogIndex is 120
updateIndex = 120, lastIndex = 0
1更新log，长度124
3 return success! num is 1
nextIndex = 121, lastIndex = 0, len = 124
[2][6][0] apply index = 118, commit is 120
2:{118}unlock now
2:{118}unlock end
2:{118}lock now
2:{118}lock end
[2][6][0] apply index = 119, commit is 120
2:{119}unlock now
2:{119}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2:{119}lock now
2:{119}lock end
[2][6][0] apply index = 120, commit is 120
2:{120}unlock now
2:{120}unlock end
2:{120}lock now
2:{120}lock end
2:rf.commitIndex = 120, rf.lastApplied = 120
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
2 return success! num is 2
nextIndex = 121, lastIndex = 0, len = 124
1 max is 124
2 max is 124
0:commitIndex -> 124
[1][6][0] apply index = 118, commit is 120
1:{118}unlock now
1:{118}unlock end
1:{118}lock now
1:{118}lock end
[1][6][0] apply index = 119, commit is 120
1:{119}unlock now
1:{119}unlock end
1 return success! num is 1
nextIndex = 121, lastIndex = 0, len = 124
[0][6][0] apply index = 121, commit is 124
0:{121}unlock now
0:{121}unlock end
0:{121}lock now
0:{121}lock end
[0][6][0] apply index = 122, commit is 124
0:{122}unlock now
0:{122}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 10 y 3167499095888228886 25} 121 6 false [] 0 0}处理完成,通知index = [121]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 10 y 3167499095888228886 25} 121 6 false [] 0 0}处理完成,通知完成index = [121]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 3 x 3 11 y 1065774344220344240 25} 122 6 false [] 0 0}处理完成,通知index = [122]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 3 x 3 11 y 1065774344220344240 25} 122 6 false [] 0 0}处理完成,通知完成index = [122]的channel
0:{122}lock now
0:{122}lock end
[0][6][0] apply index = 123, commit is 124
0:{123}unlock now
0:{123}unlock end
0:{123}lock now
0:{123}lock end
[0][6][0] apply index = 124, commit is 124
0:{124}unlock now
0:{124}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[121],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y 6 true}
kvserver[0]: pre删除通道index: 121
kvserver[0]: begin删除通道index: 121
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 121
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[122],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y 6 true}
kvserver[0]: pre删除通道index: 122
kvserver[0]: begin删除通道index: 122
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 122
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 1 x 1 12 y 672816327287623235 26} 123 6 false [] 0 0}处理完成,通知index = [123]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 1 x 1 12 y 672816327287623235 26} 123 6 false [] 0 0}处理完成,通知完成index = [123]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 22} 124 6 false [] 0 0}处理完成,通知index = [124]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 22} 124 6 false [] 0 0}处理完成,通知完成index = [124]的channel
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[124],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
kvserver[0]: pre删除通道index: 124
kvserver[0]: begin删除通道index: 124
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 124
1:{119}lock now
1:{119}lock end
[1][6][0] apply index = 120, commit is 120
1:{120}unlock now
1:{120}unlock end
1:{120}lock now
1:{120}lock end
1:rf.commitIndex = 120, rf.lastApplied = 120
2023/09/23 03:26:42 2: client new get 2
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 26},term is 6,len is 125
---------------
0:{124}lock now
0:{124}lock end
0:rf.commitIndex = 124, rf.lastApplied = 124
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[123],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y 6 true}
kvserver[0]: pre删除通道index: 123
kvserver[0]: begin删除通道index: 123
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 123
2023/09/23 03:26:42 3: client new append x 3 12 y
2023/09/23 03:26:42 1: client new append x 1 13 y
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 13 y) 672816327287623235 27},term is 6,len is 126
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 12 y) 1065774344220344240 26},term is 6,len is 127
---------------
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2023/09/23 03:26:42 0: client new append x 0 13 y
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 13 y) 4346951758130697083 23},term is 6,len is 128
---------------
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
kvserver[0]: begin删除通道index: 110
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 110
2023/09/23 03:26:42 4: client new append x 4 11 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 11 y) 1867579256866231016 22},term is 6,len is 129
---------------
3:{119}lock now
3:{119}lock end
[3][6][0] apply index = 120, commit is 120
3:{120}unlock now
3:{120}unlock end
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
3:{120}lock now
3:{120}lock end
3:rf.commitIndex = 120, rf.lastApplied = 120
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
0 begin to append 1
prevlogindex = 124, lastIndex = 0
0 begin to append 2
prevlogindex = 124, lastIndex = 0
0 begin to append 3
prevlogindex = 124, lastIndex = 0
0 begin to append 4
prevlogindex = 105, lastIndex = 0
测试：1节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 124
updateIndex = 124, lastIndex = 0
1更新log，长度129
[1][6][0] apply index = 121, commit is 124
1:{121}unlock now
1:{121}unlock end
1:{121}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
1:{121}lock end
[1][6][0] apply index = 122, commit is 124
1:{122}unlock now
1:{122}unlock end
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 124
updateIndex = 124, lastIndex = 0
2更新log，长度129
测试：3节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 124
updateIndex = 124, lastIndex = 0
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2][6][0] apply index = 121, commit is 124
2:{121}unlock now
2:{121}unlock end
2:{121}lock now
2:{121}lock end
[2][6][0] apply index = 122, commit is 124
2:{122}unlock now
2:{122}unlock end
1 return success! num is 1
nextIndex = 125, lastIndex = 0, len = 129
2 return success! num is 2
nextIndex = 125, lastIndex = 0, len = 129
1 max is 129
2 max is 129
0:commitIndex -> 129
[0][6][0] apply index = 125, commit is 129
0:{125}unlock now
0:{125}unlock end
0:{125}lock now
0:{125}lock end
[0][6][0] apply index = 126, commit is 129
0:{126}unlock now
0:{126}unlock end
1:{122}lock now
1:{122}lock end
[1][6][0] apply index = 123, commit is 124
1:{123}unlock now
1:{123}unlock end
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 CommandApply!!!!!!!!!
1:{123}lock now
1:{123}lock end
[1][6][0] apply index = 124, commit is 124
1:{124}unlock now
1:{124}unlock end
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2:{122}lock now
2:{122}lock end
[2][6][0] apply index = 123, commit is 124
2:{123}unlock now
2:{123}unlock end
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 26} 125 6 false [] 0 0}处理完成,通知index = [125]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 26} 125 6 false [] 0 0}处理完成,通知完成index = [125]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[125],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
1:{124}lock now
1:{124}lock end
1:rf.commitIndex = 124, rf.lastApplied = 124
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
kvserver[0]: pre删除通道index: 125
0:{126}lock now
0:{126}lock end
[0][6][0] apply index = 127, commit is 129
0:{127}unlock now
0:{127}unlock end
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
2:{123}lock now
2:{123}lock end
[2][6][0] apply index = 124, commit is 124
2:{124}unlock now
2:{124}unlock end
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 1 x 1 13 y 672816327287623235 27} 126 6 false [] 0 0}处理完成,通知index = [126]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2:{124}lock now
2:{124}lock end
2:rf.commitIndex = 124, rf.lastApplied = 124
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[126],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y 6 true}
kvserver[0]: pre删除通道index: 126
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 1 x 1 13 y 672816327287623235 27} 126 6 false [] 0 0}处理完成,通知完成index = [126]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
0:{127}lock now
0:{127}lock end
[0][6][0] apply index = 128, commit is 129
0:{128}unlock now
0:{128}unlock end
kvserver[0]: begin删除通道index: 126
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 126
kvserver[0]: begin删除通道index: 125
2023/09/23 03:26:42 1: client new get 1
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 125
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:42 2: client new append x 2 11 y
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 28},term is 6,len is 130
---------------
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 3 x 3 12 y 1065774344220344240 26} 127 6 false [] 0 0}处理完成,通知index = [127]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 3 x 3 12 y 1065774344220344240 26} 127 6 false [] 0 0}处理完成,通知完成index = [127]的channel
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[127],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y 6 true}
0:{128}lock now
0:{128}lock end
[0][6][0] apply index = 129, commit is 129
0:{129}unlock now
0:{129}unlock end
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 11 y) 3167499095888228886 27},term is 6,len is 131
---------------
2023/09/23 03:26:42 CommandApply!!!!!!!!!
kvserver[0]: pre删除通道index: 127
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 0 x 0 13 y 4346951758130697083 23} 128 6 false [] 0 0}处理完成,通知index = [128]的channel
kvserver[0]: begin删除通道index: 127
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 127
2023/09/23 03:26:42 3: client new get 3
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 27},term is 6,len is 132
---------------
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 0 x 0 13 y 4346951758130697083 23} 128 6 false [] 0 0}处理完成,通知完成index = [128]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
0:{129}lock now
0:{129}lock end
0:rf.commitIndex = 129, rf.lastApplied = 129
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[128],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y 6 true}
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 4 x 4 11 y 1867579256866231016 22} 129 6 false [] 0 0}处理完成,通知index = [129]的channel
kvserver[0]: pre删除通道index: 128
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 4 x 4 11 y 1867579256866231016 22} 129 6 false [] 0 0}处理完成,通知完成index = [129]的channel
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[129],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y 6 true}
kvserver[0]: begin删除通道index: 128
kvserver[0]: pre删除通道index: 129
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 128
2023/09/23 03:26:42 0: client new get 0
kvserver[0]: begin删除通道index: 129
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 129
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 24},term is 6,len is 133
---------------
2023/09/23 03:26:42 4: client new get 4
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 23},term is 6,len is 134
---------------
3更新log，长度129
[3][6][0] apply index = 121, commit is 124
3:{121}unlock now
3:{121}unlock end
3:{121}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
3:{121}lock end
[3][6][0] apply index = 122, commit is 124
3:{122}unlock now
3:{122}unlock end
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
3 return success! num is 1
nextIndex = 125, lastIndex = 0, len = 134
3:{122}lock now
3:{122}lock end
[3][6][0] apply index = 123, commit is 124
3:{123}unlock now
3:{123}unlock end
3:{123}lock now
3:{123}lock end
[3][6][0] apply index = 124, commit is 124
3:{124}unlock now
3:{124}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
3:{124}lock now
3:{124}lock end
3:rf.commitIndex = 124, rf.lastApplied = 124
2:投票检查129,45,6,1,3,6
2 vote refuse 1 -> 4
4: vote is out of date
测试：4节点term为6，leader发送term为2, 接收55个, PrevLogIndex is 35
测试：0节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：0节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
网络分区AppOutOfDate,reply is 1
0:投票检查134,45,6,1,3,6
0 vote refuse 1 -> 4
4: vote is out of date
2:投票检查129,45,6,1,6,6
测试：4节点term为6，leader发送term为2, 接收15个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收0个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
4:投票检查45,105,1,2,6,6
4 vote refuse 2 -> 0
测试：4节点term为6，leader发送term为2, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
0:投票检查134,45,6,1,4,6
0 vote refuse 1 -> 4
4: vote is out of date
测试：4节点term为6，leader发送term为6, 接收15个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：4节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：4节点term为6，leader发送term为2, 接收50个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：0节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收35个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为6, 接收6个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
测试：0节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为6, 接收9个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：2节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：0节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收60个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收65个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：0节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：4节点term为6，leader发送term为2, 接收25个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收0个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为6, 接收19个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：4节点term为6，leader发送term为6, 接收24个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：2节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
2:投票检查129,45,6,1,4,6
2 vote refuse 1 -> 4
4: vote is out of date
测试：0节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：0节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：2节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收20个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收40个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
4:投票检查45,35,1,1,2,6
4 vote refuse 1 -> 0
0: vote is out of date
测试：4节点term为6，leader发送term为2, 接收45个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为2, 接收30个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 129, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 45, lastIndex = 0
测试：4节点term为6，leader发送term为6, 接收89个, PrevLogIndex is 45
不匹配,args = 45,lastIndex = 0,len = 45
log.term = 1, lastTerm = 0, args.term = 2
xindex = 1, last = 0
x is 36, len is 134
0 nextIndex change to 36
nextIndex = 36, lastIndex = 0, len = 134
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 129
updateIndex = 129, lastIndex = 0
2更新log，长度134
测试：0节点term为6，leader发送term为1, 接收5个, PrevLogIndex is 35
[2][6][0] apply index = 125, commit is 129
2:{125}unlock now
2:{125}unlock end
2:{125}lock now
2:{125}lock end
[2][6][0] apply index = 126, commit is 129
2:{126}unlock now
2:{126}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2:{126}lock now
2:{126}lock end
[2][6][0] apply index = 127, commit is 129
2:{127}unlock now
2:{127}unlock end
2:{127}lock now
2:{127}lock end
[2][6][0] apply index = 128, commit is 129
2:{128}unlock now
2:{128}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2:{128}lock now
2:{128}lock end
[2][6][0] apply index = 129, commit is 129
2:{129}unlock now
2:{129}unlock end
2:{129}lock now
2:{129}lock end
2:rf.commitIndex = 129, rf.lastApplied = 129
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
网络分区AppOutOfDate,reply is 1
2 return success! num is 1
nextIndex = 130, lastIndex = 0, len = 134
测试：0节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
测试：4节点term为6，leader发送term为6, 接收12个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
测试：4节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
网络分区AppOutOfDate,reply is 1
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：0节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：4节点term为6，leader发送term为6, 接收1个, PrevLogIndex is 105
不匹配,args = 105,lastIndex = 0,len = 45
reply XLen is 46
0 nextIndex change to 46
nextIndex = 46, lastIndex = 0, len = 134
测试：2节点term为6，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
0:投票检查134,45,6,1,6,6
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 134, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 45, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 134
测试：4节点term为6，leader发送term为6, 接收89个, PrevLogIndex is 45
不匹配,args = 45,lastIndex = 0,len = 45
log.term = 1, lastTerm = 0, args.term = 2
xindex = 1, last = 0
2:rf.commitIndex = 129, rf.lastApplied = 129
2 return success! num is 1
nextIndex = 135, lastIndex = 0, len = 134
x is 36, len is 134
0 nextIndex change to 36
nextIndex = 36, lastIndex = 0, len = 134
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 134, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 35, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收0个, PrevLogIndex is 134
2:rf.commitIndex = 129, rf.lastApplied = 129
测试：4节点term为6，leader发送term为6, 接收99个, PrevLogIndex is 35
updateIndex = 35, lastIndex = 0
4更新log，长度134
2 return success! num is 1
nextIndex = 135, lastIndex = 0, len = 134
4 return success! num is 2
nextIndex = 36, lastIndex = 0, len = 134
1 max is 134
[4][6][0] apply index = 36, commit is 129
4:{36}unlock now
4:{36}unlock end
4:{36}lock now
4:{36}lock end
[4][6][0] apply index = 37, commit is 129
4:{37}unlock now
4:{37}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
4:{37}lock now
4:{37}lock end
[4][6][0] apply index = 38, commit is 129
4:{38}unlock now
4:{38}unlock end
4:{38}lock now
4:{38}lock end
[4][6][0] apply index = 39, commit is 129
4:{39}unlock now
4:{39}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
4:{39}lock now
4:{39}lock end
[4][6][0] apply index = 40, commit is 129
4:{40}unlock now
4:{40}unlock end
4:{40}lock now
4:{40}lock end
[4][6][0] apply index = 41, commit is 129
4:{41}unlock now
4:{41}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
4:{41}lock now
4:{41}lock end
[4][6][0] apply index = 42, commit is 129
4:{42}unlock now
4:{42}unlock end
4:{42}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{42}lock end
[4][6][0] apply index = 43, commit is 129
4:{43}unlock now
4:{43}unlock end
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
4:{43}lock now
4:{43}lock end
[4][6][0] apply index = 44, commit is 129
4:{44}unlock now
4:{44}unlock end
4:{44}lock now
4:{44}lock end
[4][6][0] apply index = 45, commit is 129
4:{45}unlock now
4:{45}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
4:{45}lock now
4:{45}lock end
[4][6][0] apply index = 46, commit is 129
4:{46}unlock now
4:{46}unlock end
4:{46}lock now
4:{46}lock end
[4][6][0] apply index = 47, commit is 129
4:{47}unlock now
4:{47}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
4:{47}lock now
4:{47}lock end
[4][6][0] apply index = 48, commit is 129
4:{48}unlock now
4:{48}unlock end
4:{48}lock now
4:{48}lock end
[4][6][0] apply index = 49, commit is 129
4:{49}unlock now
4:{49}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
4:{49}lock now
4:{49}lock end
[4][6][0] apply index = 50, commit is 129
4:{50}unlock now
4:{50}unlock end
4:{50}lock now
4:{50}lock end
[4][6][0] apply index = 51, commit is 129
4:{51}unlock now
4:{51}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
4:{51}lock now
4:{51}lock end
[4][6][0] apply index = 52, commit is 129
4:{52}unlock now
4:{52}unlock end
4:{52}lock now
4:{52}lock end
[4][6][0] apply index = 53, commit is 129
4:{53}unlock now
4:{53}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
4:{53}lock now
4:{53}lock end
[4][6][0] apply index = 54, commit is 129
4:{54}unlock now
4:{54}unlock end
4:{54}lock now
4:{54}lock end
[4][6][0] apply index = 55, commit is 129
4:{55}unlock now
4:{55}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
4:{55}lock now
4:{55}lock end
[4][6][0] apply index = 56, commit is 129
4:{56}unlock now
4:{56}unlock end
4:{56}lock now
4:{56}lock end
[4][6][0] apply index = 57, commit is 129
4:{57}unlock now
4:{57}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
4:{57}lock now
4:{57}lock end
[4][6][0] apply index = 58, commit is 129
4:{58}unlock now
4:{58}unlock end
4:{58}lock now
4:{58}lock end
[4][6][0] apply index = 59, commit is 129
4:{59}unlock now
4:{59}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
4:{59}lock now
4:{59}lock end
[4][6][0] apply index = 60, commit is 129
4:{60}unlock now
4:{60}unlock end
4:{60}lock now
4:{60}lock end
[4][6][0] apply index = 61, commit is 129
4:{61}unlock now
4:{61}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
4:{61}lock now
4:{61}lock end
[4][6][0] apply index = 62, commit is 129
4:{62}unlock now
4:{62}unlock end
4:{62}lock now
4:{62}lock end
[4][6][0] apply index = 63, commit is 129
4:{63}unlock now
4:{63}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
4:{63}lock now
4:{63}lock end
[4][6][0] apply index = 64, commit is 129
4:{64}unlock now
4:{64}unlock end
4:{64}lock now
4:{64}lock end
[4][6][0] apply index = 65, commit is 129
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{65}unlock now
4:{65}unlock end
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
4:{65}lock now
4:{65}lock end
[4][6][0] apply index = 66, commit is 129
4:{66}unlock now
4:{66}unlock end
4:{66}lock now
4:{66}lock end
[4][6][0] apply index = 67, commit is 129
4:{67}unlock now
4:{67}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
4:{67}lock now
4:{67}lock end
[4][6][0] apply index = 68, commit is 129
4:{68}unlock now
4:{68}unlock end
4:{68}lock now
4:{68}lock end
[4][6][0] apply index = 69, commit is 129
4:{69}unlock now
4:{69}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
4:{69}lock now
4:{69}lock end
[4][6][0] apply index = 70, commit is 129
4:{70}unlock now
4:{70}unlock end
4:{70}lock now
4:{70}lock end
[4][6][0] apply index = 71, commit is 129
4:{71}unlock now
4:{71}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
4:{71}lock now
4:{71}lock end
[4][6][0] apply index = 72, commit is 129
4:{72}unlock now
4:{72}unlock end
4:{72}lock now
4:{72}lock end
[4][6][0] apply index = 73, commit is 129
4:{73}unlock now
4:{73}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
4:{73}lock now
4:{73}lock end
[4][6][0] apply index = 74, commit is 129
4:{74}unlock now
4:{74}unlock end
4:{74}lock now
4:{74}lock end
[4][6][0] apply index = 75, commit is 129
4:{75}unlock now
4:{75}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
4:{75}lock now
4:{75}lock end
[4][6][0] apply index = 76, commit is 129
4:{76}unlock now
4:{76}unlock end
4:{76}lock now
4:{76}lock end
[4][6][0] apply index = 77, commit is 129
4:{77}unlock now
4:{77}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
4:{77}lock now
4:{77}lock end
[4][6][0] apply index = 78, commit is 129
4:{78}unlock now
4:{78}unlock end
4:{78}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{78}lock end
[4][6][0] apply index = 79, commit is 129
4:{79}unlock now
4:{79}unlock end
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
4:{79}lock now
4:{79}lock end
[4][6][0] apply index = 80, commit is 129
4:{80}unlock now
4:{80}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
4:{80}lock now
4:{80}lock end
[4][6][0] apply index = 81, commit is 129
4:{81}unlock now
4:{81}unlock end
4:{81}lock now
4:{81}lock end
[4][6][0] apply index = 82, commit is 129
4:{82}unlock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
4:{82}unlock end
4:{82}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{82}lock end
[4][6][0] apply index = 83, commit is 129
4:{83}unlock now
4:{83}unlock end
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{83}lock now
4:{83}lock end
[4][6][0] apply index = 84, commit is 129
4:{84}unlock now
4:{84}unlock end
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{84}lock now
4:{84}lock end
[4][6][0] apply index = 85, commit is 129
4:{85}unlock now
4:{85}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{85}lock now
4:{85}lock end
[4][6][0] apply index = 86, commit is 129
4:{86}unlock now
4:{86}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{86}lock now
4:{86}lock end
[4][6][0] apply index = 87, commit is 129
4:{87}unlock now
4:{87}unlock end
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{87}lock now
4:{87}lock end
[4][6][0] apply index = 88, commit is 129
4:{88}unlock now
4:{88}unlock end
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{88}lock now
4:{88}lock end
[4][6][0] apply index = 89, commit is 129
4:{89}unlock now
4:{89}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{89}lock now
4:{89}lock end
[4][6][0] apply index = 90, commit is 129
4:{90}unlock now
4:{90}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{90}lock now
4:{90}lock end
[4][6][0] apply index = 91, commit is 129
4:{91}unlock now
4:{91}unlock end
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{91}lock now
4:{91}lock end
[4][6][0] apply index = 92, commit is 129
4:{92}unlock now
4:{92}unlock end
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{92}lock now
4:{92}lock end
[4][6][0] apply index = 93, commit is 129
4:{93}unlock now
4:{93}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{93}lock now
4:{93}lock end
[4][6][0] apply index = 94, commit is 129
4:{94}unlock now
4:{94}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{94}lock now
4:{94}lock end
[4][6][0] apply index = 95, commit is 129
4:{95}unlock now
4:{95}unlock end
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{95}lock now
4:{95}lock end
[4][6][0] apply index = 96, commit is 129
4:{96}unlock now
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
4:{96}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 y
4:{96}lock now
4:{96}lock end
[4][6][0] apply index = 97, commit is 129
4:{97}unlock now
4:{97}unlock end
4:{97}lock now
4:{97}lock end
[4][6][0] apply index = 98, commit is 129
4:{98}unlock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{98}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{98}lock now
4:{98}lock end
[4][6][0] apply index = 99, commit is 129
4:{99}unlock now
4:{99}unlock end
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{99}lock now
4:{99}lock end
[4][6][0] apply index = 100, commit is 129
4:{100}unlock now
4:{100}unlock end
2 max is 134
0:commitIndex -> 134
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0][6][0] apply index = 130, commit is 134
0:{130}unlock now
0:{130}unlock end
0:{130}lock now
2023/09/23 03:26:42 CommandApply!!!!!!!!!
0:{130}lock end
[0][6][0] apply index = 131, commit is 134
0:{131}unlock now
0:{131}unlock end
4:{100}lock now
4:{100}lock end
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 28} 130 6 false [] 0 0}处理完成,通知index = [130]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 28} 130 6 false [] 0 0}处理完成,通知完成index = [130]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 11 y 3167499095888228886 27} 131 6 false [] 0 0}处理完成,通知index = [131]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 2 x 2 11 y 3167499095888228886 27} 131 6 false [] 0 0}处理完成,通知完成index = [131]的channel
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[130],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
kvserver[0]: pre删除通道index: 130
kvserver[0]: begin删除通道index: 130
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 130
0:{131}lock now
0:{131}lock end
[0][6][0] apply index = 132, commit is 134
0:{132}unlock now
0:{132}unlock end
0:{132}lock now
0:{132}lock end
[0][6][0] apply index = 133, commit is 134
0:{133}unlock now
0:{133}unlock end
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[131],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y 6 true}
kvserver[0]: pre删除通道index: 131
kvserver[0]: begin删除通道index: 131
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 131
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:26:42 1: client new get 1
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 29},term is 6,len is 135
---------------
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 27} 132 6 false [] 0 0}处理完成,通知index = [132]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 27} 132 6 false [] 0 0}处理完成,通知完成index = [132]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 24} 133 6 false [] 0 0}处理完成,通知index = [133]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 24} 133 6 false [] 0 0}处理完成,通知完成index = [133]的channel
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[133],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
kvserver[0]: pre删除通道index: 133
kvserver[0]: begin删除通道index: 133
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 133
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:42 0: client new get 0
2023/09/23 03:26:42 2: client new get 2
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[132],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
kvserver[0]: pre删除通道index: 132
kvserver[0]: begin删除通道index: 132
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 132
0:{133}lock now
0:{133}lock end
[0][6][0] apply index = 134, commit is 134
0:{134}unlock now
0:{134}unlock end
0:{134}lock now
0:{134}lock end
0:rf.commitIndex = 134, rf.lastApplied = 134
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 25},term is 6,len is 136
---------------
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 23} 134 6 false [] 0 0}处理完成,通知index = [134]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 23} 134 6 false [] 0 0}处理完成,通知完成index = [134]的channel
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:42 3: client new append x 3 13 y
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[134],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
kvserver[0]: pre删除通道index: 134
kvserver[0]: begin删除通道index: 134
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 134
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 28},term is 6,len is 137
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 13 y) 1065774344220344240 28},term is 6,len is 138
---------------
[4][6][0] apply index = 101, commit is 129
4:{101}unlock now
4:{101}unlock end
4:{101}lock now
4:{101}lock end
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
2023/09/23 03:26:42 4: client new append x 4 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
[4][6][0] apply index = 102, commit is 129
4:{102}unlock now
4:{102}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
4:{102}lock now
4:{102}lock end
[4][6][0] apply index = 103, commit is 129
4:{103}unlock now
4:{103}unlock end
4:{103}lock now
4:{103}lock end
[4][6][0] apply index = 104, commit is 129
4:{104}unlock now
4:{104}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{104}lock now
4:{104}lock end
[4][6][0] apply index = 105, commit is 129
4:{105}unlock now
4:{105}unlock end
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 12 y) 1867579256866231016 24},term is 6,len is 139
---------------
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{105}lock now
4:{105}lock end
[4][6][0] apply index = 106, commit is 129
4:{106}unlock now
4:{106}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{106}lock now
4:{106}lock end
[4][6][0] apply index = 107, commit is 129
4:{107}unlock now
4:{107}unlock end
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{107}lock now
4:{107}lock end
[4][6][0] apply index = 108, commit is 129
4:{108}unlock now
4:{108}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{108}lock now
4:{108}lock end
[4][6][0] apply index = 109, commit is 129
4:{109}unlock now
4:{109}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{109}lock now
4:{109}lock end
[4][6][0] apply index = 110, commit is 129
4:{110}unlock now
4:{110}unlock end
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{110}lock now
4:{110}lock end
[4][6][0] apply index = 111, commit is 129
4:{111}unlock now
4:{111}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{111}lock now
4:{111}lock end
[4][6][0] apply index = 112, commit is 129
4:{112}unlock now
4:{112}unlock end
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{112}lock now
4:{112}lock end
[4][6][0] apply index = 113, commit is 129
4:{113}unlock now
4:{113}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{113}lock now
4:{113}lock end
[4][6][0] apply index = 114, commit is 129
4:{114}unlock now
4:{114}unlock end
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{114}lock now
4:{114}lock end
[4][6][0] apply index = 115, commit is 129
4:{115}unlock now
4:{115}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{115}lock now
4:{115}lock end
[4][6][0] apply index = 116, commit is 129
4:{116}unlock now
4:{116}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{116}lock now
4:{116}lock end
[4][6][0] apply index = 117, commit is 129
4:{117}unlock now
4:{117}unlock end
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{117}lock now
4:{117}lock end
[4][6][0] apply index = 118, commit is 129
4:{118}unlock now
4:{118}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{118}lock now
4:{118}lock end
[4][6][0] apply index = 119, commit is 129
4:{119}unlock now
4:{119}unlock end
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{119}lock now
4:{119}lock end
[4][6][0] apply index = 120, commit is 129
4:{120}unlock now
4:{120}unlock end
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{120}lock now
4:{120}lock end
[4][6][0] apply index = 121, commit is 129
4:{121}unlock now
4:{121}unlock end
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{121}lock now
4:{121}lock end
[4][6][0] apply index = 122, commit is 129
4:{122}unlock now
4:{122}unlock end
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{122}lock now
4:{122}lock end
[4][6][0] apply index = 123, commit is 129
4:{123}unlock now
4:{123}unlock end
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{123}lock now
4:{123}lock end
[4][6][0] apply index = 124, commit is 129
4:{124}unlock now
4:{124}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{124}lock now
4:{124}lock end
[4][6][0] apply index = 125, commit is 129
4:{125}unlock now
4:{125}unlock end
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{125}lock now
4:{125}lock end
[4][6][0] apply index = 126, commit is 129
4:{126}unlock now
4:{126}unlock end
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{126}lock now
4:{126}lock end
[4][6][0] apply index = 127, commit is 129
4:{127}unlock now
4:{127}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{127}lock now
4:{127}lock end
[4][6][0] apply index = 128, commit is 129
4:{128}unlock now
4:{128}unlock end
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{128}lock now
4:{128}lock end
[4][6][0] apply index = 129, commit is 129
4:{129}unlock now
4:{129}unlock end
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
4:{129}lock now
4:{129}lock end
4:rf.commitIndex = 129, rf.lastApplied = 129
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 134, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 134, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 134
updateIndex = 134, lastIndex = 0
2更新log，长度139
测试：4节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 134
[2][6][0] apply index = 130, commit is 134
2:{130}unlock now
2:{130}unlock end
2:{130}lock now
2:{130}lock end
[2][6][0] apply index = 131, commit is 134
2:{131}unlock now
2:{131}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2:{131}lock now
2:{131}lock end
[2][6][0] apply index = 132, commit is 134
2:{132}unlock now
2:{132}unlock end
2:{132}lock now
2:{132}lock end
[2][6][0] apply index = 133, commit is 134
2:{133}unlock now
2:{133}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2:{133}lock now
2:{133}lock end
[2][6][0] apply index = 134, commit is 134
2:{134}unlock now
2:{134}unlock end
2:{134}lock now
2:{134}lock end
2:rf.commitIndex = 134, rf.lastApplied = 134
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
2 return success! num is 1
nextIndex = 135, lastIndex = 0, len = 139
updateIndex = 134, lastIndex = 0
4更新log，长度139
[4][6][0] apply index = 130, commit is 134
4 return success! num is 2
nextIndex = 135, lastIndex = 0, len = 139
1 max is 139
2 max is 139
0:commitIndex -> 139
[0][6][0] apply index = 135, commit is 139
0:{135}unlock now
0:{135}unlock end
0:{135}lock now
0:{135}lock end
[0][6][0] apply index = 136, commit is 139
0:{136}unlock now
0:{136}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 29} 135 6 false [] 0 0}处理完成,通知index = [135]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 29} 135 6 false [] 0 0}处理完成,通知完成index = [135]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 25} 136 6 false [] 0 0}处理完成,通知index = [136]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 25} 136 6 false [] 0 0}处理完成,通知完成index = [136]的channel
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[136],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
kvserver[0]: pre删除通道index: 136
kvserver[0]: begin删除通道index: 136
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 136
0:{136}lock now
0:{136}lock end
[0][6][0] apply index = 137, commit is 139
0:{137}unlock now
0:{137}unlock end
0:{137}lock now
0:{137}lock end
[0][6][0] apply index = 138, commit is 139
0:{138}unlock now
0:{138}unlock end
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 28} 137 6 false [] 0 0}处理完成,通知index = [137]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 28} 137 6 false [] 0 0}处理完成,通知完成index = [137]的channel
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 3 x 3 13 y 1065774344220344240 28} 138 6 false [] 0 0}处理完成,通知index = [138]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 3 x 3 13 y 1065774344220344240 28} 138 6 false [] 0 0}处理完成,通知完成index = [138]的channel
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[138],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y 6 true}
kvserver[0]: pre删除通道index: 138
kvserver[0]: begin删除通道index: 138
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 138
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[135],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
kvserver[0]: pre删除通道index: 135
kvserver[0]: begin删除通道index: 135
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 135
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:26:42 1: client new append x 1 14 y
0:{138}lock now
0:{138}lock end
[0][6][0] apply index = 139, commit is 139
0:{139}unlock now
0:{139}unlock end
0:{139}lock now
0:{139}lock end
0:rf.commitIndex = 139, rf.lastApplied = 139
2023/09/23 03:26:42 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 4 x 4 12 y 1867579256866231016 24} 139 6 false [] 0 0}处理完成,通知index = [139]的channel
2023/09/23 03:26:42 kvserver[0]: applyMsg: {true {Append 4 x 4 12 y 1867579256866231016 24} 139 6 false [] 0 0}处理完成,通知完成index = [139]的channel
2023/09/23 03:26:42 kvserver[0]: PUTAPPEND获取到通知结果,index=[139],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y 6 true}
kvserver[0]: pre删除通道index: 139
kvserver[0]: begin删除通道index: 139
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 139
2023/09/23 03:26:42 kvserver[0]: GET获取到通知结果,index=[137],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
kvserver[0]: pre删除通道index: 137
kvserver[0]: begin删除通道index: 137
2023/09/23 03:26:42 kvserver[0]: 成功删除通道index: 137
2023/09/23 03:26:42 3: client new get 3
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 14 y) 672816327287623235 30},term is 6,len is 140
---------------
2023/09/23 03:26:42 4: client new get 4
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:42 0: client new append x 0 14 y
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:42 2: client new get 2
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 29},term is 6,len is 141
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 25},term is 6,len is 142
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 14 y) 4346951758130697083 26},term is 6,len is 143
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 29},term is 6,len is 144
---------------
4:{130}unlock now
4:{130}unlock end
4:{130}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{130}lock end
[4][6][0] apply index = 131, commit is 134
4:{131}unlock now
4:{131}unlock end
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{131}lock now
4:{131}lock end
[4][6][0] apply index = 132, commit is 134
4:{132}unlock now
4:{132}unlock end
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{132}lock now
4:{132}lock end
[4][6][0] apply index = 133, commit is 134
4:{133}unlock now
4:{133}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{133}lock now
4:{133}lock end
[4][6][0] apply index = 134, commit is 134
4:{134}unlock now
4:{134}unlock end
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{134}lock now
4:{134}lock end
4:rf.commitIndex = 134, rf.lastApplied = 134
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 139, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 139, lastIndex = 0
测试：4节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 139
updateIndex = 139, lastIndex = 0
4更新log，长度144
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 139
updateIndex = 139, lastIndex = 0
2更新log，长度144
4 return success! num is 1
nextIndex = 140, lastIndex = 0, len = 144
2 return success! num is 2
nextIndex = 140, lastIndex = 0, len = 144
1 max is 144
2 max is 144
0:commitIndex -> 144
[0][6][0] apply index = 140, commit is 144
0:{140}unlock now
0:{140}unlock end
0:{140}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{140}lock end
[0][6][0] apply index = 141, commit is 144
0:{141}unlock now
0:{141}unlock end
[2][6][0] apply index = 135, commit is 139
2:{135}unlock now
2:{135}unlock end
2:{135}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{135}lock end
[2][6][0] apply index = 136, commit is 139
2:{136}unlock now
2:{136}unlock end
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 1 x 1 14 y 672816327287623235 30} 140 6 false [] 0 0}处理完成,通知index = [140]的channel
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
[4][6][0] apply index = 135, commit is 139
4:{135}unlock now
4:{135}unlock end
4:{135}lock now
4:{135}lock end
[4][6][0] apply index = 136, commit is 139
4:{136}unlock now
4:{136}unlock end
2:{136}lock now
2:{136}lock end
[2][6][0] apply index = 137, commit is 139
2:{137}unlock now
2:{137}unlock end
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 1 x 1 14 y 672816327287623235 30} 140 6 false [] 0 0}处理完成,通知完成index = [140]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{141}lock now
0:{141}lock end
[0][6][0] apply index = 142, commit is 144
0:{142}unlock now
0:{142}unlock end
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[140],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y 6 true}
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 29} 141 6 false [] 0 0}处理完成,通知index = [141]的channel
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
kvserver[0]: pre删除通道index: 140
4:{136}lock now
4:{136}lock end
[4][6][0] apply index = 137, commit is 139
4:{137}unlock now
4:{137}unlock end
2:{137}lock now
2:{137}lock end
[2][6][0] apply index = 138, commit is 139
2:{138}unlock now
2:{138}unlock end
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 29} 141 6 false [] 0 0}处理完成,通知完成index = [141]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{142}lock now
0:{142}lock end
[0][6][0] apply index = 143, commit is 144
0:{143}unlock now
0:{143}unlock end
kvserver[0]: begin删除通道index: 140
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[141],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 140
2023/09/23 03:26:43 1: client new get 1
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 31},term is 6,len is 145
---------------
2:{138}lock now
2:{138}lock end
[2][6][0] apply index = 139, commit is 139
2:{139}unlock now
2:{139}unlock end
2:{139}lock now
2:{139}lock end
2:rf.commitIndex = 139, rf.lastApplied = 139
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 25} 142 6 false [] 0 0}处理完成,通知index = [142]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 25} 142 6 false [] 0 0}处理完成,通知完成index = [142]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 0 x 0 14 y 4346951758130697083 26} 143 6 false [] 0 0}处理完成,通知index = [143]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 0 x 0 14 y 4346951758130697083 26} 143 6 false [] 0 0}处理完成,通知完成index = [143]的channel
4:{137}lock now
4:{137}lock end
[4][6][0] apply index = 138, commit is 139
4:{138}unlock now
4:{138}unlock end
4:{138}lock now
4:{138}lock end
[4][6][0] apply index = 139, commit is 139
4:{139}unlock now
4:{139}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
kvserver[0]: pre删除通道index: 141
kvserver[0]: begin删除通道index: 141
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 141
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[142],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
0:{143}lock now
0:{143}lock end
[0][6][0] apply index = 144, commit is 144
0:{144}unlock now
0:{144}unlock end
0:{144}lock now
0:{144}lock end
0:rf.commitIndex = 144, rf.lastApplied = 144
4:{139}lock now
4:{139}lock end
4:rf.commitIndex = 139, rf.lastApplied = 139
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[143],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 y 6 true}
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 3: client new append x 3 14 y
kvserver[0]: pre删除通道index: 142
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 29} 144 6 false [] 0 0}处理完成,通知index = [144]的channel
kvserver[0]: pre删除通道index: 143
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 29} 144 6 false [] 0 0}处理完成,通知完成index = [144]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[144],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
kvserver[0]: begin删除通道index: 142
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 142
kvserver[0]: begin删除通道index: 143
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:26:43 4: client new append x 4 13 y
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 143
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
kvserver[0]: pre删除通道index: 144
kvserver[0]: begin删除通道index: 144
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 144
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:43 2: client new append x 2 12 y
2023/09/23 03:26:43 0: client new append x 0 15 y
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 14 y) 1065774344220344240 30},term is 6,len is 146
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 13 y) 1867579256866231016 26},term is 6,len is 147
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 12 y) 3167499095888228886 30},term is 6,len is 148
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 15 y) 4346951758130697083 27},term is 6,len is 149
---------------
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 144, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 144, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 144
updateIndex = 144, lastIndex = 0
2更新log，长度149
2 return success! num is 1
nextIndex = 145, lastIndex = 0, len = 149
[2][6][0] apply index = 140, commit is 144
2:{140}unlock now
2:{140}unlock end
2:{140}lock now
2:{140}lock end
[2][6][0] apply index = 141, commit is 144
2:{141}unlock now
2:{141}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
测试：4节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 144
updateIndex = 144, lastIndex = 0
4更新log，长度149
2:{141}lock now
2:{141}lock end
[2][6][0] apply index = 142, commit is 144
2:{142}unlock now
2:{142}unlock end
2:{142}lock now
2:{142}lock end
[2][6][0] apply index = 143, commit is 144
2:{143}unlock now
2:{143}unlock end
[4][6][0] apply index = 140, commit is 144
4:{140}unlock now
4:{140}unlock end
4:{140}lock now
4:{140}lock end
[4][6][0] apply index = 141, commit is 144
4:{141}unlock now
4:{141}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 y
2:{143}lock now
2:{143}lock end
[2][6][0] apply index = 144, commit is 144
2:{144}unlock now
2:{144}unlock end
2:{144}lock now
2:{144}lock end
2:rf.commitIndex = 144, rf.lastApplied = 144
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
4 return success! num is 2
nextIndex = 145, lastIndex = 0, len = 149
1 max is 149
2 max is 149
0:commitIndex -> 149
4:{141}lock now
4:{141}lock end
[4][6][0] apply index = 142, commit is 144
4:{142}unlock now
4:{142}unlock end
4:{142}lock now
4:{142}lock end
[4][6][0] apply index = 143, commit is 144
4:{143}unlock now
4:{143}unlock end
[0][6][0] apply index = 145, commit is 149
0:{145}unlock now
0:{145}unlock end
0:{145}lock now
0:{145}lock end
[0][6][0] apply index = 146, commit is 149
0:{146}unlock now
0:{146}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 y
4:{143}lock now
4:{143}lock end
[4][6][0] apply index = 144, commit is 144
4:{144}unlock now
4:{144}unlock end
4:{144}lock now
4:{144}lock end
4:rf.commitIndex = 144, rf.lastApplied = 144
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 31} 145 6 false [] 0 0}处理完成,通知index = [145]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 31} 145 6 false [] 0 0}处理完成,通知完成index = [145]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 3 x 3 14 y 1065774344220344240 30} 146 6 false [] 0 0}处理完成,通知index = [146]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 3 x 3 14 y 1065774344220344240 30} 146 6 false [] 0 0}处理完成,通知完成index = [146]的channel
0:{146}lock now
0:{146}lock end
[0][6][0] apply index = 147, commit is 149
0:{147}unlock now
0:{147}unlock end
0:{147}lock now
0:{147}lock end
[0][6][0] apply index = 148, commit is 149
0:{148}unlock now
0:{148}unlock end
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[145],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
kvserver[0]: pre删除通道index: 145
kvserver[0]: begin删除通道index: 145
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 145
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:43 1: client new append x 1 15 y
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[146],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y 6 true}
kvserver[0]: pre删除通道index: 146
kvserver[0]: begin删除通道index: 146
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 146
2023/09/23 03:26:43 3: client new get 3
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 4 x 4 13 y 1867579256866231016 26} 147 6 false [] 0 0}处理完成,通知index = [147]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 4 x 4 13 y 1867579256866231016 26} 147 6 false [] 0 0}处理完成,通知完成index = [147]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 2 x 2 12 y 3167499095888228886 30} 148 6 false [] 0 0}处理完成,通知index = [148]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 2 x 2 12 y 3167499095888228886 30} 148 6 false [] 0 0}处理完成,通知完成index = [148]的channel
0:{148}lock now
0:{148}lock end
[0][6][0] apply index = 149, commit is 149
0:{149}unlock now
0:{149}unlock end
0:{149}lock now
0:{149}lock end
0:rf.commitIndex = 149, rf.lastApplied = 149
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 0 x 0 15 y 4346951758130697083 27} 149 6 false [] 0 0}处理完成,通知index = [149]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 0 x 0 15 y 4346951758130697083 27} 149 6 false [] 0 0}处理完成,通知完成index = [149]的channel
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[149],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y 6 true}
kvserver[0]: pre删除通道index: 149
kvserver[0]: begin删除通道index: 149
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 149
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[147],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y 6 true}
kvserver[0]: pre删除通道index: 147
kvserver[0]: begin删除通道index: 147
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 147
2023/09/23 03:26:43 4: client new get 4
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[148],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 y 6 true}
kvserver[0]: pre删除通道index: 148
kvserver[0]: begin删除通道index: 148
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 148
2023/09/23 03:26:43 2: client new append x 2 13 y
2023/09/23 03:26:43 0: client new get 0
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 31},term is 6,len is 150
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 27},term is 6,len is 151
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 13 y) 3167499095888228886 31},term is 6,len is 152
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 15 y) 672816327287623235 32},term is 6,len is 153
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 28},term is 6,len is 154
---------------
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 149, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 149, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 149
测试：4节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 149
updateIndex = 149, lastIndex = 0
4更新log，长度154
4 return success! num is 1
nextIndex = 150, lastIndex = 0, len = 154
[4][6][0] apply index = 145, commit is 149
4:{145}unlock now
4:{145}unlock end
4:{145}lock now
4:{145}lock end
[4][6][0] apply index = 146, commit is 149
4:{146}unlock now
4:{146}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
4:{146}lock now
4:{146}lock end
[4][6][0] apply index = 147, commit is 149
4:{147}unlock now
4:{147}unlock end
4:{147}lock now
4:{147}lock end
[4][6][0] apply index = 148, commit is 149
4:{148}unlock now
4:{148}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 y
4:{148}lock now
4:{148}lock end
[4][6][0] apply index = 149, commit is 149
4:{149}unlock now
4:{149}unlock end
4:{149}lock now
4:{149}lock end
4:rf.commitIndex = 149, rf.lastApplied = 149
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
updateIndex = 149, lastIndex = 0
2更新log，长度154
[2][6][0] apply index = 145, commit is 149
2:{145}unlock now
2:{145}unlock end
2:{145}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{145}lock end
[2][6][0] apply index = 146, commit is 149
2:{146}unlock now
2:{146}unlock end
2 return success! num is 2
nextIndex = 150, lastIndex = 0, len = 154
1 max is 154
2 max is 154
0:commitIndex -> 154
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0][6][0] apply index = 150, commit is 154
0:{150}unlock now
0:{150}unlock end
0:{150}lock now
0:{150}lock end
[0][6][0] apply index = 151, commit is 154
0:{151}unlock now
0:{151}unlock end
2:{146}lock now
2:{146}lock end
[2][6][0] apply index = 147, commit is 149
2:{147}unlock now
2:{147}unlock end
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{147}lock now
2:{147}lock end
[2][6][0] apply index = 148, commit is 149
2:{148}unlock now
2:{148}unlock end
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 31} 150 6 false [] 0 0}处理完成,通知index = [150]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[150],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 31} 150 6 false [] 0 0}处理完成,通知完成index = [150]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{148}lock now
2:{148}lock end
[2][6][0] apply index = 149, commit is 149
2:{149}unlock now
2:{149}unlock end
0:{151}lock now
0:{151}lock end
[0][6][0] apply index = 152, commit is 154
0:{152}unlock now
0:{152}unlock end
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
kvserver[0]: pre删除通道index: 150
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 27} 151 6 false [] 0 0}处理完成,通知index = [151]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 27} 151 6 false [] 0 0}处理完成,通知完成index = [151]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[151],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
0:{152}lock now
0:{152}lock end
[0][6][0] apply index = 153, commit is 154
0:{153}unlock now
0:{153}unlock end
2:{149}lock now
2:{149}lock end
2:rf.commitIndex = 149, rf.lastApplied = 149
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 2 x 2 13 y 3167499095888228886 31} 152 6 false [] 0 0}处理完成,通知index = [152]的channel
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[152],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y 6 true}
kvserver[0]: begin删除通道index: 150
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 150
kvserver[0]: pre删除通道index: 152
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 2 x 2 13 y 3167499095888228886 31} 152 6 false [] 0 0}处理完成,通知完成index = [152]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
kvserver[0]: pre删除通道index: 151
0:{153}lock now
0:{153}lock end
[0][6][0] apply index = 154, commit is 154
0:{154}unlock now
0:{154}unlock end
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:43 3: client new append x 3 15 y
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 1 x 1 15 y 672816327287623235 32} 153 6 false [] 0 0}处理完成,通知index = [153]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 1 x 1 15 y 672816327287623235 32} 153 6 false [] 0 0}处理完成,通知完成index = [153]的channel
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[153],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 y 6 true}
0:{154}lock now
0:{154}lock end
0:rf.commitIndex = 154, rf.lastApplied = 154
kvserver[0]: begin删除通道index: 152
kvserver[0]: pre删除通道index: 153
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 152
2023/09/23 03:26:43 2: client new get 2
kvserver[0]: begin删除通道index: 151
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 151
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 32},term is 6,len is 155
---------------
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 28} 154 6 false [] 0 0}处理完成,通知index = [154]的channel
kvserver[0]: begin删除通道index: 153
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 153
2023/09/23 03:26:43 1: client new append x 1 16 y
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 16 y) 672816327287623235 33},term is 6,len is 156
---------------
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 28} 154 6 false [] 0 0}处理完成,通知完成index = [154]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[154],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
kvserver[0]: pre删除通道index: 154
kvserver[0]: begin删除通道index: 154
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 154
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:43 0: client new get 0
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 29},term is 6,len is 157
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 15 y) 1065774344220344240 32},term is 6,len is 158
---------------
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 4: client new get 4
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 28},term is 6,len is 159
---------------
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 154, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 154, lastIndex = 0
测试：4节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 154
updateIndex = 154, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 154
updateIndex = 154, lastIndex = 0
2更新log，长度159
4更新log，长度159
4 return success! num is 1
nextIndex = 155, lastIndex = 0, len = 159
[2][6][0] apply index = 150, commit is 154
2:{150}unlock now
2:{150}unlock end
2:{150}lock now
2:{150}lock end
[2][6][0] apply index = 151, commit is 154
2:{151}unlock now
2:{151}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2 return success! num is 2
nextIndex = 155, lastIndex = 0, len = 159
1 max is 159
2 max is 159
0:commitIndex -> 159
[0][6][0] apply index = 155, commit is 159
0:{155}unlock now
0:{155}unlock end
0:{155}lock now
0:{155}lock end
[0][6][0] apply index = 156, commit is 159
0:{156}unlock now
0:{156}unlock end
[4][6][0] apply index = 150, commit is 154
4:{150}unlock now
4:{150}unlock end
4:{150}lock now
4:{150}lock end
[4][6][0] apply index = 151, commit is 154
4:{151}unlock now
4:{151}unlock end
2:{151}lock now
2:{151}lock end
[2][6][0] apply index = 152, commit is 154
2:{152}unlock now
2:{152}unlock end
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 32} 155 6 false [] 0 0}处理完成,通知index = [155]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 32} 155 6 false [] 0 0}处理完成,通知完成index = [155]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[155],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
0:{156}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 1 x 1 16 y 672816327287623235 33} 156 6 false [] 0 0}处理完成,通知index = [156]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 1 x 1 16 y 672816327287623235 33} 156 6 false [] 0 0}处理完成,通知完成index = [156]的channel
0:{156}lock end
[0][6][0] apply index = 157, commit is 159
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[156],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 6 true}
0:{157}unlock now
0:{157}unlock end
0:{157}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{157}lock end
[0][6][0] apply index = 158, commit is 159
0:{158}unlock now
0:{158}unlock end
2:{152}lock now
2:{152}lock end
[2][6][0] apply index = 153, commit is 154
2:{153}unlock now
2:{153}unlock end
2:{153}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{153}lock end
[2][6][0] apply index = 154, commit is 154
2:{154}unlock now
2:{154}unlock end
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
kvserver[0]: pre删除通道index: 156
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
kvserver[0]: pre删除通道index: 155
2:{154}lock now
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 29} 157 6 false [] 0 0}处理完成,通知index = [157]的channel
2:{154}lock end
2:rf.commitIndex = 154, rf.lastApplied = 154
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 29} 157 6 false [] 0 0}处理完成,通知完成index = [157]的channel
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
4:{151}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{151}lock end
[4][6][0] apply index = 152, commit is 154
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[157],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
4:{152}unlock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{152}unlock end
0:{158}lock now
0:{158}lock end
[0][6][0] apply index = 159, commit is 159
0:{159}unlock now
0:{159}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
kvserver[0]: begin删除通道index: 156
4:{152}lock now
4:{152}lock end
[4][6][0] apply index = 153, commit is 154
4:{153}unlock now
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 156
4:{153}unlock end
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
4:{153}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{153}lock end
[4][6][0] apply index = 154, commit is 154
4:{154}unlock now
4:{154}unlock end
2023/09/23 03:26:43 1: client new get 1
kvserver[0]: begin删除通道index: 155
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 y
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 155
4:{154}lock now
4:{154}lock end
4:rf.commitIndex = 154, rf.lastApplied = 154
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 34},term is 6,len is 160
---------------
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 y
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 3 x 3 15 y 1065774344220344240 32} 158 6 false [] 0 0}处理完成,通知index = [158]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 3 x 3 15 y 1065774344220344240 32} 158 6 false [] 0 0}处理完成,通知完成index = [158]的channel
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[158],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 y 6 true}
0:{159}lock now
0:{159}lock end
0:rf.commitIndex = 159, rf.lastApplied = 159
2023/09/23 03:26:43 2: client new append x 2 14 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
kvserver[0]: pre删除通道index: 157
kvserver[0]: begin删除通道index: 157
kvserver[0]: pre删除通道index: 158
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 14 y) 3167499095888228886 33},term is 6,len is 161
---------------
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 157
kvserver[0]: begin删除通道index: 158
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 158
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 3: client new append x 3 16 y
2023/09/23 03:26:43 0: client new append x 0 16 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 28} 159 6 false [] 0 0}处理完成,通知index = [159]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 28} 159 6 false [] 0 0}处理完成,通知完成index = [159]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[159],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
kvserver[0]: pre删除通道index: 159
kvserver[0]: begin删除通道index: 159
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 159
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 4: client new get 4
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 16 y) 1065774344220344240 33},term is 6,len is 162
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 16 y) 4346951758130697083 30},term is 6,len is 163
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 29},term is 6,len is 164
---------------
1 follow -> candidate
1 begin to elect
1 term is 7
3 follow -> candidate
3 begin to elect
3 term is 7
1:投票检查129,129,6,6,7,7
1 vote refuse 2 -> 3
3:投票检查129,129,6,6,7,7
3 vote refuse 2 -> 1
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 159, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 159, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 159
updateIndex = 159, lastIndex = 0
测试：4节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 159
updateIndex = 159, lastIndex = 0
4更新log，长度164
4 return success! num is 1
nextIndex = 160, lastIndex = 0, len = 164
[4][6][0] apply index = 155, commit is 159
4:{155}unlock now
4:{155}unlock end
4:{155}lock now
4:{155}lock end
[4][6][0] apply index = 156, commit is 159
4:{156}unlock now
4:{156}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
4:{156}lock now
4:{156}lock end
[4][6][0] apply index = 157, commit is 159
4:{157}unlock now
4:{157}unlock end
4:{157}lock now
4:{157}lock end
[4][6][0] apply index = 158, commit is 159
4:{158}unlock now
4:{158}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 y
4:{158}lock now
4:{158}lock end
[4][6][0] apply index = 159, commit is 159
4:{159}unlock now
4:{159}unlock end
4:{159}lock now
4:{159}lock end
4:rf.commitIndex = 159, rf.lastApplied = 159
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2更新log，长度164
[2][6][0] apply index = 155, commit is 159
2:{155}unlock now
2:{155}unlock end
2 return success! num is 2
nextIndex = 160, lastIndex = 0, len = 164
1 max is 164
2 max is 164
0:commitIndex -> 164
[0][6][0] apply index = 160, commit is 164
0:{160}unlock now
0:{160}unlock end
0:{160}lock now
0:{160}lock end
[0][6][0] apply index = 161, commit is 164
0:{161}unlock now
0:{161}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 34} 160 6 false [] 0 0}处理完成,通知index = [160]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 34} 160 6 false [] 0 0}处理完成,通知完成index = [160]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 2 x 2 14 y 3167499095888228886 33} 161 6 false [] 0 0}处理完成,通知index = [161]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 2 x 2 14 y 3167499095888228886 33} 161 6 false [] 0 0}处理完成,通知完成index = [161]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[160],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[161],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 y 6 true}
kvserver[0]: pre删除通道index: 160
kvserver[0]: pre删除通道index: 161
kvserver[0]: begin删除通道index: 160
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 160
0:{161}lock now
0:{161}lock end
[0][6][0] apply index = 162, commit is 164
0:{162}unlock now
0:{162}unlock end
0:{162}lock now
0:{162}lock end
[0][6][0] apply index = 163, commit is 164
0:{163}unlock now
0:{163}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
kvserver[0]: begin删除通道index: 161
2023/09/23 03:26:43 1: client new append x 1 17 y
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 161
2023/09/23 03:26:43 2: client new append x 2 15 y
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 3 x 3 16 y 1065774344220344240 33} 162 6 false [] 0 0}处理完成,通知index = [162]的channel
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 17 y) 672816327287623235 35},term is 6,len is 165
---------------
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[162],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 y 6 true}
kvserver[0]: pre删除通道index: 162
kvserver[0]: begin删除通道index: 162
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 162
2023/09/23 03:26:43 3: client new append x 3 17 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 3 x 3 16 y 1065774344220344240 33} 162 6 false [] 0 0}处理完成,通知完成index = [162]的channel
0:{163}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 15 y) 3167499095888228886 34},term is 6,len is 166
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 17 y) 1065774344220344240 34},term is 6,len is 167
---------------
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{163}lock end
[0][6][0] apply index = 164, commit is 164
0:{164}unlock now
0:{164}unlock end
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 0 x 0 16 y 4346951758130697083 30} 163 6 false [] 0 0}处理完成,通知index = [163]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 0 x 0 16 y 4346951758130697083 30} 163 6 false [] 0 0}处理完成,通知完成index = [163]的channel
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[163],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 6 true}
0:{164}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{164}lock end
0:rf.commitIndex = 164, rf.lastApplied = 164
2:{155}lock now
2:{155}lock end
[2][6][0] apply index = 156, commit is 159
2:{156}unlock now
2:{156}unlock end
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
kvserver[0]: pre删除通道index: 163
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2:{156}lock now
2:{156}lock end
[2][6][0] apply index = 157, commit is 159
2:{157}unlock now
2:{157}unlock end
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 29} 164 6 false [] 0 0}处理完成,通知index = [164]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 29} 164 6 false [] 0 0}处理完成,通知完成index = [164]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[164],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
kvserver[0]: begin删除通道index: 163
2:{157}lock now
2:{157}lock end
[2][6][0] apply index = 158, commit is 159
2:{158}unlock now
2:{158}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 163
2023/09/23 03:26:43 0: client new get 0
2023/09/23 03:26:43 CommandApply!!!!!!!!!
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
kvserver[0]: pre删除通道index: 164
kvserver[0]: begin删除通道index: 164
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 4346951758130697083 31},term is 6,len is 168
---------------
2:{158}lock now
2:{158}lock end
[2][6][0] apply index = 159, commit is 159
2:{159}unlock now
2:{159}unlock end
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2:{159}lock now
2:{159}lock end
2:rf.commitIndex = 159, rf.lastApplied = 159
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 164
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 4: client new get 4
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 1867579256866231016 30},term is 6,len is 169
---------------
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 164, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 164, lastIndex = 0
测试：4节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 164
updateIndex = 164, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 164
updateIndex = 164, lastIndex = 0
4更新log，长度169
[4][6][0] apply index = 160, commit is 164
4:{160}unlock now
4:{160}unlock end
4:{160}lock now
4:{160}lock end
[4][6][0] apply index = 161, commit is 164
4:{161}unlock now
4:{161}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 y
4:{161}lock now
4:{161}lock end
[4][6][0] apply index = 162, commit is 164
4:{162}unlock now
4:{162}unlock end
4:{162}lock now
4:{162}lock end
[4][6][0] apply index = 163, commit is 164
4:{163}unlock now
4:{163}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
4:{163}lock now
4:{163}lock end
[4][6][0] apply index = 164, commit is 164
4:{164}unlock now
4:{164}unlock end
4:{164}lock now
4:{164}lock end
4:rf.commitIndex = 164, rf.lastApplied = 164
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
4 return success! num is 1
nextIndex = 165, lastIndex = 0, len = 169
2更新log，长度169
2 return success! num is 2
nextIndex = 165, lastIndex = 0, len = 169
1 max is 169
2 max is 169
0:commitIndex -> 169
[2][6][0] apply index = 160, commit is 164
2:{160}unlock now
2:{160}unlock end
2:{160}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{160}lock end
[2][6][0] apply index = 161, commit is 164
2:{161}unlock now
2:{161}unlock end
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{161}lock now
2:{161}lock end
[2][6][0] apply index = 162, commit is 164
2:{162}unlock now
2:{162}unlock end
[0][6][0] apply index = 165, commit is 169
0:{165}unlock now
0:{165}unlock end
0:{165}lock now
0:{165}lock end
[0][6][0] apply index = 166, commit is 169
0:{166}unlock now
0:{166}unlock end
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{162}lock now
2:{162}lock end
[2][6][0] apply index = 163, commit is 164
2:{163}unlock now
2:{163}unlock end
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 1 x 1 17 y 672816327287623235 35} 165 6 false [] 0 0}处理完成,通知index = [165]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 1 x 1 17 y 672816327287623235 35} 165 6 false [] 0 0}处理完成,通知完成index = [165]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[165],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y 6 true}
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{163}lock now
0:{166}lock now
0:{166}lock end
[0][6][0] apply index = 167, commit is 169
0:{167}unlock now
0:{167}unlock end
kvserver[0]: pre删除通道index: 165
2:{163}lock end
[2][6][0] apply index = 164, commit is 164
2:{164}unlock now
2:{164}unlock end
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{164}lock now
2:{164}lock end
2:rf.commitIndex = 164, rf.lastApplied = 164
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 2 x 2 15 y 3167499095888228886 34} 166 6 false [] 0 0}处理完成,通知index = [166]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 2 x 2 15 y 3167499095888228886 34} 166 6 false [] 0 0}处理完成,通知完成index = [166]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[166],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y 6 true}
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 3 x 3 17 y 1065774344220344240 34} 167 6 false [] 0 0}处理完成,通知index = [167]的channel
kvserver[0]: pre删除通道index: 166
0:{167}lock now
0:{167}lock end
[0][6][0] apply index = 168, commit is 169
0:{168}unlock now
0:{168}unlock end
kvserver[0]: begin删除通道index: 165
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 165
kvserver[0]: begin删除通道index: 166
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 166
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 3 x 3 17 y 1065774344220344240 34} 167 6 false [] 0 0}处理完成,通知完成index = [167]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 31} 168 6 false [] 0 0}处理完成,通知index = [168]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 0  4346951758130697083 31} 168 6 false [] 0 0}处理完成,通知完成index = [168]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[168],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
kvserver[0]: pre删除通道index: 168
kvserver[0]: begin删除通道index: 168
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 168
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[167],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 6 true}
kvserver[0]: pre删除通道index: 167
kvserver[0]: begin删除通道index: 167
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 167
0:{168}lock now
0:{168}lock end
[0][6][0] apply index = 169, commit is 169
0:{169}unlock now
0:{169}unlock end
0:{169}lock now
0:{169}lock end
0:rf.commitIndex = 169, rf.lastApplied = 169
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
2023/09/23 03:26:43 0: client new append x 0 17 y
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 17 y) 4346951758130697083 32},term is 6,len is 170
---------------
2023/09/23 03:26:43 3: client new get 3
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 30} 169 6 false [] 0 0}处理完成,通知index = [169]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 4  1867579256866231016 30} 169 6 false [] 0 0}处理完成,通知完成index = [169]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[169],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
kvserver[0]: pre删除通道index: 169
kvserver[0]: begin删除通道index: 169
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 169
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 4: client new append x 4 14 y
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 35},term is 6,len is 171
---------------
2023/09/23 03:26:43 2: client new get 2
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 14 y) 1867579256866231016 31},term is 6,len is 172
---------------
2023/09/23 03:26:43 1: client new get 1
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3167499095888228886 35},term is 6,len is 173
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 672816327287623235 36},term is 6,len is 174
---------------
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 169, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 169, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 169
updateIndex = 169, lastIndex = 0
测试：4节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 169
updateIndex = 169, lastIndex = 0
4更新log，长度174
[4][6][0] apply index = 165, commit is 169
4:{165}unlock now
4:{165}unlock end
4:{165}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{165}lock end
[4][6][0] apply index = 166, commit is 169
4:{166}unlock now
4:{166}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{166}lock now
4:{166}lock end
[4][6][0] apply index = 167, commit is 169
4:{167}unlock now
4:{167}unlock end
4 return success! num is 1
nextIndex = 170, lastIndex = 0, len = 174
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{167}lock now
4:{167}lock end
[4][6][0] apply index = 168, commit is 169
4:{168}unlock now
4:{168}unlock end
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{168}lock now
4:{168}lock end
[4][6][0] apply index = 169, commit is 169
4:{169}unlock now
4:{169}unlock end
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
4:{169}lock now
4:{169}lock end
4:rf.commitIndex = 169, rf.lastApplied = 169
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2更新log，长度174
2 return success! num is 2
nextIndex = 170, lastIndex = 0, len = 174
1 max is 174
2 max is 174
0:commitIndex -> 174
[2][6][0] apply index = 165, commit is 169
2:{165}unlock now
2:{165}unlock end
2:{165}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2:{165}lock end
[2][6][0] apply index = 166, commit is 169
2:{166}unlock now
2:{166}unlock end
[0][6][0] apply index = 170, commit is 174
0:{170}unlock now
0:{170}unlock end
0:{170}lock now
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{170}lock end
[0][6][0] apply index = 171, commit is 174
0:{171}unlock now
0:{171}unlock end
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 y
2:{166}lock now
2:{166}lock end
[2][6][0] apply index = 167, commit is 169
2:{167}unlock now
2:{167}unlock end
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 0 x 0 17 y 4346951758130697083 32} 170 6 false [] 0 0}处理完成,通知index = [170]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 0 x 0 17 y 4346951758130697083 32} 170 6 false [] 0 0}处理完成,通知完成index = [170]的channel
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[170],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 y 6 true}
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{171}lock now
0:{171}lock end
[0][6][0] apply index = 172, commit is 174
0:{172}unlock now
0:{172}unlock end
2:{167}lock now
2:{167}lock end
[2][6][0] apply index = 168, commit is 169
2:{168}unlock now
2:{168}unlock end
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
kvserver[0]: pre删除通道index: 170
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 35} 171 6 false [] 0 0}处理完成,通知index = [171]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 35} 171 6 false [] 0 0}处理完成,通知完成index = [171]的channel
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[171],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 CommandApply!!!!!!!!!
kvserver[0]: begin删除通道index: 170
0:{172}lock now
0:{172}lock end
[0][6][0] apply index = 173, commit is 174
0:{173}unlock now
0:{173}unlock end
2:{168}lock now
2:{168}lock end
[2][6][0] apply index = 169, commit is 169
2:{169}unlock now
2:{169}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 170
2023/09/23 03:26:43 0: client new append x 0 18 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
kvserver[0]: pre删除通道index: 171
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 y
2:{169}lock now
2:{169}lock end
2:rf.commitIndex = 169, rf.lastApplied = 169
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 4 x 4 14 y 1867579256866231016 31} 172 6 false [] 0 0}处理完成,通知index = [172]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Append 4 x 4 14 y 1867579256866231016 31} 172 6 false [] 0 0}处理完成,通知完成index = [172]的channel
2023/09/23 03:26:43 kvserver[0]: PUTAPPEND获取到通知结果,index=[172],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 y 6 true}
2023/09/23 03:26:43 CommandApply!!!!!!!!!
0:{173}lock now
kvserver[0]: begin删除通道index: 171
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 171
kvserver[0]: pre删除通道index: 172
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 18 y) 4346951758130697083 33},term is 6,len is 175
---------------
0:{173}lock end
[0][6][0] apply index = 174, commit is 174
0:{174}unlock now
0:{174}unlock end
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:43 3: client new get 3
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 35} 173 6 false [] 0 0}处理完成,通知index = [173]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 2  3167499095888228886 35} 173 6 false [] 0 0}处理完成,通知完成index = [173]的channel
kvserver[0]: begin删除通道index: 172
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[173],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 172
0:{174}lock now
2023/09/23 03:26:43 4: client new append x 4 15 y
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
kvserver[0]: pre删除通道index: 173
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 36},term is 6,len is 176
---------------
0:{174}lock end
0:rf.commitIndex = 174, rf.lastApplied = 174
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 15 y) 1867579256866231016 32},term is 6,len is 177
---------------
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 36} 174 6 false [] 0 0}处理完成,通知index = [174]的channel
2023/09/23 03:26:43 kvserver[0]: applyMsg: {true {Get 1  672816327287623235 36} 174 6 false [] 0 0}处理完成,通知完成index = [174]的channel
kvserver[0]: begin删除通道index: 173
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 173
2023/09/23 03:26:43 kvserver[0]: GET获取到通知结果,index=[174],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
kvserver[0]: pre删除通道index: 174
kvserver[0]: begin删除通道index: 174
2023/09/23 03:26:43 kvserver[0]: 成功删除通道index: 174
OK:i num is 3, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
2023/09/23 03:26:43 2: client new append x 2 16 y
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
2023/09/23 03:26:43 1: client new append x 1 18 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 16 y) 3167499095888228886 36},term is 6,len is 178
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 18 y) 672816327287623235 37},term is 6,len is 179
---------------
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 174, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 174, lastIndex = 0
测试：2节点term为6，leader发送term为6, 接收5个, PrevLogIndex is 174
updateIndex = 174, lastIndex = 0
2更新log，长度179
[2][6][0] apply index = 170, commit is 174
2:{170}unlock now
2:{170}unlock end
2:{170}lock now
2:{170}lock end
[2][6][0] apply index = 171, commit is 174
2:{171}unlock now
2:{171}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2:{171}lock now
2:{171}lock end
[2][6][0] apply index = 172, commit is 174
2:{172}unlock now
2:{172}unlock end
2:{172}lock now
2:{172}lock end
[2][6][0] apply index = 173, commit is 174
2:{173}unlock now
2:{173}unlock end
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 y
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
2:{173}lock now
2:{173}lock end
[2][6][0] apply index = 174, commit is 174
2:{174}unlock now
2:{174}unlock end
2:{174}lock now
2:{174}lock end
2:rf.commitIndex = 174, rf.lastApplied = 174
2023/09/23 03:26:43 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
测试：3节点term为7，leader发送term为6, 接收50个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：3节点term为7，leader发送term为6, 接收20个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
2 return success! num is 1
nextIndex = 175, lastIndex = 0, len = 179
0 AppOutOfDate follow -> candidate
测试：3节点term为7，leader发送term为6, 接收30个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：3节点term为7，leader发送term为6, 接收5个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：3节点term为7，leader发送term为6, 接收10个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
1:投票检查129,45,6,1,6,7
1 vote refuse 1 -> 4
测试：3节点term为7，leader发送term为6, 接收5个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
4:投票检查174,129,6,6,7,6
测试：3节点term为7，leader发送term为6, 接收15个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：3节点term为7，leader发送term为6, 接收25个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
0:投票检查179,129,6,6,7,7
测试：3节点term为7，leader发送term为6, 接收5个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：3节点term为7，leader发送term为6, 接收45个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：3节点term为7，leader发送term为6, 接收35个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
2:投票检查179,129,6,6,7,6
测试：3节点term为7，leader发送term为6, 接收40个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
0 follow -> candidate
0 begin to elect
0 term is 8
3:投票检查129,179,6,6,8,7
2:投票检查179,179,6,6,8,7
2 vote now -> 0
0: vote num is 2
3 vote now -> 0
0: vote num is 3
0 is leader
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 179, lastIndex = 0
0 begin to append 3
prevlogindex = 179, lastIndex = 0
0 begin to append 4
prevlogindex = 179, lastIndex = 0
测试：2节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 179
测试：3节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 179
不匹配,args = 179,lastIndex = 0,len = 129
reply XLen is 130
0 nextIndex change to 130
nextIndex = 130, lastIndex = 0, len = 179
2:rf.commitIndex = 174, rf.lastApplied = 174
2 return success! num is 1
nextIndex = 180, lastIndex = 0, len = 179
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 179, lastIndex = 0
0 begin to append 3
prevlogindex = 129, lastIndex = 0
0 begin to append 4
prevlogindex = 179, lastIndex = 0
测试：2节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 179
测试：3节点term为8，leader发送term为8, 接收50个, PrevLogIndex is 129
updateIndex = 129, lastIndex = 0
3更新log，长度179
2:rf.commitIndex = 174, rf.lastApplied = 174
2 return success! num is 1
nextIndex = 180, lastIndex = 0, len = 179
[3][8][0] apply index = 125, commit is 174
3:{125}unlock now
3:{125}unlock end
3:{125}lock now
3:{125}lock end
[3][8][0] apply index = 126, commit is 174
3:{126}unlock now
3:{126}unlock end
3 return success! num is 2
nextIndex = 130, lastIndex = 0, len = 179
1 max is 179
2 max is 179
return because max = 179, last = 0, 6 != 8
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
3:{126}lock now
3:{126}lock end
[3][8][0] apply index = 127, commit is 174
3:{127}unlock now
3:{127}unlock end
3:{127}lock now
3:{127}lock end
[3][8][0] apply index = 128, commit is 174
3:{128}unlock now
3:{128}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
3:{128}lock now
3:{128}lock end
[3][8][0] apply index = 129, commit is 174
3:{129}unlock now
3:{129}unlock end
3:{129}lock now
3:{129}lock end
[3][8][0] apply index = 130, commit is 174
3:{130}unlock now
3:{130}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
3:{130}lock now
3:{130}lock end
[3][8][0] apply index = 131, commit is 174
3:{131}unlock now
3:{131}unlock end
3:{131}lock now
3:{131}lock end
[3][8][0] apply index = 132, commit is 174
3:{132}unlock now
3:{132}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
3:{132}lock now
3:{132}lock end
[3][8][0] apply index = 133, commit is 174
3:{133}unlock now
3:{133}unlock end
3:{133}lock now
3:{133}lock end
[3][8][0] apply index = 134, commit is 174
3:{134}unlock now
3:{134}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
3:{134}lock now
3:{134}lock end
[3][8][0] apply index = 135, commit is 174
3:{135}unlock now
3:{135}unlock end
3:{135}lock now
3:{135}lock end
[3][8][0] apply index = 136, commit is 174
3:{136}unlock now
3:{136}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
3:{136}lock now
3:{136}lock end
[3][8][0] apply index = 137, commit is 174
3:{137}unlock now
3:{137}unlock end
3:{137}lock now
3:{137}lock end
[3][8][0] apply index = 138, commit is 174
3:{138}unlock now
3:{138}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
3:{138}lock now
3:{138}lock end
[3][8][0] apply index = 139, commit is 174
3:{139}unlock now
3:{139}unlock end
3:{139}lock now
3:{139}lock end
[3][8][0] apply index = 140, commit is 174
3:{140}unlock now
3:{140}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
3:{140}lock now
3:{140}lock end
[3][8][0] apply index = 141, commit is 174
3:{141}unlock now
3:{141}unlock end
3:{141}lock now
3:{141}lock end
[3][8][0] apply index = 142, commit is 174
3:{142}unlock now
3:{142}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
3:{142}lock now
3:{142}lock end
[3][8][0] apply index = 143, commit is 174
3:{143}unlock now
3:{143}unlock end
3:{143}lock now
3:{143}lock end
[3][8][0] apply index = 144, commit is 174
3:{144}unlock now
3:{144}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
3:{144}lock now
3:{144}lock end
[3][8][0] apply index = 145, commit is 174
3:{145}unlock now
3:{145}unlock end
3:{145}lock now
3:{145}lock end
[3][8][0] apply index = 146, commit is 174
3:{146}unlock now
3:{146}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
3:{146}lock now
3:{146}lock end
[3][8][0] apply index = 147, commit is 174
3:{147}unlock now
3:{147}unlock end
3:{147}lock now
3:{147}lock end
[3][8][0] apply index = 148, commit is 174
3:{148}unlock now
3:{148}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 y
3:{148}lock now
3:{148}lock end
[3][8][0] apply index = 149, commit is 174
3:{149}unlock now
3:{149}unlock end
3:{149}lock now
3:{149}lock end
[3][8][0] apply index = 150, commit is 174
3:{150}unlock now
3:{150}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
3:{150}lock now
3:{150}lock end
[3][8][0] apply index = 151, commit is 174
3:{151}unlock now
3:{151}unlock end
3:{151}lock now
3:{151}lock end
[3][8][0] apply index = 152, commit is 174
3:{152}unlock now
3:{152}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
3:{152}lock now
3:{152}lock end
[3][8][0] apply index = 153, commit is 174
3:{153}unlock now
3:{153}unlock end
3:{153}lock now
3:{153}lock end
[3][8][0] apply index = 154, commit is 174
3:{154}unlock now
3:{154}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
3:{154}lock now
3:{154}lock end
[3][8][0] apply index = 155, commit is 174
3:{155}unlock now
3:{155}unlock end
3:{155}lock now
3:{155}lock end
[3][8][0] apply index = 156, commit is 174
3:{156}unlock now
3:{156}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
3:{156}lock now
3:{156}lock end
[3][8][0] apply index = 157, commit is 174
3:{157}unlock now
3:{157}unlock end
3:{157}lock now
3:{157}lock end
[3][8][0] apply index = 158, commit is 174
3:{158}unlock now
3:{158}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 y
3:{158}lock now
3:{158}lock end
[3][8][0] apply index = 159, commit is 174
3:{159}unlock now
3:{159}unlock end
3:{159}lock now
3:{159}lock end
[3][8][0] apply index = 160, commit is 174
3:{160}unlock now
3:{160}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
3:{160}lock now
3:{160}lock end
[3][8][0] apply index = 161, commit is 174
3:{161}unlock now
3:{161}unlock end
3:{161}lock now
3:{161}lock end
[3][8][0] apply index = 162, commit is 174
3:{162}unlock now
3:{162}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 y
3:{162}lock now
3:{162}lock end
[3][8][0] apply index = 163, commit is 174
3:{163}unlock now
3:{163}unlock end
3:{163}lock now
3:{163}lock end
[3][8][0] apply index = 164, commit is 174
3:{164}unlock now
3:{164}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
3:{164}lock now
3:{164}lock end
[3][8][0] apply index = 165, commit is 174
3:{165}unlock now
3:{165}unlock end
3:{165}lock now
3:{165}lock end
[3][8][0] apply index = 166, commit is 174
3:{166}unlock now
3:{166}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
3:{166}lock now
3:{166}lock end
[3][8][0] apply index = 167, commit is 174
3:{167}unlock now
3:{167}unlock end
3:{167}lock now
3:{167}lock end
[3][8][0] apply index = 168, commit is 174
3:{168}unlock now
3:{168}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
3:{168}lock now
3:{168}lock end
[3][8][0] apply index = 169, commit is 174
3:{169}unlock now
3:{169}unlock end
3:{169}lock now
3:{169}lock end
[3][8][0] apply index = 170, commit is 174
3:{170}unlock now
3:{170}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 y
3:{170}lock now
3:{170}lock end
[3][8][0] apply index = 171, commit is 174
3:{171}unlock now
3:{171}unlock end
3:{171}lock now
3:{171}lock end
[3][8][0] apply index = 172, commit is 174
3:{172}unlock now
3:{172}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 y
3:{172}lock now
3:{172}lock end
[3][8][0] apply index = 173, commit is 174
3:{173}unlock now
3:{173}unlock end
3:{173}lock now
3:{173}lock end
[3][8][0] apply index = 174, commit is 174
3:{174}unlock now
3:{174}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
3:{174}lock now
3:{174}lock end
3:rf.commitIndex = 174, rf.lastApplied = 174
2023/09/23 03:26:44 kvserver[0]: PUTAPPEND处理请求超时: {Append 0 x 0 18 y 4346951758130697083 33}
kvserver[0]: pre删除通道index: 175
kvserver[0]: begin删除通道index: 175
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 175
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 18 y) 4346951758130697083 33},term is 8,len is 180
---------------
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 179, lastIndex = 0
0 begin to append 3
prevlogindex = 179, lastIndex = 0
0 begin to append 4
测试：2节点term为8，leader发送term为8, 接收1个, PrevLogIndex is 179
updateIndex = 179, lastIndex = 0
prevlogindex = 179, lastIndex = 0
2023/09/23 03:26:44 kvserver[0]: GET处理请求超时: {Get 3  1065774344220344240 36}
kvserver[0]: pre删除通道index: 176
kvserver[0]: begin删除通道index: 176
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 176
测试：3节点term为8，leader发送term为8, 接收1个, PrevLogIndex is 179
2更新log，长度180
updateIndex = 179, lastIndex = 0
2:rf.commitIndex = 174, rf.lastApplied = 174
2 return success! num is 1
nextIndex = 180, lastIndex = 0, len = 180
3更新log，长度180
3:rf.commitIndex = 174, rf.lastApplied = 174
2023/09/23 03:26:44 kvserver[0]: PUTAPPEND处理请求超时: {Append 2 x 2 16 y 3167499095888228886 36}
kvserver[0]: pre删除通道index: 178
kvserver[0]: begin删除通道index: 178
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 178
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1065774344220344240 36},term is 8,len is 181
---------------
2023/09/23 03:26:44 kvserver[0]: PUTAPPEND处理请求超时: {Append 4 x 4 15 y 1867579256866231016 32}
kvserver[0]: pre删除通道index: 177
kvserver[0]: begin删除通道index: 177
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 177
2023/09/23 03:26:44 kvserver[0]: PUTAPPEND处理请求超时: {Append 1 x 1 18 y 672816327287623235 37}
kvserver[0]: pre删除通道index: 179
kvserver[0]: begin删除通道index: 179
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 179
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 15 y) 1867579256866231016 32},term is 8,len is 182
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 18 y) 672816327287623235 37},term is 8,len is 183
---------------
3 return success! num is 2
nextIndex = 180, lastIndex = 0, len = 183
1 max is 180
2 max is 180
0:commitIndex -> 180
[0][8][0] apply index = 175, commit is 180
0:{175}unlock now
0:{175}unlock end
0:{175}lock now
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 16 y) 3167499095888228886 36},term is 8,len is 184
---------------
0:{175}lock end
[0][8][0] apply index = 176, commit is 180
0:{176}unlock now
0:{176}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
0:{176}lock now
0:{176}lock end
[0][8][0] apply index = 177, commit is 180
0:{177}unlock now
0:{177}unlock end
0:{177}lock now
0:{177}lock end
[0][8][0] apply index = 178, commit is 180
0:{178}unlock now
0:{178}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
0:{178}lock now
0:{178}lock end
[0][8][0] apply index = 179, commit is 180
0:{179}unlock now
0:{179}unlock end
0:{179}lock now
0:{179}lock end
[0][8][0] apply index = 180, commit is 180
0:{180}unlock now
0:{180}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
0:{180}lock now
0:{180}lock end
0:rf.commitIndex = 180, rf.lastApplied = 180
1 begin to elect
1 term is 8
4:投票检查174,129,6,6,8,7
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 180, lastIndex = 0
0 begin to append 3
prevlogindex = 180, lastIndex = 0
0 begin to append 4
prevlogindex = 179, lastIndex = 0
测试：2节点term为8，leader发送term为8, 接收4个, PrevLogIndex is 180
测试：3节点term为8，leader发送term为8, 接收4个, PrevLogIndex is 180
updateIndex = 180, lastIndex = 0
3更新log，长度184
[3][8][0] apply index = 175, commit is 180
3:{175}unlock now
3:{175}unlock end
3:{175}lock now
3:{175}lock end
[3][8][0] apply index = 176, commit is 180
3:{176}unlock now
3:{176}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
3:{176}lock now
3:{176}lock end
[3][8][0] apply index = 177, commit is 180
3:{177}unlock now
3:{177}unlock end
3:{177}lock now
3:{177}lock end
[3][8][0] apply index = 178, commit is 180
3:{178}unlock now
3:{178}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
3:{178}lock now
3:{178}lock end
[3][8][0] apply index = 179, commit is 180
3:{179}unlock now
3:{179}unlock end
3:{179}lock now
3:{179}lock end
[3][8][0] apply index = 180, commit is 180
3:{180}unlock now
3:{180}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
3:{180}lock now
3:{180}lock end
3:rf.commitIndex = 180, rf.lastApplied = 180
3 return success! num is 1
nextIndex = 181, lastIndex = 0, len = 184
updateIndex = 180, lastIndex = 0
2更新log，长度184
[2][8][0] apply index = 175, commit is 180
2:{175}unlock now
2 return success! num is 2
nextIndex = 181, lastIndex = 0, len = 184
1 max is 184
2 max is 184
0:commitIndex -> 184
[0][8][0] apply index = 181, commit is 184
0:{181}unlock now
0:{181}unlock end
0:{181}lock now
0:{181}lock end
[0][8][0] apply index = 182, commit is 184
0:{182}unlock now
0:{182}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:44 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 36} 181 8 false [] 0 0}处理完成,通知index = [181]的channel
2023/09/23 03:26:44 kvserver[0]: applyMsg: {true {Get 3  1065774344220344240 36} 181 8 false [] 0 0}处理完成,通知完成index = [181]的channel
2023/09/23 03:26:44 CommandApply!!!!!!!!!
0:{182}lock now
2023/09/23 03:26:44 kvserver[0]: GET获取到通知结果,index=[181],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
kvserver[0]: pre删除通道index: 181
kvserver[0]: begin删除通道index: 181
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 181
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
0:{182}lock end
[0][8][0] apply index = 183, commit is 184
0:{183}unlock now
0:{183}unlock end
0:{183}lock now
0:{183}lock end
[0][8][0] apply index = 184, commit is 184
0:{184}unlock now
2023/09/23 03:26:44 CommandApply!!!!!!!!!
0:{184}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
0:{184}lock now
0:{184}lock end
0:rf.commitIndex = 184, rf.lastApplied = 184
2:{175}unlock end
2:{175}lock now
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
2:{175}lock end
[2][8][0] apply index = 176, commit is 180
2:{176}unlock now
2:{176}unlock end
2:{176}lock now
2:{176}lock end
[2][8][0] apply index = 177, commit is 180
2:{177}unlock now
2:{177}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2:{177}lock now
2:{177}lock end
[2][8][0] apply index = 178, commit is 180
2:{178}unlock now
2:{178}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
2:{178}lock now
2:{178}lock end
[2][8][0] apply index = 179, commit is 180
2:{179}unlock now
2:{179}unlock end
2:{179}lock now
2:{179}lock end
[2][8][0] apply index = 180, commit is 180
2:{180}unlock now
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
2:{180}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
2:{180}lock now
2:{180}lock end
2:rf.commitIndex = 180, rf.lastApplied = 180
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 179, lastIndex = 0
测试：3节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
[3][8][0] apply index = 181, commit is 184
3:{181}unlock now
3:{181}unlock end
3:{181}lock now
3:{181}lock end
[3][8][0] apply index = 182, commit is 184
3:{182}unlock now
3:{182}unlock end
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
3:{182}lock now
3:{182}lock end
[3][8][0] apply index = 183, commit is 184
3:{183}unlock now
3:{183}unlock end
测试：2节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
[2][8][0] apply index = 181, commit is 184
2:{181}unlock now
2:{181}unlock end
2:{181}lock now
2:{181}lock end
[2][8][0] apply index = 182, commit is 184
2:{182}unlock now
2:{182}unlock end
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
0:commitIndex -> 184
0:rf.commitIndex = 184, rf.lastApplied = 184
2023/09/23 03:26:44 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:44 CommandApply!!!!!!!!!
2:{182}lock now
2:{182}lock end
[2][8][0] apply index = 183, commit is 184
2:{183}unlock now
2:{183}unlock end
2:{183}lock now
2:{183}lock end
[2][8][0] apply index = 184, commit is 184
2:{184}unlock now
2:{184}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
2023/09/23 03:26:44 CommandApply!!!!!!!!!
2:{184}lock now
2:{184}lock end
2:rf.commitIndex = 184, rf.lastApplied = 184
2023/09/23 03:26:44 CommandApply!!!!!!!!!
2023/09/23 03:26:44 CommandApply!!!!!!!!!
3:{183}lock now
3:{183}lock end
[3][8][0] apply index = 184, commit is 184
3:{184}unlock now
3:{184}unlock end
2023/09/23 03:26:44 CommandApply!!!!!!!!!
3:{184}lock now
3:{184}lock end
3:rf.commitIndex = 184, rf.lastApplied = 184
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 179, lastIndex = 0
测试：2节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
测试：3节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
3:rf.commitIndex = 184, rf.lastApplied = 184
3 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
0:commitIndex -> 184
0:rf.commitIndex = 184, rf.lastApplied = 184
4 follow -> candidate
4 begin to elect
4 term is 9
1:投票检查129,174,6,6,9,8
1 vote now -> 4
4: vote num is 2
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 179, lastIndex = 0
测试：3节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
3:rf.commitIndex = 184, rf.lastApplied = 184
测试：2节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
3 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
0:commitIndex -> 184
0:rf.commitIndex = 184, rf.lastApplied = 184
2023/09/23 03:26:44 kvserver[0]: PUTAPPEND处理请求超时: {Append 0 x 0 18 y 4346951758130697083 33}
kvserver[0]: pre删除通道index: 180
kvserver[0]: begin删除通道index: 180
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 180
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 179, lastIndex = 0
测试：2节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
2023/09/23 03:26:44 kvserver[0]: PUTAPPEND处理请求超时: {Append 4 x 4 15 y 1867579256866231016 32}
kvserver[0]: pre删除通道index: 182
kvserver[0]: begin删除通道index: 182
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 182
测试：3节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
2:rf.commitIndex = 184, rf.lastApplied = 184
3:rf.commitIndex = 184, rf.lastApplied = 184
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
2023/09/23 03:26:44 kvserver[0]: PUTAPPEND处理请求超时: {Append 1 x 1 18 y 672816327287623235 37}
kvserver[0]: pre删除通道index: 183
kvserver[0]: begin删除通道index: 183
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 183
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
0:commitIndex -> 184
0:rf.commitIndex = 184, rf.lastApplied = 184
2023/09/23 03:26:44 kvserver[0]: PUTAPPEND处理请求超时: {Append 2 x 2 16 y 3167499095888228886 36}
kvserver[0]: pre删除通道index: 184
kvserver[0]: begin删除通道index: 184
2023/09/23 03:26:44 kvserver[0]: 成功删除通道index: 184
0 begin to append 1
prevlogindex = 179, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 179, lastIndex = 0
测试：3节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
3:rf.commitIndex = 184, rf.lastApplied = 184
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
测试：2节点term为8，leader发送term为8, 接收0个, PrevLogIndex is 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
0:commitIndex -> 184
0:rf.commitIndex = 184, rf.lastApplied = 184
测试：1节点term为9，leader发送term为6, 接收30个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：3节点term为8，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：3节点term为8，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
0 AppOutOfDate follow -> candidate
测试：1节点term为9，leader发送term为6, 接收5个, PrevLogIndex is 129
测试：4节点term为9，leader发送term为8, 接收1个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：3节点term为8，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
网络分区AppOutOfDate,reply is 1
1:投票检查129,179,6,6,8,9
1 vote refuse 1 -> 0
测试：1节点term为9，leader发送term为6, 接收50个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
0: vote is out of date
测试：3节点term为8，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为8, 接收0个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：4节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为6, 接收40个, PrevLogIndex is 129
0:投票检查184,174,8,6,9,9
网络分区AppOutOfDate,reply is 1
0:投票检查184,129,8,6,7,9
0 vote refuse 1 -> 1
1: vote is out of date
测试：4节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为6, 接收5个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：3节点term为8，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
3:投票检查184,129,8,6,8,8
测试：4节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
2:投票检查184,174,8,6,9,8
2:投票检查184,129,8,6,7,9
2 vote refuse 1 -> 1
测试：1节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为6, 接收25个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为6, 接收35个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为8, 接收1个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为6, 接收10个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为6, 接收45个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为6, 接收20个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
1: vote is out of date
测试：1节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：3节点term为8，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
2:投票检查184,129,8,6,8,9
2 vote refuse 1 -> 1
3:投票检查184,174,8,6,9,8
1: vote is out of date
测试：3节点term为9，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
3:投票检查184,45,8,1,6,9
3 vote refuse 1 -> 4
测试：1节点term为9，leader发送term为6, 接收15个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为8, 接收0个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：3节点term为9，leader发送term为1, 接收5个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
3:投票检查184,45,8,1,3,9
3 vote refuse 1 -> 4
测试：3节点term为9，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：3节点term为9，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
测试：3节点term为9，leader发送term为1, 接收10个, PrevLogIndex is 35
网络分区AppOutOfDate,reply is 1
网络分区AppOutOfDate,reply is 1
4:投票检查174,129,6,6,7,9
4 vote refuse 1 -> 3
4:投票检查174,179,6,6,8,9
4 vote refuse 1 -> 0
3:投票检查184,45,8,1,4,9
3 vote refuse 1 -> 4
1: vote is out of date
3: vote is out of date
0:投票检查184,129,8,6,8,9
0 vote refuse 1 -> 1
1: vote is out of date
测试：4节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
0: vote is out of date
测试：4节点term为9，leader发送term为6, 接收5个, PrevLogIndex is 174
网络分区AppOutOfDate,reply is 1
测试：4节点term为9，leader发送term为8, 接收0个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
4: vote is out of date
测试：4节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
4: vote is out of date
4: vote is out of date
测试：1节点term为9，leader发送term为6, 接收5个, PrevLogIndex is 129
网络分区AppOutOfDate,reply is 1
测试：4节点term为9，leader发送term为8, 接收0个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：1节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
测试：4节点term为9，leader发送term为8, 接收5个, PrevLogIndex is 179
网络分区AppOutOfDate,reply is 1
0 follow -> candidate
0 begin to elect
0 term is 10
4:投票检查174,184,6,8,10,9
4 vote now -> 0
3:投票检查184,184,8,8,10,9
3 vote now -> 0
1:投票检查129,184,6,8,10,9
1 vote now -> 0
0: vote num is 2
0: vote num is 3
0 is leader
2:投票检查184,184,8,8,10,9
2 vote now -> 0
0: vote num is 1
0: vote num is 2
0 begin to append 1
prevlogindex = 184, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 184, lastIndex = 0
测试：4节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
不匹配,args = 184,lastIndex = 0,len = 174
reply XLen is 175
0 nextIndex change to 175
nextIndex = 175, lastIndex = 0, len = 184
测试：1节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
不匹配,args = 184,lastIndex = 0,len = 129
reply XLen is 130
0 nextIndex change to 130
nextIndex = 130, lastIndex = 0, len = 184
测试：2节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：3节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
3:rf.commitIndex = 184, rf.lastApplied = 184
3 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
0 begin to append 1
prevlogindex = 129, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 174, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收55个, PrevLogIndex is 129
测试：3节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
3:rf.commitIndex = 184, rf.lastApplied = 184
测试：2节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
测试：4节点term为10，leader发送term为10, 接收10个, PrevLogIndex is 174
updateIndex = 174, lastIndex = 0
updateIndex = 129, lastIndex = 0
4更新log，长度184
1更新log，长度184
[4][10][0] apply index = 170, commit is 184
4:{170}unlock now
4:{170}unlock end
4:{170}lock now
2023/09/23 03:26:45 CommandApply!!!!!!!!!
4:{170}lock end
[4][10][0] apply index = 171, commit is 184
4:{171}unlock now
4:{171}unlock end
[1][10][0] apply index = 125, commit is 184
1:{125}unlock now
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
4:{171}lock now
4:{171}lock end
[4][10][0] apply index = 172, commit is 184
4:{172}unlock now
4:{172}unlock end
4:{172}lock now
4:{172}lock end
[4][10][0] apply index = 173, commit is 184
4:{173}unlock now
4:{173}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
4:{173}lock now
4:{173}lock end
[4][10][0] apply index = 174, commit is 184
4:{174}unlock now
4:{174}unlock end
4:{174}lock now
4:{174}lock end
[4][10][0] apply index = 175, commit is 184
4:{175}unlock now
4:{175}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
4:{175}lock now
4:{175}lock end
[4][10][0] apply index = 176, commit is 184
4:{176}unlock now
4:{176}unlock end
4:{176}lock now
4:{176}lock end
[4][10][0] apply index = 177, commit is 184
4:{177}unlock now
4:{177}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
4:{177}lock now
4:{177}lock end
[4][10][0] apply index = 178, commit is 184
4:{178}unlock now
4:{178}unlock end
4:{178}lock now
4:{178}lock end
[4][10][0] apply index = 179, commit is 184
4:{179}unlock now
4:{179}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
4:{179}lock now
4:{179}lock end
[4][10][0] apply index = 180, commit is 184
4:{180}unlock now
4:{180}unlock end
4:{180}lock now
4:{180}lock end
[4][10][0] apply index = 181, commit is 184
4:{181}unlock now
4:{181}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
4:{181}lock now
4:{181}lock end
[4][10][0] apply index = 182, commit is 184
4:{182}unlock now
4:{182}unlock end
4:{182}lock now
4:{182}lock end
[4][10][0] apply index = 183, commit is 184
4:{183}unlock now
4:{183}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
2023/09/23 03:26:45 CommandApply!!!!!!!!!
4:{183}lock now
4:{183}lock end
[4][10][0] apply index = 184, commit is 184
4:{184}unlock now
4:{184}unlock end
4:{184}lock now
4:{184}lock end
4:rf.commitIndex = 184, rf.lastApplied = 184
2023/09/23 03:26:45 CommandApply!!!!!!!!!
1:{125}unlock end
1:{125}lock now
1:{125}lock end
[1][10][0] apply index = 126, commit is 184
1:{126}unlock now
1:{126}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
1:{126}lock now
1:{126}lock end
[1][10][0] apply index = 127, commit is 184
1:{127}unlock now
1:{127}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
1:{127}lock now
1:{127}lock end
[1][10][0] apply index = 128, commit is 184
1:{128}unlock now
1:{128}unlock end
1:{128}lock now
1:{128}lock end
[1][10][0] apply index = 129, commit is 184
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
1:{129}unlock now
1:{129}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
1:{129}lock now
1:{129}lock end
[1][10][0] apply index = 130, commit is 184
1:{130}unlock now
1:{130}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
1:{130}lock now
1:{130}lock end
[1][10][0] apply index = 131, commit is 184
1:{131}unlock now
1:{131}unlock end
1:{131}lock now
1:{131}lock end
[1][10][0] apply index = 132, commit is 184
1:{132}unlock now
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
1:{132}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
1:{132}lock now
1:{132}lock end
[1][10][0] apply index = 133, commit is 184
1:{133}unlock now
1:{133}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
1 return success! num is 1
nextIndex = 130, lastIndex = 0, len = 184
1:{133}lock now
1:{133}lock end
[1][10][0] apply index = 134, commit is 184
1:{134}unlock now
1:{134}unlock end
1:{134}lock now
1:{134}lock end
[1][10][0] apply index = 135, commit is 184
1:{135}unlock now
1:{135}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
1:{135}lock now
1:{135}lock end
[1][10][0] apply index = 136, commit is 184
1:{136}unlock now
1:{136}unlock end
1:{136}lock now
1:{136}lock end
[1][10][0] apply index = 137, commit is 184
1:{137}unlock now
1:{137}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
1:{137}lock now
1:{137}lock end
[1][10][0] apply index = 138, commit is 184
1:{138}unlock now
1:{138}unlock end
1:{138}lock now
1:{138}lock end
[1][10][0] apply index = 139, commit is 184
1:{139}unlock now
1:{139}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
1:{139}lock now
1:{139}lock end
[1][10][0] apply index = 140, commit is 184
1:{140}unlock now
1:{140}unlock end
1:{140}lock now
1:{140}lock end
[1][10][0] apply index = 141, commit is 184
1:{141}unlock now
1:{141}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
1:{141}lock now
1:{141}lock end
[1][10][0] apply index = 142, commit is 184
1:{142}unlock now
1:{142}unlock end
1:{142}lock now
1:{142}lock end
[1][10][0] apply index = 143, commit is 184
1:{143}unlock now
1:{143}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 y
1:{143}lock now
1:{143}lock end
[1][10][0] apply index = 144, commit is 184
1:{144}unlock now
1:{144}unlock end
1:{144}lock now
1:{144}lock end
[1][10][0] apply index = 145, commit is 184
1:{145}unlock now
1:{145}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
4 return success! num is 2
nextIndex = 175, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 y
1:{145}lock now
1:{145}lock end
[1][10][0] apply index = 146, commit is 184
1:{146}unlock now
1:{146}unlock end
1:{146}lock now
1:{146}lock end
[1][10][0] apply index = 147, commit is 184
1:{147}unlock now
1:{147}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
1:{147}lock now
1:{147}lock end
[1][10][0] apply index = 148, commit is 184
1:{148}unlock now
1:{148}unlock end
1:{148}lock now
1:{148}lock end
[1][10][0] apply index = 149, commit is 184
1:{149}unlock now
1:{149}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
1:{149}lock now
1:{149}lock end
[1][10][0] apply index = 150, commit is 184
1:{150}unlock now
1:{150}unlock end
1:{150}lock now
1:{150}lock end
[1][10][0] apply index = 151, commit is 184
1:{151}unlock now
1:{151}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
1:{151}lock now
1:{151}lock end
[1][10][0] apply index = 152, commit is 184
1:{152}unlock now
1:{152}unlock end
1:{152}lock now
1:{152}lock end
[1][10][0] apply index = 153, commit is 184
1:{153}unlock now
1:{153}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 y
1:{153}lock now
1:{153}lock end
[1][10][0] apply index = 154, commit is 184
1:{154}unlock now
1:{154}unlock end
1:{154}lock now
1:{154}lock end
[1][10][0] apply index = 155, commit is 184
1:{155}unlock now
1:{155}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 y
1:{155}lock now
1:{155}lock end
[1][10][0] apply index = 156, commit is 184
1:{156}unlock now
1:{156}unlock end
1:{156}lock now
1:{156}lock end
[1][10][0] apply index = 157, commit is 184
1:{157}unlock now
1:{157}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 y
1:{157}lock now
1:{157}lock end
[1][10][0] apply index = 158, commit is 184
1:{158}unlock now
1:{158}unlock end
1:{158}lock now
1:{158}lock end
[1][10][0] apply index = 159, commit is 184
1:{159}unlock now
1:{159}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
1:{159}lock now
1:{159}lock end
[1][10][0] apply index = 160, commit is 184
1:{160}unlock now
1:{160}unlock end
1:{160}lock now
1:{160}lock end
[1][10][0] apply index = 161, commit is 184
2023/09/23 03:26:45 CommandApply!!!!!!!!!
1:{161}unlock now
1:{161}unlock end
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 y
1:{161}lock now
1:{161}lock end
[1][10][0] apply index = 162, commit is 184
1:{162}unlock now
1:{162}unlock end
1:{162}lock now
1:{162}lock end
[1][10][0] apply index = 163, commit is 184
1:{163}unlock now
1:{163}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
1:{163}lock now
1:{163}lock end
[1][10][0] apply index = 164, commit is 184
1:{164}unlock now
1:{164}unlock end
1:{164}lock now
1:{164}lock end
[1][10][0] apply index = 165, commit is 184
1:{165}unlock now
1:{165}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
1:{165}lock now
1:{165}lock end
[1][10][0] apply index = 166, commit is 184
1:{166}unlock now
1:{166}unlock end
1:{166}lock now
1:{166}lock end
[1][10][0] apply index = 167, commit is 184
1:{167}unlock now
1:{167}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
1:{167}lock now
1:{167}lock end
[1][10][0] apply index = 168, commit is 184
1:{168}unlock now
1:{168}unlock end
1:{168}lock now
1:{168}lock end
[1][10][0] apply index = 169, commit is 184
1:{169}unlock now
1:{169}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 y
1:{169}lock now
1:{169}lock end
[1][10][0] apply index = 170, commit is 184
1:{170}unlock now
1:{170}unlock end
1:{170}lock now
1:{170}lock end
[1][10][0] apply index = 171, commit is 184
1:{171}unlock now
1:{171}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
1:{171}lock now
1:{171}lock end
[1][10][0] apply index = 172, commit is 184
1:{172}unlock now
1:{172}unlock end
1:{172}lock now
1:{172}lock end
[1][10][0] apply index = 173, commit is 184
1:{173}unlock now
1:{173}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 y
1:{173}lock now
1:{173}lock end
[1][10][0] apply index = 174, commit is 184
1:{174}unlock now
1:{174}unlock end
1:{174}lock now
1:{174}lock end
[1][10][0] apply index = 175, commit is 184
1:{175}unlock now
1:{175}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
1:{175}lock now
1:{175}lock end
[1][10][0] apply index = 176, commit is 184
1:{176}unlock now
1:{176}unlock end
1:{176}lock now
1:{176}lock end
[1][10][0] apply index = 177, commit is 184
1:{177}unlock now
1:{177}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
1:{177}lock now
1:{177}lock end
[1][10][0] apply index = 178, commit is 184
1:{178}unlock now
1:{178}unlock end
1:{178}lock now
1:{178}lock end
[1][10][0] apply index = 179, commit is 184
1:{179}unlock now
1:{179}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
1:{179}lock now
1:{179}lock end
[1][10][0] apply index = 180, commit is 184
1:{180}unlock now
1:{180}unlock end
1:{180}lock now
1:{180}lock end
[1][10][0] apply index = 181, commit is 184
1:{181}unlock now
1:{181}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
1:{181}lock now
1:{181}lock end
[1][10][0] apply index = 182, commit is 184
1:{182}unlock now
1:{182}unlock end
1:{182}lock now
1:{182}lock end
[1][10][0] apply index = 183, commit is 184
1:{183}unlock now
1:{183}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
2023/09/23 03:26:45 CommandApply!!!!!!!!!
1:{183}lock now
1:{183}lock end
[1][10][0] apply index = 184, commit is 184
1:{184}unlock now
1:{184}unlock end
1:{184}lock now
1:{184}lock end
1:rf.commitIndex = 184, rf.lastApplied = 184
2023/09/23 03:26:45 CommandApply!!!!!!!!!
0 begin to append 1
prevlogindex = 184, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 184, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：1节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
1:rf.commitIndex = 184, rf.lastApplied = 184
测试：2节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
2:rf.commitIndex = 184, rf.lastApplied = 184
3:rf.commitIndex = 184, rf.lastApplied = 184
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
测试：4节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
4:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
1 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
4 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
0 begin to append 1
prevlogindex = 184, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 184, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
3:rf.commitIndex = 184, rf.lastApplied = 184
测试：4节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：1节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：2节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
4:rf.commitIndex = 184, rf.lastApplied = 184
4 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
1:rf.commitIndex = 184, rf.lastApplied = 184
1 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
0 begin to append 1
prevlogindex = 184, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 184, lastIndex = 0
测试：2节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：1节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
1 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
2:rf.commitIndex = 184, rf.lastApplied = 184
测试：3节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：4节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
2 return success! num is 2
4:rf.commitIndex = 184, rf.lastApplied = 184
3:rf.commitIndex = 184, rf.lastApplied = 184
1:rf.commitIndex = 184, rf.lastApplied = 184
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
4 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
0 begin to append 1
prevlogindex = 184, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 184, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
1 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
测试：3节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：4节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：2节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
1:rf.commitIndex = 184, rf.lastApplied = 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
3:rf.commitIndex = 184, rf.lastApplied = 184
4:rf.commitIndex = 184, rf.lastApplied = 184
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
4 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
0 begin to append 1
prevlogindex = 184, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 184, lastIndex = 0
测试：4节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
测试：2节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
4:rf.commitIndex = 184, rf.lastApplied = 184
4 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
测试：1节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
测试：3节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
3:rf.commitIndex = 184, rf.lastApplied = 184
1:rf.commitIndex = 184, rf.lastApplied = 184
1 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
3 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
0 begin to append 1
prevlogindex = 184, lastIndex = 0
0 begin to append 2
测试：1节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
prevlogindex = 184, lastIndex = 0
测试：2节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
prevlogindex = 184, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
1:rf.commitIndex = 184, rf.lastApplied = 184
3 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
3:rf.commitIndex = 184, rf.lastApplied = 184
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
测试：4节点term为10，leader发送term为10, 接收0个, PrevLogIndex is 184
1 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 184
4:rf.commitIndex = 184, rf.lastApplied = 184
4 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 184
1 max is 184
2 max is 184
return because max = 184, last = 0, 8 != 10
2023/09/23 03:26:45 wait for clients
2023/09/23 03:26:45 read from clients 0
2023/09/23 03:26:45 Check 19 for client 0
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 481371401344628756 1},term is 10,len is 185
---------------
0 begin to append 1
prevlogindex = 184, lastIndex = 0
0 begin to append 2
prevlogindex = 184, lastIndex = 0
0 begin to append 3
prevlogindex = 184, lastIndex = 0
0 begin to append 4
测试：2节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 184
updateIndex = 184, lastIndex = 0
2更新log，长度185
prevlogindex = 184, lastIndex = 0
2:rf.commitIndex = 184, rf.lastApplied = 184
2 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 185
测试：3节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 184
updateIndex = 184, lastIndex = 0
3更新log，长度185
3 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 185
1 max is 185
2 max is 185
0:commitIndex -> 185
[0][10][0] apply index = 185, commit is 185
0:{185}unlock now
0:{185}unlock end
0:{185}lock now
0:{185}lock end
0:rf.commitIndex = 185, rf.lastApplied = 185
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
2023/09/23 03:26:45 kvserver[0]: applyMsg: {true {Get 0  481371401344628756 1} 185 10 false [] 0 0}处理完成,通知index = [185]的channel
2023/09/23 03:26:45 kvserver[0]: applyMsg: {true {Get 0  481371401344628756 1} 185 10 false [] 0 0}处理完成,通知完成index = [185]的channel
2023/09/23 03:26:45 kvserver[0]: GET获取到通知结果,index=[185],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
kvserver[0]: pre删除通道index: 185
kvserver[0]: begin删除通道index: 185
2023/09/23 03:26:45 kvserver[0]: 成功删除通道index: 185
3:rf.commitIndex = 184, rf.lastApplied = 184
OK:i num is 2, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
2023/09/23 03:26:45 read from clients 1
2023/09/23 03:26:45 Check 19 for client 1
测试：1节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 184
updateIndex = 184, lastIndex = 0
1更新log，长度185
1:rf.commitIndex = 184, rf.lastApplied = 184
测试：4节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 184
updateIndex = 184, lastIndex = 0
4更新log，长度185
4:rf.commitIndex = 184, rf.lastApplied = 184
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 481371401344628756 2},term is 10,len is 186
---------------
4 return success! num is 1
nextIndex = 185, lastIndex = 0, len = 186
1 return success! num is 2
nextIndex = 185, lastIndex = 0, len = 186
1 max is 185
2 max is 185
0:commitIndex -> 185
0:rf.commitIndex = 185, rf.lastApplied = 185
0 begin to append 1
prevlogindex = 185, lastIndex = 0
0 begin to append 2
prevlogindex = 185, lastIndex = 0
0 begin to append 3
prevlogindex = 185, lastIndex = 0
0 begin to append 4
prevlogindex = 185, lastIndex = 0
测试：4节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 185
updateIndex = 185, lastIndex = 0
4更新log，长度186
测试：2节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 185
updateIndex = 185, lastIndex = 0
2更新log，长度186
[2][10][0] apply index = 185, commit is 185
2:{185}unlock now
2:{185}unlock end
2:{185}lock now
2:{185}lock end
2:rf.commitIndex = 185, rf.lastApplied = 185
测试：1节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 185
updateIndex = 185, lastIndex = 0
1更新log，长度186
测试：3节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 185
2 return success! num is 1
[1][10][0] apply index = 185, commit is 185
2023/09/23 03:26:45 CommandApply!!!!!!!!!
1:{185}unlock now
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
[4][10][0] apply index = 185, commit is 185
4:{185}unlock now
4:{185}unlock end
4:{185}lock now
4:{185}lock end
4:rf.commitIndex = 185, rf.lastApplied = 185
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
1:{185}unlock end
1:{185}lock now
1:{185}lock end
1:rf.commitIndex = 185, rf.lastApplied = 185
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
updateIndex = 185, lastIndex = 0
nextIndex = 186, lastIndex = 0, len = 186
4 return success! num is 2
nextIndex = 186, lastIndex = 0, len = 186
1 max is 186
2 max is 186
0:commitIndex -> 186
1 return success! num is 1
nextIndex = 186, lastIndex = 0, len = 186
[0][10][0] apply index = 186, commit is 186
0:{186}unlock now
0:{186}unlock end
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
2023/09/23 03:26:45 kvserver[0]: applyMsg: {true {Get 1  481371401344628756 2} 186 10 false [] 0 0}处理完成,通知index = [186]的channel
2023/09/23 03:26:45 kvserver[0]: applyMsg: {true {Get 1  481371401344628756 2} 186 10 false [] 0 0}处理完成,通知完成index = [186]的channel
2023/09/23 03:26:45 kvserver[0]: GET获取到通知结果,index=[186],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
kvserver[0]: pre删除通道index: 186
kvserver[0]: begin删除通道index: 186
2023/09/23 03:26:45 kvserver[0]: 成功删除通道index: 186
OK:i num is 2, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
2023/09/23 03:26:45 read from clients 2
2023/09/23 03:26:45 Check 17 for client 2
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 481371401344628756 3},term is 10,len is 187
---------------
3更新log，长度186
0:{186}lock now
0:{186}lock end
0:rf.commitIndex = 186, rf.lastApplied = 186
[3][10][0] apply index = 185, commit is 185
3:{185}unlock now
3:{185}unlock end
3 return success! num is 2
nextIndex = 186, lastIndex = 0, len = 187
1 max is 186
2 max is 186
0:commitIndex -> 186
0:rf.commitIndex = 186, rf.lastApplied = 186
2023/09/23 03:26:45 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 y
3:{185}lock now
3:{185}lock end
3:rf.commitIndex = 185, rf.lastApplied = 185
0 begin to append 1
prevlogindex = 186, lastIndex = 0
0 begin to append 2
prevlogindex = 186, lastIndex = 0
0 begin to append 3
prevlogindex = 186, lastIndex = 0
0 begin to append 4
prevlogindex = 186, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 186
updateIndex = 186, lastIndex = 0
1更新log，长度187
测试：2节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 186
测试：4节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 186
测试：3节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 186
updateIndex = 186, lastIndex = 0
updateIndex = 186, lastIndex = 0
4更新log，长度187
[1][10][0] apply index = 186, commit is 186
1:{186}unlock now
1:{186}unlock end
1:{186}lock now
1:{186}lock end
1:rf.commitIndex = 186, rf.lastApplied = 186
2023/09/23 03:26:46 CommandApply!!!!!!!!!
updateIndex = 186, lastIndex = 0
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
[4][10][0] apply index = 186, commit is 186
2更新log，长度187
1 return success! num is 1
nextIndex = 187, lastIndex = 0, len = 187
4 return success! num is 2
nextIndex = 187, lastIndex = 0, len = 187
1 max is 187
2 max is 187
0:commitIndex -> 187
[0][10][0] apply index = 187, commit is 187
0:{187}unlock now
0:{187}unlock end
0:{187}lock now
0:{187}lock end
0:rf.commitIndex = 187, rf.lastApplied = 187
4:{186}unlock now
2023/09/23 03:26:46 CommandApply!!!!!!!!!
4:{186}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
4:{186}lock now
4:{186}lock end
4:rf.commitIndex = 186, rf.lastApplied = 186
[2][10][0] apply index = 186, commit is 186
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
3更新log，长度187
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 2  481371401344628756 3} 187 10 false [] 0 0}处理完成,通知index = [187]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 2  481371401344628756 3} 187 10 false [] 0 0}处理完成,通知完成index = [187]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[187],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
kvserver[0]: pre删除通道index: 187
kvserver[0]: begin删除通道index: 187
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 187
OK:i num is 2, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
2023/09/23 03:26:46 read from clients 3
2023/09/23 03:26:46 Check 18 for client 3
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 481371401344628756 4},term is 10,len is 188
---------------
[3][10][0] apply index = 186, commit is 186
3:{186}unlock now
3:{186}unlock end
3:{186}lock now
3:{186}lock end
3:rf.commitIndex = 186, rf.lastApplied = 186
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
2:{186}unlock now
2:{186}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 yx 1 17 yx 1 18 y
3 return success! num is 1
nextIndex = 187, lastIndex = 0, len = 188
2:{186}lock now
2:{186}lock end
2:rf.commitIndex = 186, rf.lastApplied = 186
2 return success! num is 2
nextIndex = 187, lastIndex = 0, len = 188
1 max is 187
2 max is 187
0:commitIndex -> 187
0:rf.commitIndex = 187, rf.lastApplied = 187
0 begin to append 1
prevlogindex = 187, lastIndex = 0
0 begin to append 2
prevlogindex = 187, lastIndex = 0
0 begin to append 3
prevlogindex = 187, lastIndex = 0
0 begin to append 4
prevlogindex = 187, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 187
updateIndex = 187, lastIndex = 0
测试：4节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 187
updateIndex = 187, lastIndex = 0
测试：2节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 187
测试：3节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 187
updateIndex = 187, lastIndex = 0
3更新log，长度188
[3][10][0] apply index = 187, commit is 187
3:{187}unlock now
3:{187}unlock end
3:{187}lock now
3:{187}lock end
3:rf.commitIndex = 187, rf.lastApplied = 187
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
updateIndex = 187, lastIndex = 0
3 return success! num is 1
nextIndex = 188, lastIndex = 0, len = 188
2更新log，长度188
4更新log，长度188
[2][10][0] apply index = 187, commit is 187
2:{187}unlock now
2:{187}unlock end
2:{187}lock now
2:{187}lock end
2:rf.commitIndex = 187, rf.lastApplied = 187
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
[4][10][0] apply index = 187, commit is 187
4:{187}unlock now
4:{187}unlock end
4:{187}lock now
4:{187}lock end
4:rf.commitIndex = 187, rf.lastApplied = 187
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
1更新log，长度188
2 return success! num is 2
nextIndex = 188, lastIndex = 0, len = 188
1 max is 188
2 max is 188
0:commitIndex -> 188
[0][10][0] apply index = 188, commit is 188
0:{188}unlock now
0:{188}unlock end
0:{188}lock now
0:{188}lock end
0:rf.commitIndex = 188, rf.lastApplied = 188
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 3  481371401344628756 4} 188 10 false [] 0 0}处理完成,通知index = [188]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 3  481371401344628756 4} 188 10 false [] 0 0}处理完成,通知完成index = [188]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[188],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
kvserver[0]: pre删除通道index: 188
kvserver[0]: begin删除通道index: 188
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 188
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
4 return success! num is 1
2023/09/23 03:26:46 read from clients 4
2023/09/23 03:26:46 Check 16 for client 4
nextIndex = 188, lastIndex = 0, len = 188
[1][10][0] apply index = 187, commit is 187
1:{187}unlock now
1:{187}unlock end
1:{187}lock now
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 481371401344628756 5},term is 10,len is 189
---------------
1 return success! num is 2
nextIndex = 188, lastIndex = 0, len = 189
1 max is 188
2 max is 188
0:commitIndex -> 188
0:rf.commitIndex = 188, rf.lastApplied = 188
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 y
1:{187}lock end
1:rf.commitIndex = 187, rf.lastApplied = 187
0 begin to append 1
prevlogindex = 188, lastIndex = 0
0 begin to append 2
prevlogindex = 188, lastIndex = 0
0 begin to append 3
prevlogindex = 188, lastIndex = 0
0 begin to append 4
prevlogindex = 188, lastIndex = 0
测试：2节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 188
updateIndex = 188, lastIndex = 0
2更新log，长度189
测试：1节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 188
测试：3节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 188
[2][10][0] apply index = 188, commit is 188
2:{188}unlock now
2:{188}unlock end
2:{188}lock now
2:{188}lock end
2:rf.commitIndex = 188, rf.lastApplied = 188
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
测试：4节点term为10，leader发送term为10, 接收1个, PrevLogIndex is 188
updateIndex = 188, lastIndex = 0
updateIndex = 188, lastIndex = 0
3更新log，长度189
updateIndex = 188, lastIndex = 0
4更新log，长度189
1更新log，长度189
[3][10][0] apply index = 188, commit is 188
3:{188}unlock now
3:{188}unlock end
3:{188}lock now
3:{188}lock end
3:rf.commitIndex = 188, rf.lastApplied = 188
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
2 return success! num is 1
nextIndex = 189, lastIndex = 0, len = 189
3 return success! num is 2
nextIndex = 189, lastIndex = 0, len = 189
[4][10][0] apply index = 188, commit is 188
4:{188}unlock now
4:{188}unlock end
4:{188}lock now
4:{188}lock end
4:rf.commitIndex = 188, rf.lastApplied = 188
1 max is 189
2 max is 189
2023/09/23 03:26:46 CommandApply!!!!!!!!!
0:commitIndex -> 189
[1][10][0] apply index = 188, commit is 188
1:{188}unlock now
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
1:{188}unlock end
1:{188}lock now
1:{188}lock end
1:rf.commitIndex = 188, rf.lastApplied = 188
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y
[0][10][0] apply index = 189, commit is 189
0:{189}unlock now
1 return success! num is 1
nextIndex = 189, lastIndex = 0, len = 189
4 return success! num is 2
nextIndex = 189, lastIndex = 0, len = 189
1 max is 189
2 max is 189
0:commitIndex -> 189
0:{189}unlock end
0:{189}lock now
0:{189}lock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
0:rf.commitIndex = 189, rf.lastApplied = 189
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  481371401344628756 5} 189 10 false [] 0 0}处理完成,通知index = [189]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  481371401344628756 5} 189 10 false [] 0 0}处理完成,通知完成index = [189]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[189],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
kvserver[0]: pre删除通道index: 189
kvserver[0]: begin删除通道index: 189
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 189
OK:i num is 2, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
2023/09/23 03:26:46 Iteration 1
2023/09/23 03:26:46 PUT begin
2023/09/23 03:26:46 PUT begin
2023/09/23 03:26:46 PUT begin
2023/09/23 03:26:46 PUT begin
---------------
0接受新命令{%!d(string=Put) %!d(string=3) %!d(string=) 3044182290069410002 1},term is 10,len is 190
---------------
---------------
0接受新命令{%!d(string=Put) %!d(string=0) %!d(string=) 3045059399824717845 1},term is 10,len is 191
---------------
---------------
0接受新命令{%!d(string=Put) %!d(string=2) %!d(string=) 3947973503454150994 1},term is 10,len is 192
---------------
2023/09/23 03:26:46 PUT begin
---------------
0接受新命令{%!d(string=Put) %!d(string=4) %!d(string=) 2356167759593910522 1},term is 10,len is 193
---------------
---------------
0接受新命令{%!d(string=Put) %!d(string=1) %!d(string=) 259300236053518071 1},term is 10,len is 194
---------------
0 begin to append 1
prevlogindex = 189, lastIndex = 0
0 begin to append 2
prevlogindex = 189, lastIndex = 0
0 begin to append 3
prevlogindex = 189, lastIndex = 0
0 begin to append 4
prevlogindex = 189, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 189
updateIndex = 189, lastIndex = 0
3更新log，长度194
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 189
updateIndex = 189, lastIndex = 0
4更新log，长度194
4 return success! num is 1
nextIndex = 190, lastIndex = 0, len = 194
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 189
updateIndex = 189, lastIndex = 0
2更新log，长度194
[2][10][0] apply index = 189, commit is 189
2:{189}unlock now
2:{189}unlock end
2:{189}lock now
2:{189}lock end
2:rf.commitIndex = 189, rf.lastApplied = 189
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
[3][10][0] apply index = 189, commit is 189
3:{189}unlock now
3:{189}unlock end
3:{189}lock now
3:{189}lock end
3:rf.commitIndex = 189, rf.lastApplied = 189
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
[4][10][0] apply index = 189, commit is 189
4:{189}unlock now
4:{189}unlock end
4:{189}lock now
4:{189}lock end
4:rf.commitIndex = 189, rf.lastApplied = 189
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 189
updateIndex = 189, lastIndex = 0
1更新log，长度194
1 return success! num is 2
nextIndex = 190, lastIndex = 0, len = 194
1 max is 194
2 max is 194
0:commitIndex -> 194
[0][10][0] apply index = 190, commit is 194
0:{190}unlock now
0:{190}unlock end
0:{190}lock now
0:{190}lock end
[0][10][0] apply index = 191, commit is 194
0:{191}unlock now
0:{191}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Put key:3, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 3  3044182290069410002 1} 190 10 false [] 0 0}处理完成,通知index = [190]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 3  3044182290069410002 1} 190 10 false [] 0 0}处理完成,通知完成index = [190]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Put key:0, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 0  3045059399824717845 1} 191 10 false [] 0 0}处理完成,通知index = [191]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 0  3045059399824717845 1} 191 10 false [] 0 0}处理完成,通知完成index = [191]的channel
2 return success! num is 1
nextIndex = 190, lastIndex = 0, len = 194
3 return success! num is 2
nextIndex = 190, lastIndex = 0, len = 194
1 max is 194
2 max is 194
0:commitIndex -> 194
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
[1][10][0] apply index = 189, commit is 189
1:{189}unlock now
1:{189}unlock end
1:{189}lock now
1:{189}lock end
1:rf.commitIndex = 189, rf.lastApplied = 189
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[190],replyMsg: { 10 true}
kvserver[0]: pre删除通道index: 190
kvserver[0]: begin删除通道index: 190
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 190
0:{191}lock now
0:{191}lock end
[0][10][0] apply index = 192, commit is 194
0:{192}unlock now
0:{192}unlock end
0:{192}lock now
0:{192}lock end
[0][10][0] apply index = 193, commit is 194
0:{193}unlock now
0:{193}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Put key:2, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 2  3947973503454150994 1} 192 10 false [] 0 0}处理完成,通知index = [192]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 2  3947973503454150994 1} 192 10 false [] 0 0}处理完成,通知完成index = [192]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Put key:4, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 4  2356167759593910522 1} 193 10 false [] 0 0}处理完成,通知index = [193]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 4  2356167759593910522 1} 193 10 false [] 0 0}处理完成,通知完成index = [193]的channel
0:{193}lock now
0:{193}lock end
[0][10][0] apply index = 194, commit is 194
0:{194}unlock now
0:{194}unlock end
0:{194}lock now
0:{194}lock end
0:rf.commitIndex = 194, rf.lastApplied = 194
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Put key:1, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 1  259300236053518071 1} 194 10 false [] 0 0}处理完成,通知index = [194]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Put 1  259300236053518071 1} 194 10 false [] 0 0}处理完成,通知完成index = [194]的channel
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[191],replyMsg: { 10 true}
kvserver[0]: pre删除通道index: 191
kvserver[0]: begin删除通道index: 191
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[192],replyMsg: { 10 true}
2023/09/23 03:26:46 CommandApply!!!!!!!!!
kvserver[0]: pre删除通道index: 192
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 y
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[193],replyMsg: { 10 true}
kvserver[0]: pre删除通道index: 193
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[194],replyMsg: { 10 true}
kvserver[0]: pre删除通道index: 194
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 191
kvserver[0]: begin删除通道index: 192
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 192
2023/09/23 03:26:46 PUT end
2023/09/23 03:26:46 3: client new append x 3 0 y
2023/09/23 03:26:46 PUT end
2023/09/23 03:26:46 2: client new get 2
kvserver[0]: begin删除通道index: 193
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 193
kvserver[0]: begin删除通道index: 194
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 194
2023/09/23 03:26:46 PUT end
2023/09/23 03:26:46 4: client new get 4
2023/09/23 03:26:46 PUT end
2023/09/23 03:26:46 1: client new get 1
2023/09/23 03:26:46 PUT end
2023/09/23 03:26:46 0: client new get 0
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 0 y) 3044182290069410002 2},term is 10,len is 195
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 2},term is 10,len is 196
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 2},term is 10,len is 197
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 2},term is 10,len is 198
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 2},term is 10,len is 199
---------------
0 begin to append 1
prevlogindex = 194, lastIndex = 0
0 begin to append 2
prevlogindex = 194, lastIndex = 0
0 begin to append 3
prevlogindex = 194, lastIndex = 0
0 begin to append 4
prevlogindex = 194, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 194
updateIndex = 194, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 194
updateIndex = 194, lastIndex = 0
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 194
updateIndex = 194, lastIndex = 0
1更新log，长度199
[1][10][0] apply index = 190, commit is 194
1:{190}unlock now
1:{190}unlock end
1:{190}lock now
1:{190}lock end
[1][10][0] apply index = 191, commit is 194
1:{191}unlock now
1:{191}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Put key:3, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Put key:0, 
1:{191}lock now
1:{191}lock end
[1][10][0] apply index = 192, commit is 194
1:{192}unlock now
1:{192}unlock end
1:{192}lock now
1:{192}lock end
[1][10][0] apply index = 193, commit is 194
1:{193}unlock now
1:{193}unlock end
1 return success! num is 1
nextIndex = 195, lastIndex = 0, len = 199
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Put key:2, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Put key:4, 
1:{193}lock now
1:{193}lock end
[1][10][0] apply index = 194, commit is 194
1:{194}unlock now
1:{194}unlock end
1:{194}lock now
1:{194}lock end
1:rf.commitIndex = 194, rf.lastApplied = 194
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Put key:1, 
4更新log，长度199
[4][10][0] apply index = 190, commit is 194
4:{190}unlock now
4:{190}unlock end
4:{190}lock now
4:{190}lock end
[4][10][0] apply index = 191, commit is 194
4:{191}unlock now
4:{191}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Put key:3, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Put key:0, 
4 return success! num is 2
nextIndex = 195, lastIndex = 0, len = 199
1 max is 199
2 max is 199
0:commitIndex -> 199
4:{191}lock now
4:{191}lock end
[4][10][0] apply index = 192, commit is 194
4:{192}unlock now
4:{192}unlock end
4:{192}lock now
4:{192}lock end
[4][10][0] apply index = 193, commit is 194
4:{193}unlock now
4:{193}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Put key:2, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Put key:4, 
4:{193}lock now
4:{193}lock end
[4][10][0] apply index = 194, commit is 194
4:{194}unlock now
4:{194}unlock end
4:{194}lock now
4:{194}lock end
4:rf.commitIndex = 194, rf.lastApplied = 194
[0][10][0] apply index = 195, commit is 199
0:{195}unlock now
0:{195}unlock end
0:{195}lock now
0:{195}lock end
[0][10][0] apply index = 196, commit is 199
0:{196}unlock now
0:{196}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 0 y 3044182290069410002 2} 195 10 false [] 0 0}处理完成,通知index = [195]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Put key:1, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 0 y 3044182290069410002 2} 195 10 false [] 0 0}处理完成,通知完成index = [195]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:2, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 2  3947973503454150994 2} 196 10 false [] 0 0}处理完成,通知index = [196]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 2  3947973503454150994 2} 196 10 false [] 0 0}处理完成,通知完成index = [196]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[196],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 196
kvserver[0]: begin删除通道index: 196
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 196
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[195],replyMsg: {x 3 0 y 10 true}
kvserver[0]: pre删除通道index: 195
kvserver[0]: begin删除通道index: 195
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 195
0:{196}lock now
0:{196}lock end
[0][10][0] apply index = 197, commit is 199
0:{197}unlock now
0:{197}unlock end
0:{197}lock now
0:{197}lock end
[0][10][0] apply index = 198, commit is 199
0:{198}unlock now
0:{198}unlock end
OK:i num is 1, key is 2, return 
2023/09/23 03:26:46 2: client new get 2
2023/09/23 03:26:46 3: client new append x 3 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:4, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 2} 197 10 false [] 0 0}处理完成,通知index = [197]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 2} 197 10 false [] 0 0}处理完成,通知完成index = [197]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:1, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 2} 198 10 false [] 0 0}处理完成,通知index = [198]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 2} 198 10 false [] 0 0}处理完成,通知完成index = [198]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[198],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 198
kvserver[0]: begin删除通道index: 198
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 198
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 1 y) 3044182290069410002 3},term is 10,len is 200
---------------
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[197],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 197
kvserver[0]: begin删除通道index: 197
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 197
OK:i num is 4, key is 4, return 
2023/09/23 03:26:46 4: client new get 4
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 3},term is 10,len is 201
---------------
0:{198}lock now
0:{198}lock end
[0][10][0] apply index = 199, commit is 199
0:{199}unlock now
0:{199}unlock end
0:{199}lock now
0:{199}lock end
0:rf.commitIndex = 199, rf.lastApplied = 199
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 3},term is 10,len is 202
---------------
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:0, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 0  3045059399824717845 2} 199 10 false [] 0 0}处理完成,通知index = [199]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 0  3045059399824717845 2} 199 10 false [] 0 0}处理完成,通知完成index = [199]的channel
OK:i num is 1, key is 1, return 
2023/09/23 03:26:46 1: client new get 1
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[199],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 199
kvserver[0]: begin删除通道index: 199
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 199
OK:i num is 1, key is 0, return 
2023/09/23 03:26:46 0: client new append x 0 0 y
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 194
updateIndex = 194, lastIndex = 0
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 3},term is 10,len is 203
---------------
2更新log，长度199
[2][10][0] apply index = 190, commit is 194
2:{190}unlock now
2:{190}unlock end
2:{190}lock now
2:{190}lock end
[2][10][0] apply index = 191, commit is 194
2:{191}unlock now
2:{191}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Put key:3, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Put key:0, 
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 0 y) 3045059399824717845 3},term is 10,len is 204
---------------
2 return success! num is 1
nextIndex = 195, lastIndex = 0, len = 204
2:{191}lock now
2:{191}lock end
[2][10][0] apply index = 192, commit is 194
2:{192}unlock now
2:{192}unlock end
2:{192}lock now
2:{192}lock end
[2][10][0] apply index = 193, commit is 194
2:{193}unlock now
2:{193}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Put key:2, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Put key:4, 
2:{193}lock now
2:{193}lock end
[2][10][0] apply index = 194, commit is 194
2:{194}unlock now
2:{194}unlock end
2:{194}lock now
2:{194}lock end
2:rf.commitIndex = 194, rf.lastApplied = 194
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Put key:1, 
3更新log，长度199
[3][10][0] apply index = 190, commit is 194
3:{190}unlock now
3:{190}unlock end
3:{190}lock now
3:{190}lock end
[3][10][0] apply index = 191, commit is 194
3:{191}unlock now
3:{191}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Put key:3, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Put key:0, 
3:{191}lock now
3:{191}lock end
[3][10][0] apply index = 192, commit is 194
3:{192}unlock now
3:{192}unlock end
3:{192}lock now
3:{192}lock end
[3][10][0] apply index = 193, commit is 194
3:{193}unlock now
3:{193}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Put key:2, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Put key:4, 
3:{193}lock now
3:{193}lock end
[3][10][0] apply index = 194, commit is 194
3:{194}unlock now
3:{194}unlock end
3:{194}lock now
3:{194}lock end
3:rf.commitIndex = 194, rf.lastApplied = 194
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Put key:1, 
3 return success! num is 2
nextIndex = 195, lastIndex = 0, len = 204
1 max is 199
2 max is 199
0:commitIndex -> 199
0:rf.commitIndex = 199, rf.lastApplied = 199
0 begin to append 1
prevlogindex = 199, lastIndex = 0
0 begin to append 2
prevlogindex = 199, lastIndex = 0
0 begin to append 3
prevlogindex = 199, lastIndex = 0
0 begin to append 4
prevlogindex = 199, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 199
updateIndex = 199, lastIndex = 0
1更新log，长度204
[1][10][0] apply index = 195, commit is 199
1:{195}unlock now
1:{195}unlock end
1:{195}lock now
1:{195}lock end
[1][10][0] apply index = 196, commit is 199
1:{196}unlock now
1:{196}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:2, 
1:{196}lock now
1:{196}lock end
[1][10][0] apply index = 197, commit is 199
1:{197}unlock now
1:{197}unlock end
1:{197}lock now
1:{197}lock end
[1][10][0] apply index = 198, commit is 199
1:{198}unlock now
1:{198}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:1, 
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 199
updateIndex = 199, lastIndex = 0
1 return success! num is 1
nextIndex = 200, lastIndex = 0, len = 204
1:{198}lock now
1:{198}lock end
[1][10][0] apply index = 199, commit is 199
1:{199}unlock now
1:{199}unlock end
1:{199}lock now
1:{199}lock end
1:rf.commitIndex = 199, rf.lastApplied = 199
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:0, 
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 199
updateIndex = 199, lastIndex = 0
4更新log，长度204
4 return success! num is 2
nextIndex = 200, lastIndex = 0, len = 204
1 max is 204
2 max is 204
0:commitIndex -> 204
2更新log，长度204
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 199
updateIndex = 199, lastIndex = 0
[2][10][0] apply index = 195, commit is 199
2:{195}unlock now
2:{195}unlock end
2:{195}lock now
2:{195}lock end
[2][10][0] apply index = 196, commit is 199
2:{196}unlock now
2:{196}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:2, 
2:{196}lock now
2:{196}lock end
[2][10][0] apply index = 197, commit is 199
2:{197}unlock now
2:{197}unlock end
2:{197}lock now
2:{197}lock end
[2][10][0] apply index = 198, commit is 199
2:{198}unlock now
2:{198}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:1, 
2:{198}lock now
2:{198}lock end
[2][10][0] apply index = 199, commit is 199
2:{199}unlock now
2:{199}unlock end
2:{199}lock now
2:{199}lock end
2:rf.commitIndex = 199, rf.lastApplied = 199
2 return success! num is 1
nextIndex = 200, lastIndex = 0, len = 204
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:0, 
[4][10][0] apply index = 195, commit is 199
4:{195}unlock now
4:{195}unlock end
4:{195}lock now
4:{195}lock end
[4][10][0] apply index = 196, commit is 199
4:{196}unlock now
4:{196}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:2, 
4:{196}lock now
4:{196}lock end
[4][10][0] apply index = 197, commit is 199
4:{197}unlock now
4:{197}unlock end
4:{197}lock now
4:{197}lock end
[4][10][0] apply index = 198, commit is 199
4:{198}unlock now
4:{198}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:1, 
4:{198}lock now
4:{198}lock end
[4][10][0] apply index = 199, commit is 199
4:{199}unlock now
4:{199}unlock end
4:{199}lock now
4:{199}lock end
4:rf.commitIndex = 199, rf.lastApplied = 199
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:0, 
[0][10][0] apply index = 200, commit is 204
0:{200}unlock now
0:{200}unlock end
0:{200}lock now
0:{200}lock end
[0][10][0] apply index = 201, commit is 204
0:{201}unlock now
0:{201}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 1 y 3044182290069410002 3} 200 10 false [] 0 0}处理完成,通知index = [200]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 1 y 3044182290069410002 3} 200 10 false [] 0 0}处理完成,通知完成index = [200]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:4, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 3} 201 10 false [] 0 0}处理完成,通知index = [201]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 3} 201 10 false [] 0 0}处理完成,通知完成index = [201]的channel
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[200],replyMsg: {x 3 0 yx 3 1 y 10 true}
kvserver[0]: pre删除通道index: 200
kvserver[0]: begin删除通道index: 200
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 200
0:{201}lock now
0:{201}lock end
[0][10][0] apply index = 202, commit is 204
0:{202}unlock now
0:{202}unlock end
0:{202}lock now
0:{202}lock end
[0][10][0] apply index = 203, commit is 204
0:{203}unlock now
0:{203}unlock end
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[201],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 201
kvserver[0]: begin删除通道index: 201
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 201
2023/09/23 03:26:46 3: client new append x 3 2 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:2, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 2  3947973503454150994 3} 202 10 false [] 0 0}处理完成,通知index = [202]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 2  3947973503454150994 3} 202 10 false [] 0 0}处理完成,通知完成index = [202]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:1, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 3} 203 10 false [] 0 0}处理完成,通知index = [203]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 3} 203 10 false [] 0 0}处理完成,通知完成index = [203]的channel
3更新log，长度204
[3][10][0] apply index = 195, commit is 199
3:{195}unlock now
3:{195}unlock end
3:{195}lock now
3:{195}lock end
[3][10][0] apply index = 196, commit is 199
3:{196}unlock now
3:{196}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:2, 
3:{196}lock now
3:{196}lock end
[3][10][0] apply index = 197, commit is 199
3:{197}unlock now
3:{197}unlock end
3:{197}lock now
3:{197}lock end
[3][10][0] apply index = 198, commit is 199
3:{198}unlock now
3:{198}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:1, 
3:{198}lock now
3:{198}lock end
[3][10][0] apply index = 199, commit is 199
3:{199}unlock now
3:{199}unlock end
3:{199}lock now
3:{199}lock end
3:rf.commitIndex = 199, rf.lastApplied = 199
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:0, 
0:{203}lock now
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[202],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 202
kvserver[0]: begin删除通道index: 202
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 202
OK:i num is 1, key is 2, return 
2023/09/23 03:26:46 2: client new append x 2 0 y
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[203],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 203
kvserver[0]: begin删除通道index: 203
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 203
OK:i num is 1, key is 1, return 
2023/09/23 03:26:46 1: client new get 1
OK:i num is 4, key is 4, return 
2023/09/23 03:26:46 4: client new get 4
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 2 y) 3044182290069410002 4},term is 10,len is 205
---------------
3 return success! num is 2
nextIndex = 200, lastIndex = 0, len = 205
1 max is 204
2 max is 204
0:commitIndex -> 204
0:{203}lock end
[0][10][0] apply index = 204, commit is 204
0:{204}unlock now
0:{204}unlock end
0:{204}lock now
0:{204}lock end
0:rf.commitIndex = 204, rf.lastApplied = 204
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 0 y) 3947973503454150994 4},term is 10,len is 206
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 4},term is 10,len is 207
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 4},term is 10,len is 208
---------------
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 0 x 0 0 y 3045059399824717845 3} 204 10 false [] 0 0}处理完成,通知index = [204]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 0 x 0 0 y 3045059399824717845 3} 204 10 false [] 0 0}处理完成,通知完成index = [204]的channel
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[204],replyMsg: {x 0 0 y 10 true}
kvserver[0]: pre删除通道index: 204
kvserver[0]: begin删除通道index: 204
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 204
2023/09/23 03:26:46 0: client new get 0
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 4},term is 10,len is 209
---------------
0 begin to append 1
prevlogindex = 204, lastIndex = 0
0 begin to append 2
prevlogindex = 204, lastIndex = 0
0 begin to append 3
prevlogindex = 204, lastIndex = 0
0 begin to append 4
prevlogindex = 204, lastIndex = 0
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 204
updateIndex = 204, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 204
updateIndex = 204, lastIndex = 0
2更新log，长度209
2 return success! num is 1
nextIndex = 205, lastIndex = 0, len = 209
[2][10][0] apply index = 200, commit is 204
2:{200}unlock now
2:{200}unlock end
2:{200}lock now
2:{200}lock end
[2][10][0] apply index = 201, commit is 204
2:{201}unlock now
2:{201}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:4, 
2:{201}lock now
2:{201}lock end
[2][10][0] apply index = 202, commit is 204
2:{202}unlock now
2:{202}unlock end
2:{202}lock now
2:{202}lock end
[2][10][0] apply index = 203, commit is 204
2:{203}unlock now
2:{203}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:2, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:1, 
2:{203}lock now
2:{203}lock end
[2][10][0] apply index = 204, commit is 204
2:{204}unlock now
2:{204}unlock end
2:{204}lock now
2:{204}lock end
2:rf.commitIndex = 204, rf.lastApplied = 204
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 y
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 204
updateIndex = 204, lastIndex = 0
3更新log，长度209
[3][10][0] apply index = 200, commit is 204
3:{200}unlock now
3:{200}unlock end
3:{200}lock now
3:{200}lock end
[3][10][0] apply index = 201, commit is 204
3:{201}unlock now
3:{201}unlock end
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 204
updateIndex = 204, lastIndex = 0
3 return success! num is 2
nextIndex = 205, lastIndex = 0, len = 209
1 max is 209
2 max is 209
0:commitIndex -> 209
[0][10][0] apply index = 205, commit is 209
0:{205}unlock now
0:{205}unlock end
0:{205}lock now
0:{205}lock end
[0][10][0] apply index = 206, commit is 209
0:{206}unlock now
0:{206}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 2 y 3044182290069410002 4} 205 10 false [] 0 0}处理完成,通知index = [205]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 2 y 3044182290069410002 4} 205 10 false [] 0 0}处理完成,通知完成index = [205]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 2 x 2 0 y 3947973503454150994 4} 206 10 false [] 0 0}处理完成,通知index = [206]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 2 x 2 0 y 3947973503454150994 4} 206 10 false [] 0 0}处理完成,通知完成index = [206]的channel
0:{206}lock now
0:{206}lock end
[0][10][0] apply index = 207, commit is 209
0:{207}unlock now
0:{207}unlock end
0:{207}lock now
0:{207}lock end
[0][10][0] apply index = 208, commit is 209
0:{208}unlock now
0:{208}unlock end
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[205],replyMsg: {x 3 0 yx 3 1 yx 3 2 y 10 true}
kvserver[0]: pre删除通道index: 205
kvserver[0]: begin删除通道index: 205
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 205
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[206],replyMsg: {x 2 0 y 10 true}
kvserver[0]: pre删除通道index: 206
kvserver[0]: begin删除通道index: 206
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 206
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:1, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 4} 207 10 false [] 0 0}处理完成,通知index = [207]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 4} 207 10 false [] 0 0}处理完成,通知完成index = [207]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:4, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 4} 208 10 false [] 0 0}处理完成,通知index = [208]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 4} 208 10 false [] 0 0}处理完成,通知完成index = [208]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[208],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 208
kvserver[0]: begin删除通道index: 208
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 208
2023/09/23 03:26:46 3: client new append x 3 3 y
2023/09/23 03:26:46 2: client new append x 2 1 y
0:{208}lock now
0:{208}lock end
[0][10][0] apply index = 209, commit is 209
0:{209}unlock now
0:{209}unlock end
0:{209}lock now
0:{209}lock end
0:rf.commitIndex = 209, rf.lastApplied = 209
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[207],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 207
kvserver[0]: begin删除通道index: 207
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 207
OK:i num is 4, key is 4, return 
2023/09/23 03:26:46 4: client new get 4
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 0  3045059399824717845 4} 209 10 false [] 0 0}处理完成,通知index = [209]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 0  3045059399824717845 4} 209 10 false [] 0 0}处理完成,通知完成index = [209]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[209],replyMsg.value: x 0 0 y
reply value is x 0 0 y
kvserver[0]: pre删除通道index: 209
kvserver[0]: begin删除通道index: 209
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 209
OK:i num is 1, key is 0, return x 0 0 y
2023/09/23 03:26:46 0: client new append x 0 1 y
OK:i num is 1, key is 1, return 
2023/09/23 03:26:46 1: client new get 1
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 3 y) 3044182290069410002 5},term is 10,len is 210
---------------
1更新log，长度209
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:4, 
4更新log，长度209
[1][10][0] apply index = 200, commit is 204
1:{200}unlock now
1:{200}unlock end
1:{200}lock now
1:{200}lock end
[1][10][0] apply index = 201, commit is 204
1:{201}unlock now
1:{201}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:4, 
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 1 y) 3947973503454150994 5},term is 10,len is 211
---------------
3:{201}lock now
3:{201}lock end
[3][10][0] apply index = 202, commit is 204
3:{202}unlock now
3:{202}unlock end
3:{202}lock now
3:{202}lock end
[3][10][0] apply index = 203, commit is 204
3:{203}unlock now
3:{203}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:2, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:1, 
3:{203}lock now
3:{203}lock end
[3][10][0] apply index = 204, commit is 204
3:{204}unlock now
3:{204}unlock end
3:{204}lock now
3:{204}lock end
3:rf.commitIndex = 204, rf.lastApplied = 204
[4][10][0] apply index = 200, commit is 204
4:{200}unlock now
4:{200}unlock end
4:{200}lock now
4:{200}lock end
[4][10][0] apply index = 201, commit is 204
4:{201}unlock now
4:{201}unlock end
1:{201}lock now
1:{201}lock end
[1][10][0] apply index = 202, commit is 204
1:{202}unlock now
1:{202}unlock end
1:{202}lock now
1:{202}lock end
[1][10][0] apply index = 203, commit is 204
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
1:{203}unlock now
1:{203}unlock end
[3]append key:0, x 0 0 y
[4]append key:3, x 3 0 yx 3 1 y
[1]Get key:2, 
1:{203}lock now
2023/09/23 03:26:46 CommandApply!!!!!!!!!
1:{203}lock end
[1][10][0] apply index = 204, commit is 204
[4]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
4:{201}lock now
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 5},term is 10,len is 212
---------------
4 return success! num is 1
nextIndex = 205, lastIndex = 0, len = 212
1:{204}unlock now
1:{204}unlock end
[1]Get key:1, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 y
1:{204}lock now
1:{204}lock end
1:rf.commitIndex = 204, rf.lastApplied = 204
4:{201}lock end
[4][10][0] apply index = 202, commit is 204
4:{202}unlock now
4:{202}unlock end
4:{202}lock now
4:{202}lock end
[4][10][0] apply index = 203, commit is 204
4:{203}unlock now
4:{203}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:2, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:1, 
4:{203}lock now
4:{203}lock end
[4][10][0] apply index = 204, commit is 204
4:{204}unlock now
4:{204}unlock end
4:{204}lock now
4:{204}lock end
4:rf.commitIndex = 204, rf.lastApplied = 204
1 return success! num is 2
nextIndex = 205, lastIndex = 0, len = 212
1 max is 209
2 max is 209
0:commitIndex -> 209
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 y
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 1 y) 3045059399824717845 5},term is 10,len is 213
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 5},term is 10,len is 214
---------------
0:rf.commitIndex = 209, rf.lastApplied = 209
0 begin to append 1
prevlogindex = 209, lastIndex = 0
0 begin to append 2
prevlogindex = 209, lastIndex = 0
0 begin to append 3
prevlogindex = 209, lastIndex = 0
0 begin to append 4
prevlogindex = 209, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 209
updateIndex = 209, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 209
updateIndex = 209, lastIndex = 0
1更新log，长度214
1 return success! num is 1
nextIndex = 210, lastIndex = 0, len = 214
[1][10][0] apply index = 205, commit is 209
1:{205}unlock now
1:{205}unlock end
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 209
updateIndex = 209, lastIndex = 0
3更新log，长度214
[3][10][0] apply index = 205, commit is 209
3:{205}unlock now
3:{205}unlock end
3:{205}lock now
3:{205}lock end
[3][10][0] apply index = 206, commit is 209
3:{206}unlock now
3:{206}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 y
1:{205}lock now
1:{205}lock end
[1][10][0] apply index = 206, commit is 209
1:{206}unlock now
1:{206}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 y
3 return success! num is 2
2更新log，长度214
3:{206}lock now
3:{206}lock end
[3][10][0] apply index = 207, commit is 209
3:{207}unlock now
3:{207}unlock end
3:{207}lock now
3:{207}lock end
[3][10][0] apply index = 208, commit is 209
3:{208}unlock now
2023/09/23 03:26:46 CommandApply!!!!!!!!!
3:{208}unlock end
1:{206}lock now
1:{206}lock end
[1][10][0] apply index = 207, commit is 209
1:{207}unlock now
1:{207}unlock end
1:{207}lock now
1:{207}lock end
[1][10][0] apply index = 208, commit is 209
1:{208}unlock now
1:{208}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:1, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:4, 
[2][10][0] apply index = 205, commit is 209
2:{205}unlock now
2:{205}unlock end
2:{205}lock now
2:{205}lock end
[2][10][0] apply index = 206, commit is 209
2:{206}unlock now
2:{206}unlock end
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 209
updateIndex = 209, lastIndex = 0
4更新log，长度214
nextIndex = 210, lastIndex = 0, len = 214
1 max is 214
2 max is 214
0:commitIndex -> 214
[0][10][0] apply index = 210, commit is 214
0:{210}unlock now
0:{210}unlock end
0:{210}lock now
0:{210}lock end
[0][10][0] apply index = 211, commit is 214
0:{211}unlock now
0:{211}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 3 y 3044182290069410002 5} 210 10 false [] 0 0}处理完成,通知index = [210]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 3 y 3044182290069410002 5} 210 10 false [] 0 0}处理完成,通知完成index = [210]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 2 x 2 1 y 3947973503454150994 5} 211 10 false [] 0 0}处理完成,通知index = [211]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 2 x 2 1 y 3947973503454150994 5} 211 10 false [] 0 0}处理完成,通知完成index = [211]的channel
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[211],replyMsg: {x 2 0 yx 2 1 y 10 true}
kvserver[0]: pre删除通道index: 211
kvserver[0]: begin删除通道index: 211
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 211
[3]Get key:1, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:4, 
3:{208}lock now
3:{208}lock end
[3][10][0] apply index = 209, commit is 209
3:{209}unlock now
3:{209}unlock end
3:{209}lock now
3:{209}lock end
3:rf.commitIndex = 209, rf.lastApplied = 209
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 y
1:{208}lock now
1:{208}lock end
[1][10][0] apply index = 209, commit is 209
1:{209}unlock now
1:{209}unlock end
1:{209}lock now
1:{209}lock end
1:rf.commitIndex = 209, rf.lastApplied = 209
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 y
2:{206}lock now
2:{206}lock end
[2][10][0] apply index = 207, commit is 209
2:{207}unlock now
2:{207}unlock end
2:{207}lock now
2:{207}lock end
[2][10][0] apply index = 208, commit is 209
2:{208}unlock now
2:{208}unlock end
[4][10][0] apply index = 205, commit is 209
4:{205}unlock now
4:{205}unlock end
4:{205}lock now
4:{205}lock end
[4][10][0] apply index = 206, commit is 209
4:{206}unlock now
4:{206}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 y
4:{206}lock now
4:{206}lock end
[4][10][0] apply index = 207, commit is 209
4:{207}unlock now
4:{207}unlock end
4:{207}lock now
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[210],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 y 10 true}
4:{207}lock end
[4][10][0] apply index = 208, commit is 209
4:{208}unlock now
4:{208}unlock end
2 return success! num is 1
2023/09/23 03:26:46 2: client new get 2
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
nextIndex = 210, lastIndex = 0, len = 214
kvserver[0]: pre删除通道index: 210
kvserver[0]: begin删除通道index: 210
0:{211}lock now
0:{211}lock end
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 210
[0][10][0] apply index = 212, commit is 214
0:{212}unlock now
4 return success! num is 2
nextIndex = 210, lastIndex = 0, len = 214
1 max is 214
2 max is 214
0:commitIndex -> 214
0:{212}unlock end
0:{212}lock now
[2]Get key:1, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:1, 
4:{208}lock now
4:{208}lock end
[4][10][0] apply index = 209, commit is 209
4:{209}unlock now
4:{209}unlock end
[0]Get key:4, 
2:{208}lock now
2:{208}lock end
[2][10][0] apply index = 209, commit is 209
2:{209}unlock now
2:{209}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 y
4:{209}lock now
4:{209}lock end
4:rf.commitIndex = 209, rf.lastApplied = 209
[2]Get key:4, 
2:{209}lock now
2:{209}lock end
2:rf.commitIndex = 209, rf.lastApplied = 209
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 y
2023/09/23 03:26:46 3: client new append x 3 4 y
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 6},term is 10,len is 215
---------------
0:{212}lock end
[0][10][0] apply index = 213, commit is 214
0:{213}unlock now
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 5} 212 10 false [] 0 0}处理完成,通知index = [212]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 5} 212 10 false [] 0 0}处理完成,通知完成index = [212]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[212],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 212
kvserver[0]: begin删除通道index: 212
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 212
OK:i num is 4, key is 4, return 
2023/09/23 03:26:46 4: client new get 4
0:{213}unlock end
0:{213}lock now
0:{213}lock end
[0][10][0] apply index = 214, commit is 214
0:{214}unlock now
0:{214}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 y
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 4 y) 3044182290069410002 6},term is 10,len is 216
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 6},term is 10,len is 217
---------------
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 0 x 0 1 y 3045059399824717845 5} 213 10 false [] 0 0}处理完成,通知index = [213]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 0 x 0 1 y 3045059399824717845 5} 213 10 false [] 0 0}处理完成,通知完成index = [213]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:1, 
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 5} 214 10 false [] 0 0}处理完成,通知index = [214]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 5} 214 10 false [] 0 0}处理完成,通知完成index = [214]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[214],replyMsg.value: 
reply value is 
kvserver[0]: pre删除通道index: 214
kvserver[0]: begin删除通道index: 214
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 214
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[213],replyMsg: {x 0 0 yx 0 1 y 10 true}
kvserver[0]: pre删除通道index: 213
kvserver[0]: begin删除通道index: 213
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 213
2023/09/23 03:26:46 0: client new append x 0 2 y
0:{214}lock now
0:{214}lock end
0:rf.commitIndex = 214, rf.lastApplied = 214
OK:i num is 1, key is 1, return 
2023/09/23 03:26:46 1: client new append x 1 0 y
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 2 y) 3045059399824717845 6},term is 10,len is 218
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 0 y) 259300236053518071 6},term is 10,len is 219
---------------
0 begin to append 1
prevlogindex = 214, lastIndex = 0
0 begin to append 2
prevlogindex = 214, lastIndex = 0
0 begin to append 3
prevlogindex = 214, lastIndex = 0
0 begin to append 4
prevlogindex = 214, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 214
updateIndex = 214, lastIndex = 0
1更新log，长度219
[1][10][0] apply index = 210, commit is 214
1:{210}unlock now
1:{210}unlock end
1:{210}lock now
2023/09/23 03:26:46 CommandApply!!!!!!!!!
1:{210}lock end
[1][10][0] apply index = 211, commit is 214
1:{211}unlock now
1:{211}unlock end
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 214
updateIndex = 214, lastIndex = 0
1 return success! num is 1
nextIndex = 215, lastIndex = 0, len = 219
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 y
1:{211}lock now
1:{211}lock end
[1][10][0] apply index = 212, commit is 214
1:{212}unlock now
1:{212}unlock end
1:{212}lock now
1:{212}lock end
[1][10][0] apply index = 213, commit is 214
1:{213}unlock now
1:{213}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 214
updateIndex = 214, lastIndex = 0
3更新log，长度219
3 return success! num is 2
nextIndex = 215, lastIndex = 0, len = 219
1 max is 219
2 max is 219
0:commitIndex -> 219
[0][10][0] apply index = 215, commit is 219
0:{215}unlock now
0:{215}unlock end
0:{215}lock now
2023/09/23 03:26:46 CommandApply!!!!!!!!!
0:{215}lock end
[0][10][0] apply index = 216, commit is 219
0:{216}unlock now
0:{216}unlock end
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 214
updateIndex = 214, lastIndex = 0
2更新log，长度219
2 return success! num is 1
nextIndex = 215, lastIndex = 0, len = 219
[0]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 2  3947973503454150994 6} 215 10 false [] 0 0}处理完成,通知index = [215]的channel
[2][10][0] apply index = 210, commit is 214
[3][10][0] apply index = 210, commit is 214
3:{210}unlock now
3:{210}unlock end
3:{210}lock now
3:{210}lock end
[3][10][0] apply index = 211, commit is 214
3:{211}unlock now
3:{211}unlock end
[1]Get key:4, 
1:{213}lock now
1:{213}lock end
[1][10][0] apply index = 214, commit is 214
1:{214}unlock now
1:{214}unlock end
2:{210}unlock now
2:{210}unlock end
2:{210}lock now
2:{210}lock end
[2][10][0] apply index = 211, commit is 214
2:{211}unlock now
2:{211}unlock end
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 2  3947973503454150994 6} 215 10 false [] 0 0}处理完成,通知完成index = [215]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
0:{216}lock now
0:{216}lock end
[0][10][0] apply index = 217, commit is 219
0:{217}unlock now
0:{217}unlock end
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[215],replyMsg.value: x 2 0 yx 2 1 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 4 y 3044182290069410002 6} 216 10 false [] 0 0}处理完成,通知index = [216]的channel
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
[1]append key:0, x 0 0 yx 0 1 y
1:{214}lock now
1:{214}lock end
1:rf.commitIndex = 214, rf.lastApplied = 214
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2:{211}lock now
2:{211}lock end
[2][10][0] apply index = 212, commit is 214
2:{212}unlock now
2:{212}unlock end
3:{211}lock now
3:{211}lock end
[3][10][0] apply index = 212, commit is 214
3:{212}unlock now
3:{212}unlock end
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 3 x 3 4 y 3044182290069410002 6} 216 10 false [] 0 0}处理完成,通知完成index = [216]的channel
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[216],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y 10 true}
0:{217}lock now
0:{217}lock end
[0][10][0] apply index = 218, commit is 219
0:{218}unlock now
0:{218}unlock end
reply value is x 2 0 yx 2 1 y
kvserver[0]: pre删除通道index: 215
kvserver[0]: begin删除通道index: 215
kvserver[0]: pre删除通道index: 216
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 215
[2]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 y
[1]Get key:1, 
[0]Get key:4, 
OK:i num is 1, key is 2, return x 2 0 yx 2 1 y
3:{212}lock now
3:{212}lock end
[3][10][0] apply index = 213, commit is 214
3:{213}unlock now
3:{213}unlock end
2:{212}lock now
2:{212}lock end
[2][10][0] apply index = 213, commit is 214
2:{213}unlock now
2:{213}unlock end
[2]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 6} 217 10 false [] 0 0}处理完成,通知index = [217]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 6} 217 10 false [] 0 0}处理完成,通知完成index = [217]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 2: client new append x 2 2 y
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[217],replyMsg.value: 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2:{213}lock now
2:{213}lock end
[2][10][0] apply index = 214, commit is 214
2:{214}unlock now
2:{214}unlock end
kvserver[0]: begin删除通道index: 216
0:{218}lock now
0:{218}lock end
[0][10][0] apply index = 219, commit is 219
0:{219}unlock now
0:{219}unlock end
[3]Get key:4, 
3:{213}lock now
3:{213}lock end
[3][10][0] apply index = 214, commit is 214
3:{214}unlock now
3:{214}unlock end
[2]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 216
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2023/09/23 03:26:46 3: client new get 3
[3]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:1, 
reply value is 
kvserver[0]: pre删除通道index: 217
[0]append key:0, x 0 0 yx 0 1 yx 0 2 y
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 2 y) 3947973503454150994 7},term is 10,len is 220
---------------
3:{214}lock now
3:{214}lock end
3:rf.commitIndex = 214, rf.lastApplied = 214
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 7},term is 10,len is 221
---------------
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 0 x 0 2 y 3045059399824717845 6} 218 10 false [] 0 0}处理完成,通知index = [218]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 0 x 0 2 y 3045059399824717845 6} 218 10 false [] 0 0}处理完成,通知完成index = [218]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 1 x 1 0 y 259300236053518071 6} 219 10 false [] 0 0}处理完成,通知index = [219]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 1 x 1 0 y 259300236053518071 6} 219 10 false [] 0 0}处理完成,通知完成index = [219]的channel
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[219],replyMsg: {x 1 0 y 10 true}
kvserver[0]: pre删除通道index: 219
kvserver[0]: begin删除通道index: 219
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 219
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[218],replyMsg: {x 0 0 yx 0 1 yx 0 2 y 10 true}
kvserver[0]: pre删除通道index: 218
kvserver[0]: begin删除通道index: 218
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 218
kvserver[0]: begin删除通道index: 217
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 217
OK:i num is 4, key is 4, return 
2023/09/23 03:26:46 4: client new append x 4 0 y
0:{219}lock now
0:{219}lock end
0:rf.commitIndex = 219, rf.lastApplied = 219
2023/09/23 03:26:46 0: client new get 0
2023/09/23 03:26:46 1: client new get 1
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 0 y) 2356167759593910522 7},term is 10,len is 222
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 7},term is 10,len is 223
---------------
2023/09/23 03:26:46 CommandApply!!!!!!!!!
2:{214}lock now
2:{214}lock end
2:rf.commitIndex = 214, rf.lastApplied = 214
[2]Get key:1, 
4更新log，长度219
[4][10][0] apply index = 210, commit is 214
4:{210}unlock now
4:{210}unlock end
4:{210}lock now
2023/09/23 03:26:46 CommandApply!!!!!!!!!
4:{210}lock end
[4][10][0] apply index = 211, commit is 214
4:{211}unlock now
4:{211}unlock end
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
4:{211}lock now
4:{211}lock end
[4][10][0] apply index = 212, commit is 214
4:{212}unlock now
4:{212}unlock end
[4]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
4:{212}lock now
4:{212}lock end
[4][10][0] apply index = 213, commit is 214
4:{213}unlock now
4:{213}unlock end
[4]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
4:{213}lock now
4:{213}lock end
[4][10][0] apply index = 214, commit is 214
4:{214}unlock now
4:{214}unlock end
[4]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
4:{214}lock now
4:{214}lock end
4:rf.commitIndex = 214, rf.lastApplied = 214
[4]Get key:1, 
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 7},term is 10,len is 224
---------------
4 return success! num is 2
nextIndex = 215, lastIndex = 0, len = 224
1 max is 219
2 max is 219
0:commitIndex -> 219
0:rf.commitIndex = 219, rf.lastApplied = 219
0 begin to append 1
prevlogindex = 219, lastIndex = 0
0 begin to append 2
prevlogindex = 219, lastIndex = 0
0 begin to append 3
prevlogindex = 219, lastIndex = 0
0 begin to append 4
prevlogindex = 219, lastIndex = 0
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 219
updateIndex = 219, lastIndex = 0
4更新log，长度224
4 return success! num is 1
nextIndex = 220, lastIndex = 0, len = 224
[4][10][0] apply index = 215, commit is 219
4:{215}unlock now
4:{215}unlock end
4:{215}lock now
4:{215}lock end
[4][10][0] apply index = 216, commit is 219
4:{216}unlock now
4:{216}unlock end
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 219
updateIndex = 219, lastIndex = 0
2023/09/23 03:26:46 CommandApply!!!!!!!!!
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 219
updateIndex = 219, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 219
updateIndex = 219, lastIndex = 0
1更新log，长度224
[4]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
1 return success! num is 2
nextIndex = 220, lastIndex = 0, len = 224
1 max is 224
2 max is 224
0:commitIndex -> 224
[1][10][0] apply index = 215, commit is 219
1:{215}unlock now
1:{215}unlock end
1:{215}lock now
1:{215}lock end
[1][10][0] apply index = 216, commit is 219
1:{216}unlock now
1:{216}unlock end
[0][10][0] apply index = 220, commit is 224
0:{220}unlock now
0:{220}unlock end
0:{220}lock now
0:{220}lock end
[0][10][0] apply index = 221, commit is 224
0:{221}unlock now
0:{221}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
1:{216}lock now
1:{216}lock end
[1][10][0] apply index = 217, commit is 219
1:{217}unlock now
1:{217}unlock end
1:{217}lock now
1:{217}lock end
[1][10][0] apply index = 218, commit is 219
1:{218}unlock now
1:{218}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 2 x 2 2 y 3947973503454150994 7} 220 10 false [] 0 0}处理完成,通知index = [220]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 2 x 2 2 y 3947973503454150994 7} 220 10 false [] 0 0}处理完成,通知完成index = [220]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 3  3044182290069410002 7} 221 10 false [] 0 0}处理完成,通知index = [221]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 3  3044182290069410002 7} 221 10 false [] 0 0}处理完成,通知完成index = [221]的channel
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[221],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
kvserver[0]: pre删除通道index: 221
kvserver[0]: begin删除通道index: 221
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 221
OK:i num is 4, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:46 3: client new get 3
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 y
1:{218}lock now
1:{218}lock end
[1][10][0] apply index = 219, commit is 219
1:{219}unlock now
1:{219}unlock end
1:{219}lock now
1:{219}lock end
1:rf.commitIndex = 219, rf.lastApplied = 219
0:{221}lock now
0:{221}lock end
[0][10][0] apply index = 222, commit is 224
0:{222}unlock now
0:{222}unlock end
0:{222}lock now
0:{222}lock end
[0][10][0] apply index = 223, commit is 224
0:{223}unlock now
0:{223}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 4 x 4 0 y 2356167759593910522 7} 222 10 false [] 0 0}处理完成,通知index = [222]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Append 4 x 4 0 y 2356167759593910522 7} 222 10 false [] 0 0}处理完成,通知完成index = [222]的channel
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 0  3045059399824717845 7} 223 10 false [] 0 0}处理完成,通知index = [223]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 0  3045059399824717845 7} 223 10 false [] 0 0}处理完成,通知完成index = [223]的channel
0:{223}lock now
0:{223}lock end
[0][10][0] apply index = 224, commit is 224
0:{224}unlock now
0:{224}unlock end
0:{224}lock now
0:{224}lock end
0:rf.commitIndex = 224, rf.lastApplied = 224
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 y
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 7} 224 10 false [] 0 0}处理完成,通知index = [224]的channel
2023/09/23 03:26:46 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 7} 224 10 false [] 0 0}处理完成,通知完成index = [224]的channel
4:{216}lock now
4:{216}lock end
[4][10][0] apply index = 217, commit is 219
4:{217}unlock now
4:{217}unlock end
4:{217}lock now
4:{217}lock end
[4][10][0] apply index = 218, commit is 219
4:{218}unlock now
4:{218}unlock end
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[223],replyMsg.value: x 0 0 yx 0 1 yx 0 2 y
reply value is x 0 0 yx 0 1 yx 0 2 y
kvserver[0]: pre删除通道index: 223
kvserver[0]: begin删除通道index: 223
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 223
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[220],replyMsg: {x 2 0 yx 2 1 yx 2 2 y 10 true}
kvserver[0]: pre删除通道index: 220
kvserver[0]: begin删除通道index: 220
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 220
2023/09/23 03:26:46 kvserver[0]: PUTAPPEND获取到通知结果,index=[222],replyMsg: {x 4 0 y 10 true}
kvserver[0]: pre删除通道index: 222
kvserver[0]: begin删除通道index: 222
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 222
2023/09/23 03:26:46 4: client new get 4
2023/09/23 03:26:46 2: client new append x 2 3 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
OK:i num is 1, key is 0, return x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:46 0: client new get 0
[4]Get key:4, 
4:{218}lock now
4:{218}lock end
[4][10][0] apply index = 219, commit is 219
4:{219}unlock now
4:{219}unlock end
2更新log，长度224
[2][10][0] apply index = 215, commit is 219
2:{215}unlock now
2:{215}unlock end
2:{215}lock now
2:{215}lock end
[2][10][0] apply index = 216, commit is 219
2:{216}unlock now
2:{216}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2:{216}lock now
2:{216}lock end
[2][10][0] apply index = 217, commit is 219
2:{217}unlock now
2:{217}unlock end
2:{217}lock now
2:{217}lock end
[2][10][0] apply index = 218, commit is 219
2:{218}unlock now
2:{218}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 y
2:{218}lock now
2:{218}lock end
[2][10][0] apply index = 219, commit is 219
2:{219}unlock now
2:{219}unlock end
2:{219}lock now
2:{219}lock end
2:rf.commitIndex = 219, rf.lastApplied = 219
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 y
3更新log，长度224
[3][10][0] apply index = 215, commit is 219
3:{215}unlock now
3:{215}unlock end
3:{215}lock now
3:{215}lock end
[3][10][0] apply index = 216, commit is 219
3:{216}unlock now
3:{216}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
3:{216}lock now
3:{216}lock end
[3][10][0] apply index = 217, commit is 219
3:{217}unlock now
3:{217}unlock end
3:{217}lock now
3:{217}lock end
[3][10][0] apply index = 218, commit is 219
3:{218}unlock now
3:{218}unlock end
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]Get key:4, 
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 y
3:{218}lock now
3:{218}lock end
[3][10][0] apply index = 219, commit is 219
3:{219}unlock now
3:{219}unlock end
3:{219}lock now
3:{219}lock end
3:rf.commitIndex = 219, rf.lastApplied = 219
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:46 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 y
4:{219}lock now
4:{219}lock end
4:rf.commitIndex = 219, rf.lastApplied = 219
2023/09/23 03:26:46 kvserver[0]: GET获取到通知结果,index=[224],replyMsg.value: x 1 0 y
reply value is x 1 0 y
kvserver[0]: pre删除通道index: 224
kvserver[0]: begin删除通道index: 224
2023/09/23 03:26:46 kvserver[0]: 成功删除通道index: 224
OK:i num is 1, key is 1, return x 1 0 y
2023/09/23 03:26:46 1: client new get 1
---------------
0接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 8},term is 10,len is 225
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 8},term is 10,len is 226
---------------
2 return success! num is 1
nextIndex = 220, lastIndex = 0, len = 226
3 return success! num is 2
nextIndex = 220, lastIndex = 0, len = 226
1 max is 224
2 max is 224
0:commitIndex -> 224
---------------
0接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 3 y) 3947973503454150994 8},term is 10,len is 227
---------------
0:rf.commitIndex = 224, rf.lastApplied = 224
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 8},term is 10,len is 228
---------------
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 8},term is 10,len is 229
---------------
0 begin to append 1
prevlogindex = 224, lastIndex = 0
0 begin to append 2
prevlogindex = 224, lastIndex = 0
0 begin to append 3
prevlogindex = 224, lastIndex = 0
0 begin to append 4
prevlogindex = 224, lastIndex = 0
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 224
updateIndex = 224, lastIndex = 0
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 224
updateIndex = 224, lastIndex = 0
2更新log，长度229
4更新log，长度229
[2][10][0] apply index = 220, commit is 224
2:{220}unlock now
2:{220}unlock end
2:{220}lock now
2:{220}lock end
[2][10][0] apply index = 221, commit is 224
2:{221}unlock now
2:{221}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
[4][10][0] apply index = 220, commit is 224
4:{220}unlock now
4:{220}unlock end
4:{220}lock now
4:{220}lock end
[4][10][0] apply index = 221, commit is 224
4:{221}unlock now
4:{221}unlock end
4 return success! num is 1
nextIndex = 225, lastIndex = 0, len = 229
2:{221}lock now
2:{221}lock end
[2][10][0] apply index = 222, commit is 224
2:{222}unlock now
2:{222}unlock end
2:{222}lock now
2:{222}lock end
[2][10][0] apply index = 223, commit is 224
2:{223}unlock now
2:{223}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
2 return success! num is 2
2:{223}lock now
nextIndex = 225, lastIndex = 0, len = 229
1 max is 229
2023/09/23 03:26:47 CommandApply!!!!!!!!!
2 max is 229
0:commitIndex -> 229
[4]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0][10][0] apply index = 225, commit is 229
0:{225}unlock now
4:{221}lock now
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 y
4:{221}lock end
2:{223}lock end
[4][10][0] apply index = 222, commit is 224
[2][10][0] apply index = 224, commit is 224
4:{222}unlock now
2:{224}unlock now
0:{225}unlock end
2:{224}unlock end
4:{222}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
0:{225}lock now
0:{225}lock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0][10][0] apply index = 226, commit is 229
[2]Get key:1, x 1 0 y
0:{226}unlock now
2:{224}lock now
0:{226}unlock end
2:{224}lock end
2:rf.commitIndex = 224, rf.lastApplied = 224
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 y
4:{222}lock now
4:{222}lock end
[4][10][0] apply index = 223, commit is 224
4:{223}unlock now
4:{223}unlock end
4:{223}lock now
4:{223}lock end
[4][10][0] apply index = 224, commit is 224
4:{224}unlock now
4:{224}unlock end
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 3  3044182290069410002 8} 225 10 false [] 0 0}处理完成,通知index = [225]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 3  3044182290069410002 8} 225 10 false [] 0 0}处理完成,通知完成index = [225]的channel
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 y
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 8} 226 10 false [] 0 0}处理完成,通知index = [226]的channel
2023/09/23 03:26:47 kvserver[0]: GET获取到通知结果,index=[225],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
0:{226}lock now
0:{226}lock end
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 4  2356167759593910522 8} 226 10 false [] 0 0}处理完成,通知完成index = [226]的channel
[0][10][0] apply index = 227, commit is 229
2023/09/23 03:26:47 CommandApply!!!!!!!!!
0:{227}unlock now
0:{227}unlock end
0:{227}lock now
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
0:{227}lock end
kvserver[0]: pre删除通道index: 225
[0][10][0] apply index = 228, commit is 229
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 y
0:{228}unlock now
0:{228}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
kvserver[0]: begin删除通道index: 225
[4]Get key:1, x 1 0 y
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 225
4:{224}lock now
4:{224}lock end
4:rf.commitIndex = 224, rf.lastApplied = 224
2023/09/23 03:26:47 kvserver[0]: GET获取到通知结果,index=[226],replyMsg.value: x 4 0 y
reply value is x 4 0 y
kvserver[0]: pre删除通道index: 226
kvserver[0]: begin删除通道index: 226
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 226
OK:i num is 4, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:47 3: client new append x 3 5 y
OK:i num is 4, key is 4, return x 4 0 y
2023/09/23 03:26:47 4: client new append x 4 1 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Append 2 x 2 3 y 3947973503454150994 8} 227 10 false [] 0 0}处理完成,通知index = [227]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Append 2 x 2 3 y 3947973503454150994 8} 227 10 false [] 0 0}处理完成,通知完成index = [227]的channel
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 0  3045059399824717845 8} 228 10 false [] 0 0}处理完成,通知index = [228]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 0  3045059399824717845 8} 228 10 false [] 0 0}处理完成,通知完成index = [228]的channel
2023/09/23 03:26:47 kvserver[0]: GET获取到通知结果,index=[228],replyMsg.value: x 0 0 yx 0 1 yx 0 2 y
reply value is x 0 0 yx 0 1 yx 0 2 y
kvserver[0]: pre删除通道index: 228
kvserver[0]: begin删除通道index: 228
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 228
OK:i num is 1, key is 0, return x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:47 0: client new append x 0 3 y
2023/09/23 03:26:47 kvserver[0]: PUTAPPEND获取到通知结果,index=[227],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 y 10 true}
kvserver[0]: pre删除通道index: 227
kvserver[0]: begin删除通道index: 227
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 227
2023/09/23 03:26:47 2: client new get 2
0:{228}lock now
---------------
0接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 1 y) 2356167759593910522 9},term is 10,len is 230
---------------
0:{228}lock end
[0][10][0] apply index = 229, commit is 229
0:{229}unlock now
0:{229}unlock end
0:{229}lock now
0:{229}lock end
0:rf.commitIndex = 229, rf.lastApplied = 229
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 5 y) 3044182290069410002 9},term is 10,len is 231
---------------
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 y
---------------
0接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 3 y) 3045059399824717845 9},term is 10,len is 232
---------------
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 224
updateIndex = 224, lastIndex = 0
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 9},term is 10,len is 233
---------------
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 8} 229 10 false [] 0 0}处理完成,通知index = [229]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 8} 229 10 false [] 0 0}处理完成,通知完成index = [229]的channel
2023/09/23 03:26:47 kvserver[0]: GET获取到通知结果,index=[229],replyMsg.value: x 1 0 y
reply value is x 1 0 y
kvserver[0]: pre删除通道index: 229
kvserver[0]: begin删除通道index: 229
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 229
OK:i num is 1, key is 1, return x 1 0 y
2023/09/23 03:26:47 1: client new get 1
1更新log，长度229
[1][10][0] apply index = 220, commit is 224
1:{220}unlock now
1:{220}unlock end
1:{220}lock now
1:{220}lock end
[1][10][0] apply index = 221, commit is 224
1:{221}unlock now
1:{221}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
1:{221}lock now
1:{221}lock end
[1][10][0] apply index = 222, commit is 224
1:{222}unlock now
1:{222}unlock end
1:{222}lock now
1:{222}lock end
[1][10][0] apply index = 223, commit is 224
1:{223}unlock now
1:{223}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 y
1:{223}lock now
1:{223}lock end
[1][10][0] apply index = 224, commit is 224
1:{224}unlock now
1:{224}unlock end
1:{224}lock now
1:{224}lock end
1:rf.commitIndex = 224, rf.lastApplied = 224
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 y
---------------
0接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 9},term is 10,len is 234
---------------
1 return success! num is 1
nextIndex = 225, lastIndex = 0, len = 234
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 224
updateIndex = 224, lastIndex = 0
3更新log，长度229
[3][10][0] apply index = 220, commit is 224
3:{220}unlock now
3:{220}unlock end
3:{220}lock now
3:{220}lock end
[3][10][0] apply index = 221, commit is 224
3:{221}unlock now
3:{221}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
3:{221}lock now
3:{221}lock end
[3][10][0] apply index = 222, commit is 224
3:{222}unlock now
3:{222}unlock end
3:{222}lock now
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 y
3:{222}lock end
[3][10][0] apply index = 223, commit is 224
3:{223}unlock now
3:{223}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 y
3:{223}lock now
3:{223}lock end
[3][10][0] apply index = 224, commit is 224
3:{224}unlock now
3:{224}unlock end
3:{224}lock now
3:{224}lock end
3:rf.commitIndex = 224, rf.lastApplied = 224
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 y
3 return success! num is 2
nextIndex = 225, lastIndex = 0, len = 234
1 max is 229
2 max is 229
0:commitIndex -> 229
0:rf.commitIndex = 229, rf.lastApplied = 229
0 begin to append 1
prevlogindex = 229, lastIndex = 0
0 begin to append 2
prevlogindex = 229, lastIndex = 0
0 begin to append 3
prevlogindex = 229, lastIndex = 0
0 begin to append 4
prevlogindex = 229, lastIndex = 0
测试：1节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 229
updateIndex = 229, lastIndex = 0
1更新log，长度234
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 229
updateIndex = 229, lastIndex = 0
测试：3节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 229
updateIndex = 229, lastIndex = 0
2更新log，长度234
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 229
updateIndex = 229, lastIndex = 0
3更新log，长度234
3 return success! num is 1
nextIndex = 230, lastIndex = 0, len = 234
[3][10][0] apply index = 225, commit is 229
3:{225}unlock now
3:{225}unlock end
3:{225}lock now
3:{225}lock end
[3][10][0] apply index = 226, commit is 229
3:{226}unlock now
3:{226}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 y
3:{226}lock now
3:{226}lock end
[3][10][0] apply index = 227, commit is 229
3:{227}unlock now
3:{227}unlock end
3:{227}lock now
3:{227}lock end
[3][10][0] apply index = 228, commit is 229
3:{228}unlock now
3:{228}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 y
3:{228}lock now
3:{228}lock end
[3][10][0] apply index = 229, commit is 229
3:{229}unlock now
3:{229}unlock end
3:{229}lock now
3:{229}lock end
3:rf.commitIndex = 229, rf.lastApplied = 229
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 y
1 return success! num is 2
nextIndex = 230, lastIndex = 0, len = 234
1 max is 234
2 max is 234
0:commitIndex -> 234
[0][10][0] apply index = 230, commit is 234
0:{230}unlock now
0:{230}unlock end
0:{230}lock now
0:{230}lock end
[0][10][0] apply index = 231, commit is 234
0:{231}unlock now
0:{231}unlock end
[1][10][0] apply index = 225, commit is 229
1:{225}unlock now
1:{225}unlock end
1:{225}lock now
1:{225}lock end
[1][10][0] apply index = 226, commit is 229
1:{226}unlock now
1:{226}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Append 4 x 4 1 y 2356167759593910522 9} 230 10 false [] 0 0}处理完成,通知index = [230]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Append 4 x 4 1 y 2356167759593910522 9} 230 10 false [] 0 0}处理完成,通知完成index = [230]的channel
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Append 3 x 3 5 y 3044182290069410002 9} 231 10 false [] 0 0}处理完成,通知index = [231]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Append 3 x 3 5 y 3044182290069410002 9} 231 10 false [] 0 0}处理完成,通知完成index = [231]的channel
2023/09/23 03:26:47 kvserver[0]: PUTAPPEND获取到通知结果,index=[231],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y 10 true}
kvserver[0]: pre删除通道index: 231
kvserver[0]: begin删除通道index: 231
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 231
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 y
1:{226}lock now
1:{226}lock end
[1][10][0] apply index = 227, commit is 229
1:{227}unlock now
1:{227}unlock end
1:{227}lock now
1:{227}lock end
[1][10][0] apply index = 228, commit is 229
1:{228}unlock now
1:{228}unlock end
2023/09/23 03:26:47 kvserver[0]: PUTAPPEND获取到通知结果,index=[230],replyMsg: {x 4 0 yx 4 1 y 10 true}
kvserver[0]: pre删除通道index: 230
kvserver[0]: begin删除通道index: 230
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 230
0:{231}lock now
0:{231}lock end
[0][10][0] apply index = 232, commit is 234
0:{232}unlock now
0:{232}unlock end
0:{232}lock now
0:{232}lock end
[0][10][0] apply index = 233, commit is 234
0:{233}unlock now
0:{233}unlock end
2023/09/23 03:26:47 3: client new append x 3 6 y
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 6 y) 3044182290069410002 10},term is 10,len is 235
---------------
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:47 4: client new get 4
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Append 0 x 0 3 y 3045059399824717845 9} 232 10 false [] 0 0}处理完成,通知index = [232]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Append 0 x 0 3 y 3045059399824717845 9} 232 10 false [] 0 0}处理完成,通知完成index = [232]的channel
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 2  3947973503454150994 9} 233 10 false [] 0 0}处理完成,通知index = [233]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 2  3947973503454150994 9} 233 10 false [] 0 0}处理完成,通知完成index = [233]的channel
2023/09/23 03:26:47 kvserver[0]: GET获取到通知结果,index=[233],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 y
kvserver[0]: pre删除通道index: 233
kvserver[0]: begin删除通道index: 233
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 233
1:{228}lock now
1:{228}lock end
[1][10][0] apply index = 229, commit is 229
1:{229}unlock now
1:{229}unlock end
1:{229}lock now
1:{229}lock end
1:rf.commitIndex = 229, rf.lastApplied = 229
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 y
[2][10][0] apply index = 225, commit is 229
2:{225}unlock now
2:{225}unlock end
2:{225}lock now
2:{225}lock end
[2][10][0] apply index = 226, commit is 229
2:{226}unlock now
2023/09/23 03:26:47 CommandApply!!!!!!!!!
2023/09/23 03:26:47 kvserver[0]: PUTAPPEND获取到通知结果,index=[232],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 y 10 true}
2:{226}unlock end
4更新log，长度234
[4][10][0] apply index = 225, commit is 229
4:{225}unlock now
4:{225}unlock end
4:{225}lock now
2023/09/23 03:26:47 CommandApply!!!!!!!!!
4:{225}lock end
[4][10][0] apply index = 226, commit is 229
4:{226}unlock now
4:{226}unlock end
kvserver[0]: pre删除通道index: 232
kvserver[0]: begin删除通道index: 232
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 10},term is 10,len is 236
---------------
2 return success! num is 1
nextIndex = 230, lastIndex = 0, len = 236
4 return success! num is 2
nextIndex = 230, lastIndex = 0, len = 236
1 max is 234
2 max is 234
0:commitIndex -> 234
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
OK:i num is 1, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 y
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2:{226}lock now
2:{226}lock end
[2][10][0] apply index = 227, commit is 229
2:{227}unlock now
2:{227}unlock end
0:{233}lock now
0:{233}lock end
[0][10][0] apply index = 234, commit is 234
0:{234}unlock now
0:{234}unlock end
0:{234}lock now
0:{234}lock end
0:rf.commitIndex = 234, rf.lastApplied = 234
4:{226}lock now
4:{226}lock end
[4][10][0] apply index = 227, commit is 229
4:{227}unlock now
4:{227}unlock end
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 232
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 y
2023/09/23 03:26:47 2: client new get 2
2023/09/23 03:26:47 CommandApply!!!!!!!!!
2023/09/23 03:26:47 CommandApply!!!!!!!!!
2023/09/23 03:26:47 0: client new get 0
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
[2]Get key:4, x 4 0 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
4:{227}lock now
4:{227}lock end
[4][10][0] apply index = 228, commit is 229
4:{228}unlock now
4:{228}unlock end
4:{228}lock now
4:{228}lock end
[4][10][0] apply index = 229, commit is 229
4:{229}unlock now
4:{229}unlock end
[0]Get key:1, x 1 0 y
2:{227}lock now
2:{227}lock end
[2][10][0] apply index = 228, commit is 229
2:{228}unlock now
2:{228}unlock end
2:{228}lock now
2:{228}lock end
[2][10][0] apply index = 229, commit is 229
2:{229}unlock now
2:{229}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 y
2:{229}lock now
2:{229}lock end
2:rf.commitIndex = 229, rf.lastApplied = 229
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 10},term is 10,len is 237
---------------
4:{229}lock now
4:{229}lock end
4:rf.commitIndex = 229, rf.lastApplied = 229
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 10},term is 10,len is 238
---------------
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 9} 234 10 false [] 0 0}处理完成,通知index = [234]的channel
2023/09/23 03:26:47 kvserver[0]: applyMsg: {true {Get 1  259300236053518071 9} 234 10 false [] 0 0}处理完成,通知完成index = [234]的channel
2023/09/23 03:26:47 kvserver[0]: GET获取到通知结果,index=[234],replyMsg.value: x 1 0 y
reply value is x 1 0 y
kvserver[0]: pre删除通道index: 234
kvserver[0]: begin删除通道index: 234
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 234
OK:i num is 1, key is 1, return x 1 0 y
2023/09/23 03:26:47 1: client new append x 1 1 y
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 1 y) 259300236053518071 10},term is 10,len is 239
---------------
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
测试：4节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 234
updateIndex = 234, lastIndex = 0
测试：2节点term为10，leader发送term为10, 接收5个, PrevLogIndex is 234
updateIndex = 234, lastIndex = 0
4更新log，长度239
2更新log，长度239
[4][10][0] apply index = 230, commit is 234
4:{230}unlock now
4:{230}unlock end
4:{230}lock now
4:{230}lock end
[4][10][0] apply index = 231, commit is 234
4:{231}unlock now
4:{231}unlock end
[2][10][0] apply index = 230, commit is 234
2:{230}unlock now
2:{230}unlock end
2:{230}lock now
2:{230}lock end
[2][10][0] apply index = 231, commit is 234
2:{231}unlock now
2:{231}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2:{231}lock now
2:{231}lock end
[2][10][0] apply index = 232, commit is 234
2:{232}unlock now
2:{232}unlock end
2:{232}lock now
2:{232}lock end
[2][10][0] apply index = 233, commit is 234
2:{233}unlock now
2:{233}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
4:{231}lock now
4:{231}lock end
[4][10][0] apply index = 232, commit is 234
4:{232}unlock now
4:{232}unlock end
4:{232}lock now
4:{232}lock end
[4][10][0] apply index = 233, commit is 234
4:{233}unlock now
4:{233}unlock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
4:{233}lock now
4:{233}lock end
[4][10][0] apply index = 234, commit is 234
4:{234}unlock now
4:{234}unlock end
4:{234}lock now
4:{234}lock end
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2:{233}lock now
2:{233}lock end
[2][10][0] apply index = 234, commit is 234
2:{234}unlock now
2:{234}unlock end
2:{234}lock now
2:{234}lock end
2:rf.commitIndex = 234, rf.lastApplied = 234
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 y
2023/09/23 03:26:47 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 y
4:rf.commitIndex = 234, rf.lastApplied = 234
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
2023/09/23 03:26:47 kvserver[0]: PUTAPPEND处理请求超时: {Append 3 x 3 6 y 3044182290069410002 10}
kvserver[0]: pre删除通道index: 235
kvserver[0]: begin删除通道index: 235
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 235
---------------
0接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 6 y) 3044182290069410002 10},term is 10,len is 240
---------------
2023/09/23 03:26:47 kvserver[0]: GET处理请求超时: {Get 4  2356167759593910522 10}
kvserver[0]: pre删除通道index: 236
kvserver[0]: begin删除通道index: 236
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 236
---------------
0接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 10},term is 10,len is 241
---------------
2023/09/23 03:26:47 kvserver[0]: GET处理请求超时: {Get 0  3045059399824717845 10}
kvserver[0]: pre删除通道index: 237
2023/09/23 03:26:47 kvserver[0]: GET处理请求超时: {Get 2  3947973503454150994 10}
kvserver[0]: begin删除通道index: 237
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 237
kvserver[0]: pre删除通道index: 238
kvserver[0]: begin删除通道index: 238
2023/09/23 03:26:47 kvserver[0]: PUTAPPEND处理请求超时: {Append 1 x 1 1 y 259300236053518071 10}
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 238
---------------
0接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 10},term is 10,len is 242
---------------
kvserver[0]: pre删除通道index: 239
kvserver[0]: begin删除通道index: 239
2023/09/23 03:26:47 kvserver[0]: 成功删除通道index: 239
---------------
0接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 10},term is 10,len is 243
---------------
---------------
0接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 1 y) 259300236053518071 10},term is 10,len is 244
---------------
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
3 follow -> candidate
3 begin to elect
3 term is 11
1:投票检查234,234,10,10,11,10
1 vote now -> 3
3: vote num is 2
4:投票检查239,234,10,10,11,10
2:投票检查239,234,10,10,11,10
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
4 follow -> candidate
4 begin to elect
4 term is 12
3:投票检查234,239,10,10,12,11
3 vote now -> 4
1:投票检查234,239,10,10,12,11
1 vote now -> 4
2:投票检查239,239,10,10,12,11
2 vote now -> 4
4: vote num is 2
4: vote num is 3
4 is leader
4: vote num is 1
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 239, lastIndex = 0
4 begin to append 2
prevlogindex = 239, lastIndex = 0
4 begin to append 3
prevlogindex = 239, lastIndex = 0
测试：2节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 239
2:rf.commitIndex = 234, rf.lastApplied = 234
测试：3节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 239
不匹配,args = 239,lastIndex = 0,len = 234
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 239
不匹配,args = 239,lastIndex = 0,len = 234
reply XLen is 235
4 nextIndex change to 235
nextIndex = 235, lastIndex = 0, len = 239
2 return success! num is 1
nextIndex = 240, lastIndex = 0, len = 239
reply XLen is 235
4 nextIndex change to 235
nextIndex = 235, lastIndex = 0, len = 239
2023/09/23 03:26:48 kvserver[0]: PUTAPPEND处理请求超时: {Append 3 x 3 6 y 3044182290069410002 10}
kvserver[0]: pre删除通道index: 240
kvserver[0]: begin删除通道index: 240
2023/09/23 03:26:48 kvserver[0]: 成功删除通道index: 240
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 6 y) 3044182290069410002 10},term is 12,len is 240
---------------
2023/09/23 03:26:48 kvserver[0]: GET处理请求超时: {Get 4  2356167759593910522 10}
kvserver[0]: pre删除通道index: 241
kvserver[0]: begin删除通道index: 241
2023/09/23 03:26:48 kvserver[0]: 成功删除通道index: 241
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 10},term is 12,len is 241
---------------
2023/09/23 03:26:48 kvserver[0]: GET处理请求超时: {Get 0  3045059399824717845 10}
kvserver[0]: pre删除通道index: 242
kvserver[0]: begin删除通道index: 242
2023/09/23 03:26:48 kvserver[0]: 成功删除通道index: 242
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 10},term is 12,len is 242
---------------
2023/09/23 03:26:48 kvserver[0]: GET处理请求超时: {Get 2  3947973503454150994 10}
kvserver[0]: pre删除通道index: 243
kvserver[0]: begin删除通道index: 243
2023/09/23 03:26:48 kvserver[0]: 成功删除通道index: 243
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 10},term is 12,len is 243
---------------
2023/09/23 03:26:48 kvserver[0]: PUTAPPEND处理请求超时: {Append 1 x 1 1 y 259300236053518071 10}
kvserver[0]: pre删除通道index: 244
kvserver[0]: begin删除通道index: 244
2023/09/23 03:26:48 kvserver[0]: 成功删除通道index: 244
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 1 y) 259300236053518071 10},term is 12,len is 244
---------------
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 234, lastIndex = 0
4 begin to append 2
prevlogindex = 239, lastIndex = 0
4 begin to append 3
prevlogindex = 234, lastIndex = 0
测试：3节点term为12，leader发送term为12, 接收10个, PrevLogIndex is 234
updateIndex = 234, lastIndex = 0
3更新log，长度244
测试：2节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 239
updateIndex = 239, lastIndex = 0
3 return success! num is 1
nextIndex = 235, lastIndex = 0, len = 244
测试：1节点term为12，leader发送term为12, 接收10个, PrevLogIndex is 234
updateIndex = 234, lastIndex = 0
[3][12][0] apply index = 230, commit is 234
3:{230}unlock now
3:{230}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 y
3:{230}lock now
3:{230}lock end
[3][12][0] apply index = 231, commit is 234
3:{231}unlock now
3:{231}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
3:{231}lock now
3:{231}lock end
[3][12][0] apply index = 232, commit is 234
3:{232}unlock now
3:{232}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
3:{232}lock now
3:{232}lock end
[3][12][0] apply index = 233, commit is 234
3:{233}unlock now
3:{233}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
3:{233}lock now
3:{233}lock end
[3][12][0] apply index = 234, commit is 234
3:{234}unlock now
3:{234}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 y
3:{234}lock now
3:{234}lock end
3:rf.commitIndex = 234, rf.lastApplied = 234
1更新log，长度244
[1][12][0] apply index = 230, commit is 234
1 return success! num is 2
nextIndex = 235, lastIndex = 0, len = 244
1 max is 244
2 max is 244
4:commitIndex -> 244
[4][12][0] apply index = 235, commit is 244
4:{235}unlock now
4:{235}unlock end
4:{235}lock now
4:{235}lock end
[4][12][0] apply index = 236, commit is 244
4:{236}unlock now
4:{236}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 y
4:{236}lock now
4:{236}lock end
[4][12][0] apply index = 237, commit is 244
4:{237}unlock now
4:{237}unlock end
4:{237}lock now
4:{237}lock end
[4][12][0] apply index = 238, commit is 244
4:{238}unlock now
4:{238}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
4:{238}lock now
4:{238}lock end
[4][12][0] apply index = 239, commit is 244
4:{239}unlock now
4:{239}unlock end
4:{239}lock now
4:{239}lock end
[4][12][0] apply index = 240, commit is 244
4:{240}unlock now
4:{240}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
4:{240}lock now
4:{240}lock end
[4][12][0] apply index = 241, commit is 244
4:{241}unlock now
4:{241}unlock end
4:{241}lock now
4:{241}lock end
[4][12][0] apply index = 242, commit is 244
4:{242}unlock now
4:{242}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 4  2356167759593910522 10} 241 12 false [] 0 0}处理完成,通知index = [241]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 4  2356167759593910522 10} 241 12 false [] 0 0}处理完成,通知完成index = [241]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 10} 242 12 false [] 0 0}处理完成,通知index = [242]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 10} 242 12 false [] 0 0}处理完成,通知完成index = [242]的channel
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[241],replyMsg.value: x 4 0 yx 4 1 y
reply value is x 4 0 yx 4 1 y
kvserver[4]: pre删除通道index: 241
kvserver[4]: begin删除通道index: 241
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 241
OK:i num is 2, key is 4, return x 4 0 yx 4 1 y
2023/09/23 03:26:48 4: client new append x 4 2 y
4:{242}lock now
4:{242}lock end
[4][12][0] apply index = 243, commit is 244
4:{243}unlock now
4:{243}unlock end
4:{243}lock now
4:{243}lock end
[4][12][0] apply index = 244, commit is 244
4:{244}unlock now
4:{244}unlock end
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[242],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 y
kvserver[4]: pre删除通道index: 242
kvserver[4]: begin删除通道index: 242
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 242
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 2 y) 2356167759593910522 11},term is 12,len is 245
---------------
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 10} 243 12 false [] 0 0}处理完成,通知index = [243]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 10} 243 12 false [] 0 0}处理完成,通知完成index = [243]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[243],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 y
kvserver[4]: pre删除通道index: 243
kvserver[4]: begin删除通道index: 243
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 243
4:{244}lock now
4:{244}lock end
4:rf.commitIndex = 244, rf.lastApplied = 244
OK:i num is 3, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:48 0: client new append x 0 4 y
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 2: client new get 2
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 4 y) 3045059399824717845 11},term is 12,len is 246
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 11},term is 12,len is 247
---------------
1:{230}unlock now
1:{230}unlock end
1:{230}lock now
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{230}lock end
[1][12][0] apply index = 231, commit is 234
1:{231}unlock now
1:{231}unlock end
[1]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{231}lock now
1:{231}lock end
[1][12][0] apply index = 232, commit is 234
1:{232}unlock now
1:{232}unlock end
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{232}lock now
1:{232}lock end
[1][12][0] apply index = 233, commit is 234
1:{233}unlock now
1:{233}unlock end
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{233}lock now
1:{233}lock end
[1][12][0] apply index = 234, commit is 234
1:{234}unlock now
1:{234}unlock end
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{234}lock now
1:{234}lock end
1:rf.commitIndex = 234, rf.lastApplied = 234
[1]Get key:1, x 1 0 y
2更新log，长度244
2:rf.commitIndex = 234, rf.lastApplied = 234
2 return success! num is 1
nextIndex = 240, lastIndex = 0, len = 247
0 begin to append 1
prevlogindex = 234, lastIndex = 0
0 begin to append 2
prevlogindex = 234, lastIndex = 0
0 begin to append 3
prevlogindex = 234, lastIndex = 0
0 begin to append 4
prevlogindex = 234, lastIndex = 0
测试：2节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
0 AppOutOfDate follow -> candidate
测试：2节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 244, lastIndex = 0
4 begin to append 2
测试：1节点term为12，leader发送term为12, 接收3个, PrevLogIndex is 244
updateIndex = 244, lastIndex = 0
测试：2节点term为12，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
1更新log，长度247
[1][12][0] apply index = 235, commit is 244
1:{235}unlock now
1:{235}unlock end
1:{235}lock now
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{235}lock end
[1][12][0] apply index = 236, commit is 244
1:{236}unlock now
1:{236}unlock end
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{236}lock now
1:{236}lock end
[1][12][0] apply index = 237, commit is 244
1:{237}unlock now
1:{237}unlock end
[1]Get key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{237}lock now
1:{237}lock end
[1][12][0] apply index = 238, commit is 244
1:{238}unlock now
1:{238}unlock end
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{238}lock now
1:{238}lock end
[1][12][0] apply index = 239, commit is 244
1:{239}unlock now
1:{239}unlock end
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{239}lock now
1:{239}lock end
[1][12][0] apply index = 240, commit is 244
1:{240}unlock now
1:{240}unlock end
[1]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{240}lock now
1:{240}lock end
[1][12][0] apply index = 241, commit is 244
1:{241}unlock now
1:{241}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{241}lock now
1:{241}lock end
[1][12][0] apply index = 242, commit is 244
1:{242}unlock now
1:{242}unlock end
[1]Get key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{242}lock now
1:{242}lock end
[1][12][0] apply index = 243, commit is 244
1:{243}unlock now
1:{243}unlock end
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{243}lock now
1:{243}lock end
[1][12][0] apply index = 244, commit is 244
1:{244}unlock now
1:{244}unlock end
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{244}lock now
1:{244}lock end
1:rf.commitIndex = 244, rf.lastApplied = 244
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 244, lastIndex = 0
1 return success! num is 1
nextIndex = 245, lastIndex = 0, len = 247
测试：3节点term为12，leader发送term为12, 接收3个, PrevLogIndex is 244
updateIndex = 244, lastIndex = 0
3更新log，长度247
[3][12][0] apply index = 235, commit is 244
3:{235}unlock now
3:{235}unlock end
3:{235}lock now
3:{235}lock end
[3][12][0] apply index = 236, commit is 244
3:{236}unlock now
3:{236}unlock end
3 return success! num is 2
nextIndex = 245, lastIndex = 0, len = 247
1 max is 247
2 max is 247
4:commitIndex -> 247
[4][12][0] apply index = 245, commit is 247
4:{245}unlock now
4:{245}unlock end
4:{245}lock now
4:{245}lock end
[4][12][0] apply index = 246, commit is 247
4:{246}unlock now
4:{246}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 2 y 2356167759593910522 11} 245 12 false [] 0 0}处理完成,通知index = [245]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 2 y 2356167759593910522 11} 245 12 false [] 0 0}处理完成,通知完成index = [245]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 0 x 0 4 y 3045059399824717845 11} 246 12 false [] 0 0}处理完成,通知index = [246]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 0 x 0 4 y 3045059399824717845 11} 246 12 false [] 0 0}处理完成,通知完成index = [246]的channel
4:{246}lock now
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[246],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y 12 true}
4:{246}lock end
[4][12][0] apply index = 247, commit is 247
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[245],replyMsg: {x 4 0 yx 4 1 yx 4 2 y 12 true}
4:{247}unlock now
4:{247}unlock end
4:{247}lock now
4:{247}lock end
4:rf.commitIndex = 247, rf.lastApplied = 247
kvserver[4]: pre删除通道index: 245
kvserver[4]: begin删除通道index: 245
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 245
2023/09/23 03:26:48 4: client new append x 4 3 y
kvserver[4]: pre删除通道index: 246
kvserver[4]: begin删除通道index: 246
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 246
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 11} 247 12 false [] 0 0}处理完成,通知index = [247]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 11} 247 12 false [] 0 0}处理完成,通知完成index = [247]的channel
2023/09/23 03:26:48 0: client new append x 0 5 y
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 3 y) 2356167759593910522 12},term is 12,len is 248
---------------
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[247],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 y
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 5 y) 3045059399824717845 12},term is 12,len is 249
---------------
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 y
kvserver[4]: pre删除通道index: 247
kvserver[4]: begin删除通道index: 247
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 247
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 2: client new append x 2 4 y
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 4 y) 3947973503454150994 12},term is 12,len is 250
---------------
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{236}lock now
3:{236}lock end
[3][12][0] apply index = 237, commit is 244
3:{237}unlock now
测试：2节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：2节点term为12，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
3:{237}unlock end
[3]Get key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{237}lock now
3:{237}lock end
[3][12][0] apply index = 238, commit is 244
3:{238}unlock now
3:{238}unlock end
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{238}lock now
3:{238}lock end
[3][12][0] apply index = 239, commit is 244
3:{239}unlock now
3:{239}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{239}lock now
3:{239}lock end
[3][12][0] apply index = 240, commit is 244
3:{240}unlock now
3:{240}unlock end
[3]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{240}lock now
3:{240}lock end
[3][12][0] apply index = 241, commit is 244
3:{241}unlock now
3:{241}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{241}lock now
3:{241}lock end
[3][12][0] apply index = 242, commit is 244
3:{242}unlock now
3:{242}unlock end
[3]Get key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{242}lock now
3:{242}lock end
[3][12][0] apply index = 243, commit is 244
3:{243}unlock now
3:{243}unlock end
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{243}lock now
3:{243}lock end
[3][12][0] apply index = 244, commit is 244
3:{244}unlock now
3:{244}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{244}lock now
3:{244}lock end
3:rf.commitIndex = 244, rf.lastApplied = 244
测试：2节点term为12，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
0 follow -> candidate
0 begin to elect
0 term is 13
2:投票检查244,244,12,10,13,12
测试：2节点term为13，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：2节点term为13，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：2节点term为13，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：2节点term为13，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：2节点term为13，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 247, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 247, lastIndex = 0
测试：3节点term为12，leader发送term为12, 接收3个, PrevLogIndex is 247
updateIndex = 247, lastIndex = 0
3更新log，长度250
3 return success! num is 1
nextIndex = 248, lastIndex = 0, len = 250
[3][12][0] apply index = 245, commit is 247
3:{245}unlock now
3:{245}unlock end
3:{245}lock now
3:{245}lock end
[3][12][0] apply index = 246, commit is 247
3:{246}unlock now
3:{246}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
3:{246}lock now
3:{246}lock end
[3][12][0] apply index = 247, commit is 247
3:{247}unlock now
3:{247}unlock end
3:{247}lock now
3:{247}lock end
3:rf.commitIndex = 247, rf.lastApplied = 247
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
测试：1节点term为12，leader发送term为12, 接收3个, PrevLogIndex is 247
updateIndex = 247, lastIndex = 0
1更新log，长度250
[1][12][0] apply index = 245, commit is 247
1:{245}unlock now
1:{245}unlock end
1:{245}lock now
1:{245}lock end
[1][12][0] apply index = 246, commit is 247
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 y
1 return success! num is 2
nextIndex = 248, lastIndex = 0, len = 250
1 max is 250
2 max is 250
4:commitIndex -> 250
[4][12][0] apply index = 248, commit is 250
4:{248}unlock now
4:{248}unlock end
4:{248}lock now
4:{248}lock end
[4][12][0] apply index = 249, commit is 250
4:{249}unlock now
4:{249}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 3 y 2356167759593910522 12} 248 12 false [] 0 0}处理完成,通知index = [248]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 3 y 2356167759593910522 12} 248 12 false [] 0 0}处理完成,通知完成index = [248]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 0 x 0 5 y 3045059399824717845 12} 249 12 false [] 0 0}处理完成,通知index = [249]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 0 x 0 5 y 3045059399824717845 12} 249 12 false [] 0 0}处理完成,通知完成index = [249]的channel
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[248],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 y 12 true}
kvserver[4]: pre删除通道index: 248
kvserver[4]: begin删除通道index: 248
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 248
4:{249}lock now
4:{249}lock end
[4][12][0] apply index = 250, commit is 250
4:{250}unlock now
4:{250}unlock end
4:{250}lock now
4:{250}lock end
4:rf.commitIndex = 250, rf.lastApplied = 250
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 2 x 2 4 y 3947973503454150994 12} 250 12 false [] 0 0}处理完成,通知index = [250]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 2 x 2 4 y 3947973503454150994 12} 250 12 false [] 0 0}处理完成,通知完成index = [250]的channel
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[250],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y 12 true}
kvserver[4]: pre删除通道index: 250
kvserver[4]: begin删除通道index: 250
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 250
2023/09/23 03:26:48 2: client new append x 2 5 y
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[249],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y 12 true}
kvserver[4]: pre删除通道index: 249
kvserver[4]: begin删除通道index: 249
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 249
2023/09/23 03:26:48 0: client new get 0
2023/09/23 03:26:48 4: client new append x 4 4 y
1:{246}unlock now
1:{246}unlock end
1:{246}lock now
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{246}lock end
[1][12][0] apply index = 247, commit is 247
1:{247}unlock now
1:{247}unlock end
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 4 y) 2356167759593910522 13},term is 12,len is 251
---------------
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
1:{247}lock now
1:{247}lock end
1:rf.commitIndex = 247, rf.lastApplied = 247
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 5 y) 3947973503454150994 13},term is 12,len is 252
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 13},term is 12,len is 253
---------------
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 250, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 250, lastIndex = 0
测试：3节点term为12，leader发送term为12, 接收3个, PrevLogIndex is 250
updateIndex = 250, lastIndex = 0
3更新log，长度253
测试：1节点term为12，leader发送term为12, 接收3个, PrevLogIndex is 250
updateIndex = 250, lastIndex = 0
[3][12][0] apply index = 248, commit is 250
3:{248}unlock now
3:{248}unlock end
3:{248}lock now
3:{248}lock end
[3][12][0] apply index = 249, commit is 250
3:{249}unlock now
3:{249}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
3:{249}lock now
3:{249}lock end
[3][12][0] apply index = 250, commit is 250
3:{250}unlock now
3:{250}unlock end
3:{250}lock now
3:{250}lock end
3:rf.commitIndex = 250, rf.lastApplied = 250
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
3 return success! num is 1
nextIndex = 251, lastIndex = 0, len = 253
1更新log，长度253
[1][12][0] apply index = 248, commit is 250
1:{248}unlock now
1:{248}unlock end
1 return success! num is 2
nextIndex = 251, lastIndex = 0, len = 253
1 max is 253
2 max is 253
4:commitIndex -> 253
[4][12][0] apply index = 251, commit is 253
4:{251}unlock now
4:{251}unlock end
4:{251}lock now
4:{251}lock end
[4][12][0] apply index = 252, commit is 253
4:{252}unlock now
4:{252}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 4 y 2356167759593910522 13} 251 12 false [] 0 0}处理完成,通知index = [251]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 4 y 2356167759593910522 13} 251 12 false [] 0 0}处理完成,通知完成index = [251]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 2 x 2 5 y 3947973503454150994 13} 252 12 false [] 0 0}处理完成,通知index = [252]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 2 x 2 5 y 3947973503454150994 13} 252 12 false [] 0 0}处理完成,通知完成index = [252]的channel
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[252],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y 12 true}
kvserver[4]: pre删除通道index: 252
kvserver[4]: begin删除通道index: 252
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 252
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[251],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y 12 true}
kvserver[4]: pre删除通道index: 251
kvserver[4]: begin删除通道index: 251
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 251
4:{252}lock now
4:{252}lock end
[4][12][0] apply index = 253, commit is 253
4:{253}unlock now
4:{253}unlock end
4:{253}lock now
4:{253}lock end
4:rf.commitIndex = 253, rf.lastApplied = 253
2023/09/23 03:26:48 2: client new append x 2 6 y
2023/09/23 03:26:48 4: client new get 4
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
1:{248}lock now
1:{248}lock end
[1][12][0] apply index = 249, commit is 250
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{249}unlock now
1:{249}unlock end
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
1:{249}lock now
1:{249}lock end
[1][12][0] apply index = 250, commit is 250
1:{250}unlock now
1:{250}unlock end
1:{250}lock now
1:{250}lock end
1:rf.commitIndex = 250, rf.lastApplied = 250
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 6 y) 3947973503454150994 14},term is 12,len is 254
---------------
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 14},term is 12,len is 255
---------------
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 13} 253 12 false [] 0 0}处理完成,通知index = [253]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 13} 253 12 false [] 0 0}处理完成,通知完成index = [253]的channel
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[253],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
kvserver[4]: pre删除通道index: 253
kvserver[4]: begin删除通道index: 253
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 253
OK:i num is 3, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:48 0: client new get 0
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 14},term is 12,len is 256
---------------
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 253, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 253, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收3个, PrevLogIndex is 253
updateIndex = 253, lastIndex = 0
测试：3节点term为12，leader发送term为12, 接收3个, PrevLogIndex is 253
updateIndex = 253, lastIndex = 0
1更新log，长度256
1 return success! num is 1
nextIndex = 254, lastIndex = 0, len = 256
[1][12][0] apply index = 251, commit is 253
1:{251}unlock now
1:{251}unlock end
1:{251}lock now
1:{251}lock end
[1][12][0] apply index = 252, commit is 253
1:{252}unlock now
1:{252}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
1:{252}lock now
1:{252}lock end
[1][12][0] apply index = 253, commit is 253
1:{253}unlock now
1:{253}unlock end
1:{253}lock now
1:{253}lock end
1:rf.commitIndex = 253, rf.lastApplied = 253
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
3更新log，长度256
[3][12][0] apply index = 251, commit is 253
3:{251}unlock now
3:{251}unlock end
3:{251}lock now
3:{251}lock end
[3][12][0] apply index = 252, commit is 253
3 return success! num is 2
nextIndex = 254, lastIndex = 0, len = 256
1 max is 256
2 max is 256
4:commitIndex -> 256
[4][12][0] apply index = 254, commit is 256
4:{254}unlock now
4:{254}unlock end
4:{254}lock now
4:{254}lock end
[4][12][0] apply index = 255, commit is 256
4:{255}unlock now
4:{255}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 2 x 2 6 y 3947973503454150994 14} 254 12 false [] 0 0}处理完成,通知index = [254]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 2 x 2 6 y 3947973503454150994 14} 254 12 false [] 0 0}处理完成,通知完成index = [254]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 4  2356167759593910522 14} 255 12 false [] 0 0}处理完成,通知index = [255]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 4  2356167759593910522 14} 255 12 false [] 0 0}处理完成,通知完成index = [255]的channel
4:{255}lock now
4:{255}lock end
[4][12][0] apply index = 256, commit is 256
4:{256}unlock now
4:{256}unlock end
4:{256}lock now
4:{256}lock end
4:rf.commitIndex = 256, rf.lastApplied = 256
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[254],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y 12 true}
kvserver[4]: pre删除通道index: 254
kvserver[4]: begin删除通道index: 254
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 254
2023/09/23 03:26:48 2: client new append x 2 7 y
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[255],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
kvserver[4]: pre删除通道index: 255
kvserver[4]: begin删除通道index: 255
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 255
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 14} 256 12 false [] 0 0}处理完成,通知index = [256]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 14} 256 12 false [] 0 0}处理完成,通知完成index = [256]的channel
OK:i num is 2, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:48 4: client new append x 4 5 y
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[256],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
kvserver[4]: pre删除通道index: 256
kvserver[4]: begin删除通道index: 256
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 256
OK:i num is 3, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:48 0: client new append x 0 6 y
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 7 y) 3947973503454150994 15},term is 12,len is 257
---------------
3:{252}unlock now
3:{252}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
3:{252}lock now
3:{252}lock end
[3][12][0] apply index = 253, commit is 253
3:{253}unlock now
3:{253}unlock end
3:{253}lock now
3:{253}lock end
3:rf.commitIndex = 253, rf.lastApplied = 253
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 5 y) 2356167759593910522 15},term is 12,len is 258
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 6 y) 3045059399824717845 15},term is 12,len is 259
---------------
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND处理请求超时: {Append 3 x 3 6 y 3044182290069410002 10}
kvserver[4]: pre删除通道index: 240
kvserver[4]: begin删除通道index: 240
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 240
2023/09/23 03:26:48 3: client new append x 3 7 y
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 7 y) 3044182290069410002 11},term is 12,len is 260
---------------
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND处理请求超时: {Append 1 x 1 1 y 259300236053518071 10}
kvserver[4]: pre删除通道index: 244
kvserver[4]: begin删除通道index: 244
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 244
2023/09/23 03:26:48 1: client new get 1
---------------
4接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 11},term is 12,len is 261
---------------
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 256, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 256, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 256
updateIndex = 256, lastIndex = 0
1更新log，长度261
测试：3节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 256
updateIndex = 256, lastIndex = 0
1 return success! num is 1
[1][12][0] apply index = 254, commit is 256
1:{254}unlock now
1:{254}unlock end
1:{254}lock now
1:{254}lock end
[1][12][0] apply index = 255, commit is 256
1:{255}unlock now
1:{255}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
1:{255}lock now
1:{255}lock end
[1][12][0] apply index = 256, commit is 256
1:{256}unlock now
1:{256}unlock end
1:{256}lock now
1:{256}lock end
1:rf.commitIndex = 256, rf.lastApplied = 256
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
nextIndex = 257, lastIndex = 0, len = 261
3更新log，长度261
[3][12][0] apply index = 254, commit is 256
3:{254}unlock now
3:{254}unlock end
3 return success! num is 2
nextIndex = 257, lastIndex = 0, len = 261
1 max is 261
2 max is 261
4:commitIndex -> 261
[4][12][0] apply index = 257, commit is 261
4:{257}unlock now
4:{257}unlock end
4:{257}lock now
4:{257}lock end
[4][12][0] apply index = 258, commit is 261
4:{258}unlock now
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
4:{258}unlock end
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 2 x 2 7 y 3947973503454150994 15} 257 12 false [] 0 0}处理完成,通知index = [257]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 2 x 2 7 y 3947973503454150994 15} 257 12 false [] 0 0}处理完成,通知完成index = [257]的channel
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[257],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y 12 true}
kvserver[4]: pre删除通道index: 257
kvserver[4]: begin删除通道index: 257
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 257
2023/09/23 03:26:48 2: client new get 2
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 16},term is 12,len is 262
---------------
2023/09/23 03:26:48 CommandApply!!!!!!!!!
4:{258}lock now
4:{258}lock end
[4][12][0] apply index = 259, commit is 261
4:{259}unlock now
4:{259}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 5 y 2356167759593910522 15} 258 12 false [] 0 0}处理完成,通知index = [258]的channel
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[258],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y 12 true}
kvserver[4]: pre删除通道index: 258
kvserver[4]: begin删除通道index: 258
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 258
2023/09/23 03:26:48 4: client new append x 4 6 y
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 6 y) 2356167759593910522 16},term is 12,len is 263
---------------
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 5 y 2356167759593910522 15} 258 12 false [] 0 0}处理完成,通知完成index = [258]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
4:{259}lock now
4:{259}lock end
[4][12][0] apply index = 260, commit is 261
4:{260}unlock now
4:{260}unlock end
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 0 x 0 6 y 3045059399824717845 15} 259 12 false [] 0 0}处理完成,通知index = [259]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 0 x 0 6 y 3045059399824717845 15} 259 12 false [] 0 0}处理完成,通知完成index = [259]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
4:{260}lock now
4:{260}lock end
[4][12][0] apply index = 261, commit is 261
4:{261}unlock now
4:{261}unlock end
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[259],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y 12 true}
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 3 x 3 7 y 3044182290069410002 11} 260 12 false [] 0 0}处理完成,通知index = [260]的channel
kvserver[4]: pre删除通道index: 259
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 3 x 3 7 y 3044182290069410002 11} 260 12 false [] 0 0}处理完成,通知完成index = [260]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
4:{261}lock now
4:{261}lock end
4:rf.commitIndex = 261, rf.lastApplied = 261
kvserver[4]: begin删除通道index: 259
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[260],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y 12 true}
kvserver[4]: pre删除通道index: 260
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 259
2023/09/23 03:26:48 0: client new append x 0 7 y
[4]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 1  259300236053518071 11} 261 12 false [] 0 0}处理完成,通知index = [261]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 1  259300236053518071 11} 261 12 false [] 0 0}处理完成,通知完成index = [261]的channel
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 7 y) 3045059399824717845 16},term is 12,len is 264
---------------
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[261],replyMsg.value: x 1 0 yx 1 1 y
kvserver[4]: begin删除通道index: 260
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 260
reply value is x 1 0 yx 1 1 y
2023/09/23 03:26:48 3: client new get 3
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 12},term is 12,len is 265
---------------
kvserver[4]: pre删除通道index: 261
kvserver[4]: begin删除通道index: 261
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 261
OK:i num is 2, key is 1, return x 1 0 yx 1 1 y
2023/09/23 03:26:48 1: client new append x 1 2 y
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 2 y) 259300236053518071 12},term is 12,len is 266
---------------
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{254}lock now
3:{254}lock end
[3][12][0] apply index = 255, commit is 256
3:{255}unlock now
3:{255}unlock end
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{255}lock now
3:{255}lock end
[3][12][0] apply index = 256, commit is 256
3:{256}unlock now
3:{256}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{256}lock now
3:{256}lock end
3:rf.commitIndex = 256, rf.lastApplied = 256
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 261, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 261
updateIndex = 261, lastIndex = 0
1更新log，长度266
[1][12][0] apply index = 257, commit is 261
1:{257}unlock now
1:{257}unlock end
1:{257}lock now
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{257}lock end
[1][12][0] apply index = 258, commit is 261
1:{258}unlock now
1:{258}unlock end
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{258}lock now
1:{258}lock end
[1][12][0] apply index = 259, commit is 261
1:{259}unlock now
1:{259}unlock end
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{259}lock now
1:{259}lock end
[1][12][0] apply index = 260, commit is 261
1:{260}unlock now
1:{260}unlock end
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
1:{260}lock now
1:{260}lock end
[1][12][0] apply index = 261, commit is 261
1:{261}unlock now
1:{261}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 y
1:{261}lock now
1:{261}lock end
1:rf.commitIndex = 261, rf.lastApplied = 261
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 261, lastIndex = 0
1 return success! num is 1
nextIndex = 262, lastIndex = 0, len = 266
测试：3节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 261
updateIndex = 261, lastIndex = 0
3更新log，长度266
3 return success! num is 2
nextIndex = 262, lastIndex = 0, len = 266
1 max is 266
2 max is 266
4:commitIndex -> 266
[4][12][0] apply index = 262, commit is 266
4:{262}unlock now
4:{262}unlock end
4:{262}lock now
2023/09/23 03:26:48 CommandApply!!!!!!!!!
4:{262}lock end
[4][12][0] apply index = 263, commit is 266
4:{263}unlock now
4:{263}unlock end
[3][12][0] apply index = 257, commit is 261
3:{257}unlock now
3:{257}unlock end
3:{257}lock now
2023/09/23 03:26:48 CommandApply!!!!!!!!!
3:{257}lock end
[3][12][0] apply index = 258, commit is 261
3:{258}unlock now
3:{258}unlock end
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 16} 262 12 false [] 0 0}处理完成,通知index = [262]的channel
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
3:{258}lock now
3:{258}lock end
[3][12][0] apply index = 259, commit is 261
3:{259}unlock now
3:{259}unlock end
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 16} 262 12 false [] 0 0}处理完成,通知完成index = [262]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
4:{263}lock now
4:{263}lock end
[4][12][0] apply index = 264, commit is 266
4:{264}unlock now
4:{264}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[262],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 6 y 2356167759593910522 16} 263 12 false [] 0 0}处理完成,通知index = [263]的channel
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
3:{259}lock now
3:{259}lock end
[3][12][0] apply index = 260, commit is 261
3:{260}unlock now
3:{260}unlock end
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 4 x 4 6 y 2356167759593910522 16} 263 12 false [] 0 0}处理完成,通知完成index = [263]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
4:{264}lock now
4:{264}lock end
[4][12][0] apply index = 265, commit is 266
4:{265}unlock now
4:{265}unlock end
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
kvserver[4]: pre删除通道index: 262
kvserver[4]: begin删除通道index: 262
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[263],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y 12 true}
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 262
2023/09/23 03:26:48 CommandApply!!!!!!!!!
kvserver[4]: pre删除通道index: 263
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
3:{260}lock now
3:{260}lock end
[3][12][0] apply index = 261, commit is 261
3:{261}unlock now
3:{261}unlock end
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 0 x 0 7 y 3045059399824717845 16} 264 12 false [] 0 0}处理完成,通知index = [264]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 0 x 0 7 y 3045059399824717845 16} 264 12 false [] 0 0}处理完成,通知完成index = [264]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[264],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y 12 true}
2023/09/23 03:26:48 2: client new get 2
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
4:{265}lock now
kvserver[4]: pre删除通道index: 264
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 17},term is 12,len is 267
---------------
3:{261}lock now
3:{261}lock end
3:rf.commitIndex = 261, rf.lastApplied = 261
4:{265}lock end
[4][12][0] apply index = 266, commit is 266
4:{266}unlock now
4:{266}unlock end
[3]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 3  3044182290069410002 12} 265 12 false [] 0 0}处理完成,通知index = [265]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 3  3044182290069410002 12} 265 12 false [] 0 0}处理完成,通知完成index = [265]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 1 x 1 2 y 259300236053518071 12} 266 12 false [] 0 0}处理完成,通知index = [266]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 1 x 1 2 y 259300236053518071 12} 266 12 false [] 0 0}处理完成,通知完成index = [266]的channel
kvserver[4]: begin删除通道index: 263
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 263
2023/09/23 03:26:48 4: client new get 4
4:{266}lock now
4:{266}lock end
4:rf.commitIndex = 266, rf.lastApplied = 266
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[265],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
kvserver[4]: pre删除通道index: 265
kvserver[4]: begin删除通道index: 265
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 265
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[266],replyMsg: {x 1 0 yx 1 1 yx 1 2 y 12 true}
kvserver[4]: begin删除通道index: 264
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 17},term is 12,len is 268
---------------
OK:i num is 3, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
kvserver[4]: pre删除通道index: 266
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 264
2023/09/23 03:26:48 3: client new append x 3 8 y
kvserver[4]: begin删除通道index: 266
2023/09/23 03:26:48 0: client new get 0
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 266
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 17},term is 12,len is 269
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 8 y) 3044182290069410002 13},term is 12,len is 270
---------------
2023/09/23 03:26:48 1: client new get 1
---------------
4接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 13},term is 12,len is 271
---------------
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 266, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 266, lastIndex = 0
测试：3节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 266
updateIndex = 266, lastIndex = 0
3更新log，长度271
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 266
updateIndex = 266, lastIndex = 0
1更新log，长度271
[1][12][0] apply index = 262, commit is 266
1:{262}unlock now
1:{262}unlock end
[3][12][0] apply index = 262, commit is 266
3 return success! num is 1
nextIndex = 267, lastIndex = 0, len = 271
1 return success! num is 2
nextIndex = 267, lastIndex = 0, len = 271
1 max is 271
2 max is 271
4:commitIndex -> 271
[4][12][0] apply index = 267, commit is 271
4:{267}unlock now
4:{267}unlock end
4:{267}lock now
4:{267}lock end
[4][12][0] apply index = 268, commit is 271
4:{268}unlock now
4:{268}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 17} 267 12 false [] 0 0}处理完成,通知index = [267]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 17} 267 12 false [] 0 0}处理完成,通知完成index = [267]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 4  2356167759593910522 17} 268 12 false [] 0 0}处理完成,通知index = [268]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 4  2356167759593910522 17} 268 12 false [] 0 0}处理完成,通知完成index = [268]的channel
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[268],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
kvserver[4]: pre删除通道index: 268
kvserver[4]: begin删除通道index: 268
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 268
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[267],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
kvserver[4]: pre删除通道index: 267
kvserver[4]: begin删除通道index: 267
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 267
4:{268}lock now
4:{268}lock end
[4][12][0] apply index = 269, commit is 271
4:{269}unlock now
4:{269}unlock end
4:{269}lock now
4:{269}lock end
[4][12][0] apply index = 270, commit is 271
4:{270}unlock now
4:{270}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 17} 269 12 false [] 0 0}处理完成,通知index = [269]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 17} 269 12 false [] 0 0}处理完成,通知完成index = [269]的channel
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 3 x 3 8 y 3044182290069410002 13} 270 12 false [] 0 0}处理完成,通知index = [270]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Append 3 x 3 8 y 3044182290069410002 13} 270 12 false [] 0 0}处理完成,通知完成index = [270]的channel
2023/09/23 03:26:48 kvserver[4]: PUTAPPEND获取到通知结果,index=[270],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y 12 true}
kvserver[4]: pre删除通道index: 270
kvserver[4]: begin删除通道index: 270
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 270
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[269],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
kvserver[4]: pre删除通道index: 269
kvserver[4]: begin删除通道index: 269
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 269
4:{270}lock now
4:{270}lock end
[4][12][0] apply index = 271, commit is 271
4:{271}unlock now
4:{271}unlock end
4:{271}lock now
4:{271}lock end
4:rf.commitIndex = 271, rf.lastApplied = 271
2023/09/23 03:26:48 3: client new get 3
OK:i num is 2, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:48 4: client new append x 4 7 y
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:48 2: client new append x 2 8 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 1  259300236053518071 13} 271 12 false [] 0 0}处理完成,通知index = [271]的channel
2023/09/23 03:26:48 kvserver[4]: applyMsg: {true {Get 1  259300236053518071 13} 271 12 false [] 0 0}处理完成,通知完成index = [271]的channel
2023/09/23 03:26:48 kvserver[4]: GET获取到通知结果,index=[271],replyMsg.value: x 1 0 yx 1 1 yx 1 2 y
reply value is x 1 0 yx 1 1 yx 1 2 y
kvserver[4]: pre删除通道index: 271
kvserver[4]: begin删除通道index: 271
2023/09/23 03:26:48 kvserver[4]: 成功删除通道index: 271
OK:i num is 3, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:48 0: client new get 0
OK:i num is 2, key is 1, return x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:48 1: client new get 1
---------------
4接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 14},term is 12,len is 272
---------------
3:{262}unlock now
3:{262}unlock end
3:{262}lock now
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
3:{262}lock end
[3][12][0] apply index = 263, commit is 266
3:{263}unlock now
3:{263}unlock end
3:{263}lock now
3:{263}lock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
[3][12][0] apply index = 264, commit is 266
3:{264}unlock now
3:{264}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
3:{264}lock now
3:{264}lock end
[3][12][0] apply index = 265, commit is 266
3:{265}unlock now
3:{265}unlock end
3:{265}lock now
3:{265}lock end
[3][12][0] apply index = 266, commit is 266
3:{266}unlock now
3:{266}unlock end
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 14},term is 12,len is 273
---------------
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 y
3:{266}lock now
3:{266}lock end
3:rf.commitIndex = 266, rf.lastApplied = 266
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 7 y) 2356167759593910522 18},term is 12,len is 274
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 8 y) 3947973503454150994 18},term is 12,len is 275
---------------
2023/09/23 03:26:48 CommandApply!!!!!!!!!
1:{262}lock now
1:{262}lock end
[1][12][0] apply index = 263, commit is 266
1:{263}unlock now
1:{263}unlock end
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
1:{263}lock now
1:{263}lock end
[1][12][0] apply index = 264, commit is 266
1:{264}unlock now
1:{264}unlock end
1:{264}lock now
1:{264}lock end
[1][12][0] apply index = 265, commit is 266
1:{265}unlock now
1:{265}unlock end
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
1:{265}lock now
1:{265}lock end
[1][12][0] apply index = 266, commit is 266
1:{266}unlock now
1:{266}unlock end
1:{266}lock now
1:{266}lock end
1:rf.commitIndex = 266, rf.lastApplied = 266
2023/09/23 03:26:48 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 y
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 18},term is 12,len is 276
---------------
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 271, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 271, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 271
updateIndex = 271, lastIndex = 0
1更新log，长度276
测试：3节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 271
updateIndex = 271, lastIndex = 0
3更新log，长度276
[3][12][0] apply index = 267, commit is 271
3:{267}unlock now
3:{267}unlock end
3:{267}lock now
3:{267}lock end
[3][12][0] apply index = 268, commit is 271
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
3 return success! num is 1
nextIndex = 272, lastIndex = 0, len = 276
3:{268}unlock now
3:{268}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
3:{268}lock now
3:{268}lock end
[3][12][0] apply index = 269, commit is 271
3:{269}unlock now
3:{269}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
3:{269}lock now
3:{269}lock end
[3][12][0] apply index = 270, commit is 271
3:{270}unlock now
3:{270}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
3:{270}lock now
3:{270}lock end
[3][12][0] apply index = 271, commit is 271
3:{271}unlock now
3:{271}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 y
3:{271}lock now
3:{271}lock end
3:rf.commitIndex = 271, rf.lastApplied = 271
[1][12][0] apply index = 267, commit is 271
1:{267}unlock now
1:{267}unlock end
1:{267}lock now
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{267}lock end
[1][12][0] apply index = 268, commit is 271
1:{268}unlock now
1:{268}unlock end
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{268}lock now
1:{268}lock end
[1][12][0] apply index = 269, commit is 271
1:{269}unlock now
1:{269}unlock end
1 return success! num is 2
nextIndex = 272, lastIndex = 0, len = 276
1 max is 276
2 max is 276
4:commitIndex -> 276
[4][12][0] apply index = 272, commit is 276
4:{272}unlock now
4:{272}unlock end
4:{272}lock now
4:{272}lock end
[4][12][0] apply index = 273, commit is 276
4:{273}unlock now
4:{273}unlock end
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{269}lock now
1:{269}lock end
[1][12][0] apply index = 270, commit is 271
1:{270}unlock now
1:{270}unlock end
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 y
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 1  259300236053518071 14} 272 12 false [] 0 0}处理完成,通知index = [272]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 1  259300236053518071 14} 272 12 false [] 0 0}处理完成,通知完成index = [272]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[272],replyMsg.value: x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{270}lock now
1:{270}lock end
[1][12][0] apply index = 271, commit is 271
1:{271}unlock now
1:{271}unlock end
4:{273}lock now
4:{273}lock end
[4][12][0] apply index = 274, commit is 276
4:{274}unlock now
4:{274}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 3  3044182290069410002 14} 273 12 false [] 0 0}处理完成,通知index = [273]的channel
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[273],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 3  3044182290069410002 14} 273 12 false [] 0 0}处理完成,通知完成index = [273]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[4]: pre删除通道index: 273
4:{274}lock now
4:{274}lock end
[4][12][0] apply index = 275, commit is 276
4:{275}unlock now
4:{275}unlock end
reply value is x 1 0 yx 1 1 yx 1 2 y
1:{271}lock now
1:{271}lock end
1:rf.commitIndex = 271, rf.lastApplied = 271
kvserver[4]: pre删除通道index: 272
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 4 x 4 7 y 2356167759593910522 18} 274 12 false [] 0 0}处理完成,通知index = [274]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 4 x 4 7 y 2356167759593910522 18} 274 12 false [] 0 0}处理完成,通知完成index = [274]的channel
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[274],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y 12 true}
kvserver[4]: pre删除通道index: 274
2023/09/23 03:26:49 CommandApply!!!!!!!!!
kvserver[4]: begin删除通道index: 273
4:{275}lock now
4:{275}lock end
[4][12][0] apply index = 276, commit is 276
4:{276}unlock now
4:{276}unlock end
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 273
kvserver[4]: begin删除通道index: 272
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 272
kvserver[4]: begin删除通道index: 274
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 274
OK:i num is 2, key is 1, return x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:49 1: client new append x 1 3 y
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 2 x 2 8 y 3947973503454150994 18} 275 12 false [] 0 0}处理完成,通知index = [275]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 2 x 2 8 y 3947973503454150994 18} 275 12 false [] 0 0}处理完成,通知完成index = [275]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 18} 276 12 false [] 0 0}处理完成,通知index = [276]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 18} 276 12 false [] 0 0}处理完成,通知完成index = [276]的channel
2023/09/23 03:26:49 4: client new append x 4 8 y
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[275],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y 12 true}
kvserver[4]: pre删除通道index: 275
kvserver[4]: begin删除通道index: 275
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 275
4:{276}lock now
4:{276}lock end
4:rf.commitIndex = 276, rf.lastApplied = 276
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[276],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
kvserver[4]: pre删除通道index: 276
kvserver[4]: begin删除通道index: 276
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 276
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 8 y) 2356167759593910522 19},term is 12,len is 277
---------------
2023/09/23 03:26:49 2: client new append x 2 9 y
OK:i num is 3, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 0: client new get 0
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 3 y) 259300236053518071 15},term is 12,len is 278
---------------
OK:i num is 3, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:49 3: client new get 3
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 9 y) 3947973503454150994 19},term is 12,len is 279
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 19},term is 12,len is 280
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 15},term is 12,len is 281
---------------
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 276, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 276, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 276
updateIndex = 276, lastIndex = 0
测试：3节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 276
updateIndex = 276, lastIndex = 0
3更新log，长度281
[3][12][0] apply index = 272, commit is 276
3:{272}unlock now
3:{272}unlock end
3:{272}lock now
3:{272}lock end
[3][12][0] apply index = 273, commit is 276
3:{273}unlock now
3:{273}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
3:{273}lock now
3:{273}lock end
[3][12][0] apply index = 274, commit is 276
3:{274}unlock now
3:{274}unlock end
3:{274}lock now
3:{274}lock end
[3][12][0] apply index = 275, commit is 276
3:{275}unlock now
3:{275}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
3:{275}lock now
3:{275}lock end
[3][12][0] apply index = 276, commit is 276
3:{276}unlock now
3:{276}unlock end
3:{276}lock now
3:{276}lock end
3:rf.commitIndex = 276, rf.lastApplied = 276
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
3 return success! num is 1
nextIndex = 277, lastIndex = 0, len = 281
1更新log，长度281
[1][12][0] apply index = 272, commit is 276
1:{272}unlock now
1:{272}unlock end
1:{272}lock now
1:{272}lock end
[1][12][0] apply index = 273, commit is 276
1:{273}unlock now
1:{273}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
1:{273}lock now
1:{273}lock end
[1][12][0] apply index = 274, commit is 276
1:{274}unlock now
1:{274}unlock end
1:{274}lock now
1:{274}lock end
[1][12][0] apply index = 275, commit is 276
1:{275}unlock now
1:{275}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
1:{275}lock now
1:{275}lock end
[1][12][0] apply index = 276, commit is 276
1:{276}unlock now
1:{276}unlock end
1:{276}lock now
1:{276}lock end
1:rf.commitIndex = 276, rf.lastApplied = 276
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
1 return success! num is 2
nextIndex = 277, lastIndex = 0, len = 281
1 max is 281
2 max is 281
4:commitIndex -> 281
[4][12][0] apply index = 277, commit is 281
4:{277}unlock now
4:{277}unlock end
4:{277}lock now
2023/09/23 03:26:49 CommandApply!!!!!!!!!
4:{277}lock end
[4][12][0] apply index = 278, commit is 281
4:{278}unlock now
4:{278}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 4 x 4 8 y 2356167759593910522 19} 277 12 false [] 0 0}处理完成,通知index = [277]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 4 x 4 8 y 2356167759593910522 19} 277 12 false [] 0 0}处理完成,通知完成index = [277]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
4:{278}lock now
4:{278}lock end
[4][12][0] apply index = 279, commit is 281
4:{279}unlock now
4:{279}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[277],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y 12 true}
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 1 x 1 3 y 259300236053518071 15} 278 12 false [] 0 0}处理完成,通知index = [278]的channel
kvserver[4]: pre删除通道index: 277
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 1 x 1 3 y 259300236053518071 15} 278 12 false [] 0 0}处理完成,通知完成index = [278]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
4:{279}lock now
4:{279}lock end
[4][12][0] apply index = 280, commit is 281
4:{280}unlock now
4:{280}unlock end
kvserver[4]: begin删除通道index: 277
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[278],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 y 12 true}
kvserver[4]: pre删除通道index: 278
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 277
2023/09/23 03:26:49 4: client new append x 4 9 y
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 2 x 2 9 y 3947973503454150994 19} 279 12 false [] 0 0}处理完成,通知index = [279]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 2 x 2 9 y 3947973503454150994 19} 279 12 false [] 0 0}处理完成,通知完成index = [279]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 19} 280 12 false [] 0 0}处理完成,通知index = [280]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 19} 280 12 false [] 0 0}处理完成,通知完成index = [280]的channel
4:{280}lock now
4:{280}lock end
[4][12][0] apply index = 281, commit is 281
4:{281}unlock now
4:{281}unlock end
4:{281}lock now
4:{281}lock end
4:rf.commitIndex = 281, rf.lastApplied = 281
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 9 y) 2356167759593910522 20},term is 12,len is 282
---------------
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[279],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y 12 true}
kvserver[4]: pre删除通道index: 279
kvserver[4]: begin删除通道index: 279
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 279
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[280],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
kvserver[4]: pre删除通道index: 280
kvserver[4]: begin删除通道index: 280
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 280
OK:i num is 3, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 0: client new get 0
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 3  3044182290069410002 15} 281 12 false [] 0 0}处理完成,通知index = [281]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 3  3044182290069410002 15} 281 12 false [] 0 0}处理完成,通知完成index = [281]的channel
2023/09/23 03:26:49 2: client new append x 2 10 y
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[281],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[4]: pre删除通道index: 281
kvserver[4]: begin删除通道index: 281
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 281
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 20},term is 12,len is 283
---------------
OK:i num is 3, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:49 3: client new append x 3 9 y
---------------
4接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 10 y) 3947973503454150994 20},term is 12,len is 284
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 9 y) 3044182290069410002 16},term is 12,len is 285
---------------
kvserver[4]: begin删除通道index: 278
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 278
2023/09/23 03:26:49 1: client new get 1
---------------
4接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 16},term is 12,len is 286
---------------
2 follow -> candidate
2 begin to elect
2 term is 14
0:投票检查244,244,10,12,14,13
0 vote now -> 2
2: vote num is 2
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 281, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 281
updateIndex = 281, lastIndex = 0
1更新log，长度286
[1][12][0] apply index = 277, commit is 281
1:{277}unlock now
1:{277}unlock end
1:{277}lock now
1:{277}lock end
[1][12][0] apply index = 278, commit is 281
1:{278}unlock now
1:{278}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
1:{278}lock now
1:{278}lock end
[1][12][0] apply index = 279, commit is 281
1:{279}unlock now
1:{279}unlock end
1:{279}lock now
1:{279}lock end
[1][12][0] apply index = 280, commit is 281
1:{280}unlock now
1:{280}unlock end
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
1:{280}lock now
1:{280}lock end
[1][12][0] apply index = 281, commit is 281
1:{281}unlock now
1:{281}unlock end
1:{281}lock now
1:{281}lock end
1:rf.commitIndex = 281, rf.lastApplied = 281
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 281, lastIndex = 0
1 return success! num is 1
nextIndex = 282, lastIndex = 0, len = 286
测试：3节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 281
updateIndex = 281, lastIndex = 0
3更新log，长度286
[3][12][0] apply index = 277, commit is 281
3:{277}unlock now
3:{277}unlock end
3:{277}lock now
2023/09/23 03:26:49 CommandApply!!!!!!!!!
3:{277}lock end
[3][12][0] apply index = 278, commit is 281
3:{278}unlock now
3:{278}unlock end
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
3:{278}lock now
3:{278}lock end
[3][12][0] apply index = 279, commit is 281
3:{279}unlock now
3:{279}unlock end
3 return success! num is 2
nextIndex = 282, lastIndex = 0, len = 286
1 max is 286
2 max is 286
4:commitIndex -> 286
[4][12][0] apply index = 282, commit is 286
4:{282}unlock now
4:{282}unlock end
4:{282}lock now
4:{282}lock end
[4][12][0] apply index = 283, commit is 286
4:{283}unlock now
4:{283}unlock end
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
3:{279}lock now
3:{279}lock end
[3][12][0] apply index = 280, commit is 281
3:{280}unlock now
3:{280}unlock end
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 4 x 4 9 y 2356167759593910522 20} 282 12 false [] 0 0}处理完成,通知index = [282]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 4 x 4 9 y 2356167759593910522 20} 282 12 false [] 0 0}处理完成,通知完成index = [282]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[282],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y 12 true}
2023/09/23 03:26:49 CommandApply!!!!!!!!!
4:{283}lock now
4:{283}lock end
[4][12][0] apply index = 284, commit is 286
4:{284}unlock now
4:{284}unlock end
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
kvserver[4]: pre删除通道index: 282
3:{280}lock now
3:{280}lock end
[3][12][0] apply index = 281, commit is 281
3:{281}unlock now
3:{281}unlock end
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 20} 283 12 false [] 0 0}处理完成,通知index = [283]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 0  3045059399824717845 20} 283 12 false [] 0 0}处理完成,通知完成index = [283]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[283],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
3:{281}lock now
3:{281}lock end
3:rf.commitIndex = 281, rf.lastApplied = 281
4:{284}lock now
4:{284}lock end
[4][12][0] apply index = 285, commit is 286
4:{285}unlock now
4:{285}unlock end
kvserver[4]: begin删除通道index: 282
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 282
2023/09/23 03:26:49 4: client new get 4
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 21},term is 12,len is 287
---------------
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 2 x 2 10 y 3947973503454150994 20} 284 12 false [] 0 0}处理完成,通知index = [284]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 2 x 2 10 y 3947973503454150994 20} 284 12 false [] 0 0}处理完成,通知完成index = [284]的channel
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[284],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y 12 true}
kvserver[4]: pre删除通道index: 284
2023/09/23 03:26:49 CommandApply!!!!!!!!!
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
kvserver[4]: pre删除通道index: 283
kvserver[4]: begin删除通道index: 283
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 283
4:{285}lock now
4:{285}lock end
[4][12][0] apply index = 286, commit is 286
4:{286}unlock now
4:{286}unlock end
kvserver[4]: begin删除通道index: 284
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 284
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 3 x 3 9 y 3044182290069410002 16} 285 12 false [] 0 0}处理完成,通知index = [285]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 3 x 3 9 y 3044182290069410002 16} 285 12 false [] 0 0}处理完成,通知完成index = [285]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 1  259300236053518071 16} 286 12 false [] 0 0}处理完成,通知index = [286]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 1  259300236053518071 16} 286 12 false [] 0 0}处理完成,通知完成index = [286]的channel
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[286],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 y
kvserver[4]: pre删除通道index: 286
kvserver[4]: begin删除通道index: 286
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 286
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[285],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y 12 true}
OK:i num is 3, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 2: client new get 2
kvserver[4]: pre删除通道index: 285
kvserver[4]: begin删除通道index: 285
4:{286}lock now
4:{286}lock end
4:rf.commitIndex = 286, rf.lastApplied = 286
OK:i num is 2, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:49 0: client new append x 0 8 y
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 285
2023/09/23 03:26:49 1: client new append x 1 4 y
2023/09/23 03:26:49 3: client new append x 3 10 y
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 21},term is 12,len is 288
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 4 y) 259300236053518071 17},term is 12,len is 289
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 10 y) 3044182290069410002 17},term is 12,len is 290
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 8 y) 3045059399824717845 21},term is 12,len is 291
---------------
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 286, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 286, lastIndex = 0
测试：3节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 286
updateIndex = 286, lastIndex = 0
3更新log，长度291
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 286
updateIndex = 286, lastIndex = 0
1更新log，长度291
[1][12][0] apply index = 282, commit is 286
1:{282}unlock now
1 return success! num is 1
nextIndex = 287, lastIndex = 0, len = 291
1:{282}unlock end
1:{282}lock now
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{282}lock end
[1][12][0] apply index = 283, commit is 286
1:{283}unlock now
1:{283}unlock end
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{283}lock now
1:{283}lock end
[1][12][0] apply index = 284, commit is 286
1:{284}unlock now
1:{284}unlock end
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{284}lock now
1:{284}lock end
[1][12][0] apply index = 285, commit is 286
1:{285}unlock now
1:{285}unlock end
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{285}lock now
1:{285}lock end
[1][12][0] apply index = 286, commit is 286
1:{286}unlock now
1:{286}unlock end
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{286}lock now
1:{286}lock end
1:rf.commitIndex = 286, rf.lastApplied = 286
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
[3][12][0] apply index = 282, commit is 286
3:{282}unlock now
3:{282}unlock end
3:{282}lock now
2023/09/23 03:26:49 CommandApply!!!!!!!!!
3:{282}lock end
[3][12][0] apply index = 283, commit is 286
3:{283}unlock now
3:{283}unlock end
3 return success! num is 2
nextIndex = 287, lastIndex = 0, len = 291
1 max is 291
2 max is 291
4:commitIndex -> 291
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[4][12][0] apply index = 287, commit is 291
4:{287}unlock now
4:{287}unlock end
4:{287}lock now
4:{287}lock end
[4][12][0] apply index = 288, commit is 291
4:{288}unlock now
4:{288}unlock end
3:{283}lock now
3:{283}lock end
[3][12][0] apply index = 284, commit is 286
3:{284}unlock now
3:{284}unlock end
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
3:{284}lock now
3:{284}lock end
[3][12][0] apply index = 285, commit is 286
3:{285}unlock now
3:{285}unlock end
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 4  2356167759593910522 21} 287 12 false [] 0 0}处理完成,通知index = [287]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 4  2356167759593910522 21} 287 12 false [] 0 0}处理完成,通知完成index = [287]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[287],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
4:{288}lock now
4:{288}lock end
[4][12][0] apply index = 289, commit is 291
4:{289}unlock now
4:{289}unlock end
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
3:{285}lock now
3:{285}lock end
[3][12][0] apply index = 286, commit is 286
3:{286}unlock now
3:{286}unlock end
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 21} 288 12 false [] 0 0}处理完成,通知index = [288]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Get 2  3947973503454150994 21} 288 12 false [] 0 0}处理完成,通知完成index = [288]的channel
2023/09/23 03:26:49 CommandApply!!!!!!!!!
2023/09/23 03:26:49 kvserver[4]: GET获取到通知结果,index=[288],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
3:{286}lock now
3:{286}lock end
3:rf.commitIndex = 286, rf.lastApplied = 286
4:{289}lock now
4:{289}lock end
[4][12][0] apply index = 290, commit is 291
4:{290}unlock now
4:{290}unlock end
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
kvserver[4]: pre删除通道index: 287
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 1 x 1 4 y 259300236053518071 17} 289 12 false [] 0 0}处理完成,通知index = [289]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 1 x 1 4 y 259300236053518071 17} 289 12 false [] 0 0}处理完成,通知完成index = [289]的channel
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[289],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y 12 true}
2023/09/23 03:26:49 CommandApply!!!!!!!!!
4:{290}lock now
4:{290}lock end
[4][12][0] apply index = 291, commit is 291
4:{291}unlock now
4:{291}unlock end
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
kvserver[4]: pre删除通道index: 288
kvserver[4]: begin删除通道index: 287
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 287
kvserver[4]: pre删除通道index: 289
OK:i num is 2, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:49 4: client new append x 4 10 y
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 3 x 3 10 y 3044182290069410002 17} 290 12 false [] 0 0}处理完成,通知index = [290]的channel
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 3 x 3 10 y 3044182290069410002 17} 290 12 false [] 0 0}处理完成,通知完成index = [290]的channel
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 2356167759593910522 22},term is 12,len is 292
---------------
kvserver[4]: begin删除通道index: 288
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 288
kvserver[4]: begin删除通道index: 289
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 289
2023/09/23 03:26:49 1: client new append x 1 5 y
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 5 y) 259300236053518071 18},term is 12,len is 293
---------------
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:49 2: client new get 2
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 22},term is 12,len is 294
---------------
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 0 x 0 8 y 3045059399824717845 21} 291 12 false [] 0 0}处理完成,通知index = [291]的channel
4:{291}lock now
4:{291}lock end
4:rf.commitIndex = 291, rf.lastApplied = 291
2023/09/23 03:26:49 kvserver[4]: applyMsg: {true {Append 0 x 0 8 y 3045059399824717845 21} 291 12 false [] 0 0}处理完成,通知完成index = [291]的channel
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[291],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y 12 true}
kvserver[4]: pre删除通道index: 291
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND获取到通知结果,index=[290],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y 12 true}
kvserver[4]: begin删除通道index: 291
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 291
kvserver[4]: pre删除通道index: 290
kvserver[4]: begin删除通道index: 290
2023/09/23 03:26:49 0: client new get 0
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 290
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 22},term is 12,len is 295
---------------
2023/09/23 03:26:49 3: client new get 3
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 18},term is 12,len is 296
---------------
测试：3节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为12，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 291, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 291
updateIndex = 291, lastIndex = 0
测试：3节点term为12，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
1更新log，长度296
[1][12][0] apply index = 287, commit is 291
1 return success! num is 1
nextIndex = 292, lastIndex = 0, len = 296
1:{287}unlock now
1:{287}unlock end
1:{287}lock now
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{287}lock end
[1][12][0] apply index = 288, commit is 291
1:{288}unlock now
1:{288}unlock end
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
1:{288}lock now
1:{288}lock end
[1][12][0] apply index = 289, commit is 291
1:{289}unlock now
1:{289}unlock end
1:{289}lock now
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{289}lock end
[1][12][0] apply index = 290, commit is 291
1:{290}unlock now
1:{290}unlock end
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{290}lock now
1:{290}lock end
[1][12][0] apply index = 291, commit is 291
1:{291}unlock now
1:{291}unlock end
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:49 CommandApply!!!!!!!!!
1:{291}lock now
1:{291}lock end
1:rf.commitIndex = 291, rf.lastApplied = 291
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
测试：3节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为12，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
0:投票检查244,234,10,10,11,14
0 vote refuse 1 -> 3
测试：3节点term为12，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
3: vote is out of date
测试：3节点term为12，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
3:投票检查291,244,12,10,13,12
0: vote is out of date
3:投票检查291,244,12,12,14,13
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 296, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 296
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 296
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 296, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 296
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 296
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 296, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 296
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 296
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 296, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 296
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 296
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 2356167759593910522 22}
kvserver[4]: pre删除通道index: 292
kvserver[4]: begin删除通道index: 292
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 292
2023/09/23 03:26:49 kvserver[4]: PUTAPPEND处理请求超时: {Append 1 x 1 5 y 259300236053518071 18}
kvserver[4]: pre删除通道index: 293
2023/09/23 03:26:49 kvserver[4]: GET处理请求超时: {Get 2  3947973503454150994 22}
kvserver[4]: begin删除通道index: 293
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 293
kvserver[4]: pre删除通道index: 294
kvserver[4]: begin删除通道index: 294
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 294
2023/09/23 03:26:49 kvserver[4]: GET处理请求超时: {Get 0  3045059399824717845 22}
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 2356167759593910522 22},term is 12,len is 297
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 22},term is 12,len is 298
---------------
kvserver[4]: pre删除通道index: 295
kvserver[4]: begin删除通道index: 295
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 295
2023/09/23 03:26:49 kvserver[4]: GET处理请求超时: {Get 3  3044182290069410002 18}
kvserver[4]: pre删除通道index: 296
kvserver[4]: begin删除通道index: 296
2023/09/23 03:26:49 kvserver[4]: 成功删除通道index: 296
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 5 y) 259300236053518071 18},term is 12,len is 299
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 22},term is 12,len is 300
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 18},term is 12,len is 301
---------------
2 begin to elect
2 term is 15
0:投票检查244,244,10,12,15,14
3:投票检查291,244,12,12,15,14
0 vote now -> 2
2: vote num is 2
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 296, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 296
updateIndex = 296, lastIndex = 0
1更新log，长度301
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 301
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 301, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 301
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 302, lastIndex = 0, len = 301
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 301, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 301
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 302, lastIndex = 0, len = 301
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 301, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 301
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 302, lastIndex = 0, len = 301
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 301, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
测试：1节点term为12，leader发送term为12, 接收0个, PrevLogIndex is 301
1:rf.commitIndex = 291, rf.lastApplied = 291
prevlogindex = 291, lastIndex = 0
1 return success! num is 1
nextIndex = 302, lastIndex = 0, len = 301
2023/09/23 03:26:50 kvserver[4]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 2356167759593910522 22}
kvserver[4]: pre删除通道index: 297
kvserver[4]: begin删除通道index: 297
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 297
2023/09/23 03:26:50 kvserver[4]: GET处理请求超时: {Get 2  3947973503454150994 22}
kvserver[4]: pre删除通道index: 298
kvserver[4]: begin删除通道index: 298
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 298
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 22},term is 12,len is 302
---------------
2023/09/23 03:26:50 kvserver[4]: GET处理请求超时: {Get 0  3045059399824717845 22}
kvserver[4]: pre删除通道index: 300
kvserver[4]: begin删除通道index: 300
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 300
2023/09/23 03:26:50 kvserver[4]: GET处理请求超时: {Get 3  3044182290069410002 18}
kvserver[4]: pre删除通道index: 301
kvserver[4]: begin删除通道index: 301
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 301
2023/09/23 03:26:50 kvserver[4]: PUTAPPEND处理请求超时: {Append 1 x 1 5 y 259300236053518071 18}
kvserver[4]: pre删除通道index: 299
kvserver[4]: begin删除通道index: 299
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 299
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 22},term is 12,len is 303
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 2356167759593910522 22},term is 12,len is 304
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 18},term is 12,len is 305
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 5 y) 259300236053518071 18},term is 12,len is 306
---------------
3 follow -> candidate
3 begin to elect
3 term is 16
0:投票检查244,291,10,12,16,15
0 vote now -> 3
2:投票检查244,291,12,12,16,15
2 vote now -> 3
3: vote num is 2
3: vote num is 3
3 is leader
4 begin to append 0
prevlogindex = 239, lastIndex = 0
4 begin to append 1
prevlogindex = 301, lastIndex = 0
4 begin to append 2
prevlogindex = 244, lastIndex = 0
4 begin to append 3
prevlogindex = 291, lastIndex = 0
测试：1节点term为12，leader发送term为12, 接收5个, PrevLogIndex is 301
updateIndex = 301, lastIndex = 0
1更新log，长度306
1:rf.commitIndex = 291, rf.lastApplied = 291
1 return success! num is 1
nextIndex = 302, lastIndex = 0, len = 306
4:投票检查306,291,12,12,16,12
测试：1节点term为12，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
1:投票检查306,244,12,12,14,12
测试：1节点term为14，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
2: vote is out of date
测试：1节点term为14，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为16，leader发送term为12, 接收5个, PrevLogIndex is 291
测试：1节点term为14，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
网络分区AppOutOfDate,reply is 1
测试：1节点term为14，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为16，leader发送term为12, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：3节点term为16，leader发送term为12, 接收15个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 291, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 291
4:rf.commitIndex = 286, rf.lastApplied = 291
测试：1节点term为14，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
4 return success! num is 1
nextIndex = 292, lastIndex = 0, len = 291
测试：1节点term为14，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：1节点term为14，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：1节点term为14，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为16，leader发送term为12, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
1:投票检查306,244,12,10,13,14
1 vote refuse 1 -> 0
0: vote is out of date
测试：3节点term为16，leader发送term为12, 接收10个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
1:投票检查306,244,12,12,15,14
测试：3节点term为16，leader发送term为12, 接收10个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：1节点term为15，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
2: vote is out of date
测试：3节点term为16，leader发送term为12, 接收10个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：3节点term为16，leader发送term为12, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：1节点term为15，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为16，leader发送term为12, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：3节点term为16，leader发送term为12, 接收10个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：3节点term为16，leader发送term为12, 接收10个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 291, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 291
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 292, lastIndex = 0, len = 291
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 291, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 291
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 292, lastIndex = 0, len = 291
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 291, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 291
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 292, lastIndex = 0, len = 291
2023/09/23 03:26:50 kvserver[4]: GET处理请求超时: {Get 2  3947973503454150994 22}
kvserver[4]: pre删除通道index: 302
kvserver[4]: begin删除通道index: 302
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 302
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 22},term is 16,len is 292
---------------
2023/09/23 03:26:50 kvserver[4]: GET处理请求超时: {Get 0  3045059399824717845 22}
kvserver[4]: pre删除通道index: 303
kvserver[4]: begin删除通道index: 303
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 303
---------------
3接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 22},term is 16,len is 293
---------------
2023/09/23 03:26:50 kvserver[4]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 2356167759593910522 22}
kvserver[4]: pre删除通道index: 304
kvserver[4]: begin删除通道index: 304
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 304
---------------
3接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 2356167759593910522 22},term is 16,len is 294
---------------
2023/09/23 03:26:50 kvserver[4]: GET处理请求超时: {Get 3  3044182290069410002 18}
kvserver[4]: pre删除通道index: 305
kvserver[4]: begin删除通道index: 305
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 305
---------------
3接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 18},term is 16,len is 295
---------------
2023/09/23 03:26:50 kvserver[4]: PUTAPPEND处理请求超时: {Append 1 x 1 5 y 259300236053518071 18}
kvserver[4]: pre删除通道index: 306
kvserver[4]: begin删除通道index: 306
2023/09/23 03:26:50 kvserver[4]: 成功删除通道index: 306
---------------
3接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 5 y) 259300236053518071 18},term is 16,len is 296
---------------
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 291, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收5个, PrevLogIndex is 291
updateIndex = 291, lastIndex = 0
4更新log，长度296
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 292, lastIndex = 0, len = 296
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 296, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 296
4 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 296
4:rf.commitIndex = 286, rf.lastApplied = 291
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 296, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 296
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 296
0 follow -> candidate
0 begin to elect
0 term is 17
2:投票检查244,244,12,10,17,16
1:投票检查306,244,12,10,17,15
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 296, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 296
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 296
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 296, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 296
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 296
2023/09/23 03:26:51 kvserver[3]: GET处理请求超时: {Get 2  3947973503454150994 22}
kvserver[3]: pre删除通道index: 292
kvserver[3]: begin删除通道index: 292
2023/09/23 03:26:51 kvserver[3]: 成功删除通道index: 292
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 22},term is 16,len is 297
---------------
1 follow -> candidate
2023/09/23 03:26:51 kvserver[3]: GET处理请求超时: {Get 0  3045059399824717845 22}
1 begin to elect
1 term is 18
kvserver[3]: pre删除通道index: 293
2023/09/23 03:26:51 kvserver[3]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 2356167759593910522 22}
kvserver[3]: begin删除通道index: 293
2023/09/23 03:26:51 kvserver[3]: 成功删除通道index: 293
0:投票检查244,306,10,12,18,17
0 vote now -> 1
2:投票检查244,306,12,12,18,17
2 vote now -> 1
kvserver[3]: pre删除通道index: 294
1: vote num is 2
kvserver[3]: begin删除通道index: 294
2023/09/23 03:26:51 kvserver[3]: 成功删除通道index: 294
1: vote num is 3
1 is leader
2023/09/23 03:26:51 kvserver[3]: GET处理请求超时: {Get 3  3044182290069410002 18}
kvserver[3]: pre删除通道index: 295
kvserver[3]: begin删除通道index: 295
2023/09/23 03:26:51 kvserver[3]: 成功删除通道index: 295
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 22},term is 18,len is 307
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 18},term is 18,len is 308
---------------
2023/09/23 03:26:51 kvserver[3]: PUTAPPEND处理请求超时: {Append 1 x 1 5 y 259300236053518071 18}
kvserver[3]: pre删除通道index: 296
kvserver[3]: begin删除通道index: 296
2023/09/23 03:26:51 kvserver[3]: 成功删除通道index: 296
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 2356167759593910522 22},term is 18,len is 309
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 5 y) 259300236053518071 18},term is 18,len is 310
---------------
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 296, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收1个, PrevLogIndex is 296
updateIndex = 296, lastIndex = 0
4更新log，长度297
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 297, lastIndex = 0, len = 297
1 begin to append 0
prevlogindex = 306, lastIndex = 0
1 begin to append 2
prevlogindex = 306, lastIndex = 0
1 begin to append 3
prevlogindex = 306, lastIndex = 0
1 begin to append 4
prevlogindex = 306, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收4个, PrevLogIndex is 306
不匹配,args = 306,lastIndex = 0,len = 244
测试：2节点term为18，leader发送term为18, 接收4个, PrevLogIndex is 306
不匹配,args = 306,lastIndex = 0,len = 244
reply XLen is 245
1 nextIndex change to 245
nextIndex = 245, lastIndex = 0, len = 310
reply XLen is 245
1 nextIndex change to 245
nextIndex = 245, lastIndex = 0, len = 310
3 begin to append 0
prevlogindex = 291, lastIndex = 0
3 begin to append 1
prevlogindex = 291, lastIndex = 0
3 begin to append 2
prevlogindex = 291, lastIndex = 0
3 begin to append 4
prevlogindex = 297, lastIndex = 0
测试：4节点term为16，leader发送term为16, 接收0个, PrevLogIndex is 297
4:rf.commitIndex = 286, rf.lastApplied = 291
4 return success! num is 1
nextIndex = 298, lastIndex = 0, len = 297
1 begin to append 0
prevlogindex = 244, lastIndex = 0
1 begin to append 2
prevlogindex = 244, lastIndex = 0
1 begin to append 3
prevlogindex = 306, lastIndex = 0
1 begin to append 4
prevlogindex = 306, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收66个, PrevLogIndex is 244
不匹配,args = 244,lastIndex = 0,len = 244
log.term = 10, lastTerm = 0, args.term = 12
测试：2节点term为18，leader发送term为18, 接收66个, PrevLogIndex is 244
updateIndex = 244, lastIndex = 0
2更新log，长度310
[2][18][0] apply index = 235, commit is 291
2:{235}unlock now
2:{235}unlock end
2:{235}lock now
2:{235}lock end
[2][18][0] apply index = 236, commit is 291
2:{236}unlock now
2:{236}unlock end
2 return success! num is 1
nextIndex = 245, lastIndex = 0, len = 310
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 y
2:{236}lock now
2:{236}lock end
[2][18][0] apply index = 237, commit is 291
2:{237}unlock now
2:{237}unlock end
2:{237}lock now
2:{237}lock end
[2][18][0] apply index = 238, commit is 291
2:{238}unlock now
2:{238}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2:{238}lock now
2:{238}lock end
[2][18][0] apply index = 239, commit is 291
2:{239}unlock now
2:{239}unlock end
2:{239}lock now
2:{239}lock end
[2][18][0] apply index = 240, commit is 291
2:{240}unlock now
2:{240}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2:{240}lock now
2:{240}lock end
[2][18][0] apply index = 241, commit is 291
2:{241}unlock now
2:{241}unlock end
2:{241}lock now
2:{241}lock end
[2][18][0] apply index = 242, commit is 291
2:{242}unlock now
2:{242}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2:{242}lock now
2:{242}lock end
[2][18][0] apply index = 243, commit is 291
2:{243}unlock now
2:{243}unlock end
2:{243}lock now
2:{243}lock end
[2][18][0] apply index = 244, commit is 291
2:{244}unlock now
2:{244}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2:{244}lock now
2:{244}lock end
[2][18][0] apply index = 245, commit is 291
2:{245}unlock now
2:{245}unlock end
2:{245}lock now
2:{245}lock end
[2][18][0] apply index = 246, commit is 291
2:{246}unlock now
2:{246}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2:{246}lock now
2:{246}lock end
[2][18][0] apply index = 247, commit is 291
2:{247}unlock now
2:{247}unlock end
2:{247}lock now
2:{247}lock end
[2][18][0] apply index = 248, commit is 291
2:{248}unlock now
2:{248}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2:{248}lock now
2:{248}lock end
[2][18][0] apply index = 249, commit is 291
2:{249}unlock now
2:{249}unlock end
2:{249}lock now
2:{249}lock end
[2][18][0] apply index = 250, commit is 291
2:{250}unlock now
2:{250}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2:{250}lock now
2:{250}lock end
[2][18][0] apply index = 251, commit is 291
2:{251}unlock now
2:{251}unlock end
2:{251}lock now
2:{251}lock end
[2][18][0] apply index = 252, commit is 291
2:{252}unlock now
2:{252}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2:{252}lock now
2:{252}lock end
[2][18][0] apply index = 253, commit is 291
2:{253}unlock now
2:{253}unlock end
2:{253}lock now
2:{253}lock end
[2][18][0] apply index = 254, commit is 291
2:{254}unlock now
2:{254}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2:{254}lock now
2:{254}lock end
[2][18][0] apply index = 255, commit is 291
2:{255}unlock now
2:{255}unlock end
2:{255}lock now
2:{255}lock end
[2][18][0] apply index = 256, commit is 291
2:{256}unlock now
2:{256}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2:{256}lock now
2:{256}lock end
[2][18][0] apply index = 257, commit is 291
2:{257}unlock now
2:{257}unlock end
2:{257}lock now
2:{257}lock end
[2][18][0] apply index = 258, commit is 291
2:{258}unlock now
2:{258}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2:{258}lock now
2:{258}lock end
[2][18][0] apply index = 259, commit is 291
2:{259}unlock now
2:{259}unlock end
2:{259}lock now
2:{259}lock end
[2][18][0] apply index = 260, commit is 291
2:{260}unlock now
2:{260}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2:{260}lock now
2:{260}lock end
[2][18][0] apply index = 261, commit is 291
2:{261}unlock now
2:{261}unlock end
2:{261}lock now
2:{261}lock end
[2][18][0] apply index = 262, commit is 291
2:{262}unlock now
2:{262}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2:{262}lock now
2:{262}lock end
[2][18][0] apply index = 263, commit is 291
2:{263}unlock now
2:{263}unlock end
2:{263}lock now
2:{263}lock end
[2][18][0] apply index = 264, commit is 291
2:{264}unlock now
2:{264}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2:{264}lock now
2:{264}lock end
[2][18][0] apply index = 265, commit is 291
2:{265}unlock now
2:{265}unlock end
2:{265}lock now
2:{265}lock end
[2][18][0] apply index = 266, commit is 291
2:{266}unlock now
2:{266}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 y
2:{266}lock now
2:{266}lock end
[2][18][0] apply index = 267, commit is 291
2:{267}unlock now
2:{267}unlock end
2:{267}lock now
2:{267}lock end
[2][18][0] apply index = 268, commit is 291
2:{268}unlock now
2:{268}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2:{268}lock now
2:{268}lock end
[2][18][0] apply index = 269, commit is 291
2:{269}unlock now
2:{269}unlock end
2:{269}lock now
2:{269}lock end
[2][18][0] apply index = 270, commit is 291
2:{270}unlock now
2:{270}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2:{270}lock now
2:{270}lock end
[2][18][0] apply index = 271, commit is 291
2:{271}unlock now
2:{271}unlock end
2:{271}lock now
2:{271}lock end
[2][18][0] apply index = 272, commit is 291
2:{272}unlock now
2:{272}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 y
2:{272}lock now
2:{272}lock end
[2][18][0] apply index = 273, commit is 291
2:{273}unlock now
2:{273}unlock end
2:{273}lock now
2:{273}lock end
[2][18][0] apply index = 274, commit is 291
2:{274}unlock now
2:{274}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2:{274}lock now
2:{274}lock end
[2][18][0] apply index = 275, commit is 291
2:{275}unlock now
2:{275}unlock end
2:{275}lock now
2:{275}lock end
[2][18][0] apply index = 276, commit is 291
2:{276}unlock now
2:{276}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2:{276}lock now
2:{276}lock end
[2][18][0] apply index = 277, commit is 291
2:{277}unlock now
2:{277}unlock end
2:{277}lock now
2:{277}lock end
[2][18][0] apply index = 278, commit is 291
2:{278}unlock now
2:{278}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2:{278}lock now
2:{278}lock end
[2][18][0] apply index = 279, commit is 291
2:{279}unlock now
2:{279}unlock end
2:{279}lock now
2:{279}lock end
[2][18][0] apply index = 280, commit is 291
2:{280}unlock now
2:{280}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2:{280}lock now
2:{280}lock end
[2][18][0] apply index = 281, commit is 291
2:{281}unlock now
2:{281}unlock end
2:{281}lock now
2:{281}lock end
[2][18][0] apply index = 282, commit is 291
2:{282}unlock now
2:{282}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2:{282}lock now
2:{282}lock end
[2][18][0] apply index = 283, commit is 291
2:{283}unlock now
2:{283}unlock end
2:{283}lock now
2:{283}lock end
[2][18][0] apply index = 284, commit is 291
2:{284}unlock now
2:{284}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2:{284}lock now
2:{284}lock end
[2][18][0] apply index = 285, commit is 291
2:{285}unlock now
2:{285}unlock end
2:{285}lock now
2:{285}lock end
[2][18][0] apply index = 286, commit is 291
2:{286}unlock now
2:{286}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2:{286}lock now
2:{286}lock end
[2][18][0] apply index = 287, commit is 291
2:{287}unlock now
2:{287}unlock end
2:{287}lock now
2:{287}lock end
[2][18][0] apply index = 288, commit is 291
2:{288}unlock now
2:{288}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2:{288}lock now
2:{288}lock end
[2][18][0] apply index = 289, commit is 291
2:{289}unlock now
2:{289}unlock end
2:{289}lock now
2:{289}lock end
[2][18][0] apply index = 290, commit is 291
2:{290}unlock now
2:{290}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2:{290}lock now
2:{290}lock end
[2][18][0] apply index = 291, commit is 291
2:{291}unlock now
2:{291}unlock end
2:{291}lock now
2:{291}lock end
2:rf.commitIndex = 291, rf.lastApplied = 291
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
测试：2节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：4节点term为16，leader发送term为18, 接收4个, PrevLogIndex is 306
不匹配,args = 306,lastIndex = 0,len = 297
3 AppOutOfDate follow -> candidate
xindex = 185, last = 0
reply XLen is 298
1 nextIndex change to 298
测试：2节点term为18，leader发送term为12, 接收3个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
nextIndex = 298, lastIndex = 0, len = 310
x is 240, len is 310
1 nextIndex change to 240
nextIndex = 240, lastIndex = 0, len = 310
测试：1节点term为18，leader发送term为16, 接收6个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收52个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：1节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收22个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收6个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收52个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：1节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收5个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收62个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收42个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收67个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
4:投票检查297,244,16,12,15,18
4 vote refuse 1 -> 2
测试：0节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收14个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收11个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收32个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
3:投票检查297,244,16,10,17,18
3 vote refuse 1 -> 0
测试：0节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
0:投票检查244,239,10,10,12,18
0 vote refuse 1 -> 4
测试：1节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收52个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收62个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
2: vote is out of date
测试：2节点term为18，leader发送term为12, 接收12个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：1节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：3节点term为18，leader发送term为18, 接收4个, PrevLogIndex is 306
不匹配,args = 306,lastIndex = 0,len = 297
测试：0节点term为18，leader发送term为16, 接收6个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
reply XLen is 298
1 nextIndex change to 298
nextIndex = 298, lastIndex = 0, len = 310
测试：0节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
4:投票检查297,244,16,10,13,18
4 vote refuse 1 -> 0
测试：0节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收62个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
0: vote is out of date
测试：0节点term为18，leader发送term为12, 接收47个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收52个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收62个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收37个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收6个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：1节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为18, 接收4个, PrevLogIndex is 306
不匹配,args = 306,lastIndex = 0,len = 297
4: vote is out of date
测试：4节点term为18，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收27个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
0: vote is out of date
测试：2节点term为18，leader发送term为12, 接收47个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收8个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
3:投票检查297,306,16,12,18,18
测试：1节点term为18，leader发送term为16, 接收6个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收22个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
reply XLen is 298
1 nextIndex change to 298
nextIndex = 298, lastIndex = 0, len = 310
测试：1节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收6个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收62个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：1节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收9个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为12, 接收17个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收52个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收37个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
4:投票检查297,244,16,12,14,18
4 vote refuse 1 -> 2
测试：0节点term为18，leader发送term为12, 接收62个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：0节点term为18，leader发送term为16, 接收6个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收27个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收42个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收17个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：2节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
4:投票检查297,244,16,10,17,18
4 vote refuse 1 -> 0
2: vote is out of date
测试：3节点term为18，leader发送term为18, 接收4个, PrevLogIndex is 306
不匹配,args = 306,lastIndex = 0,len = 297
测试：0节点term为18，leader发送term为12, 接收0个, PrevLogIndex is 239
网络分区AppOutOfDate,reply is 1
1:投票检查310,291,18,12,16,18
1 vote refuse 1 -> 3
测试：2节点term为18，leader发送term为16, 接收0个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
reply XLen is 298
1 nextIndex change to 298
nextIndex = 298, lastIndex = 0, len = 310
测试：2节点term为18，leader发送term为12, 接收52个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
测试：1节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收10个, PrevLogIndex is 234
测试：1节点term为18，leader发送term为16, 接收5个, PrevLogIndex is 291
网络分区AppOutOfDate,reply is 1
0: vote is out of date
测试：2节点term为18，leader发送term为12, 接收57个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
3: vote is out of date
测试：2节点term为18，leader发送term为12, 接收32个, PrevLogIndex is 244
网络分区AppOutOfDate,reply is 1
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收5个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
测试：4节点term为18，leader发送term为10, 接收10个, PrevLogIndex is 234
网络分区AppOutOfDate,reply is 1
4:投票检查297,306,16,12,18,18
1 begin to append 0
prevlogindex = 239, lastIndex = 0
1 begin to append 2
prevlogindex = 310, lastIndex = 0
1 begin to append 3
prevlogindex = 297, lastIndex = 0
1 begin to append 4
prevlogindex = 297, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收71个, PrevLogIndex is 239
updateIndex = 239, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收13个, PrevLogIndex is 297
不匹配,args = 297,lastIndex = 0,len = 297
log.term = 16, lastTerm = 0, args.term = 12
xindex = 292, last = 0
测试：3节点term为18，leader发送term为18, 接收13个, PrevLogIndex is 297
不匹配,args = 297,lastIndex = 0,len = 297
log.term = 16, lastTerm = 0, args.term = 12
xindex = 292, last = 0
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 310
x is 292, len is 310
1 nextIndex change to 292
nextIndex = 292, lastIndex = 0, len = 310
x is 292, len is 310
1 nextIndex change to 292
nextIndex = 292, lastIndex = 0, len = 310
2:rf.commitIndex = 291, rf.lastApplied = 291
2 return success! num is 1
nextIndex = 311, lastIndex = 0, len = 310
0更新log，长度310
[0][18][0] apply index = 235, commit is 291
0:{235}unlock now
0:{235}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
0:{235}lock now
0:{235}lock end
[0][18][0] apply index = 236, commit is 291
0:{236}unlock now
0:{236}unlock end
0:{236}lock now
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 y
0 return success! num is 2
nextIndex = 240, lastIndex = 0, len = 310
1 max is 310
2 max is 310
1:commitIndex -> 310
[1][18][0] apply index = 292, commit is 310
1:{292}unlock now
0:{236}lock end
[0][18][0] apply index = 237, commit is 291
0:{237}unlock now
0:{237}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
0:{237}lock now
0:{237}lock end
[0][18][0] apply index = 238, commit is 291
0:{238}unlock now
0:{238}unlock end
0:{238}lock now
0:{238}lock end
[0][18][0] apply index = 239, commit is 291
0:{239}unlock now
0:{239}unlock end
1:{292}unlock end
1:{292}lock now
1:{292}lock end
[1][18][0] apply index = 293, commit is 310
1:{293}unlock now
1:{293}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 y
0:{239}lock now
0:{239}lock end
[0][18][0] apply index = 240, commit is 291
0:{240}unlock now
0:{240}unlock end
0:{240}lock now
0:{240}lock end
[0][18][0] apply index = 241, commit is 291
0:{241}unlock now
0:{241}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 y
0:{241}lock now
0:{241}lock end
[0][18][0] apply index = 242, commit is 291
0:{242}unlock now
0:{242}unlock end
0:{242}lock now
0:{242}lock end
[0][18][0] apply index = 243, commit is 291
0:{243}unlock now
0:{243}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
1:{293}lock now
1:{293}lock end
[1][18][0] apply index = 294, commit is 310
1:{294}unlock now
1:{294}unlock end
1:{294}lock now
1:{294}lock end
[1][18][0] apply index = 295, commit is 310
1:{295}unlock now
1:{295}unlock end
0:{243}lock now
0:{243}lock end
[0][18][0] apply index = 244, commit is 291
0:{244}unlock now
0:{244}unlock end
0:{244}lock now
0:{244}lock end
[0][18][0] apply index = 245, commit is 291
0:{245}unlock now
0:{245}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 y
0:{245}lock now
0:{245}lock end
[0][18][0] apply index = 246, commit is 291
0:{246}unlock now
0:{246}unlock end
0:{246}lock now
0:{246}lock end
[0][18][0] apply index = 247, commit is 291
0:{247}unlock now
0:{247}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
1:{295}lock now
1:{295}lock end
[1][18][0] apply index = 296, commit is 310
1:{296}unlock now
1:{296}unlock end
1:{296}lock now
1:{296}lock end
[1][18][0] apply index = 297, commit is 310
1:{297}unlock now
1:{297}unlock end
0:{247}lock now
0:{247}lock end
[0][18][0] apply index = 248, commit is 291
0:{248}unlock now
0:{248}unlock end
0:{248}lock now
0:{248}lock end
[0][18][0] apply index = 249, commit is 291
0:{249}unlock now
0:{249}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
1:{297}lock now
1:{297}lock end
[1][18][0] apply index = 298, commit is 310
1:{298}unlock now
1:{298}unlock end
1:{298}lock now
1:{298}lock end
[1][18][0] apply index = 299, commit is 310
1:{299}unlock now
1:{299}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
0:{249}lock now
0:{249}lock end
[0][18][0] apply index = 250, commit is 291
0:{250}unlock now
0:{250}unlock end
0:{250}lock now
0:{250}lock end
[0][18][0] apply index = 251, commit is 291
0:{251}unlock now
0:{251}unlock end
1:{299}lock now
1:{299}lock end
[1][18][0] apply index = 300, commit is 310
1:{300}unlock now
1:{300}unlock end
1:{300}lock now
1:{300}lock end
[1][18][0] apply index = 301, commit is 310
1:{301}unlock now
1:{301}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
1:{301}lock now
1:{301}lock end
[1][18][0] apply index = 302, commit is 310
1:{302}unlock now
1:{302}unlock end
1:{302}lock now
1:{302}lock end
[1][18][0] apply index = 303, commit is 310
1:{303}unlock now
1:{303}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
0:{251}lock now
0:{251}lock end
[0][18][0] apply index = 252, commit is 291
0:{252}unlock now
0:{252}unlock end
0:{252}lock now
0:{252}lock end
[0][18][0] apply index = 253, commit is 291
0:{253}unlock now
0:{253}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
1:{303}lock now
1:{303}lock end
[1][18][0] apply index = 304, commit is 310
1:{304}unlock now
1:{304}unlock end
1:{304}lock now
1:{304}lock end
[1][18][0] apply index = 305, commit is 310
1:{305}unlock now
1:{305}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
0:{253}lock now
0:{253}lock end
[0][18][0] apply index = 254, commit is 291
0:{254}unlock now
0:{254}unlock end
0:{254}lock now
0:{254}lock end
[0][18][0] apply index = 255, commit is 291
0:{255}unlock now
0:{255}unlock end
1:{305}lock now
1:{305}lock end
[1][18][0] apply index = 306, commit is 310
1:{306}unlock now
1:{306}unlock end
1:{306}lock now
1:{306}lock end
[1][18][0] apply index = 307, commit is 310
1:{307}unlock now
1:{307}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Get 0  3045059399824717845 22} 307 18 false [] 0 0}处理完成,通知index = [307]的channel
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Get 0  3045059399824717845 22} 307 18 false [] 0 0}处理完成,通知完成index = [307]的channel
2023/09/23 03:26:51 kvserver[1]: GET获取到通知结果,index=[307],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
kvserver[1]: pre删除通道index: 307
kvserver[1]: begin删除通道index: 307
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 307
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
1:{307}lock now
1:{307}lock end
[1][18][0] apply index = 308, commit is 310
1:{308}unlock now
1:{308}unlock end
1:{308}lock now
1:{308}lock end
[1][18][0] apply index = 309, commit is 310
1:{309}unlock now
1:{309}unlock end
0:{255}lock now
0:{255}lock end
[0][18][0] apply index = 256, commit is 291
0:{256}unlock now
0:{256}unlock end
0:{256}lock now
0:{256}lock end
[0][18][0] apply index = 257, commit is 291
0:{257}unlock now
0:{257}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Get 3  3044182290069410002 18} 308 18 false [] 0 0}处理完成,通知index = [308]的channel
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Get 3  3044182290069410002 18} 308 18 false [] 0 0}处理完成,通知完成index = [308]的channel
2023/09/23 03:26:51 CommandApply!!!!!!!!!
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 0: client new append x 0 9 y
2023/09/23 03:26:51 kvserver[1]: GET获取到通知结果,index=[308],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
kvserver[1]: pre删除通道index: 308
kvserver[1]: begin删除通道index: 308
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 308
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
0:{257}lock now
0:{257}lock end
[0][18][0] apply index = 258, commit is 291
0:{258}unlock now
0:{258}unlock end
0:{258}lock now
0:{258}lock end
[0][18][0] apply index = 259, commit is 291
0:{259}unlock now
0:{259}unlock end
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 3: client new append x 3 11 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
0:{259}lock now
0:{259}lock end
[0][18][0] apply index = 260, commit is 291
0:{260}unlock now
0:{260}unlock end
0:{260}lock now
0:{260}lock end
[0][18][0] apply index = 261, commit is 291
0:{261}unlock now
0:{261}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 y
0:{261}lock now
0:{261}lock end
[0][18][0] apply index = 262, commit is 291
0:{262}unlock now
0:{262}unlock end
0:{262}lock now
0:{262}lock end
[0][18][0] apply index = 263, commit is 291
0:{263}unlock now
0:{263}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
0:{263}lock now
0:{263}lock end
[0][18][0] apply index = 264, commit is 291
0:{264}unlock now
0:{264}unlock end
0:{264}lock now
0:{264}lock end
[0][18][0] apply index = 265, commit is 291
0:{265}unlock now
0:{265}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
0:{265}lock now
0:{265}lock end
[0][18][0] apply index = 266, commit is 291
0:{266}unlock now
0:{266}unlock end
0:{266}lock now
0:{266}lock end
[0][18][0] apply index = 267, commit is 291
0:{267}unlock now
0:{267}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
0:{267}lock now
0:{267}lock end
[0][18][0] apply index = 268, commit is 291
0:{268}unlock now
0:{268}unlock end
0:{268}lock now
0:{268}lock end
[0][18][0] apply index = 269, commit is 291
0:{269}unlock now
0:{269}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
0:{269}lock now
0:{269}lock end
[0][18][0] apply index = 270, commit is 291
0:{270}unlock now
0:{270}unlock end
0:{270}lock now
0:{270}lock end
[0][18][0] apply index = 271, commit is 291
0:{271}unlock now
0:{271}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 y
0:{271}lock now
0:{271}lock end
[0][18][0] apply index = 272, commit is 291
0:{272}unlock now
0:{272}unlock end
0:{272}lock now
0:{272}lock end
[0][18][0] apply index = 273, commit is 291
0:{273}unlock now
0:{273}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
0:{273}lock now
0:{273}lock end
[0][18][0] apply index = 274, commit is 291
0:{274}unlock now
0:{274}unlock end
0:{274}lock now
0:{274}lock end
[0][18][0] apply index = 275, commit is 291
0:{275}unlock now
0:{275}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 y
0:{275}lock now
0:{275}lock end
[0][18][0] apply index = 276, commit is 291
0:{276}unlock now
0:{276}unlock end
0:{276}lock now
0:{276}lock end
[0][18][0] apply index = 277, commit is 291
0:{277}unlock now
0:{277}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
0:{277}lock now
0:{277}lock end
[0][18][0] apply index = 278, commit is 291
0:{278}unlock now
0:{278}unlock end
0:{278}lock now
0:{278}lock end
[0][18][0] apply index = 279, commit is 291
0:{279}unlock now
0:{279}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 y
0:{279}lock now
0:{279}lock end
[0][18][0] apply index = 280, commit is 291
0:{280}unlock now
0:{280}unlock end
0:{280}lock now
0:{280}lock end
[0][18][0] apply index = 281, commit is 291
0:{281}unlock now
0:{281}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
0:{281}lock now
0:{281}lock end
[0][18][0] apply index = 282, commit is 291
0:{282}unlock now
0:{282}unlock end
0:{282}lock now
0:{282}lock end
[0][18][0] apply index = 283, commit is 291
0:{283}unlock now
0:{283}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
0:{283}lock now
0:{283}lock end
[0][18][0] apply index = 284, commit is 291
0:{284}unlock now
0:{284}unlock end
0:{284}lock now
0:{284}lock end
[0][18][0] apply index = 285, commit is 291
0:{285}unlock now
0:{285}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
0:{285}lock now
0:{285}lock end
[0][18][0] apply index = 286, commit is 291
0:{286}unlock now
0:{286}unlock end
0:{286}lock now
0:{286}lock end
[0][18][0] apply index = 287, commit is 291
0:{287}unlock now
0:{287}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
0:{287}lock now
0:{287}lock end
[0][18][0] apply index = 288, commit is 291
0:{288}unlock now
0:{288}unlock end
0:{288}lock now
0:{288}lock end
[0][18][0] apply index = 289, commit is 291
0:{289}unlock now
0:{289}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
0:{289}lock now
0:{289}lock end
[0][18][0] apply index = 290, commit is 291
0:{290}unlock now
0:{290}unlock end
0:{290}lock now
0:{290}lock end
[0][18][0] apply index = 291, commit is 291
0:{291}unlock now
0:{291}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
0:{291}lock now
0:{291}lock end
0:rf.commitIndex = 291, rf.lastApplied = 291
1:{309}lock now
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 9 y) 3045059399824717845 23},term is 18,len is 311
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 11 y) 3044182290069410002 19},term is 18,len is 312
---------------
1:{309}lock end
[1][18][0] apply index = 310, commit is 310
1:{310}unlock now
1:{310}unlock end
1:{310}lock now
1:{310}lock end
1:rf.commitIndex = 310, rf.lastApplied = 310
2023/09/23 03:26:51 CommandApply!!!!!!!!!
1 begin to append 0
prevlogindex = 310, lastIndex = 0
1 begin to append 2
prevlogindex = 310, lastIndex = 0
1 begin to append 3
prevlogindex = 291, lastIndex = 0
1 begin to append 4
prevlogindex = 291, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收21个, PrevLogIndex is 291
updateIndex = 291, lastIndex = 0
4更新log，长度312
测试：2节点term为18，leader发送term为18, 接收2个, PrevLogIndex is 310
updateIndex = 310, lastIndex = 0
[4][18][0] apply index = 292, commit is 310
4:{292}unlock now
4:{292}unlock end
4:{292}lock now
4:{292}lock end
[4][18][0] apply index = 293, commit is 310
4:{293}unlock now
4:{293}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
4:{293}lock now
4:{293}lock end
[4][18][0] apply index = 294, commit is 310
4:{294}unlock now
4:{294}unlock end
4:{294}lock now
4:{294}lock end
[4][18][0] apply index = 295, commit is 310
4:{295}unlock now
4:{295}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
4:{295}lock now
4:{295}lock end
[4][18][0] apply index = 296, commit is 310
4:{296}unlock now
4:{296}unlock end
4:{296}lock now
4:{296}lock end
[4][18][0] apply index = 297, commit is 310
4:{297}unlock now
4:{297}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
4:{297}lock now
4:{297}lock end
[4][18][0] apply index = 298, commit is 310
4:{298}unlock now
4:{298}unlock end
4:{298}lock now
4:{298}lock end
[4][18][0] apply index = 299, commit is 310
4:{299}unlock now
4:{299}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
4 return success! num is 1
nextIndex = 292, lastIndex = 0, len = 312
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2更新log，长度312
[2][18][0] apply index = 292, commit is 310
2:{292}unlock now
2:{292}unlock end
2:{292}lock now
2:{292}lock end
[2][18][0] apply index = 293, commit is 310
2:{293}unlock now
2 return success! num is 2
nextIndex = 311, lastIndex = 0, len = 312
1 max is 312
2 max is 312
1:commitIndex -> 312
[1][18][0] apply index = 311, commit is 312
1:{311}unlock now
1:{311}unlock end
1:{311}lock now
1:{311}lock end
[1][18][0] apply index = 312, commit is 312
1:{312}unlock now
1:{312}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Append 0 x 0 9 y 3045059399824717845 23} 311 18 false [] 0 0}处理完成,通知index = [311]的channel
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Append 0 x 0 9 y 3045059399824717845 23} 311 18 false [] 0 0}处理完成,通知完成index = [311]的channel
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Append 3 x 3 11 y 3044182290069410002 19} 312 18 false [] 0 0}处理完成,通知index = [312]的channel
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Append 3 x 3 11 y 3044182290069410002 19} 312 18 false [] 0 0}处理完成,通知完成index = [312]的channel
2023/09/23 03:26:51 kvserver[1]: PUTAPPEND获取到通知结果,index=[312],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y 18 true}
kvserver[1]: pre删除通道index: 312
kvserver[1]: begin删除通道index: 312
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 312
2023/09/23 03:26:51 3: client new append x 3 12 y
2:{293}unlock end
4:{299}lock now
4:{299}lock end
[4][18][0] apply index = 300, commit is 310
4:{300}unlock now
4:{300}unlock end
4:{300}lock now
4:{300}lock end
[4][18][0] apply index = 301, commit is 310
4:{301}unlock now
4:{301}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
测试：0节点term为18，leader发送term为18, 接收2个, PrevLogIndex is 310
updateIndex = 310, lastIndex = 0
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 12 y) 3044182290069410002 20},term is 18,len is 313
---------------
1:{312}lock now
1:{312}lock end
1:rf.commitIndex = 312, rf.lastApplied = 312
2023/09/23 03:26:51 kvserver[1]: PUTAPPEND获取到通知结果,index=[311],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y 18 true}
kvserver[1]: pre删除通道index: 311
kvserver[1]: begin删除通道index: 311
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 311
2023/09/23 03:26:51 0: client new get 0
0更新log，长度312
测试：3节点term为18，leader发送term为18, 接收21个, PrevLogIndex is 291
updateIndex = 291, lastIndex = 0
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 24},term is 18,len is 314
---------------
0 return success! num is 1
nextIndex = 311, lastIndex = 0, len = 314
2:{293}lock now
2:{293}lock end
[2][18][0] apply index = 294, commit is 310
2:{294}unlock now
2:{294}unlock end
2:{294}lock now
2:{294}lock end
[2][18][0] apply index = 295, commit is 310
2:{295}unlock now
2:{295}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
4:{301}lock now
4:{301}lock end
[4][18][0] apply index = 302, commit is 310
4:{302}unlock now
4:{302}unlock end
4:{302}lock now
4:{302}lock end
[4][18][0] apply index = 303, commit is 310
4:{303}unlock now
4:{303}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
4:{303}lock now
4:{303}lock end
[4][18][0] apply index = 304, commit is 310
4:{304}unlock now
4:{304}unlock end
4:{304}lock now
4:{304}lock end
[4][18][0] apply index = 305, commit is 310
4:{305}unlock now
4:{305}unlock end
2:{295}lock now
2:{295}lock end
[2][18][0] apply index = 296, commit is 310
2:{296}unlock now
2:{296}unlock end
2:{296}lock now
2:{296}lock end
[2][18][0] apply index = 297, commit is 310
2:{297}unlock now
2:{297}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2:{297}lock now
2:{297}lock end
[2][18][0] apply index = 298, commit is 310
2:{298}unlock now
2:{298}unlock end
2:{298}lock now
2:{298}lock end
[2][18][0] apply index = 299, commit is 310
2:{299}unlock now
2:{299}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2:{299}lock now
2:{299}lock end
[2][18][0] apply index = 300, commit is 310
2:{300}unlock now
2:{300}unlock end
2:{300}lock now
2:{300}lock end
[2][18][0] apply index = 301, commit is 310
2:{301}unlock now
2:{301}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
4:{305}lock now
4:{305}lock end
[4][18][0] apply index = 306, commit is 310
4:{306}unlock now
4:{306}unlock end
4:{306}lock now
4:{306}lock end
[4][18][0] apply index = 307, commit is 310
4:{307}unlock now
4:{307}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
4:{307}lock now
4:{307}lock end
[4][18][0] apply index = 308, commit is 310
4:{308}unlock now
4:{308}unlock end
4:{308}lock now
4:{308}lock end
[4][18][0] apply index = 309, commit is 310
4:{309}unlock now
4:{309}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
4:{309}lock now
4:{309}lock end
[4][18][0] apply index = 310, commit is 310
4:{310}unlock now
4:{310}unlock end
4:{310}lock now
4:{310}lock end
4:rf.commitIndex = 310, rf.lastApplied = 310
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2:{301}lock now
2:{301}lock end
[2][18][0] apply index = 302, commit is 310
2:{302}unlock now
2:{302}unlock end
2:{302}lock now
2:{302}lock end
[2][18][0] apply index = 303, commit is 310
2:{303}unlock now
2:{303}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2:{303}lock now
2:{303}lock end
[2][18][0] apply index = 304, commit is 310
2:{304}unlock now
2:{304}unlock end
2:{304}lock now
2:{304}lock end
[2][18][0] apply index = 305, commit is 310
2:{305}unlock now
2:{305}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2:{305}lock now
2:{305}lock end
[2][18][0] apply index = 306, commit is 310
2:{306}unlock now
2:{306}unlock end
2:{306}lock now
2:{306}lock end
[2][18][0] apply index = 307, commit is 310
2:{307}unlock now
2:{307}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2:{307}lock now
2:{307}lock end
[2][18][0] apply index = 308, commit is 310
2:{308}unlock now
2:{308}unlock end
2:{308}lock now
2:{308}lock end
[2][18][0] apply index = 309, commit is 310
2:{309}unlock now
2:{309}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2:{309}lock now
2:{309}lock end
[2][18][0] apply index = 310, commit is 310
2:{310}unlock now
2:{310}unlock end
2:{310}lock now
2:{310}lock end
2:rf.commitIndex = 310, rf.lastApplied = 310
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0][18][0] apply index = 292, commit is 310
0:{292}unlock now
0:{292}unlock end
0:{292}lock now
0:{292}lock end
[0][18][0] apply index = 293, commit is 310
0:{293}unlock now
0:{293}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
0:{293}lock now
0:{293}lock end
[0][18][0] apply index = 294, commit is 310
0:{294}unlock now
0:{294}unlock end
0:{294}lock now
0:{294}lock end
[0][18][0] apply index = 295, commit is 310
0:{295}unlock now
0:{295}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
0:{295}lock now
0:{295}lock end
[0][18][0] apply index = 296, commit is 310
0:{296}unlock now
0:{296}unlock end
0:{296}lock now
0:{296}lock end
[0][18][0] apply index = 297, commit is 310
0:{297}unlock now
0:{297}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
0:{297}lock now
0:{297}lock end
[0][18][0] apply index = 298, commit is 310
0:{298}unlock now
0:{298}unlock end
0:{298}lock now
0:{298}lock end
[0][18][0] apply index = 299, commit is 310
0:{299}unlock now
0:{299}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
0:{299}lock now
0:{299}lock end
[0][18][0] apply index = 300, commit is 310
0:{300}unlock now
0:{300}unlock end
0:{300}lock now
0:{300}lock end
[0][18][0] apply index = 301, commit is 310
0:{301}unlock now
0:{301}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
0:{301}lock now
0:{301}lock end
[0][18][0] apply index = 302, commit is 310
0:{302}unlock now
0:{302}unlock end
0:{302}lock now
0:{302}lock end
[0][18][0] apply index = 303, commit is 310
0:{303}unlock now
0:{303}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
0:{303}lock now
0:{303}lock end
[0][18][0] apply index = 304, commit is 310
0:{304}unlock now
0:{304}unlock end
0:{304}lock now
0:{304}lock end
[0][18][0] apply index = 305, commit is 310
0:{305}unlock now
0:{305}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
0:{305}lock now
0:{305}lock end
[0][18][0] apply index = 306, commit is 310
0:{306}unlock now
0:{306}unlock end
0:{306}lock now
0:{306}lock end
[0][18][0] apply index = 307, commit is 310
0:{307}unlock now
0:{307}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
0:{307}lock now
0:{307}lock end
[0][18][0] apply index = 308, commit is 310
0:{308}unlock now
0:{308}unlock end
0:{308}lock now
0:{308}lock end
[0][18][0] apply index = 309, commit is 310
0:{309}unlock now
0:{309}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
0:{309}lock now
0:{309}lock end
[0][18][0] apply index = 310, commit is 310
0:{310}unlock now
0:{310}unlock end
0:{310}lock now
0:{310}lock end
0:rf.commitIndex = 310, rf.lastApplied = 310
2023/09/23 03:26:51 CommandApply!!!!!!!!!
3更新log，长度312
[3][18][0] apply index = 287, commit is 310
3:{287}unlock now
3:{287}unlock end
3:{287}lock now
3:{287}lock end
[3][18][0] apply index = 288, commit is 310
3:{288}unlock now
3:{288}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
3:{288}lock now
3:{288}lock end
[3][18][0] apply index = 289, commit is 310
3:{289}unlock now
3:{289}unlock end
3:{289}lock now
3:{289}lock end
[3][18][0] apply index = 290, commit is 310
3:{290}unlock now
3:{290}unlock end
3 return success! num is 2
nextIndex = 292, lastIndex = 0, len = 314
1 max is 312
2 max is 312
1:commitIndex -> 312
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
3:{290}lock now
3:{290}lock end
[3][18][0] apply index = 291, commit is 310
3:{291}unlock now
3:{291}unlock end
3:{291}lock now
3:{291}lock end
[3][18][0] apply index = 292, commit is 310
3:{292}unlock now
3:{292}unlock end
1:rf.commitIndex = 312, rf.lastApplied = 312
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
3:{292}lock now
3:{292}lock end
[3][18][0] apply index = 293, commit is 310
3:{293}unlock now
3:{293}unlock end
3:{293}lock now
3:{293}lock end
[3][18][0] apply index = 294, commit is 310
3:{294}unlock now
3:{294}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
3:{294}lock now
3:{294}lock end
[3][18][0] apply index = 295, commit is 310
3:{295}unlock now
3:{295}unlock end
3:{295}lock now
3:{295}lock end
[3][18][0] apply index = 296, commit is 310
3:{296}unlock now
3:{296}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
3:{296}lock now
3:{296}lock end
[3][18][0] apply index = 297, commit is 310
3:{297}unlock now
3:{297}unlock end
3:{297}lock now
3:{297}lock end
[3][18][0] apply index = 298, commit is 310
3:{298}unlock now
3:{298}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
3:{298}lock now
3:{298}lock end
[3][18][0] apply index = 299, commit is 310
3:{299}unlock now
3:{299}unlock end
3:{299}lock now
3:{299}lock end
[3][18][0] apply index = 300, commit is 310
3:{300}unlock now
3:{300}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
3:{300}lock now
3:{300}lock end
[3][18][0] apply index = 301, commit is 310
3:{301}unlock now
3:{301}unlock end
3:{301}lock now
3:{301}lock end
[3][18][0] apply index = 302, commit is 310
3:{302}unlock now
3:{302}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
3:{302}lock now
3:{302}lock end
[3][18][0] apply index = 303, commit is 310
3:{303}unlock now
3:{303}unlock end
3:{303}lock now
3:{303}lock end
[3][18][0] apply index = 304, commit is 310
3:{304}unlock now
3:{304}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
3:{304}lock now
3:{304}lock end
[3][18][0] apply index = 305, commit is 310
3:{305}unlock now
3:{305}unlock end
3:{305}lock now
3:{305}lock end
[3][18][0] apply index = 306, commit is 310
3:{306}unlock now
3:{306}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
3:{306}lock now
3:{306}lock end
[3][18][0] apply index = 307, commit is 310
3:{307}unlock now
3:{307}unlock end
3:{307}lock now
3:{307}lock end
[3][18][0] apply index = 308, commit is 310
3:{308}unlock now
3:{308}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
3:{308}lock now
3:{308}lock end
[3][18][0] apply index = 309, commit is 310
3:{309}unlock now
3:{309}unlock end
3:{309}lock now
3:{309}lock end
[3][18][0] apply index = 310, commit is 310
3:{310}unlock now
3:{310}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
2023/09/23 03:26:51 CommandApply!!!!!!!!!
3:{310}lock now
3:{310}lock end
3:rf.commitIndex = 310, rf.lastApplied = 310
2023/09/23 03:26:51 kvserver[3]: GET处理请求超时: {Get 2  3947973503454150994 22}
kvserver[3]: pre删除通道index: 297
kvserver[3]: begin删除通道index: 297
2023/09/23 03:26:51 kvserver[3]: 成功删除通道index: 297
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 22},term is 18,len is 315
---------------
1 begin to append 0
prevlogindex = 312, lastIndex = 0
1 begin to append 2
prevlogindex = 312, lastIndex = 0
1 begin to append 3
prevlogindex = 312, lastIndex = 0
1 begin to append 4
prevlogindex = 312, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收3个, PrevLogIndex is 312
updateIndex = 312, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收3个, PrevLogIndex is 312
updateIndex = 312, lastIndex = 0
4更新log，长度315
4 return success! num is 1
nextIndex = 313, lastIndex = 0, len = 315
[4][18][0] apply index = 311, commit is 312
4:{311}unlock now
4:{311}unlock end
4:{311}lock now
4:{311}lock end
[4][18][0] apply index = 312, commit is 312
4:{312}unlock now
4:{312}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
测试：3节点term为18，leader发送term为18, 接收3个, PrevLogIndex is 312
updateIndex = 312, lastIndex = 0
4:{312}lock now
4:{312}lock end
4:rf.commitIndex = 312, rf.lastApplied = 312
0更新log，长度315
[0][18][0] apply index = 311, commit is 312
0:{311}unlock now
0:{311}unlock end
0:{311}lock now
0:{311}lock end
[0][18][0] apply index = 312, commit is 312
0:{312}unlock now
0:{312}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
0:{312}lock now
0:{312}lock end
0:rf.commitIndex = 312, rf.lastApplied = 312
测试：2节点term为18，leader发送term为18, 接收3个, PrevLogIndex is 312
updateIndex = 312, lastIndex = 0
0 return success! num is 2
nextIndex = 313, lastIndex = 0, len = 315
1 max is 315
2 max is 315
1:commitIndex -> 315
[1][18][0] apply index = 313, commit is 315
1:{313}unlock now
1:{313}unlock end
1:{313}lock now
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Append 3 x 3 12 y 3044182290069410002 20} 313 18 false [] 0 0}处理完成,通知index = [313]的channel
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Append 3 x 3 12 y 3044182290069410002 20} 313 18 false [] 0 0}处理完成,通知完成index = [313]的channel
2023/09/23 03:26:51 kvserver[1]: PUTAPPEND获取到通知结果,index=[313],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y 18 true}
kvserver[1]: pre删除通道index: 313
kvserver[1]: begin删除通道index: 313
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 313
2023/09/23 03:26:51 3: client new append x 3 13 y
2更新log，长度315
[2][18][0] apply index = 311, commit is 312
2:{311}unlock now
2:{311}unlock end
2:{311}lock now
2:{311}lock end
[2][18][0] apply index = 312, commit is 312
2:{312}unlock now
2:{312}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
2:{312}lock now
2:{312}lock end
2:rf.commitIndex = 312, rf.lastApplied = 312
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 13 y) 3044182290069410002 21},term is 18,len is 316
---------------
2 return success! num is 1
nextIndex = 313, lastIndex = 0, len = 316
3更新log，长度315
3 return success! num is 2
nextIndex = 313, lastIndex = 0, len = 316
1 max is 315
2 max is 315
1:commitIndex -> 315
[3][18][0] apply index = 311, commit is 312
3:{311}unlock now
3:{311}unlock end
3:{311}lock now
3:{311}lock end
[3][18][0] apply index = 312, commit is 312
3:{312}unlock now
3:{312}unlock end
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:51 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 y
3:{312}lock now
3:{312}lock end
3:rf.commitIndex = 312, rf.lastApplied = 312
1:{313}lock end
[1][18][0] apply index = 314, commit is 315
1:{314}unlock now
1:{314}unlock end
1:{314}lock now
1:{314}lock end
[1][18][0] apply index = 315, commit is 315
1:{315}unlock now
2023/09/23 03:26:51 CommandApply!!!!!!!!!
1:{315}unlock end
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Get 0  3045059399824717845 24} 314 18 false [] 0 0}处理完成,通知index = [314]的channel
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Get 0  3045059399824717845 24} 314 18 false [] 0 0}处理完成,通知完成index = [314]的channel
2023/09/23 03:26:51 CommandApply!!!!!!!!!
1:{315}lock now
1:{315}lock end
1:rf.commitIndex = 315, rf.lastApplied = 315
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Get 2  3947973503454150994 22} 315 18 false [] 0 0}处理完成,通知index = [315]的channel
2023/09/23 03:26:51 kvserver[1]: GET获取到通知结果,index=[314],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:51 kvserver[1]: applyMsg: {true {Get 2  3947973503454150994 22} 315 18 false [] 0 0}处理完成,通知完成index = [315]的channel
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
kvserver[1]: pre删除通道index: 314
kvserver[1]: begin删除通道index: 314
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 314
2023/09/23 03:26:51 kvserver[1]: GET获取到通知结果,index=[315],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 kvserver[1]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 2356167759593910522 22}
2023/09/23 03:26:51 0: client new append x 0 10 y
kvserver[1]: pre删除通道index: 315
kvserver[1]: begin删除通道index: 315
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 315
kvserver[1]: pre删除通道index: 309
OK:i num is 2, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:51 2: client new get 2
kvserver[1]: begin删除通道index: 309
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 309
2023/09/23 03:26:51 4: client new get 4
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 10 y) 3045059399824717845 25},term is 18,len is 317
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 23},term is 18,len is 318
---------------
2023/09/23 03:26:51 kvserver[1]: PUTAPPEND处理请求超时: {Append 1 x 1 5 y 259300236053518071 18}
kvserver[1]: pre删除通道index: 310
kvserver[1]: begin删除通道index: 310
2023/09/23 03:26:51 kvserver[1]: 成功删除通道index: 310
2023/09/23 03:26:51 1: client new append x 1 6 y
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 23},term is 18,len is 319
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 6 y) 259300236053518071 19},term is 18,len is 320
---------------
1 begin to append 0
prevlogindex = 315, lastIndex = 0
1 begin to append 2
prevlogindex = 315, lastIndex = 0
1 begin to append 3
prevlogindex = 315, lastIndex = 0
1 begin to append 4
prevlogindex = 315, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 315
updateIndex = 315, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 315
updateIndex = 315, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 315
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 315
updateIndex = 315, lastIndex = 0
3更新log，长度320
[3][18][0] apply index = 313, commit is 315
3:{313}unlock now
3:{313}unlock end
3:{313}lock now
3:{313}lock end
[3][18][0] apply index = 314, commit is 315
3:{314}unlock now
3:{314}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
3 return success! num is 1
nextIndex = 316, lastIndex = 0, len = 320
3:{314}lock now
3:{314}lock end
[3][18][0] apply index = 315, commit is 315
3:{315}unlock now
3:{315}unlock end
3:{315}lock now
3:{315}lock end
3:rf.commitIndex = 315, rf.lastApplied = 315
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
4更新log，长度320
[4][18][0] apply index = 313, commit is 315
4:{313}unlock now
4:{313}unlock end
4:{313}lock now
4:{313}lock end
[4][18][0] apply index = 314, commit is 315
4:{314}unlock now
4:{314}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
4:{314}lock now
4 return success! num is 2
4:{314}lock end
nextIndex = 316, lastIndex = 0, len = 320
[4][18][0] apply index = 315, commit is 315
1 max is 320
4:{315}unlock now
4:{315}unlock end
4:{315}lock now
4:{315}lock end
4:rf.commitIndex = 315, rf.lastApplied = 315
2 max is 320
1:commitIndex -> 320
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
[1][18][0] apply index = 316, commit is 320
1:{316}unlock now
1:{316}unlock end
1:{316}lock now
1:{316}lock end
[1][18][0] apply index = 317, commit is 320
1:{317}unlock now
1:{317}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 3 x 3 13 y 3044182290069410002 21} 316 18 false [] 0 0}处理完成,通知index = [316]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 3 x 3 13 y 3044182290069410002 21} 316 18 false [] 0 0}处理完成,通知完成index = [316]的channel
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 0 x 0 10 y 3045059399824717845 25} 317 18 false [] 0 0}处理完成,通知index = [317]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 0 x 0 10 y 3045059399824717845 25} 317 18 false [] 0 0}处理完成,通知完成index = [317]的channel
2023/09/23 03:26:52 kvserver[1]: PUTAPPEND获取到通知结果,index=[317],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y 18 true}
kvserver[1]: pre删除通道index: 317
kvserver[1]: begin删除通道index: 317
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 317
2023/09/23 03:26:52 kvserver[1]: PUTAPPEND获取到通知结果,index=[316],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y 18 true}
kvserver[1]: pre删除通道index: 316
kvserver[1]: begin删除通道index: 316
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 316
1:{317}lock now
1:{317}lock end
[1][18][0] apply index = 318, commit is 320
1:{318}unlock now
1:{318}unlock end
1:{318}lock now
1:{318}lock end
[1][18][0] apply index = 319, commit is 320
1:{319}unlock now
1:{319}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 2  3947973503454150994 23} 318 18 false [] 0 0}处理完成,通知index = [318]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 2  3947973503454150994 23} 318 18 false [] 0 0}处理完成,通知完成index = [318]的channel
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 4  2356167759593910522 23} 319 18 false [] 0 0}处理完成,通知index = [319]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 4  2356167759593910522 23} 319 18 false [] 0 0}处理完成,通知完成index = [319]的channel
1:{319}lock now
1:{319}lock end
[1][18][0] apply index = 320, commit is 320
1:{320}unlock now
1:{320}unlock end
1:{320}lock now
1:{320}lock end
1:rf.commitIndex = 320, rf.lastApplied = 320
2023/09/23 03:26:52 0: client new get 0
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[318],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
kvserver[1]: pre删除通道index: 318
kvserver[1]: begin删除通道index: 318
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 318
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 26},term is 18,len is 321
---------------
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[319],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
kvserver[1]: pre删除通道index: 319
kvserver[1]: begin删除通道index: 319
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 319
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 1 x 1 6 y 259300236053518071 19} 320 18 false [] 0 0}处理完成,通知index = [320]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 1 x 1 6 y 259300236053518071 19} 320 18 false [] 0 0}处理完成,通知完成index = [320]的channel
2023/09/23 03:26:52 kvserver[1]: PUTAPPEND获取到通知结果,index=[320],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y 18 true}
kvserver[1]: pre删除通道index: 320
kvserver[1]: begin删除通道index: 320
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 320
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 4: client new get 4
2023/09/23 03:26:52 1: client new append x 1 7 y
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 7 y) 259300236053518071 20},term is 18,len is 322
---------------
2023/09/23 03:26:52 3: client new get 3
updateIndex = 315, lastIndex = 0
0更新log，长度320
OK:i num is 2, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:52 2: client new append x 2 11 y
[0][18][0] apply index = 313, commit is 315
0:{313}unlock now
0:{313}unlock end
0:{313}lock now
0:{313}lock end
[0][18][0] apply index = 314, commit is 315
0:{314}unlock now
0:{314}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
0:{314}lock now
0:{314}lock end
[0][18][0] apply index = 315, commit is 315
0:{315}unlock now
0:{315}unlock end
0:{315}lock now
0:{315}lock end
0:rf.commitIndex = 315, rf.lastApplied = 315
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 24},term is 18,len is 323
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 3044182290069410002 22},term is 18,len is 324
---------------
0 return success! num is 1
nextIndex = 316, lastIndex = 0, len = 324
2更新log，长度320
[2][18][0] apply index = 313, commit is 315
2:{313}unlock now
2:{313}unlock end
2:{313}lock now
2:{313}lock end
[2][18][0] apply index = 314, commit is 315
2:{314}unlock now
2:{314}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2:{314}lock now
2:{314}lock end
[2][18][0] apply index = 315, commit is 315
2:{315}unlock now
2:{315}unlock end
2:{315}lock now
2:{315}lock end
2:rf.commitIndex = 315, rf.lastApplied = 315
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 11 y) 3947973503454150994 24},term is 18,len is 325
---------------
2 return success! num is 2
nextIndex = 316, lastIndex = 0, len = 325
1 max is 320
2 max is 320
1:commitIndex -> 320
1:rf.commitIndex = 320, rf.lastApplied = 320
1 begin to append 0
prevlogindex = 320, lastIndex = 0
1 begin to append 2
prevlogindex = 320, lastIndex = 0
1 begin to append 3
prevlogindex = 320, lastIndex = 0
1 begin to append 4
prevlogindex = 320, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 320
updateIndex = 320, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 320
updateIndex = 320, lastIndex = 0
2更新log，长度325
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 320
updateIndex = 320, lastIndex = 0
0更新log，长度325
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 320
updateIndex = 320, lastIndex = 0
4更新log，长度325
[2][18][0] apply index = 316, commit is 320
2:{316}unlock now
2:{316}unlock end
2:{316}lock now
2:{316}lock end
[2][18][0] apply index = 317, commit is 320
2:{317}unlock now
2:{317}unlock end
0 return success! num is 1
nextIndex = 321, lastIndex = 0, len = 325
[0][18][0] apply index = 316, commit is 320
0:{316}unlock now
0:{316}unlock end
0:{316}lock now
0:{316}lock end
[0][18][0] apply index = 317, commit is 320
0:{317}unlock now
0:{317}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
0:{317}lock now
0:{317}lock end
[0][18][0] apply index = 318, commit is 320
0:{318}unlock now
0:{318}unlock end
0:{318}lock now
0:{318}lock end
[0][18][0] apply index = 319, commit is 320
0:{319}unlock now
0:{319}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
0:{319}lock now
0:{319}lock end
[0][18][0] apply index = 320, commit is 320
0:{320}unlock now
0:{320}unlock end
0:{320}lock now
0:{320}lock end
0:rf.commitIndex = 320, rf.lastApplied = 320
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
4 return success! num is 2
nextIndex = 321, lastIndex = 0, len = 325
1 max is 325
2 max is 325
1:commitIndex -> 325
[4][18][0] apply index = 316, commit is 320
4:{316}unlock now
4:{316}unlock end
4:{316}lock now
4:{316}lock end
[4][18][0] apply index = 317, commit is 320
4:{317}unlock now
4:{317}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
4:{317}lock now
4:{317}lock end
[4][18][0] apply index = 318, commit is 320
4:{318}unlock now
4:{318}unlock end
4:{318}lock now
4:{318}lock end
[4][18][0] apply index = 319, commit is 320
4:{319}unlock now
4:{319}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
4:{319}lock now
4:{319}lock end
[4][18][0] apply index = 320, commit is 320
4:{320}unlock now
4:{320}unlock end
4:{320}lock now
4:{320}lock end
4:rf.commitIndex = 320, rf.lastApplied = 320
[1][18][0] apply index = 321, commit is 325
1:{321}unlock now
1:{321}unlock end
1:{321}lock now
1:{321}lock end
[1][18][0] apply index = 322, commit is 325
1:{322}unlock now
1:{322}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 0  3045059399824717845 26} 321 18 false [] 0 0}处理完成,通知index = [321]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 0  3045059399824717845 26} 321 18 false [] 0 0}处理完成,通知完成index = [321]的channel
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 1 x 1 7 y 259300236053518071 20} 322 18 false [] 0 0}处理完成,通知index = [322]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 1 x 1 7 y 259300236053518071 20} 322 18 false [] 0 0}处理完成,通知完成index = [322]的channel
2023/09/23 03:26:52 kvserver[1]: PUTAPPEND获取到通知结果,index=[322],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y 18 true}
kvserver[1]: pre删除通道index: 322
kvserver[1]: begin删除通道index: 322
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 322
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[321],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
kvserver[1]: pre删除通道index: 321
kvserver[1]: begin删除通道index: 321
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 321
1:{322}lock now
1:{322}lock end
[1][18][0] apply index = 323, commit is 325
1:{323}unlock now
1:{323}unlock end
1:{323}lock now
1:{323}lock end
[1][18][0] apply index = 324, commit is 325
1:{324}unlock now
1:{324}unlock end
2023/09/23 03:26:52 1: client new get 1
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:52 0: client new get 0
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 4  2356167759593910522 24} 323 18 false [] 0 0}处理完成,通知index = [323]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 4  2356167759593910522 24} 323 18 false [] 0 0}处理完成,通知完成index = [323]的channel
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 3  3044182290069410002 22} 324 18 false [] 0 0}处理完成,通知index = [324]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 3  3044182290069410002 22} 324 18 false [] 0 0}处理完成,通知完成index = [324]的channel
1:{324}lock now
1:{324}lock end
[1][18][0] apply index = 325, commit is 325
1:{325}unlock now
1:{325}unlock end
1:{325}lock now
1:{325}lock end
1:rf.commitIndex = 325, rf.lastApplied = 325
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[323],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[324],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
3更新log，长度325
[3][18][0] apply index = 316, commit is 320
3:{316}unlock now
3:{316}unlock end
3:{316}lock now
3:{316}lock end
[3][18][0] apply index = 317, commit is 320
3:{317}unlock now
3:{317}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3045059399824717845 27},term is 18,len is 326
---------------
3 return success! num is 1
nextIndex = 321, lastIndex = 0, len = 326
3:{317}lock now
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 2 x 2 11 y 3947973503454150994 24} 325 18 false [] 0 0}处理完成,通知index = [325]的channel
3:{317}lock end
[3][18][0] apply index = 318, commit is 320
3:{318}unlock now
3:{318}unlock end
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 2 x 2 11 y 3947973503454150994 24} 325 18 false [] 0 0}处理完成,通知完成index = [325]的channel
3:{318}lock now
3:{318}lock end
[3][18][0] apply index = 319, commit is 320
3:{319}unlock now
3:{319}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
3:{319}lock now
3:{319}lock end
[3][18][0] apply index = 320, commit is 320
3:{320}unlock now
3:{320}unlock end
3:{320}lock now
3:{320}lock end
3:rf.commitIndex = 320, rf.lastApplied = 320
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
kvserver[1]: pre删除通道index: 323
kvserver[1]: begin删除通道index: 323
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 323
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
kvserver[1]: pre删除通道index: 324
kvserver[1]: begin删除通道index: 324
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 324
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 3: client new append x 3 14 y
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 4: client new get 4
2023/09/23 03:26:52 kvserver[1]: PUTAPPEND获取到通知结果,index=[325],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y 18 true}
kvserver[1]: pre删除通道index: 325
kvserver[1]: begin删除通道index: 325
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 325
2023/09/23 03:26:52 2: client new get 2
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 259300236053518071 21},term is 18,len is 327
---------------
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2:{317}lock now
2:{317}lock end
[2][18][0] apply index = 318, commit is 320
2:{318}unlock now
2:{318}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 y
2:{318}lock now
2:{318}lock end
[2][18][0] apply index = 319, commit is 320
2:{319}unlock now
2:{319}unlock end
2:{319}lock now
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2:{319}lock end
[2][18][0] apply index = 320, commit is 320
2:{320}unlock now
2:{320}unlock end
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2:{320}lock now
2:{320}lock end
2:rf.commitIndex = 320, rf.lastApplied = 320
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2356167759593910522 25},term is 18,len is 328
---------------
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 14 y) 3044182290069410002 23},term is 18,len is 329
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 3947973503454150994 25},term is 18,len is 330
---------------
2 return success! num is 2
nextIndex = 321, lastIndex = 0, len = 330
1 max is 325
2 max is 325
1:commitIndex -> 325
1:rf.commitIndex = 325, rf.lastApplied = 325
1 begin to append 0
prevlogindex = 325, lastIndex = 0
1 begin to append 2
prevlogindex = 325, lastIndex = 0
1 begin to append 3
prevlogindex = 325, lastIndex = 0
1 begin to append 4
prevlogindex = 325, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 325
updateIndex = 325, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 325
updateIndex = 325, lastIndex = 0
4更新log，长度330
4 return success! num is 1
nextIndex = 326, lastIndex = 0, len = 330
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 325
updateIndex = 325, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 325
updateIndex = 325, lastIndex = 0
0更新log，长度330
[0][18][0] apply index = 321, commit is 325
0:{321}unlock now
0:{321}unlock end
0:{321}lock now
0:{321}lock end
[0][18][0] apply index = 322, commit is 325
0:{322}unlock now
0:{322}unlock end
[4][18][0] apply index = 321, commit is 325
4:{321}unlock now
3更新log，长度330
[3][18][0] apply index = 321, commit is 325
3:{321}unlock now
3:{321}unlock end
3:{321}lock now
3:{321}lock end
[3][18][0] apply index = 322, commit is 325
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2023/09/23 03:26:52 CommandApply!!!!!!!!!
3:{322}unlock now
3:{322}unlock end
3 return success! num is 2
nextIndex = 326, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
2更新log，长度330
[2][18][0] apply index = 321, commit is 325
2:{321}unlock now
2:{321}unlock end
2:{321}lock now
2:{321}lock end
[2][18][0] apply index = 322, commit is 325
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
4:{321}unlock end
4:{321}lock now
4:{321}lock end
0:{322}lock now
[1][18][0] apply index = 326, commit is 330
[4][18][0] apply index = 322, commit is 325
1:{326}unlock now
4:{322}unlock now
1:{326}unlock end
4:{322}unlock end
0:{322}lock end
0 return success! num is 1
[0][18][0] apply index = 323, commit is 325
nextIndex = 326, lastIndex = 0, len = 330
0:{323}unlock now
0:{323}unlock end
1:{326}lock now
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2 return success! num is 2
nextIndex = 326, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:{326}lock end
[1][18][0] apply index = 327, commit is 330
1:{327}unlock now
1:{327}unlock end
3:{322}lock now
3:{322}lock end
[3][18][0] apply index = 323, commit is 325
3:{323}unlock now
3:{323}unlock end
2:{322}unlock now
2:{322}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2:{322}lock now
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2:{322}lock end
0:{323}lock now
0:{323}lock end
[0][18][0] apply index = 324, commit is 325
0:{324}unlock now
0:{324}unlock end
[2][18][0] apply index = 323, commit is 325
2:{323}unlock now
2:{323}unlock end
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 0  3045059399824717845 27} 326 18 false [] 0 0}处理完成,通知index = [326]的channel
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2:{323}lock now
2:{323}lock end
[2][18][0] apply index = 324, commit is 325
2:{324}unlock now
2:{324}unlock end
0:{324}lock now
0:{324}lock end
[0][18][0] apply index = 325, commit is 325
0:{325}unlock now
0:{325}unlock end
3:{323}lock now
3:{323}lock end
[3][18][0] apply index = 324, commit is 325
3:{324}unlock now
3:{324}unlock end
4:{322}lock now
4:{322}lock end
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 0  3045059399824717845 27} 326 18 false [] 0 0}处理完成,通知完成index = [326]的channel
[4][18][0] apply index = 323, commit is 325
4:{323}unlock now
4:{323}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
1:{327}lock now
1:{327}lock end
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[326],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
[1][18][0] apply index = 328, commit is 330
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2023/09/23 03:26:52 CommandApply!!!!!!!!!
2023/09/23 03:26:52 CommandApply!!!!!!!!!
1:{328}unlock now
1:{328}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
3:{324}lock now
3:{324}lock end
[3][18][0] apply index = 325, commit is 325
3:{325}unlock now
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
3:{325}unlock end
2:{324}lock now
2:{324}lock end
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
[2][18][0] apply index = 325, commit is 325
2:{325}unlock now
2:{325}unlock end
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
0:{325}lock now
0:{325}lock end
0:rf.commitIndex = 325, rf.lastApplied = 325
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
4:{323}lock now
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2:{325}lock now
2:{325}lock end
2:rf.commitIndex = 325, rf.lastApplied = 325
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 1  259300236053518071 21} 327 18 false [] 0 0}处理完成,通知index = [327]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 1  259300236053518071 21} 327 18 false [] 0 0}处理完成,通知完成index = [327]的channel
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
1:{328}lock now
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
1:{328}lock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
3:{325}lock now
3:{325}lock end
3:rf.commitIndex = 325, rf.lastApplied = 325
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[327],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
[1][18][0] apply index = 329, commit is 330
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 4  2356167759593910522 25} 328 18 false [] 0 0}处理完成,通知index = [328]的channel
1:{329}unlock now
1:{329}unlock end
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
kvserver[1]: pre删除通道index: 327
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[328],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
kvserver[1]: begin删除通道index: 327
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
kvserver[1]: pre删除通道index: 326
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 327
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 4  2356167759593910522 25} 328 18 false [] 0 0}处理完成,通知完成index = [328]的channel
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 3 x 3 14 y 3044182290069410002 23} 329 18 false [] 0 0}处理完成,通知index = [329]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Append 3 x 3 14 y 3044182290069410002 23} 329 18 false [] 0 0}处理完成,通知完成index = [329]的channel
2023/09/23 03:26:52 kvserver[1]: PUTAPPEND获取到通知结果,index=[329],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y 18 true}
kvserver[1]: pre删除通道index: 329
kvserver[1]: begin删除通道index: 329
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 329
1:{329}lock now
1:{329}lock end
OK:i num is 0, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
[1][18][0] apply index = 330, commit is 330
1:{330}unlock now
1:{330}unlock end
1:{330}lock now
1:{330}lock end
1:rf.commitIndex = 330, rf.lastApplied = 330
2023/09/23 03:26:52 CommandApply!!!!!!!!!
kvserver[1]: begin删除通道index: 326
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 326
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
kvserver[1]: pre删除通道index: 328
kvserver[1]: begin删除通道index: 328
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 328
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 2  3947973503454150994 25} 330 18 false [] 0 0}处理完成,通知index = [330]的channel
2023/09/23 03:26:52 kvserver[1]: applyMsg: {true {Get 2  3947973503454150994 25} 330 18 false [] 0 0}处理完成,通知完成index = [330]的channel
2023/09/23 03:26:52 kvserver[1]: GET获取到通知结果,index=[330],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
kvserver[1]: pre删除通道index: 330
kvserver[1]: begin删除通道index: 330
2023/09/23 03:26:52 kvserver[1]: 成功删除通道index: 330
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
OK:i num is 2, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
4:{323}lock end
[4][18][0] apply index = 324, commit is 325
4:{324}unlock now
4:{324}unlock end
4:{324}lock now
2023/09/23 03:26:52 CommandApply!!!!!!!!!
4:{324}lock end
[4][18][0] apply index = 325, commit is 325
4:{325}unlock now
4:{325}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
4:{325}lock now
4:{325}lock end
4:rf.commitIndex = 325, rf.lastApplied = 325
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
[2][18][0] apply index = 326, commit is 330
2:{326}unlock now
2:{326}unlock end
2:{326}lock now
2:{326}lock end
[2][18][0] apply index = 327, commit is 330
2 return success! num is 1
2:{327}unlock now
2:{327}unlock end
[0][18][0] apply index = 326, commit is 330
2023/09/23 03:26:52 CommandApply!!!!!!!!!
0:{326}unlock now
0:{326}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
0:{326}lock now
2023/09/23 03:26:52 CommandApply!!!!!!!!!
0:{326}lock end
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
[0][18][0] apply index = 327, commit is 330
2:{327}lock now
2:{327}lock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2][18][0] apply index = 328, commit is 330
2:{328}unlock now
2:{328}unlock end
2:{328}lock now
2:{328}lock end
[2][18][0] apply index = 329, commit is 330
2:{329}unlock now
2:{329}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
nextIndex = 331, lastIndex = 0, len = 330
0:{327}unlock now
0:{327}unlock end
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
0:{327}lock now
0:{327}lock end
[0][18][0] apply index = 328, commit is 330
0:{328}unlock now
0:{328}unlock end
0:{328}lock now
0:{328}lock end
[0][18][0] apply index = 329, commit is 330
0:{329}unlock now
0:{329}unlock end
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
0:{329}lock now
0:{329}lock end
[0][18][0] apply index = 330, commit is 330
0:{330}unlock now
0:{330}unlock end
0:{330}lock now
0:{330}lock end
0:rf.commitIndex = 330, rf.lastApplied = 330
[3][18][0] apply index = 326, commit is 330
3:{326}unlock now
3:{326}unlock end
3:{326}lock now
3:{326}lock end
[3][18][0] apply index = 327, commit is 330
3:{327}unlock now
3:{327}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
3:{327}lock now
3:{327}lock end
[3][18][0] apply index = 328, commit is 330
3:{328}unlock now
3:{328}unlock end
3:{328}lock now
3:{328}lock end
[3][18][0] apply index = 329, commit is 330
3:{329}unlock now
3:{329}unlock end
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
2:{329}lock now
2:{329}lock end
[2][18][0] apply index = 330, commit is 330
2:{330}unlock now
2:{330}unlock end
2:{330}lock now
2:{330}lock end
2:rf.commitIndex = 330, rf.lastApplied = 330
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
1:rf.commitIndex = 330, rf.lastApplied = 330
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
0 return success! num is 1
3:{329}lock now
3:{329}lock end
[3][18][0] apply index = 330, commit is 330
3:{330}unlock now
3:{330}unlock end
3:{330}lock now
3:{330}lock end
3:rf.commitIndex = 330, rf.lastApplied = 330
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
nextIndex = 331, lastIndex = 0, len = 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
[4][18][0] apply index = 326, commit is 330
4:{326}unlock now
4:{326}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
4:{326}lock now
4:{326}lock end
[4][18][0] apply index = 327, commit is 330
4:{327}unlock now
4:{327}unlock end
4:{327}lock now
4:{327}lock end
[4][18][0] apply index = 328, commit is 330
4:{328}unlock now
4:{328}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
4:{328}lock now
4:{328}lock end
[4][18][0] apply index = 329, commit is 330
4:{329}unlock now
4:{329}unlock end
4:{329}lock now
4:{329}lock end
[4][18][0] apply index = 330, commit is 330
4:{330}unlock now
4:{330}unlock end
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
2023/09/23 03:26:52 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
4:{330}lock now
4:{330}lock end
4:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0:rf.commitIndex = 330, rf.lastApplied = 330
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2:rf.commitIndex = 330, rf.lastApplied = 330
2 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
4 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
4:rf.commitIndex = 330, rf.lastApplied = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
1:rf.commitIndex = 330, rf.lastApplied = 330
3:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0:rf.commitIndex = 330, rf.lastApplied = 330
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3:rf.commitIndex = 330, rf.lastApplied = 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2:rf.commitIndex = 330, rf.lastApplied = 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
2 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0:rf.commitIndex = 330, rf.lastApplied = 330
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3 return success! num is 2
4:rf.commitIndex = 330, rf.lastApplied = 330
3:rf.commitIndex = 330, rf.lastApplied = 330
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
4 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
1:rf.commitIndex = 330, rf.lastApplied = 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2:rf.commitIndex = 330, rf.lastApplied = 330
2 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
2:rf.commitIndex = 330, rf.lastApplied = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
0:rf.commitIndex = 330, rf.lastApplied = 330
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0:rf.commitIndex = 330, rf.lastApplied = 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4:rf.commitIndex = 330, rf.lastApplied = 330
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
4 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2:rf.commitIndex = 330, rf.lastApplied = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3:rf.commitIndex = 330, rf.lastApplied = 330
1:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
2 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0:rf.commitIndex = 330, rf.lastApplied = 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4:rf.commitIndex = 330, rf.lastApplied = 330
2:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
2 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
3:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
0:rf.commitIndex = 330, rf.lastApplied = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
1:rf.commitIndex = 330, rf.lastApplied = 330
2:rf.commitIndex = 330, rf.lastApplied = 330
2 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
1 begin to append 3
0:rf.commitIndex = 330, rf.lastApplied = 330
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2:rf.commitIndex = 330, rf.lastApplied = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3:rf.commitIndex = 330, rf.lastApplied = 330
1:rf.commitIndex = 330, rf.lastApplied = 330
4:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2:rf.commitIndex = 330, rf.lastApplied = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
3:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
4:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0:rf.commitIndex = 330, rf.lastApplied = 330
0 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4:rf.commitIndex = 330, rf.lastApplied = 330
2 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
2:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3:rf.commitIndex = 330, rf.lastApplied = 330
0:rf.commitIndex = 330, rf.lastApplied = 330
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4:rf.commitIndex = 330, rf.lastApplied = 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
0:rf.commitIndex = 330, rf.lastApplied = 330
0 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
3:rf.commitIndex = 330, rf.lastApplied = 330
2:rf.commitIndex = 330, rf.lastApplied = 330
2 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
4:rf.commitIndex = 330, rf.lastApplied = 330
0:rf.commitIndex = 330, rf.lastApplied = 330
2:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
2 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
0 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
3:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
2 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
4:rf.commitIndex = 330, rf.lastApplied = 330
2:rf.commitIndex = 330, rf.lastApplied = 330
0:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
0 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：3节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
测试：2节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
3:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
测试：4节点term为18，leader发送term为18, 接收0个, PrevLogIndex is 330
2 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
2:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 330
0 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 330
1 max is 330
2 max is 330
1:commitIndex -> 330
1:rf.commitIndex = 330, rf.lastApplied = 330
4:rf.commitIndex = 330, rf.lastApplied = 330
0:rf.commitIndex = 330, rf.lastApplied = 330
2023/09/23 03:26:53 wait for clients
2023/09/23 03:26:53 read from clients 0
2023/09/23 03:26:53 Check 11 for client 0
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 481371401344628756 6},term is 18,len is 331
---------------
1 begin to append 0
prevlogindex = 330, lastIndex = 0
1 begin to append 2
prevlogindex = 330, lastIndex = 0
1 begin to append 3
prevlogindex = 330, lastIndex = 0
1 begin to append 4
prevlogindex = 330, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 330
updateIndex = 330, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 330
测试：3节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 330
updateIndex = 330, lastIndex = 0
updateIndex = 330, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 330
updateIndex = 330, lastIndex = 0
0更新log，长度331
0:rf.commitIndex = 330, rf.lastApplied = 330
4更新log，长度331
0 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 331
4:rf.commitIndex = 330, rf.lastApplied = 330
4 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 331
1 max is 331
2 max is 331
1:commitIndex -> 331
[1][18][0] apply index = 331, commit is 331
1:{331}unlock now
1:{331}unlock end
1:{331}lock now
1:{331}lock end
1:rf.commitIndex = 331, rf.lastApplied = 331
2023/09/23 03:26:53 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:53 kvserver[1]: applyMsg: {true {Get 0  481371401344628756 6} 331 18 false [] 0 0}处理完成,通知index = [331]的channel
2023/09/23 03:26:53 kvserver[1]: applyMsg: {true {Get 0  481371401344628756 6} 331 18 false [] 0 0}处理完成,通知完成index = [331]的channel
2023/09/23 03:26:53 kvserver[1]: GET获取到通知结果,index=[331],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
kvserver[1]: pre删除通道index: 331
kvserver[1]: begin删除通道index: 331
2023/09/23 03:26:53 kvserver[1]: 成功删除通道index: 331
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:26:53 read from clients 1
2023/09/23 03:26:53 Check 8 for client 1
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 481371401344628756 7},term is 18,len is 332
---------------
2更新log，长度331
2 return success! num is 1
nextIndex = 331, lastIndex = 0, len = 332
2:rf.commitIndex = 330, rf.lastApplied = 330
3更新log，长度331
3:rf.commitIndex = 330, rf.lastApplied = 330
3 return success! num is 2
nextIndex = 331, lastIndex = 0, len = 332
1 max is 331
2 max is 331
1:commitIndex -> 331
1:rf.commitIndex = 331, rf.lastApplied = 331
1 begin to append 0
prevlogindex = 331, lastIndex = 0
1 begin to append 2
prevlogindex = 331, lastIndex = 0
1 begin to append 3
prevlogindex = 331, lastIndex = 0
1 begin to append 4
prevlogindex = 331, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 331
updateIndex = 331, lastIndex = 0
0更新log，长度332
[0][18][0] apply index = 331, commit is 331
0:{331}unlock now
0:{331}unlock end
0:{331}lock now
0:{331}lock end
0:rf.commitIndex = 331, rf.lastApplied = 331
2023/09/23 03:26:53 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
测试：4节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 331
updateIndex = 331, lastIndex = 0
4更新log，长度332
测试：3节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 331
updateIndex = 331, lastIndex = 0
3更新log，长度332
[4][18][0] apply index = 331, commit is 331
4:{331}unlock now
4:{331}unlock end
4:{331}lock now
4:{331}lock end
4:rf.commitIndex = 331, rf.lastApplied = 331
2023/09/23 03:26:53 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
[3][18][0] apply index = 331, commit is 331
3:{331}unlock now
3:{331}unlock end
3:{331}lock now
3:{331}lock end
3:rf.commitIndex = 331, rf.lastApplied = 331
4 return success! num is 1
nextIndex = 332, lastIndex = 0, len = 332
测试：2节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 331
updateIndex = 331, lastIndex = 0
0 return success! num is 2
2023/09/23 03:26:53 CommandApply!!!!!!!!!
nextIndex = 332, lastIndex = 0, len = 332
1 max is 332
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2 max is 332
1:commitIndex -> 332
[1][18][0] apply index = 332, commit is 332
1:{332}unlock now
1:{332}unlock end
2023/09/23 03:26:53 CommandApply!!!!!!!!!
1:{332}lock now
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
1:{332}lock end
2023/09/23 03:26:53 kvserver[1]: applyMsg: {true {Get 1  481371401344628756 7} 332 18 false [] 0 0}处理完成,通知index = [332]的channel
1:rf.commitIndex = 332, rf.lastApplied = 332
2023/09/23 03:26:53 kvserver[1]: applyMsg: {true {Get 1  481371401344628756 7} 332 18 false [] 0 0}处理完成,通知完成index = [332]的channel
2023/09/23 03:26:53 kvserver[1]: GET获取到通知结果,index=[332],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
kvserver[1]: pre删除通道index: 332
kvserver[1]: begin删除通道index: 332
2023/09/23 03:26:53 kvserver[1]: 成功删除通道index: 332
OK:i num is 0, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:53 read from clients 2
2023/09/23 03:26:53 Check 12 for client 2
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 481371401344628756 8},term is 18,len is 333
---------------
3 return success! num is 1
nextIndex = 332, lastIndex = 0, len = 333
2更新log，长度332
[2][18][0] apply index = 331, commit is 331
2:{331}unlock now
2:{331}unlock end
2:{331}lock now
2:{331}lock end
2:rf.commitIndex = 331, rf.lastApplied = 331
2023/09/23 03:26:53 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2 return success! num is 2
nextIndex = 332, lastIndex = 0, len = 333
1 max is 332
2 max is 332
1:commitIndex -> 332
1:rf.commitIndex = 332, rf.lastApplied = 332
1 begin to append 0
prevlogindex = 332, lastIndex = 0
1 begin to append 2
prevlogindex = 332, lastIndex = 0
1 begin to append 3
prevlogindex = 332, lastIndex = 0
1 begin to append 4
prevlogindex = 332, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 332
测试：3节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 332
updateIndex = 332, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 332
updateIndex = 332, lastIndex = 0
3更新log，长度333
[3][18][0] apply index = 332, commit is 332
3:{332}unlock now
3:{332}unlock end
3:{332}lock now
3:{332}lock end
3:rf.commitIndex = 332, rf.lastApplied = 332
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
3 return success! num is 1
nextIndex = 333, lastIndex = 0, len = 333
4更新log，长度333
updateIndex = 332, lastIndex = 0
[4][18][0] apply index = 332, commit is 332
4:{332}unlock now
4:{332}unlock end
4:{332}lock now
4:{332}lock end
4:rf.commitIndex = 332, rf.lastApplied = 332
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
4 return success! num is 2
nextIndex = 333, lastIndex = 0, len = 333
1 max is 333
2 max is 333
1:commitIndex -> 333
[1][18][0] apply index = 333, commit is 333
1:{333}unlock now
1:{333}unlock end
1:{333}lock now
1:{333}lock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
1:rf.commitIndex = 333, rf.lastApplied = 333
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 2  481371401344628756 8} 333 18 false [] 0 0}处理完成,通知index = [333]的channel
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[333],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 2  481371401344628756 8} 333 18 false [] 0 0}处理完成,通知完成index = [333]的channel
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
kvserver[1]: pre删除通道index: 333
kvserver[1]: begin删除通道index: 333
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 333
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:54 read from clients 3
2023/09/23 03:26:54 Check 15 for client 3
测试：2节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 332
updateIndex = 332, lastIndex = 0
2更新log，长度333
[2][18][0] apply index = 332, commit is 332
2:{332}unlock now
2:{332}unlock end
2:{332}lock now
2:{332}lock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 481371401344628756 9},term is 18,len is 334
---------------
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2 return success! num is 1
nextIndex = 333, lastIndex = 0, len = 334
2:rf.commitIndex = 332, rf.lastApplied = 332
0更新log，长度333
[0][18][0] apply index = 332, commit is 332
0:{332}unlock now
0:{332}unlock end
0:{332}lock now
0 return success! num is 2
nextIndex = 333, lastIndex = 0, len = 334
1 max is 333
2 max is 333
2023/09/23 03:26:54 CommandApply!!!!!!!!!
1:commitIndex -> 333
1:rf.commitIndex = 333, rf.lastApplied = 333
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
0:{332}lock end
0:rf.commitIndex = 332, rf.lastApplied = 332
1 begin to append 0
prevlogindex = 333, lastIndex = 0
1 begin to append 2
prevlogindex = 333, lastIndex = 0
1 begin to append 3
prevlogindex = 333, lastIndex = 0
1 begin to append 4
prevlogindex = 333, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 333
updateIndex = 333, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 333
测试：2节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 333
updateIndex = 333, lastIndex = 0
4更新log，长度334
[4][18][0] apply index = 333, commit is 333
4:{333}unlock now
4:{333}unlock end
4:{333}lock now
4:{333}lock end
4:rf.commitIndex = 333, rf.lastApplied = 333
4 return success! num is 1
nextIndex = 334, lastIndex = 0, len = 334
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
测试：3节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 333
updateIndex = 333, lastIndex = 0
2更新log，长度334
updateIndex = 333, lastIndex = 0
[2][18][0] apply index = 333, commit is 333
2:{333}unlock now
2:{333}unlock end
2:{333}lock now
2:{333}lock end
2:rf.commitIndex = 333, rf.lastApplied = 333
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2 return success! num is 2
3更新log，长度334
nextIndex = 334, lastIndex = 0, len = 334
1 max is 334
2 max is 334
1:commitIndex -> 334
[1][18][0] apply index = 334, commit is 334
1:{334}unlock now
1:{334}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
1:{334}lock now
1:{334}lock end
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
1:rf.commitIndex = 334, rf.lastApplied = 334
[3][18][0] apply index = 333, commit is 333
3:{333}unlock now
3:{333}unlock end
3:{333}lock now
3:{333}lock end
3:rf.commitIndex = 333, rf.lastApplied = 333
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 3  481371401344628756 9} 334 18 false [] 0 0}处理完成,通知index = [334]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 3  481371401344628756 9} 334 18 false [] 0 0}处理完成,通知完成index = [334]的channel
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[334],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
kvserver[1]: pre删除通道index: 334
kvserver[1]: begin删除通道index: 334
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 334
3 return success! num is 1
nextIndex = 334, lastIndex = 0, len = 334
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
0更新log，长度334
2023/09/23 03:26:54 read from clients 4
2023/09/23 03:26:54 Check 11 for client 4
[0][18][0] apply index = 333, commit is 333
0:{333}unlock now
0:{333}unlock end
0:{333}lock now
0:{333}lock end
0:rf.commitIndex = 333, rf.lastApplied = 333
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 y
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 481371401344628756 10},term is 18,len is 335
---------------
0 return success! num is 2
nextIndex = 334, lastIndex = 0, len = 335
1 max is 334
2 max is 334
1:commitIndex -> 334
1:rf.commitIndex = 334, rf.lastApplied = 334
1 begin to append 0
prevlogindex = 334, lastIndex = 0
1 begin to append 2
prevlogindex = 334, lastIndex = 0
1 begin to append 3
prevlogindex = 334, lastIndex = 0
1 begin to append 4
prevlogindex = 334, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 334
updateIndex = 334, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 334
updateIndex = 334, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 334
updateIndex = 334, lastIndex = 0
2更新log，长度335
[2][18][0] apply index = 334, commit is 334
2:{334}unlock now
2:{334}unlock end
2:{334}lock now
2 return success! num is 1
nextIndex = 335, lastIndex = 0, len = 335
2:{334}lock end
2:rf.commitIndex = 334, rf.lastApplied = 334
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
0更新log，长度335
0 return success! num is 2
nextIndex = 335, lastIndex = 0, len = 335
1 max is 335
2 max is 335
1:commitIndex -> 335
测试：4节点term为18，leader发送term为18, 接收1个, PrevLogIndex is 334
updateIndex = 334, lastIndex = 0
3更新log，长度335
[0][18][0] apply index = 334, commit is 334
0:{334}unlock now
0:{334}unlock end
0:{334}lock now
0:{334}lock end
0:rf.commitIndex = 334, rf.lastApplied = 334
[3][18][0] apply index = 334, commit is 334
3:{334}unlock now
3:{334}unlock end
3:{334}lock now
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
3:{334}lock end
3:rf.commitIndex = 334, rf.lastApplied = 334
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
[1][18][0] apply index = 335, commit is 335
1:{335}unlock now
1:{335}unlock end
1:{335}lock now
2023/09/23 03:26:54 CommandApply!!!!!!!!!
3 return success! num is 1
nextIndex = 335, lastIndex = 0, len = 335
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
1:{335}lock end
1:rf.commitIndex = 335, rf.lastApplied = 335
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 4  481371401344628756 10} 335 18 false [] 0 0}处理完成,通知index = [335]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 4  481371401344628756 10} 335 18 false [] 0 0}处理完成,通知完成index = [335]的channel
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[335],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
kvserver[1]: pre删除通道index: 335
kvserver[1]: begin删除通道index: 335
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 335
OK:i num is 0, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:54 Iteration 2
2023/09/23 03:26:54 PUT begin
2023/09/23 03:26:54 PUT begin
2023/09/23 03:26:54 PUT begin
2023/09/23 03:26:54 PUT begin
2023/09/23 03:26:54 PUT begin
---------------
1接受新命令{%!d(string=Put) %!d(string=0) %!d(string=) 3648117293085908437 1},term is 18,len is 336
---------------
---------------
1接受新命令{%!d(string=Put) %!d(string=2) %!d(string=) 1111049196432932634 1},term is 18,len is 337
---------------
4更新log，长度335
[4][18][0] apply index = 334, commit is 334
4:{334}unlock now
4 return success! num is 2
nextIndex = 335, lastIndex = 0, len = 337
1 max is 335
2 max is 335
1:commitIndex -> 335
---------------
1接受新命令{%!d(string=Put) %!d(string=3) %!d(string=) 1199091860389120805 1},term is 18,len is 338
---------------
4:{334}unlock end
4:{334}lock now
2023/09/23 03:26:54 CommandApply!!!!!!!!!
4:{334}lock end
4:rf.commitIndex = 334, rf.lastApplied = 334
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 y
---------------
1接受新命令{%!d(string=Put) %!d(string=1) %!d(string=) 3167394946904760106 1},term is 18,len is 339
---------------
---------------
1接受新命令{%!d(string=Put) %!d(string=4) %!d(string=) 2502059193987234581 1},term is 18,len is 340
---------------
1:rf.commitIndex = 335, rf.lastApplied = 335
1 begin to append 0
prevlogindex = 335, lastIndex = 0
1 begin to append 2
prevlogindex = 335, lastIndex = 0
1 begin to append 3
prevlogindex = 335, lastIndex = 0
1 begin to append 4
prevlogindex = 335, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 335
updateIndex = 335, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 335
updateIndex = 335, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 335
updateIndex = 335, lastIndex = 0
4更新log，长度340
[4][18][0] apply index = 335, commit is 335
4:{335}unlock now
4:{335}unlock end
4:{335}lock now
4:{335}lock end
4:rf.commitIndex = 335, rf.lastApplied = 335
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 335
updateIndex = 335, lastIndex = 0
2更新log，长度340
0更新log，长度340
[0][18][0] apply index = 335, commit is 335
0:{335}unlock now
0:{335}unlock end
0:{335}lock now
0:{335}lock end
0:rf.commitIndex = 335, rf.lastApplied = 335
3更新log，长度340
0 return success! num is 1
nextIndex = 336, lastIndex = 0, len = 340
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
[3][18][0] apply index = 335, commit is 335
3:{335}unlock now
3:{335}unlock end
3:{335}lock now
3:{335}lock end
3:rf.commitIndex = 335, rf.lastApplied = 335
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
4 return success! num is 2
nextIndex = 336, lastIndex = 0, len = 340
1 max is 340
2 max is 340
1:commitIndex -> 340
[2][18][0] apply index = 335, commit is 335
2:{335}unlock now
2:{335}unlock end
2:{335}lock now
2:{335}lock end
2:rf.commitIndex = 335, rf.lastApplied = 335
3 return success! num is 1
nextIndex = 336, lastIndex = 0, len = 340
[1][18][0] apply index = 336, commit is 340
1:{336}unlock now
1:{336}unlock end
1:{336}lock now
1:{336}lock end
[1][18][0] apply index = 337, commit is 340
1:{337}unlock now
1:{337}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Put key:0, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 0  3648117293085908437 1} 336 18 false [] 0 0}处理完成,通知index = [336]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 0  3648117293085908437 1} 336 18 false [] 0 0}处理完成,通知完成index = [336]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Put key:2, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 2  1111049196432932634 1} 337 18 false [] 0 0}处理完成,通知index = [337]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 2  1111049196432932634 1} 337 18 false [] 0 0}处理完成,通知完成index = [337]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[337],replyMsg: { 18 true}
kvserver[1]: pre删除通道index: 337
kvserver[1]: begin删除通道index: 337
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 337
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2 return success! num is 2
nextIndex = 336, lastIndex = 0, len = 340
1 max is 340
2 max is 340
1:commitIndex -> 340
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[336],replyMsg: { 18 true}
kvserver[1]: pre删除通道index: 336
kvserver[1]: begin删除通道index: 336
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 336
1:{337}lock now
1:{337}lock end
[1][18][0] apply index = 338, commit is 340
1:{338}unlock now
1:{338}unlock end
1:{338}lock now
1:{338}lock end
[1][18][0] apply index = 339, commit is 340
1:{339}unlock now
1:{339}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Put key:3, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 3  1199091860389120805 1} 338 18 false [] 0 0}处理完成,通知index = [338]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 3  1199091860389120805 1} 338 18 false [] 0 0}处理完成,通知完成index = [338]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Put key:1, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 1  3167394946904760106 1} 339 18 false [] 0 0}处理完成,通知index = [339]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 1  3167394946904760106 1} 339 18 false [] 0 0}处理完成,通知完成index = [339]的channel
1:{339}lock now
1:{339}lock end
[1][18][0] apply index = 340, commit is 340
1:{340}unlock now
1:{340}unlock end
1:{340}lock now
1:{340}lock end
1:rf.commitIndex = 340, rf.lastApplied = 340
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Put key:4, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 4  2502059193987234581 1} 340 18 false [] 0 0}处理完成,通知index = [340]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Put 4  2502059193987234581 1} 340 18 false [] 0 0}处理完成,通知完成index = [340]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[340],replyMsg: { 18 true}
kvserver[1]: pre删除通道index: 340
kvserver[1]: begin删除通道index: 340
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 340
2023/09/23 03:26:54 PUT end
2023/09/23 03:26:54 0: client new append x 0 0 y
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[338],replyMsg: { 18 true}
kvserver[1]: pre删除通道index: 338
kvserver[1]: begin删除通道index: 338
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 338
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[339],replyMsg: { 18 true}
kvserver[1]: pre删除通道index: 339
kvserver[1]: begin删除通道index: 339
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 339
2023/09/23 03:26:54 PUT end
2023/09/23 03:26:54 2: client new get 2
2023/09/23 03:26:54 PUT end
2023/09/23 03:26:54 1: client new get 1
2023/09/23 03:26:54 PUT end
2023/09/23 03:26:54 4: client new get 4
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 2},term is 18,len is 341
---------------
2023/09/23 03:26:54 PUT end
2023/09/23 03:26:54 3: client new append x 3 0 y
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 0 y) 3648117293085908437 2},term is 18,len is 342
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 2},term is 18,len is 343
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 0 y) 1199091860389120805 2},term is 18,len is 344
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 2},term is 18,len is 345
---------------
1 begin to append 0
prevlogindex = 340, lastIndex = 0
1 begin to append 2
prevlogindex = 340, lastIndex = 0
1 begin to append 3
prevlogindex = 340, lastIndex = 0
1 begin to append 4
prevlogindex = 340, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 340
updateIndex = 340, lastIndex = 0
4更新log，长度345
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 340
updateIndex = 340, lastIndex = 0
2更新log，长度345
2 return success! num is 1
nextIndex = 341, lastIndex = 0, len = 345
[4][18][0] apply index = 336, commit is 340
4:{336}unlock now
4:{336}unlock end
4:{336}lock now
4:{336}lock end
[4][18][0] apply index = 337, commit is 340
4:{337}unlock now
4:{337}unlock end
4 return success! num is 2
nextIndex = 341, lastIndex = 0, len = 345
1 max is 345
2 max is 345
1:commitIndex -> 345
[1][18][0] apply index = 341, commit is 345
1:{341}unlock now
1:{341}unlock end
1:{341}lock now
1:{341}lock end
[1][18][0] apply index = 342, commit is 345
1:{342}unlock now
1:{342}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:4, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 2} 341 18 false [] 0 0}处理完成,通知index = [341]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 2} 341 18 false [] 0 0}处理完成,通知完成index = [341]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 0 x 0 0 y 3648117293085908437 2} 342 18 false [] 0 0}处理完成,通知index = [342]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 0 x 0 0 y 3648117293085908437 2} 342 18 false [] 0 0}处理完成,通知完成index = [342]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[342],replyMsg: {x 0 0 y 18 true}
kvserver[1]: pre删除通道index: 342
kvserver[1]: begin删除通道index: 342
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 342
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 340
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[341],replyMsg.value: 
2023/09/23 03:26:54 0: client new append x 0 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 340
updateIndex = 340, lastIndex = 0
3更新log，长度345
[3][18][0] apply index = 336, commit is 340
3:{336}unlock now
3:{336}unlock end
3:{336}lock now
3:{336}lock end
[3][18][0] apply index = 337, commit is 340
3:{337}unlock now
3:{337}unlock end
[2][18][0] apply index = 336, commit is 340
2:{336}unlock now
2:{336}unlock end
2:{336}lock now
2:{336}lock end
[2][18][0] apply index = 337, commit is 340
2:{337}unlock now
2:{337}unlock end
reply value is 
kvserver[1]: pre删除通道index: 341
kvserver[1]: begin删除通道index: 341
1:{342}lock now
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 1 y) 3648117293085908437 3},term is 18,len is 346
---------------
1:{342}lock end
[1][18][0] apply index = 343, commit is 345
1:{343}unlock now
1:{343}unlock end
1:{343}lock now
1:{343}lock end
[1][18][0] apply index = 344, commit is 345
1:{344}unlock now
1:{344}unlock end
3 return success! num is 1
nextIndex = 341, lastIndex = 0, len = 346
updateIndex = 340, lastIndex = 0
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Put key:0, 
4:{337}lock now
4:{337}lock end
[4][18][0] apply index = 338, commit is 340
4:{338}unlock now
4:{338}unlock end
[2]Put key:0, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2:{337}lock now
2:{337}lock end
[2][18][0] apply index = 338, commit is 340
2:{338}unlock now
2:{338}unlock end
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 341
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Put key:2, 
2:{338}lock now
2:{338}lock end
[2][18][0] apply index = 339, commit is 340
2:{339}unlock now
2:{339}unlock end
OK:i num is 3, key is 4, return 
[3]Put key:0, 
3:{337}lock now
3:{337}lock end
[3][18][0] apply index = 338, commit is 340
3:{338}unlock now
3:{338}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Put key:3, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Put key:1, 
[4]Put key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Put key:3, 
4:{338}lock now
4:{338}lock end
[4][18][0] apply index = 339, commit is 340
4:{339}unlock now
4:{339}unlock end
4:{339}lock now
4:{339}lock end
[4][18][0] apply index = 340, commit is 340
4:{340}unlock now
4:{340}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Put key:1, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Put key:4, 
2023/09/23 03:26:54 4: client new append x 4 0 y
2:{339}lock now
2:{339}lock end
[2][18][0] apply index = 340, commit is 340
2:{340}unlock now
2:{340}unlock end
2:{340}lock now
2:{340}lock end
2:rf.commitIndex = 340, rf.lastApplied = 340
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Put key:4, 
4:{340}lock now
4:{340}lock end
4:rf.commitIndex = 340, rf.lastApplied = 340
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Put key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Put key:3, 
3:{338}lock now
3:{338}lock end
[3][18][0] apply index = 339, commit is 340
3:{339}unlock now
3:{339}unlock end
3:{339}lock now
3:{339}lock end
[3][18][0] apply index = 340, commit is 340
3:{340}unlock now
3:{340}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Put key:1, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Put key:4, 
3:{340}lock now
3:{340}lock end
3:rf.commitIndex = 340, rf.lastApplied = 340
[1]Get key:2, 
0更新log，长度345
[0][18][0] apply index = 336, commit is 340
0:{336}unlock now
0:{336}unlock end
0:{336}lock now
0:{336}lock end
[0][18][0] apply index = 337, commit is 340
0:{337}unlock now
0:{337}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Put key:0, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Put key:2, 
0:{337}lock now
0:{337}lock end
[0][18][0] apply index = 338, commit is 340
0:{338}unlock now
0:{338}unlock end
0:{338}lock now
0:{338}lock end
[0][18][0] apply index = 339, commit is 340
0:{339}unlock now
0:{339}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Put key:3, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Put key:1, 
0:{339}lock now
0:{339}lock end
[0][18][0] apply index = 340, commit is 340
0:{340}unlock now
0:{340}unlock end
0:{340}lock now
0:{340}lock end
0:rf.commitIndex = 340, rf.lastApplied = 340
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Put key:4, 
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 0 y) 2502059193987234581 3},term is 18,len is 347
---------------
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 2} 343 18 false [] 0 0}处理完成,通知index = [343]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 2} 343 18 false [] 0 0}处理完成,通知完成index = [343]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 3 x 3 0 y 1199091860389120805 2} 344 18 false [] 0 0}处理完成,通知index = [344]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 3 x 3 0 y 1199091860389120805 2} 344 18 false [] 0 0}处理完成,通知完成index = [344]的channel
1:{344}lock now
0 return success! num is 2
nextIndex = 341, lastIndex = 0, len = 347
1 max is 345
2 max is 345
1:commitIndex -> 345
1:{344}lock end
[1][18][0] apply index = 345, commit is 345
1:{345}unlock now
1:{345}unlock end
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[343],replyMsg.value: 
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[344],replyMsg: {x 3 0 y 18 true}
kvserver[1]: pre删除通道index: 344
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:1, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 2} 345 18 false [] 0 0}处理完成,通知index = [345]的channel
1:{345}lock now
1:{345}lock end
1:rf.commitIndex = 345, rf.lastApplied = 345
reply value is 
kvserver[1]: pre删除通道index: 343
kvserver[1]: begin删除通道index: 344
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 344
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 2} 345 18 false [] 0 0}处理完成,通知完成index = [345]的channel
kvserver[1]: begin删除通道index: 343
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 343
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[345],replyMsg.value: 
2023/09/23 03:26:54 3: client new append x 3 1 y
reply value is 
kvserver[1]: pre删除通道index: 345
kvserver[1]: begin删除通道index: 345
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 345
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 1 y) 1199091860389120805 3},term is 18,len is 348
---------------
OK:i num is 3, key is 1, return 
2023/09/23 03:26:54 1: client new get 1
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 3},term is 18,len is 349
---------------
OK:i num is 0, key is 2, return 
2023/09/23 03:26:54 2: client new get 2
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 3},term is 18,len is 350
---------------
1 begin to append 0
prevlogindex = 345, lastIndex = 0
1 begin to append 2
prevlogindex = 345, lastIndex = 0
1 begin to append 3
prevlogindex = 345, lastIndex = 0
1 begin to append 4
prevlogindex = 345, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 345
updateIndex = 345, lastIndex = 0
2更新log，长度350
[2][18][0] apply index = 341, commit is 345
2:{341}unlock now
2:{341}unlock end
2:{341}lock now
2:{341}lock end
[2][18][0] apply index = 342, commit is 345
2:{342}unlock now
2:{342}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:4, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 y
2:{342}lock now
2:{342}lock end
[2][18][0] apply index = 343, commit is 345
2:{343}unlock now
2:{343}unlock end
2:{343}lock now
2:{343}lock end
[2][18][0] apply index = 344, commit is 345
2:{344}unlock now
2:{344}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 y
2 return success! num is 1
nextIndex = 346, lastIndex = 0, len = 350
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 345
updateIndex = 345, lastIndex = 0
2:{344}lock now
2:{344}lock end
[2][18][0] apply index = 345, commit is 345
2:{345}unlock now
2:{345}unlock end
2:{345}lock now
2:{345}lock end
2:rf.commitIndex = 345, rf.lastApplied = 345
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:1, 
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 345
updateIndex = 345, lastIndex = 0
0更新log，长度350
[0][18][0] apply index = 341, commit is 345
0:{341}unlock now
0:{341}unlock end
0:{341}lock now
0:{341}lock end
[0][18][0] apply index = 342, commit is 345
0:{342}unlock now
0:{342}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:4, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 y
0 return success! num is 2
nextIndex = 346, lastIndex = 0, len = 350
1 max is 350
2 max is 350
1:commitIndex -> 350
0:{342}lock now
0:{342}lock end
[0][18][0] apply index = 343, commit is 345
0:{343}unlock now
0:{343}unlock end
0:{343}lock now
0:{343}lock end
[0][18][0] apply index = 344, commit is 345
0:{344}unlock now
0:{344}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 y
0:{344}lock now
0:{344}lock end
[0][18][0] apply index = 345, commit is 345
0:{345}unlock now
0:{345}unlock end
0:{345}lock now
0:{345}lock end
0:rf.commitIndex = 345, rf.lastApplied = 345
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:1, 
[1][18][0] apply index = 346, commit is 350
1:{346}unlock now
1:{346}unlock end
1:{346}lock now
1:{346}lock end
[1][18][0] apply index = 347, commit is 350
1:{347}unlock now
1:{347}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 0 x 0 1 y 3648117293085908437 3} 346 18 false [] 0 0}处理完成,通知index = [346]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 0 x 0 1 y 3648117293085908437 3} 346 18 false [] 0 0}处理完成,通知完成index = [346]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 4 x 4 0 y 2502059193987234581 3} 347 18 false [] 0 0}处理完成,通知index = [347]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 4 x 4 0 y 2502059193987234581 3} 347 18 false [] 0 0}处理完成,通知完成index = [347]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[347],replyMsg: {x 4 0 y 18 true}
kvserver[1]: pre删除通道index: 347
kvserver[1]: begin删除通道index: 347
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 347
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[346],replyMsg: {x 0 0 yx 0 1 y 18 true}
kvserver[1]: pre删除通道index: 346
kvserver[1]: begin删除通道index: 346
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 346
1:{347}lock now
1:{347}lock end
[1][18][0] apply index = 348, commit is 350
1:{348}unlock now
1:{348}unlock end
1:{348}lock now
1:{348}lock end
[1][18][0] apply index = 349, commit is 350
1:{349}unlock now
1:{349}unlock end
2023/09/23 03:26:54 4: client new append x 4 1 y
3更新log，长度350
[3][18][0] apply index = 341, commit is 345
3:{341}unlock now
3:{341}unlock end
3:{341}lock now
3:{341}lock end
[3][18][0] apply index = 342, commit is 345
3:{342}unlock now
3:{342}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:4, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 y
3:{342}lock now
3:{342}lock end
[3][18][0] apply index = 343, commit is 345
3:{343}unlock now
3:{343}unlock end
3:{343}lock now
3:{343}lock end
[3][18][0] apply index = 344, commit is 345
3:{344}unlock now
3:{344}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 y
3:{344}lock now
3:{344}lock end
[3][18][0] apply index = 345, commit is 345
3:{345}unlock now
3:{345}unlock end
3:{345}lock now
3:{345}lock end
3:rf.commitIndex = 345, rf.lastApplied = 345
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:1, 
2023/09/23 03:26:54 0: client new get 0
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 y
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 1 y) 2502059193987234581 4},term is 18,len is 351
---------------
3 return success! num is 1
nextIndex = 346, lastIndex = 0, len = 351
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 345
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 4},term is 18,len is 352
---------------
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 3 x 3 1 y 1199091860389120805 3} 348 18 false [] 0 0}处理完成,通知index = [348]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 3 x 3 1 y 1199091860389120805 3} 348 18 false [] 0 0}处理完成,通知完成index = [348]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:1, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 3} 349 18 false [] 0 0}处理完成,通知index = [349]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 3} 349 18 false [] 0 0}处理完成,通知完成index = [349]的channel
updateIndex = 345, lastIndex = 0
1:{349}lock now
1:{349}lock end
[1][18][0] apply index = 350, commit is 350
1:{350}unlock now
1:{350}unlock end
1:{350}lock now
1:{350}lock end
1:rf.commitIndex = 350, rf.lastApplied = 350
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:2, 
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 3} 350 18 false [] 0 0}处理完成,通知index = [350]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 3} 350 18 false [] 0 0}处理完成,通知完成index = [350]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[348],replyMsg: {x 3 0 yx 3 1 y 18 true}
kvserver[1]: pre删除通道index: 348
kvserver[1]: begin删除通道index: 348
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 348
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[350],replyMsg.value: 
reply value is 
kvserver[1]: pre删除通道index: 350
kvserver[1]: begin删除通道index: 350
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 350
OK:i num is 0, key is 2, return 
2023/09/23 03:26:54 2: client new get 2
4更新log，长度350
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[349],replyMsg.value: 
reply value is 
kvserver[1]: pre删除通道index: 349
kvserver[1]: begin删除通道index: 349
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 349
[4][18][0] apply index = 341, commit is 345
4:{341}unlock now
4:{341}unlock end
4:{341}lock now
4:{341}lock end
[4][18][0] apply index = 342, commit is 345
4:{342}unlock now
4:{342}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:4, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 y
4:{342}lock now
4:{342}lock end
[4][18][0] apply index = 343, commit is 345
4:{343}unlock now
4:{343}unlock end
4:{343}lock now
4:{343}lock end
[4][18][0] apply index = 344, commit is 345
4:{344}unlock now
4:{344}unlock end
OK:i num is 3, key is 1, return 
2023/09/23 03:26:54 1: client new append x 1 0 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 y
4:{344}lock now
4:{344}lock end
[4][18][0] apply index = 345, commit is 345
4:{345}unlock now
4:{345}unlock end
4:{345}lock now
4:{345}lock end
4:rf.commitIndex = 345, rf.lastApplied = 345
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:1, 
2023/09/23 03:26:54 3: client new get 3
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 4},term is 18,len is 353
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 0 y) 3167394946904760106 4},term is 18,len is 354
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 4},term is 18,len is 355
---------------
4 return success! num is 2
nextIndex = 346, lastIndex = 0, len = 355
1 max is 350
2 max is 350
1:commitIndex -> 350
1:rf.commitIndex = 350, rf.lastApplied = 350
1 begin to append 0
prevlogindex = 350, lastIndex = 0
1 begin to append 2
prevlogindex = 350, lastIndex = 0
1 begin to append 3
prevlogindex = 350, lastIndex = 0
1 begin to append 4
prevlogindex = 350, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 350
updateIndex = 350, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 350
updateIndex = 350, lastIndex = 0
3更新log，长度355
3 return success! num is 1
nextIndex = 351, lastIndex = 0, len = 355
[3][18][0] apply index = 346, commit is 350
3:{346}unlock now
3:{346}unlock end
3:{346}lock now
3:{346}lock end
[3][18][0] apply index = 347, commit is 350
3:{347}unlock now
3:{347}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 y
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 350
updateIndex = 350, lastIndex = 0
2更新log，长度355
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 350
updateIndex = 350, lastIndex = 0
4更新log，长度355
[2][18][0] apply index = 346, commit is 350
2:{346}unlock now
2:{346}unlock end
2:{346}lock now
2:{346}lock end
[2][18][0] apply index = 347, commit is 350
2:{347}unlock now
2:{347}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
4 return success! num is 2
nextIndex = 351, lastIndex = 0, len = 355
1 max is 355
2 max is 355
1:commitIndex -> 355
3:{347}lock now
3:{347}lock end
[3][18][0] apply index = 348, commit is 350
3:{348}unlock now
3:{348}unlock end
3:{348}lock now
3:{348}lock end
[3][18][0] apply index = 349, commit is 350
3:{349}unlock now
3:{349}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:1, 
[4][18][0] apply index = 346, commit is 350
4:{346}unlock now
4:{346}unlock end
4:{346}lock now
4:{346}lock end
[4][18][0] apply index = 347, commit is 350
4:{347}unlock now
4:{347}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 y
4:{347}lock now
4:{347}lock end
[4][18][0] apply index = 348, commit is 350
4:{348}unlock now
4:{348}unlock end
4:{348}lock now
4:{348}lock end
[4][18][0] apply index = 349, commit is 350
4:{349}unlock now
4:{349}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:1, 
4:{349}lock now
4:{349}lock end
[4][18][0] apply index = 350, commit is 350
4:{350}unlock now
4:{350}unlock end
4:{350}lock now
4:{350}lock end
4:rf.commitIndex = 350, rf.lastApplied = 350
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:2, 
[1][18][0] apply index = 351, commit is 355
1:{351}unlock now
1:{351}unlock end
1:{351}lock now
1:{351}lock end
[1][18][0] apply index = 352, commit is 355
1:{352}unlock now
1:{352}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 4 x 4 1 y 2502059193987234581 4} 351 18 false [] 0 0}处理完成,通知index = [351]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 4 x 4 1 y 2502059193987234581 4} 351 18 false [] 0 0}处理完成,通知完成index = [351]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 4} 352 18 false [] 0 0}处理完成,通知index = [352]的channel
2 return success! num is 1
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 4} 352 18 false [] 0 0}处理完成,通知完成index = [352]的channel
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[352],replyMsg.value: x 0 0 yx 0 1 y
nextIndex = 351, lastIndex = 0, len = 355
reply value is x 0 0 yx 0 1 y
kvserver[1]: pre删除通道index: 352
kvserver[1]: begin删除通道index: 352
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 352
3:{349}lock now
3:{349}lock end
[3][18][0] apply index = 350, commit is 350
3:{350}unlock now
3:{350}unlock end
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[351],replyMsg: {x 4 0 yx 4 1 y 18 true}
3:{350}lock now
3:{350}lock end
3:rf.commitIndex = 350, rf.lastApplied = 350
1:{352}lock now
1:{352}lock end
[1][18][0] apply index = 353, commit is 355
1:{353}unlock now
1:{353}unlock end
1:{353}lock now
1:{353}lock end
OK:i num is 0, key is 0, return x 0 0 yx 0 1 y
[1][18][0] apply index = 354, commit is 355
2023/09/23 03:26:54 0: client new append x 0 2 y
1:{354}unlock now
1:{354}unlock end
[2]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 y
2:{347}lock now
2:{347}lock end
[2][18][0] apply index = 348, commit is 350
2:{348}unlock now
2:{348}unlock end
2:{348}lock now
2:{348}lock end
[2][18][0] apply index = 349, commit is 350
2:{349}unlock now
2:{349}unlock end
kvserver[1]: pre删除通道index: 351
kvserver[1]: begin删除通道index: 351
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:2, 
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 351
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:1, 
2:{349}lock now
2:{349}lock end
[2][18][0] apply index = 350, commit is 350
2:{350}unlock now
2:{350}unlock end
2:{350}lock now
2:{350}lock end
2:rf.commitIndex = 350, rf.lastApplied = 350
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:2, 
[1]Get key:2, 
2023/09/23 03:26:54 4: client new get 4
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 2 y) 3648117293085908437 5},term is 18,len is 356
---------------
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 4} 353 18 false [] 0 0}处理完成,通知index = [353]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 4} 353 18 false [] 0 0}处理完成,通知完成index = [353]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 1 x 1 0 y 3167394946904760106 4} 354 18 false [] 0 0}处理完成,通知index = [354]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 1 x 1 0 y 3167394946904760106 4} 354 18 false [] 0 0}处理完成,通知完成index = [354]的channel
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 5},term is 18,len is 357
---------------
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[353],replyMsg.value: 
reply value is 
kvserver[1]: pre删除通道index: 353
kvserver[1]: begin删除通道index: 353
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 353
1:{354}lock now
1:{354}lock end
[1][18][0] apply index = 355, commit is 355
1:{355}unlock now
1:{355}unlock end
1:{355}lock now
1:{355}lock end
1:rf.commitIndex = 355, rf.lastApplied = 355
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 4} 355 18 false [] 0 0}处理完成,通知index = [355]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 4} 355 18 false [] 0 0}处理完成,通知完成index = [355]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[354],replyMsg: {x 1 0 y 18 true}
kvserver[1]: pre删除通道index: 354
kvserver[1]: begin删除通道index: 354
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 354
OK:i num is 0, key is 2, return 
2023/09/23 03:26:54 2: client new append x 2 0 y
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 0 y) 1111049196432932634 5},term is 18,len is 358
---------------
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[355],replyMsg.value: x 3 0 yx 3 1 y
reply value is x 3 0 yx 3 1 y
kvserver[1]: pre删除通道index: 355
kvserver[1]: begin删除通道index: 355
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 355
2023/09/23 03:26:54 1: client new append x 1 1 y
OK:i num is 2, key is 3, return x 3 0 yx 3 1 y
2023/09/23 03:26:54 3: client new append x 3 2 y
0更新log，长度355
[0][18][0] apply index = 346, commit is 350
0:{346}unlock now
0:{346}unlock end
0:{346}lock now
0:{346}lock end
[0][18][0] apply index = 347, commit is 350
0:{347}unlock now
0:{347}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 y
0:{347}lock now
0:{347}lock end
[0][18][0] apply index = 348, commit is 350
0:{348}unlock now
0:{348}unlock end
0:{348}lock now
0:{348}lock end
[0][18][0] apply index = 349, commit is 350
0:{349}unlock now
0:{349}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:1, 
0:{349}lock now
0:{349}lock end
[0][18][0] apply index = 350, commit is 350
0:{350}unlock now
0:{350}unlock end
0:{350}lock now
0:{350}lock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:2, 
0:rf.commitIndex = 350, rf.lastApplied = 350
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 1 y) 3167394946904760106 5},term is 18,len is 359
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 2 y) 1199091860389120805 5},term is 18,len is 360
---------------
0 return success! num is 2
nextIndex = 351, lastIndex = 0, len = 360
1 max is 355
2 max is 355
1:commitIndex -> 355
1:rf.commitIndex = 355, rf.lastApplied = 355
1 begin to append 0
prevlogindex = 355, lastIndex = 0
1 begin to append 2
prevlogindex = 355, lastIndex = 0
1 begin to append 3
prevlogindex = 355, lastIndex = 0
1 begin to append 4
prevlogindex = 355, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 355
updateIndex = 355, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 355
updateIndex = 355, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 355
updateIndex = 355, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 355
updateIndex = 355, lastIndex = 0
4更新log，长度360
[4][18][0] apply index = 351, commit is 355
4:{351}unlock now
4:{351}unlock end
4:{351}lock now
4:{351}lock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 y
2更新log，长度360
2 return success! num is 1
nextIndex = 356, lastIndex = 0, len = 360
[2][18][0] apply index = 351, commit is 355
2:{351}unlock now
2:{351}unlock end
2:{351}lock now
2:{351}lock end
[2][18][0] apply index = 352, commit is 355
2:{352}unlock now
2:{352}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 y
2:{352}lock now
2:{352}lock end
[2][18][0] apply index = 353, commit is 355
2:{353}unlock now
2:{353}unlock end
2:{353}lock now
2:{353}lock end
[2][18][0] apply index = 354, commit is 355
2:{354}unlock now
2:{354}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 y
2:{354}lock now
2:{354}lock end
[2][18][0] apply index = 355, commit is 355
2:{355}unlock now
2:{355}unlock end
2:{355}lock now
2:{355}lock end
2:rf.commitIndex = 355, rf.lastApplied = 355
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 y
[4][18][0] apply index = 352, commit is 355
4:{352}unlock now
4:{352}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 y
4:{352}lock now
0更新log，长度360
0 return success! num is 2
nextIndex = 356, lastIndex = 0, len = 360
1 max is 360
2 max is 360
1:commitIndex -> 360
[1][18][0] apply index = 356, commit is 360
1:{356}unlock now
1:{356}unlock end
1:{356}lock now
1:{356}lock end
[1][18][0] apply index = 357, commit is 360
1:{357}unlock now
1:{357}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 0 x 0 2 y 3648117293085908437 5} 356 18 false [] 0 0}处理完成,通知index = [356]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 0 x 0 2 y 3648117293085908437 5} 356 18 false [] 0 0}处理完成,通知完成index = [356]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 5} 357 18 false [] 0 0}处理完成,通知index = [357]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 5} 357 18 false [] 0 0}处理完成,通知完成index = [357]的channel
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[357],replyMsg.value: x 4 0 yx 4 1 y
reply value is x 4 0 yx 4 1 y
kvserver[1]: pre删除通道index: 357
kvserver[1]: begin删除通道index: 357
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 357
[0][18][0] apply index = 351, commit is 355
0:{351}unlock now
0:{351}unlock end
0:{351}lock now
0:{351}lock end
[0][18][0] apply index = 352, commit is 355
0:{352}unlock now
0:{352}unlock end
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[356],replyMsg: {x 0 0 yx 0 1 yx 0 2 y 18 true}
kvserver[1]: pre删除通道index: 356
kvserver[1]: begin删除通道index: 356
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 356
1:{357}lock now
1:{357}lock end
[1][18][0] apply index = 358, commit is 360
1:{358}unlock now
1:{358}unlock end
1:{358}lock now
1:{358}lock end
[1][18][0] apply index = 359, commit is 360
1:{359}unlock now
1:{359}unlock end
OK:i num is 3, key is 4, return x 4 0 yx 4 1 y
2023/09/23 03:26:54 4: client new append x 4 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 y
0:{352}lock now
0:{352}lock end
[0][18][0] apply index = 353, commit is 355
0:{353}unlock now
0:{353}unlock end
0:{353}lock now
0:{353}lock end
[0][18][0] apply index = 354, commit is 355
0:{354}unlock now
0:{354}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 2 x 2 0 y 1111049196432932634 5} 358 18 false [] 0 0}处理完成,通知index = [358]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 2 x 2 0 y 1111049196432932634 5} 358 18 false [] 0 0}处理完成,通知完成index = [358]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 1 x 1 1 y 3167394946904760106 5} 359 18 false [] 0 0}处理完成,通知index = [359]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 1 x 1 1 y 3167394946904760106 5} 359 18 false [] 0 0}处理完成,通知完成index = [359]的channel
1:{359}lock now
1:{359}lock end
[1][18][0] apply index = 360, commit is 360
1:{360}unlock now
1:{360}unlock end
1:{360}lock now
1:{360}lock end
1:rf.commitIndex = 360, rf.lastApplied = 360
0:{354}lock now
0:{354}lock end
[0][18][0] apply index = 355, commit is 355
0:{355}unlock now
0:{355}unlock end
0:{355}lock now
0:{355}lock end
0:rf.commitIndex = 355, rf.lastApplied = 355
2023/09/23 03:26:54 CommandApply!!!!!!!!!
3更新log，长度360
[3][18][0] apply index = 351, commit is 355
3:{351}unlock now
3:{351}unlock end
3:{351}lock now
3:{351}lock end
[3][18][0] apply index = 352, commit is 355
3:{352}unlock now
3:{352}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 y
3:{352}lock now
3:{352}lock end
[3][18][0] apply index = 353, commit is 355
3:{353}unlock now
3:{353}unlock end
3:{353}lock now
3:{353}lock end
[3][18][0] apply index = 354, commit is 355
3:{354}unlock now
3:{354}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 y
2023/09/23 03:26:54 0: client new get 0
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[358],replyMsg: {x 2 0 y 18 true}
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[359],replyMsg: {x 1 0 yx 1 1 y 18 true}
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 y
kvserver[1]: pre删除通道index: 358
kvserver[1]: pre删除通道index: 359
[1]append key:3, x 3 0 yx 3 1 yx 3 2 y
4:{352}lock end
3:{354}lock now
[4][18][0] apply index = 353, commit is 355
4:{353}unlock now
4:{353}unlock end
4:{353}lock now
4:{353}lock end
[4][18][0] apply index = 354, commit is 355
2023/09/23 03:26:54 CommandApply!!!!!!!!!
4:{354}unlock now
4:{354}unlock end
[4]Get key:2, 
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 y
4:{354}lock now
4:{354}lock end
[4][18][0] apply index = 355, commit is 355
4:{355}unlock now
4:{355}unlock end
4:{355}lock now
4:{355}lock end
4:rf.commitIndex = 355, rf.lastApplied = 355
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 y
3:{354}lock end
[3][18][0] apply index = 355, commit is 355
3:{355}unlock now
3:{355}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
3:{355}lock now
3:{355}lock end
[3]Get key:3, x 3 0 yx 3 1 y
3:rf.commitIndex = 355, rf.lastApplied = 355
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 6},term is 18,len is 361
---------------
3 return success! num is 1
nextIndex = 356, lastIndex = 0, len = 361
4 return success! num is 2
nextIndex = 356, lastIndex = 0, len = 361
1 max is 360
2 max is 360
1:commitIndex -> 360
1:rf.commitIndex = 360, rf.lastApplied = 360
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 3 x 3 2 y 1199091860389120805 5} 360 18 false [] 0 0}处理完成,通知index = [360]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[360],replyMsg: {x 3 0 yx 3 1 yx 3 2 y 18 true}
kvserver[1]: pre删除通道index: 360
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 3 x 3 2 y 1199091860389120805 5} 360 18 false [] 0 0}处理完成,通知完成index = [360]的channel
kvserver[1]: begin删除通道index: 358
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 358
kvserver[1]: begin删除通道index: 359
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 359
kvserver[1]: begin删除通道index: 360
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 360
2023/09/23 03:26:54 2: client new append x 2 1 y
2023/09/23 03:26:54 3: client new get 3
2023/09/23 03:26:54 1: client new append x 1 2 y
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 2 y) 2502059193987234581 6},term is 18,len is 362
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 1 y) 1111049196432932634 6},term is 18,len is 363
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 6},term is 18,len is 364
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 2 y) 3167394946904760106 6},term is 18,len is 365
---------------
1 begin to append 0
prevlogindex = 360, lastIndex = 0
1 begin to append 2
prevlogindex = 360, lastIndex = 0
1 begin to append 3
prevlogindex = 360, lastIndex = 0
1 begin to append 4
prevlogindex = 360, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 360
updateIndex = 360, lastIndex = 0
0更新log，长度365
[0][18][0] apply index = 356, commit is 360
0:{356}unlock now
0:{356}unlock end
0:{356}lock now
0:{356}lock end
[0][18][0] apply index = 357, commit is 360
0:{357}unlock now
0:{357}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 y
0:{357}lock now
0:{357}lock end
[0][18][0] apply index = 358, commit is 360
0:{358}unlock now
0:{358}unlock end
0:{358}lock now
0:{358}lock end
[0][18][0] apply index = 359, commit is 360
0:{359}unlock now
0:{359}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 y
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 360
updateIndex = 360, lastIndex = 0
3更新log，长度365
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 360
updateIndex = 360, lastIndex = 0
4更新log，长度365
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 360
0:{359}lock now
0:{359}lock end
[0][18][0] apply index = 360, commit is 360
0:{360}unlock now
0:{360}unlock end
0:{360}lock now
0:{360}lock end
0:rf.commitIndex = 360, rf.lastApplied = 360
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 y
[3][18][0] apply index = 356, commit is 360
3:{356}unlock now
3:{356}unlock end
3:{356}lock now
3:{356}lock end
[3][18][0] apply index = 357, commit is 360
3:{357}unlock now
3:{357}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 y
3 return success! num is 1
nextIndex = 361, lastIndex = 0, len = 365
3:{357}lock now
3:{357}lock end
[3][18][0] apply index = 358, commit is 360
3:{358}unlock now
3:{358}unlock end
3:{358}lock now
3:{358}lock end
[3][18][0] apply index = 359, commit is 360
3:{359}unlock now
3:{359}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 y
3:{359}lock now
3:{359}lock end
[3][18][0] apply index = 360, commit is 360
3:{360}unlock now
3:{360}unlock end
3:{360}lock now
3:{360}lock end
3:rf.commitIndex = 360, rf.lastApplied = 360
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 y
[4][18][0] apply index = 356, commit is 360
4:{356}unlock now
4:{356}unlock end
4:{356}lock now
4:{356}lock end
[4][18][0] apply index = 357, commit is 360
4:{357}unlock now
4:{357}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 y
4:{357}lock now
4:{357}lock end
[4][18][0] apply index = 358, commit is 360
4:{358}unlock now
4:{358}unlock end
4:{358}lock now
4:{358}lock end
[4][18][0] apply index = 359, commit is 360
4:{359}unlock now
4:{359}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 y
4:{359}lock now
4:{359}lock end
[4][18][0] apply index = 360, commit is 360
4:{360}unlock now
4:{360}unlock end
4:{360}lock now
4:{360}lock end
4:rf.commitIndex = 360, rf.lastApplied = 360
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 y
0 return success! num is 2
nextIndex = 361, lastIndex = 0, len = 365
1 max is 365
2 max is 365
1:commitIndex -> 365
[1][18][0] apply index = 361, commit is 365
1:{361}unlock now
1:{361}unlock end
1:{361}lock now
1:{361}lock end
[1][18][0] apply index = 362, commit is 365
1:{362}unlock now
1:{362}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 6} 361 18 false [] 0 0}处理完成,通知index = [361]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 6} 361 18 false [] 0 0}处理完成,通知完成index = [361]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 4 x 4 2 y 2502059193987234581 6} 362 18 false [] 0 0}处理完成,通知index = [362]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 4 x 4 2 y 2502059193987234581 6} 362 18 false [] 0 0}处理完成,通知完成index = [362]的channel
1:{362}lock now
1:{362}lock end
[1][18][0] apply index = 363, commit is 365
1:{363}unlock now
1:{363}unlock end
1:{363}lock now
1:{363}lock end
[1][18][0] apply index = 364, commit is 365
1:{364}unlock now
1:{364}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 2 x 2 1 y 1111049196432932634 6} 363 18 false [] 0 0}处理完成,通知index = [363]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 2 x 2 1 y 1111049196432932634 6} 363 18 false [] 0 0}处理完成,通知完成index = [363]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 6} 364 18 false [] 0 0}处理完成,通知index = [364]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 6} 364 18 false [] 0 0}处理完成,通知完成index = [364]的channel
1:{364}lock now
1:{364}lock end
[1][18][0] apply index = 365, commit is 365
1:{365}unlock now
1:{365}unlock end
1:{365}lock now
1:{365}lock end
1:rf.commitIndex = 365, rf.lastApplied = 365
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 1 x 1 2 y 3167394946904760106 6} 365 18 false [] 0 0}处理完成,通知index = [365]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 1 x 1 2 y 3167394946904760106 6} 365 18 false [] 0 0}处理完成,通知完成index = [365]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[365],replyMsg: {x 1 0 yx 1 1 yx 1 2 y 18 true}
kvserver[1]: pre删除通道index: 365
kvserver[1]: begin删除通道index: 365
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 365
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[361],replyMsg.value: x 0 0 yx 0 1 yx 0 2 y
reply value is x 0 0 yx 0 1 yx 0 2 y
kvserver[1]: pre删除通道index: 361
kvserver[1]: begin删除通道index: 361
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 361
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[363],replyMsg: {x 2 0 yx 2 1 y 18 true}
kvserver[1]: pre删除通道index: 363
kvserver[1]: begin删除通道index: 363
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 363
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[362],replyMsg: {x 4 0 yx 4 1 yx 4 2 y 18 true}
kvserver[1]: pre删除通道index: 362
kvserver[1]: begin删除通道index: 362
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 362
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 0: client new get 0
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[364],replyMsg.value: x 3 0 yx 3 1 yx 3 2 y
reply value is x 3 0 yx 3 1 yx 3 2 y
kvserver[1]: pre删除通道index: 364
kvserver[1]: begin删除通道index: 364
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 364
2023/09/23 03:26:54 2: client new append x 2 2 y
2023/09/23 03:26:54 1: client new append x 1 3 y
updateIndex = 360, lastIndex = 0
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 2 y) 1111049196432932634 7},term is 18,len is 366
---------------
2023/09/23 03:26:54 4: client new append x 4 3 y
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:54 3: client new append x 3 3 y
2更新log，长度365
[2][18][0] apply index = 356, commit is 360
2:{356}unlock now
2:{356}unlock end
2:{356}lock now
2:{356}lock end
[2][18][0] apply index = 357, commit is 360
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2:{357}unlock now
2:{357}unlock end
[2]append key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 y
2:{357}lock now
2:{357}lock end
[2][18][0] apply index = 358, commit is 360
2:{358}unlock now
2:{358}unlock end
2:{358}lock now
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2:{358}lock end
[2][18][0] apply index = 359, commit is 360
2:{359}unlock now
2:{359}unlock end
[2]append key:2, x 2 0 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 y
2:{359}lock now
2:{359}lock end
[2][18][0] apply index = 360, commit is 360
2:{360}unlock now
2:{360}unlock end
2:{360}lock now
2:{360}lock end
2:rf.commitIndex = 360, rf.lastApplied = 360
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 y
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 3 y) 2502059193987234581 7},term is 18,len is 367
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 7},term is 18,len is 368
---------------
2 return success! num is 1
nextIndex = 361, lastIndex = 0, len = 368
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 3 y) 1199091860389120805 7},term is 18,len is 369
---------------
4 return success! num is 2
nextIndex = 361, lastIndex = 0, len = 369
1 max is 365
2 max is 365
1:commitIndex -> 365
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 3 y) 3167394946904760106 7},term is 18,len is 370
---------------
1:rf.commitIndex = 365, rf.lastApplied = 365
1 begin to append 0
prevlogindex = 365, lastIndex = 0
1 begin to append 2
prevlogindex = 365, lastIndex = 0
1 begin to append 3
prevlogindex = 365, lastIndex = 0
1 begin to append 4
prevlogindex = 365, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 365
updateIndex = 365, lastIndex = 0
3更新log，长度370
[3][18][0] apply index = 361, commit is 365
3:{361}unlock now
3:{361}unlock end
3:{361}lock now
3:{361}lock end
[3][18][0] apply index = 362, commit is 365
3:{362}unlock now
3:{362}unlock end
3 return success! num is 1
nextIndex = 366, lastIndex = 0, len = 370
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 365
updateIndex = 365, lastIndex = 0
2更新log，长度370
2 return success! num is 2
nextIndex = 366, lastIndex = 0, len = 370
2023/09/23 03:26:54 CommandApply!!!!!!!!!
1 max is 370
2 max is 370
1:commitIndex -> 370
[1][18][0] apply index = 366, commit is 370
1:{366}unlock now
1:{366}unlock end
1:{366}lock now
1:{366}lock end
[1][18][0] apply index = 367, commit is 370
1:{367}unlock now
1:{367}unlock end
[2][18][0] apply index = 361, commit is 365
2:{361}unlock now
2:{361}unlock end
2:{361}lock now
2:{361}lock end
[2][18][0] apply index = 362, commit is 365
2:{362}unlock now
2:{362}unlock end
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 365
updateIndex = 365, lastIndex = 0
0更新log，长度370
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0][18][0] apply index = 361, commit is 365
0:{361}unlock now
[1]append key:2, x 2 0 yx 2 1 yx 2 2 y
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 y
2:{362}lock now
2:{362}lock end
[2][18][0] apply index = 363, commit is 365
2:{363}unlock now
2:{363}unlock end
2:{363}lock now
2:{363}lock end
[2][18][0] apply index = 364, commit is 365
2:{364}unlock now
2:{364}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 y
2:{364}lock now
2:{364}lock end
[2][18][0] apply index = 365, commit is 365
2:{365}unlock now
2:{365}unlock end
2:{365}lock now
2:{365}lock end
2:rf.commitIndex = 365, rf.lastApplied = 365
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 365
updateIndex = 365, lastIndex = 0
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 y
0 return success! num is 1
nextIndex = 366, lastIndex = 0, len = 370
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 2 x 2 2 y 1111049196432932634 7} 366 18 false [] 0 0}处理完成,通知index = [366]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 2 x 2 2 y 1111049196432932634 7} 366 18 false [] 0 0}处理完成,通知完成index = [366]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 4 x 4 3 y 2502059193987234581 7} 367 18 false [] 0 0}处理完成,通知index = [367]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 4 x 4 3 y 2502059193987234581 7} 367 18 false [] 0 0}处理完成,通知完成index = [367]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[367],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 y 18 true}
kvserver[1]: pre删除通道index: 367
kvserver[1]: begin删除通道index: 367
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 367
3:{362}lock now
3:{362}lock end
[3][18][0] apply index = 363, commit is 365
3:{363}unlock now
3:{363}unlock end
3:{363}lock now
3:{363}lock end
[3][18][0] apply index = 364, commit is 365
3:{364}unlock now
3:{364}unlock end
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[366],replyMsg: {x 2 0 yx 2 1 yx 2 2 y 18 true}
kvserver[1]: pre删除通道index: 366
kvserver[1]: begin删除通道index: 366
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 366
1:{367}lock now
1:{367}lock end
[1][18][0] apply index = 368, commit is 370
1:{368}unlock now
1:{368}unlock end
1:{368}lock now
1:{368}lock end
[1][18][0] apply index = 369, commit is 370
1:{369}unlock now
1:{369}unlock end
2023/09/23 03:26:54 4: client new get 4
3:{364}lock now
3:{364}lock end
[3][18][0] apply index = 365, commit is 365
3:{365}unlock now
3:{365}unlock end
3:{365}lock now
3:{365}lock end
3:rf.commitIndex = 365, rf.lastApplied = 365
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:54 2: client new get 2
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 7} 368 18 false [] 0 0}处理完成,通知index = [368]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 7} 368 18 false [] 0 0}处理完成,通知完成index = [368]的channel
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 3 x 3 3 y 1199091860389120805 7} 369 18 false [] 0 0}处理完成,通知index = [369]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 3 x 3 3 y 1199091860389120805 7} 369 18 false [] 0 0}处理完成,通知完成index = [369]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[369],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 y 18 true}
kvserver[1]: pre删除通道index: 369
kvserver[1]: begin删除通道index: 369
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 369
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 8},term is 18,len is 371
---------------
1:{369}lock now
1:{369}lock end
[1][18][0] apply index = 370, commit is 370
1:{370}unlock now
1:{370}unlock end
1:{370}lock now
1:{370}lock end
1:rf.commitIndex = 370, rf.lastApplied = 370
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 1 x 1 3 y 3167394946904760106 7} 370 18 false [] 0 0}处理完成,通知index = [370]的channel
2023/09/23 03:26:54 kvserver[1]: applyMsg: {true {Append 1 x 1 3 y 3167394946904760106 7} 370 18 false [] 0 0}处理完成,通知完成index = [370]的channel
2023/09/23 03:26:54 kvserver[1]: PUTAPPEND获取到通知结果,index=[370],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 y 18 true}
kvserver[1]: pre删除通道index: 370
kvserver[1]: begin删除通道index: 370
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 370
2023/09/23 03:26:54 kvserver[1]: GET获取到通知结果,index=[368],replyMsg.value: x 0 0 yx 0 1 yx 0 2 y
reply value is x 0 0 yx 0 1 yx 0 2 y
kvserver[1]: pre删除通道index: 368
kvserver[1]: begin删除通道index: 368
2023/09/23 03:26:54 kvserver[1]: 成功删除通道index: 368
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 0: client new append x 0 3 y
2023/09/23 03:26:54 3: client new get 3
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 8},term is 18,len is 372
---------------
2023/09/23 03:26:54 CommandApply!!!!!!!!!
4更新log，长度370
[4][18][0] apply index = 361, commit is 365
4:{361}unlock now
4:{361}unlock end
4:{361}lock now
4:{361}lock end
[4][18][0] apply index = 362, commit is 365
4:{362}unlock now
4:{362}unlock end
0:{361}unlock end
0:{361}lock now
0:{361}lock end
[0][18][0] apply index = 362, commit is 365
0:{362}unlock now
0:{362}unlock end
[2]append key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:54 1: client new append x 1 4 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
4:{362}lock now
4:{362}lock end
[4][18][0] apply index = 363, commit is 365
4:{363}unlock now
4:{363}unlock end
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 y
0:{362}lock now
0:{362}lock end
[0][18][0] apply index = 363, commit is 365
0:{363}unlock now
0:{363}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 y
0:{363}lock now
0:{363}lock end
[0][18][0] apply index = 364, commit is 365
0:{364}unlock now
0:{364}unlock end
4:{363}lock now
4:{363}lock end
[4][18][0] apply index = 364, commit is 365
4:{364}unlock now
4:{364}unlock end
[4]append key:2, x 2 0 yx 2 1 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 y
0:{364}lock now
0:{364}lock end
[0][18][0] apply index = 365, commit is 365
0:{365}unlock now
0:{365}unlock end
4:{364}lock now
4:{364}lock end
[4][18][0] apply index = 365, commit is 365
4:{365}unlock now
4:{365}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
2023/09/23 03:26:54 CommandApply!!!!!!!!!
4:{365}lock now
4:{365}lock end
4:rf.commitIndex = 365, rf.lastApplied = 365
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 y
0:{365}lock now
0:{365}lock end
0:rf.commitIndex = 365, rf.lastApplied = 365
[4]append key:1, x 1 0 yx 1 1 yx 1 2 y
2023/09/23 03:26:54 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 y
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 8},term is 18,len is 373
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 3 y) 3648117293085908437 8},term is 18,len is 374
---------------
4 return success! num is 2
nextIndex = 366, lastIndex = 0, len = 374
1 max is 370
2 max is 370
1:commitIndex -> 370
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 4 y) 3167394946904760106 8},term is 18,len is 375
---------------
1:rf.commitIndex = 370, rf.lastApplied = 370
1 begin to append 0
prevlogindex = 370, lastIndex = 0
1 begin to append 2
prevlogindex = 370, lastIndex = 0
1 begin to append 3
prevlogindex = 370, lastIndex = 0
1 begin to append 4
prevlogindex = 370, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 370
updateIndex = 370, lastIndex = 0
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 370
updateIndex = 370, lastIndex = 0
0更新log，长度375
[0][18][0] apply index = 366, commit is 370
0:{366}unlock now
0:{366}unlock end
0:{366}lock now
0:{366}lock end
[0][18][0] apply index = 367, commit is 370
0:{367}unlock now
0:{367}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
0:{367}lock now
0:{367}lock end
[0][18][0] apply index = 368, commit is 370
0:{368}unlock now
0:{368}unlock end
0:{368}lock now
0:{368}lock end
[0][18][0] apply index = 369, commit is 370
0:{369}unlock now
0:{369}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
0:{369}lock now
0:{369}lock end
[0][18][0] apply index = 370, commit is 370
0:{370}unlock now
0:{370}unlock end
0:{370}lock now
0:{370}lock end
0:rf.commitIndex = 370, rf.lastApplied = 370
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
0 return success! num is 1
nextIndex = 371, lastIndex = 0, len = 375
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 370
updateIndex = 370, lastIndex = 0
2更新log，长度375
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 370
updateIndex = 370, lastIndex = 0
[2][18][0] apply index = 366, commit is 370
2:{366}unlock now
2:{366}unlock end
2:{366}lock now
2:{366}lock end
[2][18][0] apply index = 367, commit is 370
2:{367}unlock now
2:{367}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2:{367}lock now
2:{367}lock end
[2][18][0] apply index = 368, commit is 370
2:{368}unlock now
2:{368}unlock end
2:{368}lock now
2:{368}lock end
[2][18][0] apply index = 369, commit is 370
2:{369}unlock now
2:{369}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2:{369}lock now
2:{369}lock end
[2][18][0] apply index = 370, commit is 370
2:{370}unlock now
2:{370}unlock end
2:{370}lock now
2:{370}lock end
2:rf.commitIndex = 370, rf.lastApplied = 370
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2 return success! num is 2
nextIndex = 371, lastIndex = 0, len = 375
1 max is 375
2 max is 375
1:commitIndex -> 375
[1][18][0] apply index = 371, commit is 375
1:{371}unlock now
1:{371}unlock end
1:{371}lock now
1:{371}lock end
[1][18][0] apply index = 372, commit is 375
1:{372}unlock now
1:{372}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 8} 371 18 false [] 0 0}处理完成,通知index = [371]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 8} 371 18 false [] 0 0}处理完成,通知完成index = [371]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 8} 372 18 false [] 0 0}处理完成,通知index = [372]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 8} 372 18 false [] 0 0}处理完成,通知完成index = [372]的channel
1:{372}lock now
1:{372}lock end
[1][18][0] apply index = 373, commit is 375
1:{373}unlock now
1:{373}unlock end
1:{373}lock now
1:{373}lock end
[1][18][0] apply index = 374, commit is 375
1:{374}unlock now
1:{374}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 8} 373 18 false [] 0 0}处理完成,通知index = [373]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 8} 373 18 false [] 0 0}处理完成,通知完成index = [373]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 0 x 0 3 y 3648117293085908437 8} 374 18 false [] 0 0}处理完成,通知index = [374]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 0 x 0 3 y 3648117293085908437 8} 374 18 false [] 0 0}处理完成,通知完成index = [374]的channel
1:{374}lock now
1:{374}lock end
[1][18][0] apply index = 375, commit is 375
1:{375}unlock now
1:{375}unlock end
1:{375}lock now
1:{375}lock end
1:rf.commitIndex = 375, rf.lastApplied = 375
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[371],replyMsg.value: x 2 0 yx 2 1 yx 2 2 y
reply value is x 2 0 yx 2 1 yx 2 2 y
kvserver[1]: pre删除通道index: 371
kvserver[1]: begin删除通道index: 371
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 371
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[372],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 y
kvserver[1]: pre删除通道index: 372
kvserver[1]: begin删除通道index: 372
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 372
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:55 4: client new append x 4 4 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[373],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 y
kvserver[1]: pre删除通道index: 373
kvserver[1]: begin删除通道index: 373
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 373
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[374],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 y 18 true}
kvserver[1]: pre删除通道index: 374
kvserver[1]: begin删除通道index: 374
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 374
2023/09/23 03:26:55 0: client new append x 0 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 4 y 3167394946904760106 8} 375 18 false [] 0 0}处理完成,通知index = [375]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 4 y 3167394946904760106 8} 375 18 false [] 0 0}处理完成,通知完成index = [375]的channel
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:55 2: client new append x 2 3 y
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 4 y) 2502059193987234581 9},term is 18,len is 376
---------------
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 3: client new get 3
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 9},term is 18,len is 377
---------------
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[375],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y 18 true}
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 3 y) 1111049196432932634 9},term is 18,len is 378
---------------
kvserver[1]: pre删除通道index: 375
kvserver[1]: begin删除通道index: 375
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 375
4更新log，长度375
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 4 y) 3648117293085908437 9},term is 18,len is 379
---------------
3更新log，长度375
3 return success! num is 1
nextIndex = 371, lastIndex = 0, len = 379
[4][18][0] apply index = 366, commit is 370
4:{366}unlock now
4:{366}unlock end
4:{366}lock now
4:{366}lock end
[4][18][0] apply index = 367, commit is 370
4:{367}unlock now
4:{367}unlock end
[3][18][0] apply index = 366, commit is 370
3:{366}unlock now
3:{366}unlock end
3:{366}lock now
3:{366}lock end
[3][18][0] apply index = 367, commit is 370
3:{367}unlock now
3:{367}unlock end
4 return success! num is 2
nextIndex = 371, lastIndex = 0, len = 379
1 max is 375
2 max is 375
1:commitIndex -> 375
1:rf.commitIndex = 375, rf.lastApplied = 375
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 1: client new append x 1 5 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{367}lock now
4:{367}lock end
[4][18][0] apply index = 368, commit is 370
4:{368}unlock now
4:{368}unlock end
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 5 y) 3167394946904760106 9},term is 18,len is 380
---------------
[3]append key:2, x 2 0 yx 2 1 yx 2 2 y
3:{367}lock now
3:{367}lock end
[3][18][0] apply index = 368, commit is 370
3:{368}unlock now
3:{368}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 y
4:{368}lock now
4:{368}lock end
[4][18][0] apply index = 369, commit is 370
4:{369}unlock now
4:{369}unlock end
4:{369}lock now
4:{369}lock end
[4][18][0] apply index = 370, commit is 370
4:{370}unlock now
4:{370}unlock end
3:{368}lock now
3:{368}lock end
[3][18][0] apply index = 369, commit is 370
3:{369}unlock now
3:{369}unlock end
3:{369}lock now
3:{369}lock end
[3][18][0] apply index = 370, commit is 370
3:{370}unlock now
3:{370}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 y
3:{370}lock now
3:{370}lock end
3:rf.commitIndex = 370, rf.lastApplied = 370
4:{370}lock now
4:{370}lock end
4:rf.commitIndex = 370, rf.lastApplied = 370
1 begin to append 0
prevlogindex = 375, lastIndex = 0
1 begin to append 2
prevlogindex = 375, lastIndex = 0
1 begin to append 3
prevlogindex = 375, lastIndex = 0
1 begin to append 4
prevlogindex = 375, lastIndex = 0
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 375
updateIndex = 375, lastIndex = 0
3更新log，长度380
[3][18][0] apply index = 371, commit is 375
3:{371}unlock now
3:{371}unlock end
3:{371}lock now
3:{371}lock end
[3][18][0] apply index = 372, commit is 375
3:{372}unlock now
3:{372}unlock end
3 return success! num is 1
nextIndex = 376, lastIndex = 0, len = 380
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 375
updateIndex = 375, lastIndex = 0
4更新log，长度380
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4][18][0] apply index = 371, commit is 375
4 return success! num is 2
nextIndex = 376, lastIndex = 0, len = 380
1 max is 380
2 max is 380
1:commitIndex -> 380
[1][18][0] apply index = 376, commit is 380
1:{376}unlock now
1:{376}unlock end
1:{376}lock now
1:{376}lock end
[1][18][0] apply index = 377, commit is 380
2023/09/23 03:26:55 CommandApply!!!!!!!!!
1:{377}unlock now
1:{377}unlock end
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 375
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 4 y 2502059193987234581 9} 376 18 false [] 0 0}处理完成,通知index = [376]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 4 y 2502059193987234581 9} 376 18 false [] 0 0}处理完成,通知完成index = [376]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 9} 377 18 false [] 0 0}处理完成,通知index = [377]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 9} 377 18 false [] 0 0}处理完成,通知完成index = [377]的channel
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 375
updateIndex = 375, lastIndex = 0
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
3:{372}lock now
3:{372}lock end
[3][18][0] apply index = 373, commit is 375
3:{373}unlock now
3:{373}unlock end
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[376],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y 18 true}
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[377],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 y
3:{373}lock now
3:{373}lock end
4:{371}unlock now
4:{371}unlock end
4:{371}lock now
4:{371}lock end
[4][18][0] apply index = 372, commit is 375
4:{372}unlock now
4:{372}unlock end
1:{377}lock now
1:{377}lock end
[1][18][0] apply index = 378, commit is 380
1:{378}unlock now
1:{378}unlock end
1:{378}lock now
1:{378}lock end
[1][18][0] apply index = 379, commit is 380
1:{379}unlock now
1:{379}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 2 x 2 3 y 1111049196432932634 9} 378 18 false [] 0 0}处理完成,通知index = [378]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 2 x 2 3 y 1111049196432932634 9} 378 18 false [] 0 0}处理完成,通知完成index = [378]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 0 x 0 4 y 3648117293085908437 9} 379 18 false [] 0 0}处理完成,通知index = [379]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 0 x 0 4 y 3648117293085908437 9} 379 18 false [] 0 0}处理完成,通知完成index = [379]的channel
1:{379}lock now
1:{379}lock end
[1][18][0] apply index = 380, commit is 380
1:{380}unlock now
1:{380}unlock end
1:{380}lock now
1:{380}lock end
1:rf.commitIndex = 380, rf.lastApplied = 380
updateIndex = 375, lastIndex = 0
kvserver[1]: pre删除通道index: 376
kvserver[1]: begin删除通道index: 376
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 376
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
kvserver[1]: pre删除通道index: 377
kvserver[1]: begin删除通道index: 377
[3][18][0] apply index = 374, commit is 375
3:{374}unlock now
3:{374}unlock end
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 377
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 5 y 3167394946904760106 9} 380 18 false [] 0 0}处理完成,通知index = [380]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 5 y 3167394946904760106 9} 380 18 false [] 0 0}处理完成,通知完成index = [380]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
0更新log，长度380
0 return success! num is 1
nextIndex = 376, lastIndex = 0, len = 380
3:{374}lock now
3:{374}lock end
[3][18][0] apply index = 375, commit is 375
3:{375}unlock now
3:{375}unlock end
3:{375}lock now
3:{375}lock end
3:rf.commitIndex = 375, rf.lastApplied = 375
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[379],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y 18 true}
kvserver[1]: pre删除通道index: 379
kvserver[1]: begin删除通道index: 379
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 379
[0][18][0] apply index = 371, commit is 375
0:{371}unlock now
0:{371}unlock end
0:{371}lock now
0:{371}lock end
[0][18][0] apply index = 372, commit is 375
0:{372}unlock now
0:{372}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2023/09/23 03:26:55 0: client new get 0
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
0:{372}lock now
0:{372}lock end
[0][18][0] apply index = 373, commit is 375
0:{373}unlock now
0:{373}unlock end
0:{373}lock now
0:{373}lock end
[0][18][0] apply index = 374, commit is 375
0:{374}unlock now
0:{374}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
0:{374}lock now
0:{374}lock end
[0][18][0] apply index = 375, commit is 375
0:{375}unlock now
0:{375}unlock end
0:{375}lock now
0:{375}lock end
0:rf.commitIndex = 375, rf.lastApplied = 375
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[378],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 y 18 true}
kvserver[1]: pre删除通道index: 378
kvserver[1]: begin删除通道index: 378
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 378
4:{372}lock now
4:{372}lock end
[4][18][0] apply index = 373, commit is 375
4:{373}unlock now
4:{373}unlock end
4:{373}lock now
4:{373}lock end
[4][18][0] apply index = 374, commit is 375
4:{374}unlock now
4:{374}unlock end
2023/09/23 03:26:55 4: client new append x 4 5 y
2023/09/23 03:26:55 2: client new append x 2 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 3: client new append x 3 4 y
4:{374}lock now
4:{374}lock end
[4][18][0] apply index = 375, commit is 375
4:{375}unlock now
4:{375}unlock end
4:{375}lock now
4:{375}lock end
4:rf.commitIndex = 375, rf.lastApplied = 375
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 10},term is 18,len is 381
---------------
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[380],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y 18 true}
kvserver[1]: pre删除通道index: 380
kvserver[1]: begin删除通道index: 380
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 380
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
2023/09/23 03:26:55 1: client new get 1
2更新log，长度380
[2][18][0] apply index = 371, commit is 375
2:{371}unlock now
2:{371}unlock end
2:{371}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{371}lock end
[2][18][0] apply index = 372, commit is 375
2:{372}unlock now
2:{372}unlock end
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 y
2:{372}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{372}lock end
[2][18][0] apply index = 373, commit is 375
2:{373}unlock now
2:{373}unlock end
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 y
2:{373}lock now
2:{373}lock end
[2][18][0] apply index = 374, commit is 375
2:{374}unlock now
2:{374}unlock end
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 5 y) 2502059193987234581 10},term is 18,len is 382
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 4 y) 1199091860389120805 10},term is 18,len is 383
---------------
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{374}lock now
2:{374}lock end
[2][18][0] apply index = 375, commit is 375
2:{375}unlock now
2:{375}unlock end
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{375}lock now
2:{375}lock end
2:rf.commitIndex = 375, rf.lastApplied = 375
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 y
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 4 y) 1111049196432932634 10},term is 18,len is 384
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 10},term is 18,len is 385
---------------
2 return success! num is 2
nextIndex = 376, lastIndex = 0, len = 385
1 max is 380
2 max is 380
1:commitIndex -> 380
1:rf.commitIndex = 380, rf.lastApplied = 380
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 380, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 380, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 380
updateIndex = 380, lastIndex = 0
2更新log，长度385
2 return success! num is 1
nextIndex = 381, lastIndex = 0, len = 385
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 380
updateIndex = 380, lastIndex = 0
4更新log，长度385
[2][18][0] apply index = 376, commit is 380
2:{376}unlock now
2:{376}unlock end
2:{376}lock now
2:{376}lock end
[2][18][0] apply index = 377, commit is 380
2:{377}unlock now
2:{377}unlock end
测试：3节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 380
updateIndex = 380, lastIndex = 0
3更新log，长度385
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4][18][0] apply index = 376, commit is 380
4:{376}unlock now
4:{376}unlock end
4:{376}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{376}lock end
[4][18][0] apply index = 377, commit is 380
4:{377}unlock now
4:{377}unlock end
4 return success! num is 2
nextIndex = 381, lastIndex = 0, len = 385
1 max is 385
2 max is 385
1:commitIndex -> 385
[3][18][0] apply index = 376, commit is 380
3:{376}unlock now
3:{376}unlock end
3:{376}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
3:{376}lock end
[3][18][0] apply index = 377, commit is 380
3:{377}unlock now
3:{377}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{377}lock now
4:{377}lock end
[4][18][0] apply index = 378, commit is 380
4:{378}unlock now
4:{378}unlock end
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
2:{377}lock now
2:{377}lock end
[2][18][0] apply index = 378, commit is 380
2:{378}unlock now
2:{378}unlock end
测试：0节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 380
updateIndex = 380, lastIndex = 0
0更新log，长度385
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
3:{377}lock now
3:{377}lock end
[3][18][0] apply index = 378, commit is 380
3:{378}unlock now
3:{378}unlock end
[0][18][0] apply index = 376, commit is 380
0:{376}unlock now
0:{376}unlock end
0:{376}lock now
0:{376}lock end
[0][18][0] apply index = 377, commit is 380
0:{377}unlock now
0:{377}unlock end
[1][18][0] apply index = 381, commit is 385
1:{381}unlock now
1:{381}unlock end
1:{381}lock now
1:{381}lock end
[1][18][0] apply index = 382, commit is 385
1:{382}unlock now
1:{382}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
2:{378}lock now
2:{378}lock end
[2][18][0] apply index = 379, commit is 380
2:{379}unlock now
2:{379}unlock end
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
3:{378}lock now
3:{378}lock end
[3][18][0] apply index = 379, commit is 380
3:{379}unlock now
3:{379}unlock end
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 y
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
0:{377}lock now
0:{377}lock end
[0][18][0] apply index = 378, commit is 380
0:{378}unlock now
0:{378}unlock end
4:{378}lock now
4:{378}lock end
[4][18][0] apply index = 379, commit is 380
4:{379}unlock now
4:{379}unlock end
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 10} 381 18 false [] 0 0}处理完成,通知index = [381]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 10} 381 18 false [] 0 0}处理完成,通知完成index = [381]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[381],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{379}lock now
4:{379}lock end
[4][18][0] apply index = 380, commit is 380
4:{380}unlock now
4:{380}unlock end
4:{380}lock now
4:{380}lock end
4:rf.commitIndex = 380, rf.lastApplied = 380
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
1:{382}lock now
1:{382}lock end
[1][18][0] apply index = 383, commit is 385
1:{383}unlock now
1:{383}unlock end
2:{379}lock now
2:{379}lock end
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 y
0:{378}lock now
0:{378}lock end
[0][18][0] apply index = 379, commit is 380
0:{379}unlock now
0:{379}unlock end
[2][18][0] apply index = 380, commit is 380
2:{380}unlock now
2:{380}unlock end
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
3:{379}lock now
3:{379}lock end
[3][18][0] apply index = 380, commit is 380
3:{380}unlock now
3:{380}unlock end
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 5 y 2502059193987234581 10} 382 18 false [] 0 0}处理完成,通知index = [382]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 5 y 2502059193987234581 10} 382 18 false [] 0 0}处理完成,通知完成index = [382]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[382],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y 18 true}
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{380}lock now
2:{380}lock end
2:rf.commitIndex = 380, rf.lastApplied = 380
kvserver[1]: pre删除通道index: 382
1:{383}lock now
1:{383}lock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 y
0:{379}lock now
0:{379}lock end
[0][18][0] apply index = 380, commit is 380
0:{380}unlock now
0:{380}unlock end
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
3:{380}lock now
3:{380}lock end
3:rf.commitIndex = 380, rf.lastApplied = 380
[1][18][0] apply index = 384, commit is 385
1:{384}unlock now
1:{384}unlock end
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 3 x 3 4 y 1199091860389120805 10} 383 18 false [] 0 0}处理完成,通知index = [383]的channel
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[383],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y 18 true}
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
0:{380}lock now
kvserver[1]: begin删除通道index: 382
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 382
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 3 x 3 4 y 1199091860389120805 10} 383 18 false [] 0 0}处理完成,通知完成index = [383]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 4: client new get 4
kvserver[1]: pre删除通道index: 383
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
0:{380}lock end
0:rf.commitIndex = 380, rf.lastApplied = 380
1:{384}lock now
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
kvserver[1]: pre删除通道index: 381
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 11},term is 18,len is 386
---------------
1:{384}lock end
[1][18][0] apply index = 385, commit is 385
1:{385}unlock now
1:{385}unlock end
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 2 x 2 4 y 1111049196432932634 10} 384 18 false [] 0 0}处理完成,通知index = [384]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 2 x 2 4 y 1111049196432932634 10} 384 18 false [] 0 0}处理完成,通知完成index = [384]的channel
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[384],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y 18 true}
1:{385}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
1:{385}lock end
kvserver[1]: begin删除通道index: 383
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 383
kvserver[1]: pre删除通道index: 384
1:rf.commitIndex = 385, rf.lastApplied = 385
kvserver[1]: begin删除通道index: 381
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 381
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 3: client new get 3
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 10} 385 18 false [] 0 0}处理完成,通知index = [385]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 10} 385 18 false [] 0 0}处理完成,通知完成index = [385]的channel
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 0: client new get 0
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[385],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
kvserver[1]: pre删除通道index: 385
kvserver[1]: begin删除通道index: 385
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 385
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 11},term is 18,len is 387
---------------
kvserver[1]: begin删除通道index: 384
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 384
OK:i num is 3, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 1: client new get 1
2023/09/23 03:26:55 2: client new get 2
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 11},term is 18,len is 388
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 11},term is 18,len is 389
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 11},term is 18,len is 390
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 385, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 385
updateIndex = 385, lastIndex = 0
2更新log，长度390
[2][18][0] apply index = 381, commit is 385
2:{381}unlock now
2:{381}unlock end
2:{381}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{381}lock end
[2][18][0] apply index = 382, commit is 385
2:{382}unlock now
2:{382}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{382}lock now
2:{382}lock end
[2][18][0] apply index = 383, commit is 385
2:{383}unlock now
2:{383}unlock end
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{383}lock now
2:{383}lock end
[2][18][0] apply index = 384, commit is 385
2:{384}unlock now
2:{384}unlock end
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{384}lock now
2:{384}lock end
[2][18][0] apply index = 385, commit is 385
2:{385}unlock now
2:{385}unlock end
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{385}lock now
2:{385}lock end
2:rf.commitIndex = 385, rf.lastApplied = 385
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
1 begin to append 4
prevlogindex = 385, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 385
updateIndex = 385, lastIndex = 0
2 return success! num is 1
nextIndex = 386, lastIndex = 0, len = 390
4更新log，长度390
[4][18][0] apply index = 381, commit is 385
4:{381}unlock now
4:{381}unlock end
4:{381}lock now
4:{381}lock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4][18][0] apply index = 382, commit is 385
4 return success! num is 2
nextIndex = 386, lastIndex = 0, len = 390
1 max is 390
2 max is 390
1:commitIndex -> 390
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
[1][18][0] apply index = 386, commit is 390
1:{386}unlock now
1:{386}unlock end
1:{386}lock now
1:{386}lock end
[1][18][0] apply index = 387, commit is 390
1:{387}unlock now
1:{387}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 11} 386 18 false [] 0 0}处理完成,通知index = [386]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 11} 386 18 false [] 0 0}处理完成,通知完成index = [386]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 11} 387 18 false [] 0 0}处理完成,通知index = [387]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 11} 387 18 false [] 0 0}处理完成,通知完成index = [387]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[387],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
kvserver[1]: pre删除通道index: 387
kvserver[1]: begin删除通道index: 387
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 387
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:55 3: client new append x 3 5 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[386],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
kvserver[1]: pre删除通道index: 386
kvserver[1]: begin删除通道index: 386
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 386
1:{387}lock now
1:{387}lock end
[1][18][0] apply index = 388, commit is 390
1:{388}unlock now
1:{388}unlock end
1:{388}lock now
1:{388}lock end
[1][18][0] apply index = 389, commit is 390
1:{389}unlock now
1:{389}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 11} 388 18 false [] 0 0}处理完成,通知index = [388]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 11} 388 18 false [] 0 0}处理完成,通知完成index = [388]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 11} 389 18 false [] 0 0}处理完成,通知index = [389]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 11} 389 18 false [] 0 0}处理完成,通知完成index = [389]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[389],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
kvserver[1]: pre删除通道index: 389
kvserver[1]: begin删除通道index: 389
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 389
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 5 y) 1199091860389120805 12},term is 18,len is 391
---------------
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:55 4: client new append x 4 6 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[388],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
kvserver[1]: pre删除通道index: 388
kvserver[1]: begin删除通道index: 388
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 388
1:{389}lock now
1:{389}lock end
[1][18][0] apply index = 390, commit is 390
1:{390}unlock now
1:{390}unlock end
1:{390}lock now
1:{390}lock end
1:rf.commitIndex = 390, rf.lastApplied = 390
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 6 y) 2502059193987234581 12},term is 18,len is 392
---------------
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{382}unlock now
4:{382}unlock end
4:{382}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{382}lock end
[4][18][0] apply index = 383, commit is 385
4:{383}unlock now
4:{383}unlock end
OK:i num is 3, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 1: client new append x 1 6 y
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
4:{383}lock now
4:{383}lock end
[4][18][0] apply index = 384, commit is 385
4:{384}unlock now
4:{384}unlock end
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 11} 390 18 false [] 0 0}处理完成,通知index = [390]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 11} 390 18 false [] 0 0}处理完成,通知完成index = [390]的channel
2023/09/23 03:26:55 0: client new append x 0 5 y
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 6 y) 3167394946904760106 12},term is 18,len is 393
---------------
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[390],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
4:{384}lock now
4:{384}lock end
[4][18][0] apply index = 385, commit is 385
4:{385}unlock now
4:{385}unlock end
4:{385}lock now
4:{385}lock end
4:rf.commitIndex = 385, rf.lastApplied = 385
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
kvserver[1]: pre删除通道index: 390
kvserver[1]: begin删除通道index: 390
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 390
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2023/09/23 03:26:55 2: client new get 2
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 5 y) 3648117293085908437 12},term is 18,len is 394
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 12},term is 18,len is 395
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 390, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 390, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 390
updateIndex = 390, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 390
updateIndex = 390, lastIndex = 0
4更新log，长度395
[4][18][0] apply index = 386, commit is 390
4:{386}unlock now
4:{386}unlock end
4:{386}lock now
4 return success! num is 1
nextIndex = 391, lastIndex = 0, len = 395
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
4:{386}lock end
[4][18][0] apply index = 387, commit is 390
4:{387}unlock now
4:{387}unlock end
4:{387}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{387}lock end
[4][18][0] apply index = 388, commit is 390
4:{388}unlock now
4:{388}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{388}lock now
4:{388}lock end
[4][18][0] apply index = 389, commit is 390
4:{389}unlock now
4:{389}unlock end
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{389}lock now
4:{389}lock end
[4][18][0] apply index = 390, commit is 390
4:{390}unlock now
4:{390}unlock end
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{390}lock now
4:{390}lock end
4:rf.commitIndex = 390, rf.lastApplied = 390
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2更新log，长度395
[2][18][0] apply index = 386, commit is 390
2:{386}unlock now
2:{386}unlock end
2 return success! num is 2
nextIndex = 391, lastIndex = 0, len = 395
1 max is 395
2 max is 395
1:commitIndex -> 395
[1][18][0] apply index = 391, commit is 395
1:{391}unlock now
1:{391}unlock end
1:{391}lock now
1:{391}lock end
[1][18][0] apply index = 392, commit is 395
1:{392}unlock now
1:{392}unlock end
2:{386}lock now
2:{386}lock end
[2][18][0] apply index = 387, commit is 390
2:{387}unlock now
2:{387}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 3 x 3 5 y 1199091860389120805 12} 391 18 false [] 0 0}处理完成,通知index = [391]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 3 x 3 5 y 1199091860389120805 12} 391 18 false [] 0 0}处理完成,通知完成index = [391]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 6 y 2502059193987234581 12} 392 18 false [] 0 0}处理完成,通知index = [392]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 6 y 2502059193987234581 12} 392 18 false [] 0 0}处理完成,通知完成index = [392]的channel
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[392],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y 18 true}
kvserver[1]: pre删除通道index: 392
kvserver[1]: begin删除通道index: 392
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 392
2023/09/23 03:26:55 4: client new append x 4 7 y
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[391],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y 18 true}
kvserver[1]: pre删除通道index: 391
kvserver[1]: begin删除通道index: 391
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 391
1:{392}lock now
1:{392}lock end
[1][18][0] apply index = 393, commit is 395
1:{393}unlock now
1:{393}unlock end
1:{393}lock now
1:{393}lock end
[1][18][0] apply index = 394, commit is 395
1:{394}unlock now
1:{394}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 6 y 3167394946904760106 12} 393 18 false [] 0 0}处理完成,通知index = [393]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 6 y 3167394946904760106 12} 393 18 false [] 0 0}处理完成,通知完成index = [393]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 0 x 0 5 y 3648117293085908437 12} 394 18 false [] 0 0}处理完成,通知index = [394]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 0 x 0 5 y 3648117293085908437 12} 394 18 false [] 0 0}处理完成,通知完成index = [394]的channel
1:{394}lock now
1:{394}lock end
[1][18][0] apply index = 395, commit is 395
1:{395}unlock now
1:{395}unlock end
1:{395}lock now
1:{395}lock end
1:rf.commitIndex = 395, rf.lastApplied = 395
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 12} 395 18 false [] 0 0}处理完成,通知index = [395]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 12} 395 18 false [] 0 0}处理完成,通知完成index = [395]的channel
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[393],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y 18 true}
kvserver[1]: pre删除通道index: 393
kvserver[1]: begin删除通道index: 393
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 393
2023/09/23 03:26:55 3: client new get 3
2023/09/23 03:26:55 1: client new append x 1 7 y
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[394],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y 18 true}
kvserver[1]: pre删除通道index: 394
kvserver[1]: begin删除通道index: 394
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 394
2023/09/23 03:26:55 0: client new get 0
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[395],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
kvserver[1]: pre删除通道index: 395
kvserver[1]: begin删除通道index: 395
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 395
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 2: client new get 2
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 7 y) 2502059193987234581 13},term is 18,len is 396
---------------
2:{387}lock now
2:{387}lock end
[2][18][0] apply index = 388, commit is 390
2:{388}unlock now
2:{388}unlock end
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{388}lock now
2:{388}lock end
[2][18][0] apply index = 389, commit is 390
2:{389}unlock now
2:{389}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{389}lock now
2:{389}lock end
[2][18][0] apply index = 390, commit is 390
2:{390}unlock now
2:{390}unlock end
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{390}lock now
2:{390}lock end
2:rf.commitIndex = 390, rf.lastApplied = 390
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 13},term is 18,len is 397
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 7 y) 3167394946904760106 13},term is 18,len is 398
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 13},term is 18,len is 399
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 13},term is 18,len is 400
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 395, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 395, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 395
updateIndex = 395, lastIndex = 0
4更新log，长度400
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 395
updateIndex = 395, lastIndex = 0
[4][18][0] apply index = 391, commit is 395
4:{391}unlock now
4:{391}unlock end
4:{391}lock now
4:{391}lock end
[4][18][0] apply index = 392, commit is 395
4:{392}unlock now
4:{392}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
4:{392}lock now
4:{392}lock end
[4][18][0] apply index = 393, commit is 395
4:{393}unlock now
4:{393}unlock end
4:{393}lock now
4:{393}lock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4][18][0] apply index = 394, commit is 395
4:{394}unlock now
4:{394}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
4 return success! num is 1
nextIndex = 396, lastIndex = 0, len = 400
4:{394}lock now
4:{394}lock end
[4][18][0] apply index = 395, commit is 395
4:{395}unlock now
4:{395}unlock end
4:{395}lock now
4:{395}lock end
4:rf.commitIndex = 395, rf.lastApplied = 395
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2更新log，长度400
[2][18][0] apply index = 391, commit is 395
2:{391}unlock now
2:{391}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2:{391}lock now
2:{391}lock end
[2][18][0] apply index = 392, commit is 395
2:{392}unlock now
2:{392}unlock end
2 return success! num is 2
nextIndex = 396, lastIndex = 0, len = 400
1 max is 400
2 max is 400
2023/09/23 03:26:55 CommandApply!!!!!!!!!
1:commitIndex -> 400
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
[1][18][0] apply index = 396, commit is 400
1:{396}unlock now
1:{396}unlock end
1:{396}lock now
1:{396}lock end
[1][18][0] apply index = 397, commit is 400
1:{397}unlock now
1:{397}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 7 y 2502059193987234581 13} 396 18 false [] 0 0}处理完成,通知index = [396]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 7 y 2502059193987234581 13} 396 18 false [] 0 0}处理完成,通知完成index = [396]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 13} 397 18 false [] 0 0}处理完成,通知index = [397]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 13} 397 18 false [] 0 0}处理完成,通知完成index = [397]的channel
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[396],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y 18 true}
kvserver[1]: pre删除通道index: 396
kvserver[1]: begin删除通道index: 396
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 396
1:{397}lock now
1:{397}lock end
[1][18][0] apply index = 398, commit is 400
1:{398}unlock now
1:{398}unlock end
1:{398}lock now
1:{398}lock end
[1][18][0] apply index = 399, commit is 400
1:{399}unlock now
1:{399}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 7 y 3167394946904760106 13} 398 18 false [] 0 0}处理完成,通知index = [398]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 7 y 3167394946904760106 13} 398 18 false [] 0 0}处理完成,通知完成index = [398]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 13} 399 18 false [] 0 0}处理完成,通知index = [399]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 13} 399 18 false [] 0 0}处理完成,通知完成index = [399]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[399],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
kvserver[1]: pre删除通道index: 399
kvserver[1]: begin删除通道index: 399
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 399
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[397],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
kvserver[1]: pre删除通道index: 397
kvserver[1]: begin删除通道index: 397
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 397
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[398],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y 18 true}
kvserver[1]: pre删除通道index: 398
kvserver[1]: begin删除通道index: 398
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 398
1:{399}lock now
1:{399}lock end
[1][18][0] apply index = 400, commit is 400
1:{400}unlock now
1:{400}unlock end
1:{400}lock now
1:{400}lock end
1:rf.commitIndex = 400, rf.lastApplied = 400
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 13} 400 18 false [] 0 0}处理完成,通知index = [400]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 13} 400 18 false [] 0 0}处理完成,通知完成index = [400]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[400],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
kvserver[1]: pre删除通道index: 400
kvserver[1]: begin删除通道index: 400
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 400
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 2: client new get 2
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:55 0: client new get 0
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 3: client new get 3
2023/09/23 03:26:55 4: client new get 4
2023/09/23 03:26:55 1: client new get 1
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 14},term is 18,len is 401
---------------
2:{392}lock now
2:{392}lock end
[2][18][0] apply index = 393, commit is 395
2:{393}unlock now
2:{393}unlock end
2:{393}lock now
2:{393}lock end
[2][18][0] apply index = 394, commit is 395
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{394}unlock now
2:{394}unlock end
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2:{394}lock now
2:{394}lock end
[2][18][0] apply index = 395, commit is 395
2:{395}unlock now
2:{395}unlock end
2:{395}lock now
2:{395}lock end
2:rf.commitIndex = 395, rf.lastApplied = 395
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 14},term is 18,len is 402
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 14},term is 18,len is 403
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 14},term is 18,len is 404
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 14},term is 18,len is 405
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 400, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 400, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 400
updateIndex = 400, lastIndex = 0
2更新log，长度405
[2][18][0] apply index = 396, commit is 400
2:{396}unlock now
2:{396}unlock end
2:{396}lock now
2:{396}lock end
[2][18][0] apply index = 397, commit is 400
2:{397}unlock now
2:{397}unlock end
2 return success! num is 1
nextIndex = 401, lastIndex = 0, len = 405
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2:{397}lock now
2:{397}lock end
[2][18][0] apply index = 398, commit is 400
2:{398}unlock now
2:{398}unlock end
2:{398}lock now
2:{398}lock end
[2][18][0] apply index = 399, commit is 400
2:{399}unlock now
2:{399}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2:{399}lock now
2:{399}lock end
[2][18][0] apply index = 400, commit is 400
2:{400}unlock now
2:{400}unlock end
2:{400}lock now
2:{400}lock end
2:rf.commitIndex = 400, rf.lastApplied = 400
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 400
updateIndex = 400, lastIndex = 0
4更新log，长度405
[4][18][0] apply index = 396, commit is 400
4:{396}unlock now
4:{396}unlock end
4:{396}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{396}lock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
[4][18][0] apply index = 397, commit is 400
4:{397}unlock now
4:{397}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
4:{397}lock now
4:{397}lock end
[4][18][0] apply index = 398, commit is 400
4:{398}unlock now
4:{398}unlock end
4:{398}lock now
4:{398}lock end
[4][18][0] apply index = 399, commit is 400
4:{399}unlock now
4:{399}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
4:{399}lock now
4:{399}lock end
[4][18][0] apply index = 400, commit is 400
4:{400}unlock now
4:{400}unlock end
4:{400}lock now
4:{400}lock end
4:rf.commitIndex = 400, rf.lastApplied = 400
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
4 return success! num is 2
nextIndex = 401, lastIndex = 0, len = 405
1 max is 405
2 max is 405
1:commitIndex -> 405
[1][18][0] apply index = 401, commit is 405
1:{401}unlock now
1:{401}unlock end
1:{401}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
1:{401}lock end
[1][18][0] apply index = 402, commit is 405
1:{402}unlock now
1:{402}unlock end
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 14} 401 18 false [] 0 0}处理完成,通知index = [401]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[401],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
kvserver[1]: pre删除通道index: 401
kvserver[1]: begin删除通道index: 401
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 401
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 2: client new get 2
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 15},term is 18,len is 406
---------------
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 14} 401 18 false [] 0 0}处理完成,通知完成index = [401]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
1:{402}lock now
1:{402}lock end
[1][18][0] apply index = 403, commit is 405
1:{403}unlock now
1:{403}unlock end
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 14} 402 18 false [] 0 0}处理完成,通知index = [402]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 14} 402 18 false [] 0 0}处理完成,通知完成index = [402]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
1:{403}lock now
1:{403}lock end
[1][18][0] apply index = 404, commit is 405
1:{404}unlock now
1:{404}unlock end
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[402],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 14} 403 18 false [] 0 0}处理完成,通知index = [403]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 14} 403 18 false [] 0 0}处理完成,通知完成index = [403]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
kvserver[1]: pre删除通道index: 402
kvserver[1]: begin删除通道index: 402
1:{404}lock now
1:{404}lock end
[1][18][0] apply index = 405, commit is 405
1:{405}unlock now
1:{405}unlock end
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[403],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 402
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 3: client new get 3
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 14} 404 18 false [] 0 0}处理完成,通知index = [404]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 14} 404 18 false [] 0 0}处理完成,通知完成index = [404]的channel
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[404],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
kvserver[1]: pre删除通道index: 403
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
kvserver[1]: pre删除通道index: 404
1:{405}lock now
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 15},term is 18,len is 407
---------------
1:{405}lock end
1:rf.commitIndex = 405, rf.lastApplied = 405
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 14} 405 18 false [] 0 0}处理完成,通知index = [405]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 14} 405 18 false [] 0 0}处理完成,通知完成index = [405]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[405],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
kvserver[1]: begin删除通道index: 403
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 403
kvserver[1]: begin删除通道index: 404
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:55 4: client new append x 4 8 y
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 404
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
kvserver[1]: pre删除通道index: 405
kvserver[1]: begin删除通道index: 405
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 405
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 8 y) 2502059193987234581 15},term is 18,len is 408
---------------
OK:i num is 3, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:55 1: client new append x 1 8 y
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:55 0: client new get 0
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 15},term is 18,len is 409
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 8 y) 3167394946904760106 15},term is 18,len is 410
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 405, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 405, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 405
updateIndex = 405, lastIndex = 0
2更新log，长度410
[2][18][0] apply index = 401, commit is 405
2:{401}unlock now
2:{401}unlock end
2:{401}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{401}lock end
[2][18][0] apply index = 402, commit is 405
2:{402}unlock now
2:{402}unlock end
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{402}lock now
2:{402}lock end
[2][18][0] apply index = 403, commit is 405
2:{403}unlock now
2:{403}unlock end
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2:{403}lock now
2:{403}lock end
[2][18][0] apply index = 404, commit is 405
2:{404}unlock now
2:{404}unlock end
2:{404}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{404}lock end
[2][18][0] apply index = 405, commit is 405
2:{405}unlock now
2:{405}unlock end
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{405}lock now
2:{405}lock end
2:rf.commitIndex = 405, rf.lastApplied = 405
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 405
updateIndex = 405, lastIndex = 0
2 return success! num is 1
nextIndex = 406, lastIndex = 0, len = 410
4更新log，长度410
4 return success! num is 2
nextIndex = 406, lastIndex = 0, len = 410
1 max is 410
2 max is 410
1:commitIndex -> 410
[1][18][0] apply index = 406, commit is 410
1:{406}unlock now
1:{406}unlock end
1:{406}lock now
2023/09/23 03:26:55 CommandApply!!!!!!!!!
1:{406}lock end
[1][18][0] apply index = 407, commit is 410
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
1:{407}unlock now
1:{407}unlock end
[4][18][0] apply index = 401, commit is 405
4:{401}unlock now
4:{401}unlock end
4:{401}lock now
4:{401}lock end
[4][18][0] apply index = 402, commit is 405
4:{402}unlock now
4:{402}unlock end
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 15} 406 18 false [] 0 0}处理完成,通知index = [406]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 15} 406 18 false [] 0 0}处理完成,通知完成index = [406]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 15} 407 18 false [] 0 0}处理完成,通知index = [407]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 15} 407 18 false [] 0 0}处理完成,通知完成index = [407]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[407],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
kvserver[1]: pre删除通道index: 407
kvserver[1]: begin删除通道index: 407
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 407
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[406],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
kvserver[1]: pre删除通道index: 406
kvserver[1]: begin删除通道index: 406
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 406
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 2: client new get 2
1:{407}lock now
1:{407}lock end
[1][18][0] apply index = 408, commit is 410
1:{408}unlock now
1:{408}unlock end
1:{408}lock now
1:{408}lock end
[1][18][0] apply index = 409, commit is 410
1:{409}unlock now
1:{409}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 8 y 2502059193987234581 15} 408 18 false [] 0 0}处理完成,通知index = [408]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 8 y 2502059193987234581 15} 408 18 false [] 0 0}处理完成,通知完成index = [408]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 15} 409 18 false [] 0 0}处理完成,通知index = [409]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 15} 409 18 false [] 0 0}处理完成,通知完成index = [409]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[409],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
kvserver[1]: pre删除通道index: 409
kvserver[1]: begin删除通道index: 409
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 409
4:{402}lock now
4:{402}lock end
[4][18][0] apply index = 403, commit is 405
4:{403}unlock now
4:{403}unlock end
4:{403}lock now
4:{403}lock end
[4][18][0] apply index = 404, commit is 405
4:{404}unlock now
4:{404}unlock end
1:{409}lock now
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[408],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y 18 true}
kvserver[1]: pre删除通道index: 408
kvserver[1]: begin删除通道index: 408
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 408
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:55 0: client new append x 0 6 y
2023/09/23 03:26:55 4: client new get 4
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 3: client new get 3
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
4:{404}lock now
4:{404}lock end
[4][18][0] apply index = 405, commit is 405
4:{405}unlock now
4:{405}unlock end
4:{405}lock now
4:{405}lock end
4:rf.commitIndex = 405, rf.lastApplied = 405
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 16},term is 18,len is 411
---------------
1:{409}lock end
[1][18][0] apply index = 410, commit is 410
1:{410}unlock now
1:{410}unlock end
1:{410}lock now
1:{410}lock end
1:rf.commitIndex = 410, rf.lastApplied = 410
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 6 y) 3648117293085908437 16},term is 18,len is 412
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 16},term is 18,len is 413
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 16},term is 18,len is 414
---------------
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 8 y 3167394946904760106 15} 410 18 false [] 0 0}处理完成,通知index = [410]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 1 x 1 8 y 3167394946904760106 15} 410 18 false [] 0 0}处理完成,通知完成index = [410]的channel
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[410],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y 18 true}
kvserver[1]: pre删除通道index: 410
kvserver[1]: begin删除通道index: 410
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 410
2023/09/23 03:26:55 1: client new get 1
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 16},term is 18,len is 415
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 410, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 410, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 410
updateIndex = 410, lastIndex = 0
4更新log，长度415
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 410
updateIndex = 410, lastIndex = 0
[4][18][0] apply index = 406, commit is 410
4:{406}unlock now
4:{406}unlock end
4:{406}lock now
4:{406}lock end
[4][18][0] apply index = 407, commit is 410
4:{407}unlock now
4:{407}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
4:{407}lock now
4:{407}lock end
[4][18][0] apply index = 408, commit is 410
4:{408}unlock now
4:{408}unlock end
4:{408}lock now
4:{408}lock end
[4][18][0] apply index = 409, commit is 410
4:{409}unlock now
4:{409}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
4:{409}lock now
4:{409}lock end
[4][18][0] apply index = 410, commit is 410
4:{410}unlock now
4:{410}unlock end
4:{410}lock now
4:{410}lock end
4:rf.commitIndex = 410, rf.lastApplied = 410
4 return success! num is 1
nextIndex = 411, lastIndex = 0, len = 415
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2更新log，长度415
[2][18][0] apply index = 406, commit is 410
2:{406}unlock now
2:{406}unlock end
2:{406}lock now
2:{406}lock end
[2][18][0] apply index = 407, commit is 410
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{407}unlock now
2:{407}unlock end
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2:{407}lock now
2:{407}lock end
[2][18][0] apply index = 408, commit is 410
2:{408}unlock now
2:{408}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2:{408}lock now
2:{408}lock end
[2][18][0] apply index = 409, commit is 410
2:{409}unlock now
2:{409}unlock end
2:{409}lock now
2:{409}lock end
[2][18][0] apply index = 410, commit is 410
2023/09/23 03:26:55 CommandApply!!!!!!!!!
2:{410}unlock now
2:{410}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2:{410}lock now
2:{410}lock end
2:rf.commitIndex = 410, rf.lastApplied = 410
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2 return success! num is 2
nextIndex = 411, lastIndex = 0, len = 415
1 max is 415
2 max is 415
1:commitIndex -> 415
[1][18][0] apply index = 411, commit is 415
1:{411}unlock now
1:{411}unlock end
1:{411}lock now
1:{411}lock end
[1][18][0] apply index = 412, commit is 415
2023/09/23 03:26:55 CommandApply!!!!!!!!!
1:{412}unlock now
1:{412}unlock end
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 16} 411 18 false [] 0 0}处理完成,通知index = [411]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 16} 411 18 false [] 0 0}处理完成,通知完成index = [411]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[411],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
1:{412}lock now
1:{412}lock end
[1][18][0] apply index = 413, commit is 415
1:{413}unlock now
1:{413}unlock end
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 0 x 0 6 y 3648117293085908437 16} 412 18 false [] 0 0}处理完成,通知index = [412]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 0 x 0 6 y 3648117293085908437 16} 412 18 false [] 0 0}处理完成,通知完成index = [412]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[412],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y 18 true}
1:{413}lock now
1:{413}lock end
[1][18][0] apply index = 414, commit is 415
1:{414}unlock now
kvserver[1]: pre删除通道index: 412
1:{414}unlock end
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 16} 413 18 false [] 0 0}处理完成,通知index = [413]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 16} 413 18 false [] 0 0}处理完成,通知完成index = [413]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[413],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 16} 414 18 false [] 0 0}处理完成,通知index = [414]的channel
1:{414}lock now
1:{414}lock end
[1][18][0] apply index = 415, commit is 415
1:{415}unlock now
1:{415}unlock end
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 16} 414 18 false [] 0 0}处理完成,通知完成index = [414]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
kvserver[1]: pre删除通道index: 411
kvserver[1]: begin删除通道index: 411
1:{415}lock now
1:{415}lock end
1:rf.commitIndex = 415, rf.lastApplied = 415
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 411
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
kvserver[1]: pre删除通道index: 413
kvserver[1]: begin删除通道index: 413
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 413
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[414],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
kvserver[1]: pre删除通道index: 414
kvserver[1]: begin删除通道index: 414
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 414
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 3: client new get 3
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:55 2: client new append x 2 5 y
kvserver[1]: begin删除通道index: 412
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 412
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:55 4: client new append x 4 9 y
2023/09/23 03:26:55 0: client new get 0
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 5 y) 1111049196432932634 17},term is 18,len is 416
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 9 y) 2502059193987234581 17},term is 18,len is 417
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 17},term is 18,len is 418
---------------
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 17},term is 18,len is 419
---------------
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 16} 415 18 false [] 0 0}处理完成,通知index = [415]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 16} 415 18 false [] 0 0}处理完成,通知完成index = [415]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[415],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
kvserver[1]: pre删除通道index: 415
kvserver[1]: begin删除通道index: 415
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 415
OK:i num is 3, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:55 1: client new get 1
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 17},term is 18,len is 420
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 415, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 415, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 415
updateIndex = 415, lastIndex = 0
2更新log，长度420
[2][18][0] apply index = 411, commit is 415
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 415
2 return success! num is 1
nextIndex = 416, lastIndex = 0, len = 420
updateIndex = 415, lastIndex = 0
4更新log，长度420
[4][18][0] apply index = 411, commit is 415
4:{411}unlock now
4 return success! num is 2
nextIndex = 416, lastIndex = 0, len = 420
1 max is 420
2 max is 420
1:commitIndex -> 420
[1][18][0] apply index = 416, commit is 420
1:{416}unlock now
1:{416}unlock end
1:{416}lock now
1:{416}lock end
[1][18][0] apply index = 417, commit is 420
1:{417}unlock now
1:{417}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 2 x 2 5 y 1111049196432932634 17} 416 18 false [] 0 0}处理完成,通知index = [416]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 2 x 2 5 y 1111049196432932634 17} 416 18 false [] 0 0}处理完成,通知完成index = [416]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 9 y 2502059193987234581 17} 417 18 false [] 0 0}处理完成,通知index = [417]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Append 4 x 4 9 y 2502059193987234581 17} 417 18 false [] 0 0}处理完成,通知完成index = [417]的channel
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[417],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y 18 true}
kvserver[1]: pre删除通道index: 417
kvserver[1]: begin删除通道index: 417
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 417
2023/09/23 03:26:55 4: client new get 4
2023/09/23 03:26:55 kvserver[1]: PUTAPPEND获取到通知结果,index=[416],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y 18 true}
kvserver[1]: pre删除通道index: 416
kvserver[1]: begin删除通道index: 416
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 416
1:{417}lock now
1:{417}lock end
[1][18][0] apply index = 418, commit is 420
1:{418}unlock now
1:{418}unlock end
1:{418}lock now
1:{418}lock end
[1][18][0] apply index = 419, commit is 420
1:{419}unlock now
1:{419}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 17} 418 18 false [] 0 0}处理完成,通知index = [418]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 17} 418 18 false [] 0 0}处理完成,通知完成index = [418]的channel
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 17} 419 18 false [] 0 0}处理完成,通知index = [419]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 17} 419 18 false [] 0 0}处理完成,通知完成index = [419]的channel
1:{419}lock now
1:{419}lock end
[1][18][0] apply index = 420, commit is 420
1:{420}unlock now
1:{420}unlock end
1:{420}lock now
1:{420}lock end
1:rf.commitIndex = 420, rf.lastApplied = 420
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[418],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
kvserver[1]: pre删除通道index: 418
kvserver[1]: begin删除通道index: 418
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 418
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:55 0: client new append x 0 7 y
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[419],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
kvserver[1]: pre删除通道index: 419
kvserver[1]: begin删除通道index: 419
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 419
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:55 3: client new append x 3 6 y
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 17} 420 18 false [] 0 0}处理完成,通知index = [420]的channel
2023/09/23 03:26:55 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 17} 420 18 false [] 0 0}处理完成,通知完成index = [420]的channel
2023/09/23 03:26:55 kvserver[1]: GET获取到通知结果,index=[420],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
kvserver[1]: pre删除通道index: 420
kvserver[1]: begin删除通道index: 420
2023/09/23 03:26:55 kvserver[1]: 成功删除通道index: 420
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 18},term is 18,len is 421
---------------
4:{411}unlock end
2023/09/23 03:26:55 2: client new append x 2 6 y
4:{411}lock now
4:{411}lock end
[4][18][0] apply index = 412, commit is 415
2023/09/23 03:26:55 CommandApply!!!!!!!!!
4:{412}unlock now
4:{412}unlock end
OK:i num is 3, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:55 1: client new get 1
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 6 y) 1199091860389120805 18},term is 18,len is 422
---------------
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2:{411}unlock now
2:{411}unlock end
2:{411}lock now
2:{411}lock end
[2][18][0] apply index = 412, commit is 415
2:{412}unlock now
2:{412}unlock end
4:{412}lock now
4:{412}lock end
[4][18][0] apply index = 413, commit is 415
4:{413}unlock now
4:{413}unlock end
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 7 y) 3648117293085908437 18},term is 18,len is 423
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 6 y) 1111049196432932634 18},term is 18,len is 424
---------------
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
4:{413}lock now
4:{413}lock end
[4][18][0] apply index = 414, commit is 415
4:{414}unlock now
4:{414}unlock end
2023/09/23 03:26:55 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2:{412}lock now
2023/09/23 03:26:56 CommandApply!!!!!!!!!
2:{412}lock end
[2][18][0] apply index = 413, commit is 415
2:{413}unlock now
2:{413}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
4:{414}lock now
4:{414}lock end
[4][18][0] apply index = 415, commit is 415
4:{415}unlock now
4:{415}unlock end
4:{415}lock now
2023/09/23 03:26:56 CommandApply!!!!!!!!!
4:{415}lock end
4:rf.commitIndex = 415, rf.lastApplied = 415
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2:{413}lock now
2:{413}lock end
[2][18][0] apply index = 414, commit is 415
2:{414}unlock now
2:{414}unlock end
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
2:{414}lock now
2:{414}lock end
[2][18][0] apply index = 415, commit is 415
2:{415}unlock now
2:{415}unlock end
3 follow -> candidate
3 begin to elect
3 term is 19
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2:{415}lock now
2:{415}lock end
2:rf.commitIndex = 415, rf.lastApplied = 415
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
0:投票检查385,385,18,18,19,18
0 vote now -> 3
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 18},term is 18,len is 425
---------------
3: vote num is 2
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 420, lastIndex = 0
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 420
updateIndex = 420, lastIndex = 0
2更新log，长度425
[2][18][0] apply index = 416, commit is 420
2:{416}unlock now
2:{416}unlock end
2:{416}lock now
2023/09/23 03:26:56 CommandApply!!!!!!!!!
2:{416}lock end
[2][18][0] apply index = 417, commit is 420
2:{417}unlock now
2:{417}unlock end
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
2:{417}lock now
2:{417}lock end
[2][18][0] apply index = 418, commit is 420
2:{418}unlock now
2:{418}unlock end
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
2:{418}lock now
2:{418}lock end
[2][18][0] apply index = 419, commit is 420
2:{419}unlock now
2:{419}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
2:{419}lock now
2:{419}lock end
[2][18][0] apply index = 420, commit is 420
2:{420}unlock now
2:{420}unlock end
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
2:{420}lock now
2:{420}lock end
2:rf.commitIndex = 420, rf.lastApplied = 420
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 420, lastIndex = 0
2 return success! num is 1
nextIndex = 421, lastIndex = 0, len = 425
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 420
updateIndex = 420, lastIndex = 0
4更新log，长度425
[4][18][0] apply index = 416, commit is 420
4:{416}unlock now
4:{416}unlock end
4:{416}lock now
4:{416}lock end
[4][18][0] apply index = 417, commit is 420
4:{417}unlock now
4:{417}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
4:{417}lock now
4:{417}lock end
[4][18][0] apply index = 418, commit is 420
4:{418}unlock now
4:{418}unlock end
4:{418}lock now
4:{418}lock end
[4][18][0] apply index = 419, commit is 420
4:{419}unlock now
4:{419}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
4:{419}lock now
4:{419}lock end
[4][18][0] apply index = 420, commit is 420
4:{420}unlock now
4:{420}unlock end
4:{420}lock now
4:{420}lock end
4:rf.commitIndex = 420, rf.lastApplied = 420
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
4 return success! num is 2
nextIndex = 421, lastIndex = 0, len = 425
1 max is 425
2 max is 425
1:commitIndex -> 425
[1][18][0] apply index = 421, commit is 425
1:{421}unlock now
1:{421}unlock end
1:{421}lock now
2023/09/23 03:26:56 CommandApply!!!!!!!!!
1:{421}lock end
[1][18][0] apply index = 422, commit is 425
1:{422}unlock now
1:{422}unlock end
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 18} 421 18 false [] 0 0}处理完成,通知index = [421]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 18} 421 18 false [] 0 0}处理完成,通知完成index = [421]的channel
2023/09/23 03:26:56 CommandApply!!!!!!!!!
1:{422}lock now
1:{422}lock end
[1][18][0] apply index = 423, commit is 425
1:{423}unlock now
1:{423}unlock end
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:56 kvserver[1]: GET获取到通知结果,index=[421],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 3 x 3 6 y 1199091860389120805 18} 422 18 false [] 0 0}处理完成,通知index = [422]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 3 x 3 6 y 1199091860389120805 18} 422 18 false [] 0 0}处理完成,通知完成index = [422]的channel
2023/09/23 03:26:56 CommandApply!!!!!!!!!
1:{423}lock now
1:{423}lock end
[1][18][0] apply index = 424, commit is 425
1:{424}unlock now
1:{424}unlock end
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
kvserver[1]: pre删除通道index: 421
kvserver[1]: begin删除通道index: 421
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND获取到通知结果,index=[422],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y 18 true}
kvserver[1]: pre删除通道index: 422
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 421
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 0 x 0 7 y 3648117293085908437 18} 423 18 false [] 0 0}处理完成,通知index = [423]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 0 x 0 7 y 3648117293085908437 18} 423 18 false [] 0 0}处理完成,通知完成index = [423]的channel
2023/09/23 03:26:56 CommandApply!!!!!!!!!
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
kvserver[1]: begin删除通道index: 422
1:{424}lock now
1:{424}lock end
[1][18][0] apply index = 425, commit is 425
1:{425}unlock now
1:{425}unlock end
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND获取到通知结果,index=[423],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y 18 true}
kvserver[1]: pre删除通道index: 423
2023/09/23 03:26:56 4: client new get 4
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 422
2023/09/23 03:26:56 3: client new get 3
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
---------------
1接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 19},term is 18,len is 426
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 19},term is 18,len is 427
---------------
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 2 x 2 6 y 1111049196432932634 18} 424 18 false [] 0 0}处理完成,通知index = [424]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 2 x 2 6 y 1111049196432932634 18} 424 18 false [] 0 0}处理完成,通知完成index = [424]的channel
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND获取到通知结果,index=[424],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y 18 true}
1:{425}lock now
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 18} 425 18 false [] 0 0}处理完成,通知index = [425]的channel
1:{425}lock end
2023/09/23 03:26:56 kvserver[1]: GET获取到通知结果,index=[425],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
1:rf.commitIndex = 425, rf.lastApplied = 425
kvserver[1]: pre删除通道index: 424
kvserver[1]: begin删除通道index: 423
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 423
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 18} 425 18 false [] 0 0}处理完成,通知完成index = [425]的channel
kvserver[1]: begin删除通道index: 424
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 424
2023/09/23 03:26:56 0: client new append x 0 8 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:56 2: client new append x 2 7 y
kvserver[1]: pre删除通道index: 425
kvserver[1]: begin删除通道index: 425
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 425
---------------
1接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 8 y) 3648117293085908437 19},term is 18,len is 428
---------------
OK:i num is 3, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:56 1: client new get 1
---------------
1接受新命令{%!d(string=Append) %!d(string=2) %!d(string=x 2 7 y) 1111049196432932634 19},term is 18,len is 429
---------------
---------------
1接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 3167394946904760106 19},term is 18,len is 430
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 425, lastIndex = 0
1 begin to append 3
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 425, lastIndex = 0
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 425
updateIndex = 425, lastIndex = 0
4更新log，长度430
[4][18][0] apply index = 421, commit is 425
4:{421}unlock now
4:{421}unlock end
4:{421}lock now
4:{421}lock end
[4][18][0] apply index = 422, commit is 425
4:{422}unlock now
4:{422}unlock end
4 return success! num is 1
nextIndex = 426, lastIndex = 0, len = 430
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
4:{422}lock now
4:{422}lock end
[4][18][0] apply index = 423, commit is 425
4:{423}unlock now
4:{423}unlock end
4:{423}lock now
4:{423}lock end
[4][18][0] apply index = 424, commit is 425
4:{424}unlock now
4:{424}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
4:{424}lock now
4:{424}lock end
[4][18][0] apply index = 425, commit is 425
4:{425}unlock now
4:{425}unlock end
4:{425}lock now
4:{425}lock end
4:rf.commitIndex = 425, rf.lastApplied = 425
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 425
updateIndex = 425, lastIndex = 0
2更新log，长度430
[2][18][0] apply index = 421, commit is 425
2:{421}unlock now
2:{421}unlock end
2:{421}lock now
2:{421}lock end
[2][18][0] apply index = 422, commit is 425
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2:{422}unlock now
2:{422}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2:{422}lock now
2:{422}lock end
[2][18][0] apply index = 423, commit is 425
2:{423}unlock now
2:{423}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2:{423}lock now
2:{423}lock end
[2][18][0] apply index = 424, commit is 425
2:{424}unlock now
2:{424}unlock end
2:{424}lock now
2:{424}lock end
[2][18][0] apply index = 425, commit is 425
2:{425}unlock now
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
2:{425}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2:{425}lock now
2:{425}lock end
2:rf.commitIndex = 425, rf.lastApplied = 425
2 return success! num is 2
nextIndex = 426, lastIndex = 0, len = 430
1 max is 430
2 max is 430
1:commitIndex -> 430
[1][18][0] apply index = 426, commit is 430
1:{426}unlock now
1:{426}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 19} 426 18 false [] 0 0}处理完成,通知index = [426]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 3  1199091860389120805 19} 426 18 false [] 0 0}处理完成,通知完成index = [426]的channel
2023/09/23 03:26:56 kvserver[1]: GET获取到通知结果,index=[426],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
kvserver[1]: pre删除通道index: 426
kvserver[1]: begin删除通道index: 426
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 426
OK:i num is 2, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:56 3: client new append x 3 7 y
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 7 y) 1199091860389120805 20},term is 18,len is 431
---------------
1:{426}lock now
1:{426}lock end
[1][18][0] apply index = 427, commit is 430
1:{427}unlock now
1:{427}unlock end
1:{427}lock now
2023/09/23 03:26:56 CommandApply!!!!!!!!!
1:{427}lock end
[1][18][0] apply index = 428, commit is 430
1:{428}unlock now
1:{428}unlock end
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 19} 427 18 false [] 0 0}处理完成,通知index = [427]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 19} 427 18 false [] 0 0}处理完成,通知完成index = [427]的channel
2023/09/23 03:26:56 CommandApply!!!!!!!!!
1:{428}lock now
1:{428}lock end
[1][18][0] apply index = 429, commit is 430
1:{429}unlock now
1:{429}unlock end
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:56 kvserver[1]: GET获取到通知结果,index=[427],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 0 x 0 8 y 3648117293085908437 19} 428 18 false [] 0 0}处理完成,通知index = [428]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 0 x 0 8 y 3648117293085908437 19} 428 18 false [] 0 0}处理完成,通知完成index = [428]的channel
2023/09/23 03:26:56 CommandApply!!!!!!!!!
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
kvserver[1]: pre删除通道index: 427
kvserver[1]: begin删除通道index: 427
1:{429}lock now
1:{429}lock end
[1][18][0] apply index = 430, commit is 430
1:{430}unlock now
1:{430}unlock end
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND获取到通知结果,index=[428],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y 18 true}
kvserver[1]: pre删除通道index: 428
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 427
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 4: client new get 4
[1]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 2 x 2 7 y 1111049196432932634 19} 429 18 false [] 0 0}处理完成,通知index = [429]的channel
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 20},term is 18,len is 432
---------------
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 2 x 2 7 y 1111049196432932634 19} 429 18 false [] 0 0}处理完成,通知完成index = [429]的channel
2023/09/23 03:26:56 CommandApply!!!!!!!!!
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND获取到通知结果,index=[429],replyMsg: {x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y 18 true}
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 19} 430 18 false [] 0 0}处理完成,通知index = [430]的channel
kvserver[1]: pre删除通道index: 429
1:{430}lock now
1:{430}lock end
1:rf.commitIndex = 430, rf.lastApplied = 430
kvserver[1]: begin删除通道index: 428
2023/09/23 03:26:56 kvserver[1]: GET获取到通知结果,index=[430],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 428
kvserver[1]: begin删除通道index: 429
2023/09/23 03:26:56 0: client new get 0
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 429
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 20},term is 18,len is 433
---------------
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 1  3167394946904760106 19} 430 18 false [] 0 0}处理完成,通知完成index = [430]的channel
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
kvserver[1]: pre删除通道index: 430
kvserver[1]: begin删除通道index: 430
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 430
OK:i num is 3, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:56 1: client new append x 1 9 y
2023/09/23 03:26:56 2: client new get 2
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 20},term is 18,len is 434
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 9 y) 3167394946904760106 20},term is 18,len is 435
---------------
1 begin to append 0
prevlogindex = 380, lastIndex = 0
1 begin to append 2
prevlogindex = 430, lastIndex = 0
1 begin to append 3
测试：2节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 430
updateIndex = 430, lastIndex = 0
2更新log，长度435
[2][18][0] apply index = 426, commit is 430
2:{426}unlock now
2:{426}unlock end
2:{426}lock now
2:{426}lock end
[2][18][0] apply index = 427, commit is 430
2:{427}unlock now
2:{427}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2:{427}lock now
2:{427}lock end
[2][18][0] apply index = 428, commit is 430
2:{428}unlock now
2:{428}unlock end
2:{428}lock now
2:{428}lock end
[2][18][0] apply index = 429, commit is 430
2:{429}unlock now
2:{429}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2:{429}lock now
2:{429}lock end
[2][18][0] apply index = 430, commit is 430
2:{430}unlock now
2:{430}unlock end
2:{430}lock now
2:{430}lock end
2:rf.commitIndex = 430, rf.lastApplied = 430
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
prevlogindex = 380, lastIndex = 0
1 begin to append 4
prevlogindex = 430, lastIndex = 0
2 return success! num is 1
nextIndex = 431, lastIndex = 0, len = 435
测试：4节点term为18，leader发送term为18, 接收5个, PrevLogIndex is 430
updateIndex = 430, lastIndex = 0
4更新log，长度435
[4][18][0] apply index = 426, commit is 430
4:{426}unlock now
4:{426}unlock end
4:{426}lock now
4:{426}lock end
[4][18][0] apply index = 427, commit is 430
4:{427}unlock now
4:{427}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
4:{427}lock now
4:{427}lock end
[4][18][0] apply index = 428, commit is 430
4:{428}unlock now
4:{428}unlock end
4:{428}lock now
4:{428}lock end
[4][18][0] apply index = 429, commit is 430
4:{429}unlock now
4:{429}unlock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
4:{429}lock now
4:{429}lock end
[4][18][0] apply index = 430, commit is 430
4:{430}unlock now
4:{430}unlock end
4:{430}lock now
4:{430}lock end
4:rf.commitIndex = 430, rf.lastApplied = 430
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
4 return success! num is 2
nextIndex = 431, lastIndex = 0, len = 435
1 max is 435
2 max is 435
1:commitIndex -> 435
[1][18][0] apply index = 431, commit is 435
1:{431}unlock now
1:{431}unlock end
1:{431}lock now
1:{431}lock end
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
[1][18][0] apply index = 432, commit is 435
1:{432}unlock now
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 3 x 3 7 y 1199091860389120805 20} 431 18 false [] 0 0}处理完成,通知index = [431]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 3 x 3 7 y 1199091860389120805 20} 431 18 false [] 0 0}处理完成,通知完成index = [431]的channel
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND获取到通知结果,index=[431],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y 18 true}
kvserver[1]: pre删除通道index: 431
kvserver[1]: begin删除通道index: 431
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 431
2023/09/23 03:26:56 3: client new append x 3 8 y
---------------
1接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 8 y) 1199091860389120805 21},term is 18,len is 436
---------------
1:{432}unlock end
1:{432}lock now
1:{432}lock end
[1][18][0] apply index = 433, commit is 435
2023/09/23 03:26:56 CommandApply!!!!!!!!!
1:{433}unlock now
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 20} 432 18 false [] 0 0}处理完成,通知index = [432]的channel
2023/09/23 03:26:56 kvserver[1]: GET获取到通知结果,index=[432],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
kvserver[1]: pre删除通道index: 432
kvserver[1]: begin删除通道index: 432
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 432
OK:i num is 3, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:56 4: client new get 4
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 4  2502059193987234581 20} 432 18 false [] 0 0}处理完成,通知完成index = [432]的channel
1:{433}unlock end
1:{433}lock now
2023/09/23 03:26:56 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
---------------
1接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 21},term is 18,len is 437
---------------
1:{433}lock end
[1][18][0] apply index = 434, commit is 435
1:{434}unlock now
1:{434}unlock end
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 20} 433 18 false [] 0 0}处理完成,通知index = [433]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 0  3648117293085908437 20} 433 18 false [] 0 0}处理完成,通知完成index = [433]的channel
2023/09/23 03:26:56 kvserver[1]: GET获取到通知结果,index=[433],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
1:{434}lock now
2023/09/23 03:26:56 CommandApply!!!!!!!!!
1:{434}lock end
[1][18][0] apply index = 435, commit is 435
1:{435}unlock now
1:{435}unlock end
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
kvserver[1]: pre删除通道index: 433
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 20} 434 18 false [] 0 0}处理完成,通知index = [434]的channel
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Get 2  1111049196432932634 20} 434 18 false [] 0 0}处理完成,通知完成index = [434]的channel
2023/09/23 03:26:56 CommandApply!!!!!!!!!
kvserver[1]: begin删除通道index: 433
1:{435}lock now
1:{435}lock end
1:rf.commitIndex = 435, rf.lastApplied = 435
2023/09/23 03:26:56 kvserver[1]: GET获取到通知结果,index=[434],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 433
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 1 x 1 9 y 3167394946904760106 20} 435 18 false [] 0 0}处理完成,通知index = [435]的channel
OK:i num is 0, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:56 kvserver[1]: applyMsg: {true {Append 1 x 1 9 y 3167394946904760106 20} 435 18 false [] 0 0}处理完成,通知完成index = [435]的channel
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:56 0: client new get 0
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND获取到通知结果,index=[435],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y 18 true}
kvserver[1]: pre删除通道index: 434
kvserver[1]: begin删除通道index: 434
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 434
---------------
1接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 21},term is 18,len is 438
---------------
kvserver[1]: pre删除通道index: 435
kvserver[1]: begin删除通道index: 435
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 435
OK:i num is 0, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:56 2: client new get 2
2023/09/23 03:26:56 1: client new append x 1 10 y
---------------
1接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 21},term is 18,len is 439
---------------
---------------
1接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 10 y) 3167394946904760106 21},term is 18,len is 440
---------------
测试：0节点term为19，leader发送term为18, 接收15个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
1 AppOutOfDate follow -> candidate
1 follow -> candidate
1 begin to elect
1 term is 20
0:投票检查385,440,18,18,20,19
0 vote now -> 1
4:投票检查435,385,18,18,19,18
2:投票检查435,385,18,18,19,18
测试：0节点term为20，leader发送term为18, 接收40个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
1: vote num is 2
测试：0节点term为20，leader发送term为18, 接收5个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：0节点term为20，leader发送term为18, 接收30个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：0节点term为20，leader发送term为18, 接收10个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：0节点term为20，leader发送term为18, 接收55个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：0节点term为20，leader发送term为18, 接收25个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：0节点term为20，leader发送term为18, 接收45个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：0节点term为20，leader发送term为18, 接收20个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：0节点term为20，leader发送term为18, 接收35个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：0节点term为20，leader发送term为18, 接收50个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
3 begin to elect
3 term is 20
2:投票检查435,385,18,18,20,19
4:投票检查435,385,18,18,20,19
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND处理请求超时: {Append 3 x 3 8 y 1199091860389120805 21}
kvserver[1]: pre删除通道index: 436
kvserver[1]: begin删除通道index: 436
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 436
2023/09/23 03:26:56 kvserver[1]: GET处理请求超时: {Get 4  2502059193987234581 21}
kvserver[1]: pre删除通道index: 437
kvserver[1]: begin删除通道index: 437
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 437
2023/09/23 03:26:56 kvserver[1]: GET处理请求超时: {Get 0  3648117293085908437 21}
kvserver[1]: pre删除通道index: 438
kvserver[1]: begin删除通道index: 438
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 438
2023/09/23 03:26:56 kvserver[1]: GET处理请求超时: {Get 2  1111049196432932634 21}
kvserver[1]: pre删除通道index: 439
kvserver[1]: begin删除通道index: 439
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 439
2023/09/23 03:26:56 kvserver[1]: PUTAPPEND处理请求超时: {Append 1 x 1 10 y 3167394946904760106 21}
kvserver[1]: pre删除通道index: 440
kvserver[1]: begin删除通道index: 440
2023/09/23 03:26:56 kvserver[1]: 成功删除通道index: 440
1 begin to elect
1 term is 21
0:投票检查385,440,18,18,21,20
0 vote now -> 1
1: vote num is 2
4 follow -> candidate
4 begin to elect
4 term is 21
2:投票检查435,435,18,18,21,20
2 vote now -> 4
3:投票检查385,435,18,18,21,20
3 vote now -> 4
4: vote num is 2
4: vote num is 3
4 is leader
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 21},term is 21,len is 436
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 21},term is 21,len is 437
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 8 y) 1199091860389120805 21},term is 21,len is 438
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 10 y) 3167394946904760106 21},term is 21,len is 439
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 21},term is 21,len is 440
---------------
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 435, lastIndex = 0
4 begin to append 3
prevlogindex = 435, lastIndex = 0
测试：3节点term为21，leader发送term为21, 接收5个, PrevLogIndex is 435
不匹配,args = 435,lastIndex = 0,len = 385
reply XLen is 386
4 nextIndex change to 386
nextIndex = 386, lastIndex = 0, len = 440
测试：2节点term为21，leader发送term为21, 接收5个, PrevLogIndex is 435
updateIndex = 435, lastIndex = 0
2更新log，长度440
2 return success! num is 1
nextIndex = 436, lastIndex = 0, len = 440
2:rf.commitIndex = 430, rf.lastApplied = 430
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 440, lastIndex = 0
4 begin to append 3
prevlogindex = 385, lastIndex = 0
测试：3节点term为21，leader发送term为21, 接收55个, PrevLogIndex is 385
updateIndex = 385, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 440
2:rf.commitIndex = 430, rf.lastApplied = 430
2 return success! num is 1
nextIndex = 441, lastIndex = 0, len = 440
3更新log，长度440
[3][21][0] apply index = 381, commit is 430
3:{381}unlock now
3:{381}unlock end
3:{381}lock now
2023/09/23 03:26:57 CommandApply!!!!!!!!!
3:{381}lock end
[3][21][0] apply index = 382, commit is 430
3:{382}unlock now
3:{382}unlock end
3 return success! num is 2
nextIndex = 386, lastIndex = 0, len = 440
1 max is 440
2 max is 440
4:commitIndex -> 440
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
[4][21][0] apply index = 431, commit is 440
4:{431}unlock now
4:{431}unlock end
4:{431}lock now
4:{431}lock end
[4][21][0] apply index = 432, commit is 440
4:{432}unlock now
4:{432}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
4:{432}lock now
4:{432}lock end
[4][21][0] apply index = 433, commit is 440
4:{433}unlock now
4:{433}unlock end
4:{433}lock now
4:{433}lock end
[4][21][0] apply index = 434, commit is 440
4:{434}unlock now
4:{434}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
4:{434}lock now
4:{434}lock end
[4][21][0] apply index = 435, commit is 440
4:{435}unlock now
4:{435}unlock end
4:{435}lock now
4:{435}lock end
[4][21][0] apply index = 436, commit is 440
4:{436}unlock now
4:{436}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 0  3648117293085908437 21} 436 21 false [] 0 0}处理完成,通知index = [436]的channel
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 0  3648117293085908437 21} 436 21 false [] 0 0}处理完成,通知完成index = [436]的channel
3:{382}lock now
3:{382}lock end
[3][21][0] apply index = 383, commit is 430
3:{383}unlock now
3:{383}unlock end
4:{436}lock now
4:{436}lock end
[4][21][0] apply index = 437, commit is 440
4:{437}unlock now
4:{437}unlock end
4:{437}lock now
4:{437}lock end
[4][21][0] apply index = 438, commit is 440
4:{438}unlock now
4:{438}unlock end
2023/09/23 03:26:57 kvserver[4]: GET获取到通知结果,index=[436],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
kvserver[4]: pre删除通道index: 436
kvserver[4]: begin删除通道index: 436
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 436
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 2  1111049196432932634 21} 437 21 false [] 0 0}处理完成,通知index = [437]的channel
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 2  1111049196432932634 21} 437 21 false [] 0 0}处理完成,通知完成index = [437]的channel
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Append 3 x 3 8 y 1199091860389120805 21} 438 21 false [] 0 0}处理完成,通知index = [438]的channel
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Append 3 x 3 8 y 1199091860389120805 21} 438 21 false [] 0 0}处理完成,通知完成index = [438]的channel
2023/09/23 03:26:57 kvserver[4]: GET获取到通知结果,index=[437],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
kvserver[4]: pre删除通道index: 437
kvserver[4]: begin删除通道index: 437
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 437
4:{438}lock now
4:{438}lock end
[4][21][0] apply index = 439, commit is 440
4:{439}unlock now
4:{439}unlock end
4:{439}lock now
4:{439}lock end
[4][21][0] apply index = 440, commit is 440
4:{440}unlock now
4:{440}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Append 1 x 1 10 y 3167394946904760106 21} 439 21 false [] 0 0}处理完成,通知index = [439]的channel
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Append 1 x 1 10 y 3167394946904760106 21} 439 21 false [] 0 0}处理完成,通知完成index = [439]的channel
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 4  2502059193987234581 21} 440 21 false [] 0 0}处理完成,通知index = [440]的channel
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 4  2502059193987234581 21} 440 21 false [] 0 0}处理完成,通知完成index = [440]的channel
2023/09/23 03:26:57 kvserver[4]: PUTAPPEND获取到通知结果,index=[439],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y 21 true}
kvserver[4]: pre删除通道index: 439
kvserver[4]: begin删除通道index: 439
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 439
2023/09/23 03:26:57 kvserver[4]: PUTAPPEND获取到通知结果,index=[438],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y 21 true}
kvserver[4]: pre删除通道index: 438
kvserver[4]: begin删除通道index: 438
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 438
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:57 2: client new get 2
OK:i num is 3, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:57 0: client new append x 0 9 y
4:{440}lock now
4:{440}lock end
4:rf.commitIndex = 440, rf.lastApplied = 440
2023/09/23 03:26:57 kvserver[4]: GET获取到通知结果,index=[440],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
kvserver[4]: pre删除通道index: 440
kvserver[4]: begin删除通道index: 440
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 440
2023/09/23 03:26:57 1: client new append x 1 11 y
2023/09/23 03:26:57 3: client new get 3
3:{383}lock now
3:{383}lock end
[3][21][0] apply index = 384, commit is 430
3:{384}unlock now
3:{384}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
3:{384}lock now
3:{384}lock end
[3][21][0] apply index = 385, commit is 430
3:{385}unlock now
3:{385}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
3:{385}lock now
3:{385}lock end
[3][21][0] apply index = 386, commit is 430
3:{386}unlock now
3:{386}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
3:{386}lock now
3:{386}lock end
[3][21][0] apply index = 387, commit is 430
3:{387}unlock now
3:{387}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
3:{387}lock now
3:{387}lock end
[3][21][0] apply index = 388, commit is 430
3:{388}unlock now
3:{388}unlock end
3:{388}lock now
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
3:{388}lock end
[3][21][0] apply index = 389, commit is 430
3:{389}unlock now
3:{389}unlock end
3:{389}lock now
3:{389}lock end
[3][21][0] apply index = 390, commit is 430
3:{390}unlock now
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
3:{390}unlock end
3:{390}lock now
3:{390}lock end
[3][21][0] apply index = 391, commit is 430
2023/09/23 03:26:57 CommandApply!!!!!!!!!
3:{391}unlock now
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
3:{391}unlock end
3:{391}lock now
3:{391}lock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
[3][21][0] apply index = 392, commit is 430
3:{392}unlock now
3:{392}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
3:{392}lock now
3:{392}lock end
[3][21][0] apply index = 393, commit is 430
3:{393}unlock now
3:{393}unlock end
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
3:{393}lock now
3:{393}lock end
[3][21][0] apply index = 394, commit is 430
3:{394}unlock now
3:{394}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
3:{394}lock now
3:{394}lock end
[3][21][0] apply index = 395, commit is 430
3:{395}unlock now
3:{395}unlock end
3:{395}lock now
3:{395}lock end
[3][21][0] apply index = 396, commit is 430
3:{396}unlock now
2023/09/23 03:26:57 CommandApply!!!!!!!!!
3:{396}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
3:{396}lock now
3:{396}lock end
[3][21][0] apply index = 397, commit is 430
3:{397}unlock now
3:{397}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
3:{397}lock now
3:{397}lock end
[3][21][0] apply index = 398, commit is 430
3:{398}unlock now
3:{398}unlock end
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
3:{398}lock now
3:{398}lock end
[3][21][0] apply index = 399, commit is 430
3:{399}unlock now
3:{399}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
3:{399}lock now
3:{399}lock end
[3][21][0] apply index = 400, commit is 430
3:{400}unlock now
3:{400}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
3:{400}lock now
3:{400}lock end
[3][21][0] apply index = 401, commit is 430
3:{401}unlock now
3:{401}unlock end
3:{401}lock now
3:{401}lock end
[3][21][0] apply index = 402, commit is 430
3:{402}unlock now
3:{402}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
3:{402}lock now
3:{402}lock end
[3][21][0] apply index = 403, commit is 430
3:{403}unlock now
3:{403}unlock end
3:{403}lock now
3:{403}lock end
[3][21][0] apply index = 404, commit is 430
3:{404}unlock now
3:{404}unlock end
OK:i num is 1, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 4: client new get 4
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
3:{404}lock now
3:{404}lock end
[3][21][0] apply index = 405, commit is 430
3:{405}unlock now
3:{405}unlock end
3:{405}lock now
3:{405}lock end
[3][21][0] apply index = 406, commit is 430
3:{406}unlock now
3:{406}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
3:{406}lock now
3:{406}lock end
[3][21][0] apply index = 407, commit is 430
3:{407}unlock now
3:{407}unlock end
3:{407}lock now
3:{407}lock end
[3][21][0] apply index = 408, commit is 430
3:{408}unlock now
3:{408}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
3:{408}lock now
3:{408}lock end
[3][21][0] apply index = 409, commit is 430
3:{409}unlock now
3:{409}unlock end
3:{409}lock now
3:{409}lock end
[3][21][0] apply index = 410, commit is 430
3:{410}unlock now
3:{410}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
3:{410}lock now
3:{410}lock end
[3][21][0] apply index = 411, commit is 430
3:{411}unlock now
3:{411}unlock end
3:{411}lock now
3:{411}lock end
[3][21][0] apply index = 412, commit is 430
3:{412}unlock now
3:{412}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
3:{412}lock now
3:{412}lock end
[3][21][0] apply index = 413, commit is 430
3:{413}unlock now
3:{413}unlock end
3:{413}lock now
3:{413}lock end
[3][21][0] apply index = 414, commit is 430
3:{414}unlock now
3:{414}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
3:{414}lock now
3:{414}lock end
[3][21][0] apply index = 415, commit is 430
3:{415}unlock now
3:{415}unlock end
3:{415}lock now
3:{415}lock end
[3][21][0] apply index = 416, commit is 430
3:{416}unlock now
3:{416}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
3:{416}lock now
3:{416}lock end
[3][21][0] apply index = 417, commit is 430
3:{417}unlock now
3:{417}unlock end
3:{417}lock now
3:{417}lock end
[3][21][0] apply index = 418, commit is 430
3:{418}unlock now
3:{418}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
3:{418}lock now
3:{418}lock end
[3][21][0] apply index = 419, commit is 430
3:{419}unlock now
3:{419}unlock end
3:{419}lock now
3:{419}lock end
[3][21][0] apply index = 420, commit is 430
3:{420}unlock now
3:{420}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
3:{420}lock now
3:{420}lock end
[3][21][0] apply index = 421, commit is 430
3:{421}unlock now
3:{421}unlock end
3:{421}lock now
3:{421}lock end
[3][21][0] apply index = 422, commit is 430
3:{422}unlock now
3:{422}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
3:{422}lock now
3:{422}lock end
[3][21][0] apply index = 423, commit is 430
3:{423}unlock now
3:{423}unlock end
3:{423}lock now
3:{423}lock end
[3][21][0] apply index = 424, commit is 430
3:{424}unlock now
3:{424}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
3:{424}lock now
3:{424}lock end
[3][21][0] apply index = 425, commit is 430
3:{425}unlock now
3:{425}unlock end
3:{425}lock now
3:{425}lock end
[3][21][0] apply index = 426, commit is 430
3:{426}unlock now
3:{426}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
3:{426}lock now
3:{426}lock end
[3][21][0] apply index = 427, commit is 430
3:{427}unlock now
3:{427}unlock end
3:{427}lock now
3:{427}lock end
[3][21][0] apply index = 428, commit is 430
3:{428}unlock now
3:{428}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
3:{428}lock now
3:{428}lock end
[3][21][0] apply index = 429, commit is 430
3:{429}unlock now
3:{429}unlock end
3:{429}lock now
3:{429}lock end
[3][21][0] apply index = 430, commit is 430
3:{430}unlock now
3:{430}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
3:{430}lock now
3:{430}lock end
3:rf.commitIndex = 430, rf.lastApplied = 430
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 22},term is 21,len is 441
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 22},term is 21,len is 442
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 11 y) 3167394946904760106 22},term is 21,len is 443
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 9 y) 3648117293085908437 22},term is 21,len is 444
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 22},term is 21,len is 445
---------------
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 440, lastIndex = 0
4 begin to append 3
prevlogindex = 440, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收5个, PrevLogIndex is 440
updateIndex = 440, lastIndex = 0
2更新log，长度445
[2][21][0] apply index = 431, commit is 440
2:{431}unlock now
2:{431}unlock end
2:{431}lock now
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2:{431}lock end
[2][21][0] apply index = 432, commit is 440
2:{432}unlock now
2:{432}unlock end
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2:{432}lock now
2:{432}lock end
[2][21][0] apply index = 433, commit is 440
2:{433}unlock now
测试：3节点term为21，leader发送term为21, 接收5个, PrevLogIndex is 440
updateIndex = 440, lastIndex = 0
2 return success! num is 1
3更新log，长度445
2:{433}unlock end
[3][21][0] apply index = 431, commit is 440
3:{431}unlock now
3:{431}unlock end
3:{431}lock now
3:{431}lock end
[3][21][0] apply index = 432, commit is 440
3:{432}unlock now
3:{432}unlock end
nextIndex = 441, lastIndex = 0, len = 445
3 return success! num is 2
nextIndex = 441, lastIndex = 0, len = 445
1 max is 445
2 max is 445
4:commitIndex -> 445
[4][21][0] apply index = 441, commit is 445
4:{441}unlock now
4:{441}unlock end
4:{441}lock now
4:{441}lock end
[4][21][0] apply index = 442, commit is 445
4:{442}unlock now
4:{442}unlock end
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
3:{432}lock now
3:{432}lock end
[3][21][0] apply index = 433, commit is 440
3:{433}unlock now
3:{433}unlock end
2:{433}lock now
2:{433}lock end
[2][21][0] apply index = 434, commit is 440
2:{434}unlock now
2:{434}unlock end
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 2  1111049196432932634 22} 441 21 false [] 0 0}处理完成,通知index = [441]的channel
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 2  1111049196432932634 22} 441 21 false [] 0 0}处理完成,通知完成index = [441]的channel
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2023/09/23 03:26:57 kvserver[4]: GET获取到通知结果,index=[441],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
4:{442}lock now
4:{442}lock end
[4][21][0] apply index = 443, commit is 445
4:{443}unlock now
4:{443}unlock end
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 3  1199091860389120805 22} 442 21 false [] 0 0}处理完成,通知index = [442]的channel
3:{433}lock now
3:{433}lock end
[3][21][0] apply index = 434, commit is 440
3:{434}unlock now
3:{434}unlock end
3:{434}lock now
3:{434}lock end
[3][21][0] apply index = 435, commit is 440
3:{435}unlock now
3:{435}unlock end
2:{434}lock now
2:{434}lock end
[2][21][0] apply index = 435, commit is 440
2:{435}unlock now
2:{435}unlock end
2:{435}lock now
2:{435}lock end
[2][21][0] apply index = 436, commit is 440
2:{436}unlock now
2:{436}unlock end
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 3  1199091860389120805 22} 442 21 false [] 0 0}处理完成,通知完成index = [442]的channel
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2023/09/23 03:26:57 kvserver[4]: GET获取到通知结果,index=[442],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2023/09/23 03:26:57 CommandApply!!!!!!!!!
kvserver[4]: pre删除通道index: 441
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Append 1 x 1 11 y 3167394946904760106 22} 443 21 false [] 0 0}处理完成,通知index = [443]的channel
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
3:{435}lock now
3:{435}lock end
4:{443}lock now
4:{443}lock end
[4][21][0] apply index = 444, commit is 445
4:{444}unlock now
4:{444}unlock end
2:{436}lock now
2:{436}lock end
[2][21][0] apply index = 437, commit is 440
2:{437}unlock now
2:{437}unlock end
[3][21][0] apply index = 436, commit is 440
3:{436}unlock now
3:{436}unlock end
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Append 1 x 1 11 y 3167394946904760106 22} 443 21 false [] 0 0}处理完成,通知完成index = [443]的channel
2023/09/23 03:26:57 CommandApply!!!!!!!!!
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[4]: pre删除通道index: 442
4:{444}lock now
4:{444}lock end
kvserver[4]: begin删除通道index: 441
[4][21][0] apply index = 445, commit is 445
4:{445}unlock now
4:{445}unlock end
2023/09/23 03:26:57 kvserver[4]: PUTAPPEND获取到通知结果,index=[443],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y 21 true}
kvserver[4]: pre删除通道index: 443
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2023/09/23 03:26:57 CommandApply!!!!!!!!!
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 441
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2:{437}lock now
2:{437}lock end
[2][21][0] apply index = 438, commit is 440
2:{438}unlock now
2:{438}unlock end
2:{438}lock now
2:{438}lock end
[2][21][0] apply index = 439, commit is 440
2:{439}unlock now
2:{439}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
2:{439}lock now
2:{439}lock end
[2][21][0] apply index = 440, commit is 440
2:{440}unlock now
2:{440}unlock end
2:{440}lock now
2:{440}lock end
2:rf.commitIndex = 440, rf.lastApplied = 440
kvserver[4]: begin删除通道index: 442
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 442
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Append 0 x 0 9 y 3648117293085908437 22} 444 21 false [] 0 0}处理完成,通知index = [444]的channel
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Append 0 x 0 9 y 3648117293085908437 22} 444 21 false [] 0 0}处理完成,通知完成index = [444]的channel
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 4  2502059193987234581 22} 445 21 false [] 0 0}处理完成,通知index = [445]的channel
2023/09/23 03:26:57 kvserver[4]: applyMsg: {true {Get 4  2502059193987234581 22} 445 21 false [] 0 0}处理完成,通知完成index = [445]的channel
2023/09/23 03:26:57 kvserver[4]: GET获取到通知结果,index=[445],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
kvserver[4]: pre删除通道index: 445
kvserver[4]: begin删除通道index: 445
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 445
OK:i num is 1, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 4: client new append x 4 10 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
3:{436}lock now
2023/09/23 03:26:57 kvserver[4]: PUTAPPEND获取到通知结果,index=[444],replyMsg: {x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y 21 true}
2023/09/23 03:26:57 CommandApply!!!!!!!!!
3:{436}lock end
[3][21][0] apply index = 437, commit is 440
3:{437}unlock now
3:{437}unlock end
3:{437}lock now
2023/09/23 03:26:57 CommandApply!!!!!!!!!
3:{437}lock end
[3][21][0] apply index = 438, commit is 440
3:{438}unlock now
3:{438}unlock end
4:{445}lock now
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
OK:i num is 0, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:57 3: client new get 3
kvserver[4]: begin删除通道index: 443
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 443
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:57 1: client new append x 1 12 y
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 2502059193987234581 23},term is 21,len is 446
---------------
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:57 2: client new get 2
kvserver[4]: pre删除通道index: 444
kvserver[4]: begin删除通道index: 444
4:{445}lock end
4:rf.commitIndex = 445, rf.lastApplied = 445
3:{438}lock now
3:{438}lock end
[3][21][0] apply index = 439, commit is 440
3:{439}unlock now
3:{439}unlock end
3:{439}lock now
3:{439}lock end
[3][21][0] apply index = 440, commit is 440
3:{440}unlock now
3:{440}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 444
2023/09/23 03:26:57 0: client new get 0
2023/09/23 03:26:57 CommandApply!!!!!!!!!
3:{440}lock now
3:{440}lock end
3:rf.commitIndex = 440, rf.lastApplied = 440
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 23},term is 21,len is 447
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 12 y) 3167394946904760106 23},term is 21,len is 448
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 23},term is 21,len is 449
---------------
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 23},term is 21,len is 450
---------------
测试：3节点term为21，leader发送term为18, 接收30个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：3节点term为21，leader发送term为18, 接收10个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 445, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收5个, PrevLogIndex is 445
updateIndex = 445, lastIndex = 0
测试：3节点term为21，leader发送term为18, 接收55个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：3节点term为21，leader发送term为18, 接收40个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
2更新log，长度450
测试：3节点term为21，leader发送term为18, 接收5个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
2 return success! num is 1
nextIndex = 446, lastIndex = 0, len = 450
1:投票检查440,385,18,18,20,21
1 vote refuse 1 -> 3
[2][21][0] apply index = 441, commit is 445
2:{441}unlock now
2:{441}unlock end
2:{441}lock now
2:{441}lock end
[2][21][0] apply index = 442, commit is 445
2:{442}unlock now
2:{442}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2:{442}lock now
2:{442}lock end
[2][21][0] apply index = 443, commit is 445
2:{443}unlock now
2:{443}unlock end
2:{443}lock now
2:{443}lock end
[2][21][0] apply index = 444, commit is 445
2:{444}unlock now
2:{444}unlock end
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2:{444}lock now
2:{444}lock end
[2][21][0] apply index = 445, commit is 445
2:{445}unlock now
2:{445}unlock end
2:{445}lock now
2:{445}lock end
2:rf.commitIndex = 445, rf.lastApplied = 445
2023/09/23 03:26:57 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
测试：3节点term为21，leader发送term为18, 接收25个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
3: vote is out of date
测试：3节点term为21，leader发送term为18, 接收15个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：3节点term为21，leader发送term为18, 接收35个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：3节点term为21，leader发送term为18, 接收50个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
1:投票检查440,385,18,18,19,21
1 vote refuse 1 -> 3
3: vote is out of date
3:投票检查445,440,21,18,20,21
3 vote refuse 1 -> 1
1: vote is out of date
3:投票检查445,440,21,18,21,21
0:投票检查385,385,18,18,20,21
0 vote refuse 1 -> 3
3: vote is out of date
测试：3节点term为21，leader发送term为18, 接收20个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
测试：3节点term为21，leader发送term为18, 接收45个, PrevLogIndex is 380
网络分区AppOutOfDate,reply is 1
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 450, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 450
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 451, lastIndex = 0, len = 450
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 450, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 450
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 451, lastIndex = 0, len = 450
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 450, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 450
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 451, lastIndex = 0, len = 450
1 begin to elect
1 term is 22
3:投票检查445,440,21,18,22,21
0:投票检查385,440,18,18,22,21
0 vote now -> 1
1: vote num is 2
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 450, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 450
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 451, lastIndex = 0, len = 450
2023/09/23 03:26:57 kvserver[4]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 2502059193987234581 23}
kvserver[4]: pre删除通道index: 446
kvserver[4]: begin删除通道index: 446
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 446
---------------
4接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 2502059193987234581 23},term is 21,len is 451
---------------
2023/09/23 03:26:57 kvserver[4]: GET处理请求超时: {Get 3  1199091860389120805 23}
kvserver[4]: pre删除通道index: 447
kvserver[4]: begin删除通道index: 447
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 447
2023/09/23 03:26:57 kvserver[4]: PUTAPPEND处理请求超时: {Append 1 x 1 12 y 3167394946904760106 23}
kvserver[4]: pre删除通道index: 448
kvserver[4]: begin删除通道index: 448
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 448
---------------
4接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 23},term is 21,len is 452
---------------
2023/09/23 03:26:57 kvserver[4]: GET处理请求超时: {Get 2  1111049196432932634 23}
kvserver[4]: pre删除通道index: 449
kvserver[4]: begin删除通道index: 449
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 449
---------------
4接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 23},term is 21,len is 453
---------------
---------------
4接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 12 y) 3167394946904760106 23},term is 21,len is 454
---------------
2023/09/23 03:26:57 kvserver[4]: GET处理请求超时: {Get 0  3648117293085908437 23}
kvserver[4]: pre删除通道index: 450
kvserver[4]: begin删除通道index: 450
2023/09/23 03:26:57 kvserver[4]: 成功删除通道index: 450
---------------
4接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 23},term is 21,len is 455
---------------
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 450, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收5个, PrevLogIndex is 450
updateIndex = 450, lastIndex = 0
2更新log，长度455
2 return success! num is 1
nextIndex = 451, lastIndex = 0, len = 455
2:rf.commitIndex = 445, rf.lastApplied = 445
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 455, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 455
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
3 follow -> candidate
3 begin to elect
3 term is 23
0:投票检查385,445,18,21,23,22
0 vote now -> 3
1:投票检查440,445,18,21,23,22
1 vote now -> 3
3: vote num is 2
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 455, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 455
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
3: vote num is 3
3 is leader
3 begin to append 0
prevlogindex = 445, lastIndex = 0
3 begin to append 1
prevlogindex = 445, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
测试：0节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 445
不匹配,args = 445,lastIndex = 0,len = 385
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 445
不匹配,args = 445,lastIndex = 0,len = 440
reply XLen is 386
3 nextIndex change to 386
nextIndex = 386, lastIndex = 0, len = 445
reply XLen is 441
3 nextIndex change to 441
nextIndex = 441, lastIndex = 0, len = 445
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 455, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 455
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
3 begin to append 0
prevlogindex = 385, lastIndex = 0
3 begin to append 1
prevlogindex = 440, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收5个, PrevLogIndex is 440
不匹配,args = 440,lastIndex = 0,len = 440
log.term = 18, lastTerm = 0, args.term = 21
xindex = 307, last = 0
x is 436, len is 445
3 nextIndex change to 436
nextIndex = 436, lastIndex = 0, len = 445
测试：0节点term为23，leader发送term为23, 接收60个, PrevLogIndex is 385
updateIndex = 385, lastIndex = 0
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 455, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 455
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
0更新log，长度445
[0][23][0] apply index = 381, commit is 440
0:{381}unlock now
0:{381}unlock end
0:{381}lock now
0:{381}lock end
[0][23][0] apply index = 382, commit is 440
0:{382}unlock now
0:{382}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
0:{382}lock now
0:{382}lock end
[0][23][0] apply index = 383, commit is 440
0:{383}unlock now
0:{383}unlock end
0:{383}lock now
0:{383}lock end
[0][23][0] apply index = 384, commit is 440
0:{384}unlock now
0:{384}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
0:{384}lock now
0:{384}lock end
[0][23][0] apply index = 385, commit is 440
0:{385}unlock now
0:{385}unlock end
0:{385}lock now
0:{385}lock end
[0][23][0] apply index = 386, commit is 440
0:{386}unlock now
0:{386}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 y
0:{386}lock now
0:{386}lock end
[0][23][0] apply index = 387, commit is 440
0:{387}unlock now
0:{387}unlock end
0:{387}lock now
0:{387}lock end
[0][23][0] apply index = 388, commit is 440
0:{388}unlock now
0:{388}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 y
0:{388}lock now
0:{388}lock end
[0][23][0] apply index = 389, commit is 440
0:{389}unlock now
0:{389}unlock end
0:{389}lock now
0:{389}lock end
[0][23][0] apply index = 390, commit is 440
0:{390}unlock now
0:{390}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
0:{390}lock now
0:{390}lock end
[0][23][0] apply index = 391, commit is 440
0:{391}unlock now
0:{391}unlock end
0:{391}lock now
0:{391}lock end
[0][23][0] apply index = 392, commit is 440
0:{392}unlock now
0:{392}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 y
0:{392}lock now
0:{392}lock end
[0][23][0] apply index = 393, commit is 440
0:{393}unlock now
0:{393}unlock end
0:{393}lock now
0:{393}lock end
[0][23][0] apply index = 394, commit is 440
0:{394}unlock now
0:{394}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
0:{394}lock now
0:{394}lock end
[0][23][0] apply index = 395, commit is 440
0:{395}unlock now
0:{395}unlock end
0:{395}lock now
0:{395}lock end
[0][23][0] apply index = 396, commit is 440
0:{396}unlock now
0:{396}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
0:{396}lock now
0:{396}lock end
[0][23][0] apply index = 397, commit is 440
0:{397}unlock now
0:{397}unlock end
0:{397}lock now
0:{397}lock end
[0][23][0] apply index = 398, commit is 440
0:{398}unlock now
0:{398}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
0:{398}lock now
0:{398}lock end
[0][23][0] apply index = 399, commit is 440
0:{399}unlock now
0:{399}unlock end
0:{399}lock now
0:{399}lock end
[0][23][0] apply index = 400, commit is 440
0:{400}unlock now
0:{400}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
0:{400}lock now
0:{400}lock end
[0][23][0] apply index = 401, commit is 440
0:{401}unlock now
0:{401}unlock end
0:{401}lock now
0:{401}lock end
[0][23][0] apply index = 402, commit is 440
0:{402}unlock now
0:{402}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
0:{402}lock now
0:{402}lock end
[0][23][0] apply index = 403, commit is 440
0:{403}unlock now
0:{403}unlock end
0:{403}lock now
0:{403}lock end
[0][23][0] apply index = 404, commit is 440
0:{404}unlock now
0:{404}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 y
0:{404}lock now
0:{404}lock end
[0][23][0] apply index = 405, commit is 440
0:{405}unlock now
0:{405}unlock end
0:{405}lock now
0:{405}lock end
[0][23][0] apply index = 406, commit is 440
0:{406}unlock now
0:{406}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
0:{406}lock now
0:{406}lock end
[0][23][0] apply index = 407, commit is 440
0:{407}unlock now
0:{407}unlock end
0:{407}lock now
0:{407}lock end
[0][23][0] apply index = 408, commit is 440
0:{408}unlock now
0:{408}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
0:{408}lock now
0:{408}lock end
[0][23][0] apply index = 409, commit is 440
0:{409}unlock now
0:{409}unlock end
0:{409}lock now
0:{409}lock end
[0][23][0] apply index = 410, commit is 440
0:{410}unlock now
0:{410}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
0:{410}lock now
0:{410}lock end
[0][23][0] apply index = 411, commit is 440
0:{411}unlock now
0:{411}unlock end
0:{411}lock now
0:{411}lock end
[0][23][0] apply index = 412, commit is 440
0:{412}unlock now
0:{412}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
0:{412}lock now
0:{412}lock end
[0][23][0] apply index = 413, commit is 440
0:{413}unlock now
0:{413}unlock end
0:{413}lock now
0:{413}lock end
[0][23][0] apply index = 414, commit is 440
0:{414}unlock now
0:{414}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
0:{414}lock now
0:{414}lock end
[0][23][0] apply index = 415, commit is 440
0:{415}unlock now
0:{415}unlock end
0:{415}lock now
0:{415}lock end
[0][23][0] apply index = 416, commit is 440
0:{416}unlock now
0:{416}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 y
0:{416}lock now
0:{416}lock end
[0][23][0] apply index = 417, commit is 440
0:{417}unlock now
0:{417}unlock end
0:{417}lock now
0:{417}lock end
[0][23][0] apply index = 418, commit is 440
0:{418}unlock now
0:{418}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 y
0:{418}lock now
0:{418}lock end
[0][23][0] apply index = 419, commit is 440
0:{419}unlock now
0:{419}unlock end
0:{419}lock now
0:{419}lock end
[0][23][0] apply index = 420, commit is 440
0:{420}unlock now
0:{420}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
0:{420}lock now
0:{420}lock end
[0][23][0] apply index = 421, commit is 440
0:{421}unlock now
0:{421}unlock end
0:{421}lock now
0:{421}lock end
[0][23][0] apply index = 422, commit is 440
0:{422}unlock now
0:{422}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
0:{422}lock now
0:{422}lock end
[0][23][0] apply index = 423, commit is 440
0:{423}unlock now
0:{423}unlock end
0:{423}lock now
0:{423}lock end
[0][23][0] apply index = 424, commit is 440
0:{424}unlock now
0:{424}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 y
0:{424}lock now
0:{424}lock end
[0][23][0] apply index = 425, commit is 440
0:{425}unlock now
0:{425}unlock end
0:{425}lock now
0:{425}lock end
[0][23][0] apply index = 426, commit is 440
0:{426}unlock now
0:{426}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 y
0:{426}lock now
0:{426}lock end
[0][23][0] apply index = 427, commit is 440
0:{427}unlock now
0:{427}unlock end
0:{427}lock now
0:{427}lock end
[0][23][0] apply index = 428, commit is 440
0:{428}unlock now
0:{428}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
0:{428}lock now
0:{428}lock end
[0][23][0] apply index = 429, commit is 440
0:{429}unlock now
0:{429}unlock end
0:{429}lock now
0:{429}lock end
[0][23][0] apply index = 430, commit is 440
0:{430}unlock now
0:{430}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 y
0:{430}lock now
0:{430}lock end
[0][23][0] apply index = 431, commit is 440
0:{431}unlock now
0:{431}unlock end
0:{431}lock now
0:{431}lock end
[0][23][0] apply index = 432, commit is 440
0:{432}unlock now
0:{432}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
0:{432}lock now
0:{432}lock end
[0][23][0] apply index = 433, commit is 440
0:{433}unlock now
0:{433}unlock end
0:{433}lock now
0:{433}lock end
[0][23][0] apply index = 434, commit is 440
0:{434}unlock now
0:{434}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
0:{434}lock now
0:{434}lock end
[0][23][0] apply index = 435, commit is 440
0:{435}unlock now
0:{435}unlock end
0:{435}lock now
0:{435}lock end
[0][23][0] apply index = 436, commit is 440
0:{436}unlock now
0:{436}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
0:{436}lock now
0:{436}lock end
[0][23][0] apply index = 437, commit is 440
0:{437}unlock now
0:{437}unlock end
0:{437}lock now
0:{437}lock end
[0][23][0] apply index = 438, commit is 440
0:{438}unlock now
0:{438}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
0:{438}lock now
0:{438}lock end
[0][23][0] apply index = 439, commit is 440
0:{439}unlock now
0:{439}unlock end
0:{439}lock now
0:{439}lock end
[0][23][0] apply index = 440, commit is 440
0:{440}unlock now
0:{440}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
0:{440}lock now
0:{440}lock end
0:rf.commitIndex = 440, rf.lastApplied = 440
2023/09/23 03:26:58 kvserver[4]: PUTAPPEND处理请求超时: {Append 4 x 4 10 y 2502059193987234581 23}
kvserver[4]: pre删除通道index: 451
kvserver[4]: begin删除通道index: 451
2023/09/23 03:26:58 kvserver[4]: 成功删除通道index: 451
---------------
3接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 10 y) 2502059193987234581 23},term is 23,len is 446
---------------
0 return success! num is 1
nextIndex = 386, lastIndex = 0, len = 446
2023/09/23 03:26:58 kvserver[4]: GET处理请求超时: {Get 2  1111049196432932634 23}
kvserver[4]: pre删除通道index: 453
kvserver[4]: begin删除通道index: 453
2023/09/23 03:26:58 kvserver[4]: 成功删除通道index: 453
2023/09/23 03:26:58 kvserver[4]: GET处理请求超时: {Get 3  1199091860389120805 23}
kvserver[4]: pre删除通道index: 452
kvserver[4]: begin删除通道index: 452
2023/09/23 03:26:58 kvserver[4]: 成功删除通道index: 452
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 23},term is 23,len is 447
---------------
2023/09/23 03:26:58 kvserver[4]: PUTAPPEND处理请求超时: {Append 1 x 1 12 y 3167394946904760106 23}
kvserver[4]: pre删除通道index: 454
kvserver[4]: begin删除通道index: 454
2023/09/23 03:26:58 kvserver[4]: 成功删除通道index: 454
---------------
3接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 23},term is 23,len is 448
---------------
2023/09/23 03:26:58 kvserver[4]: GET处理请求超时: {Get 0  3648117293085908437 23}
kvserver[4]: pre删除通道index: 455
kvserver[4]: begin删除通道index: 455
2023/09/23 03:26:58 kvserver[4]: 成功删除通道index: 455
---------------
3接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 12 y) 3167394946904760106 23},term is 23,len is 449
---------------
---------------
3接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 23},term is 23,len is 450
---------------
3 begin to append 0
prevlogindex = 445, lastIndex = 0
3 begin to append 1
prevlogindex = 435, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：0节点term为23，leader发送term为23, 接收5个, PrevLogIndex is 445
updateIndex = 445, lastIndex = 0
0更新log，长度450
测试：1节点term为23，leader发送term为23, 接收15个, PrevLogIndex is 435
updateIndex = 435, lastIndex = 0
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 455, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
0:rf.commitIndex = 440, rf.lastApplied = 440
0 return success! num is 1
nextIndex = 446, lastIndex = 0, len = 450
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 455
2:rf.commitIndex = 445, rf.lastApplied = 445
2 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
1更新log，长度450
[1][23][0] apply index = 436, commit is 440
1:{436}unlock now
1:{436}unlock end
1:{436}lock now
1:{436}lock end
[1][23][0] apply index = 437, commit is 440
2023/09/23 03:26:58 CommandApply!!!!!!!!!
1:{437}unlock now
1:{437}unlock end
1 return success! num is 2
nextIndex = 436, lastIndex = 0, len = 450
1 max is 450
2 max is 450
3:commitIndex -> 450
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
1:{437}lock now
1:{437}lock end
[1][23][0] apply index = 438, commit is 440
1:{438}unlock now
1:{438}unlock end
[3][23][0] apply index = 441, commit is 450
3:{441}unlock now
3:{441}unlock end
3:{441}lock now
3:{441}lock end
[3][23][0] apply index = 442, commit is 450
3:{442}unlock now
3:{442}unlock end
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
2023/09/23 03:26:58 CommandApply!!!!!!!!!
1:{438}lock now
1:{438}lock end
[1][23][0] apply index = 439, commit is 440
1:{439}unlock now
1:{439}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
3:{442}lock now
3:{442}lock end
[3][23][0] apply index = 443, commit is 450
3:{443}unlock now
3:{443}unlock end
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
2023/09/23 03:26:58 CommandApply!!!!!!!!!
1:{439}lock now
1:{439}lock end
[1][23][0] apply index = 440, commit is 440
1:{440}unlock now
1:{440}unlock end
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
3:{443}lock now
3:{443}lock end
[3][23][0] apply index = 444, commit is 450
3:{444}unlock now
3:{444}unlock end
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
2023/09/23 03:26:58 CommandApply!!!!!!!!!
1:{440}lock now
1:{440}lock end
1:rf.commitIndex = 440, rf.lastApplied = 440
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
3:{444}lock now
3:{444}lock end
[3][23][0] apply index = 445, commit is 450
3:{445}unlock now
3:{445}unlock end
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
3:{445}lock now
3:{445}lock end
[3][23][0] apply index = 446, commit is 450
3:{446}unlock now
3:{446}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
3:{446}lock now
3:{446}lock end
[3][23][0] apply index = 447, commit is 450
3:{447}unlock now
3:{447}unlock end
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Append 4 x 4 10 y 2502059193987234581 23} 446 23 false [] 0 0}处理完成,通知index = [446]的channel
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Append 4 x 4 10 y 2502059193987234581 23} 446 23 false [] 0 0}处理完成,通知完成index = [446]的channel
2023/09/23 03:26:58 CommandApply!!!!!!!!!
3:{447}lock now
3:{447}lock end
[3][23][0] apply index = 448, commit is 450
3:{448}unlock now
3:{448}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 kvserver[3]: PUTAPPEND获取到通知结果,index=[446],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y 23 true}
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Get 2  1111049196432932634 23} 447 23 false [] 0 0}处理完成,通知index = [447]的channel
kvserver[3]: pre删除通道index: 446
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Get 2  1111049196432932634 23} 447 23 false [] 0 0}处理完成,通知完成index = [447]的channel
2023/09/23 03:26:58 CommandApply!!!!!!!!!
kvserver[3]: begin删除通道index: 446
3:{448}lock now
3:{448}lock end
[3][23][0] apply index = 449, commit is 450
3:{449}unlock now
3:{449}unlock end
2023/09/23 03:26:58 kvserver[3]: 成功删除通道index: 446
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:58 kvserver[3]: GET获取到通知结果,index=[447],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Get 3  1199091860389120805 23} 448 23 false [] 0 0}处理完成,通知index = [448]的channel
2023/09/23 03:26:58 4: client new get 4
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Get 3  1199091860389120805 23} 448 23 false [] 0 0}处理完成,通知完成index = [448]的channel
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:26:58 kvserver[3]: GET获取到通知结果,index=[448],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
3:{449}lock now
---------------
3接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 24},term is 23,len is 451
---------------
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Append 1 x 1 12 y 3167394946904760106 23} 449 23 false [] 0 0}处理完成,通知index = [449]的channel
3:{449}lock end
[3][23][0] apply index = 450, commit is 450
3:{450}unlock now
3:{450}unlock end
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Append 1 x 1 12 y 3167394946904760106 23} 449 23 false [] 0 0}处理完成,通知完成index = [449]的channel
2023/09/23 03:26:58 kvserver[3]: PUTAPPEND获取到通知结果,index=[449],replyMsg: {x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y 23 true}
kvserver[3]: pre删除通道index: 449
2023/09/23 03:26:58 CommandApply!!!!!!!!!
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
kvserver[3]: pre删除通道index: 448
3:{450}lock now
3:{450}lock end
3:rf.commitIndex = 450, rf.lastApplied = 450
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
kvserver[3]: pre删除通道index: 447
kvserver[3]: begin删除通道index: 449
2023/09/23 03:26:58 kvserver[3]: 成功删除通道index: 449
2023/09/23 03:26:58 1: client new append x 1 13 y
kvserver[3]: begin删除通道index: 448
2023/09/23 03:26:58 kvserver[3]: 成功删除通道index: 448
OK:i num is 3, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:26:58 3: client new append x 3 9 y
kvserver[3]: begin删除通道index: 447
2023/09/23 03:26:58 kvserver[3]: 成功删除通道index: 447
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Get 0  3648117293085908437 23} 450 23 false [] 0 0}处理完成,通知index = [450]的channel
2023/09/23 03:26:58 kvserver[3]: applyMsg: {true {Get 0  3648117293085908437 23} 450 23 false [] 0 0}处理完成,通知完成index = [450]的channel
---------------
3接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 13 y) 3167394946904760106 24},term is 23,len is 452
---------------
OK:i num is 1, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 2: client new get 2
2023/09/23 03:26:58 kvserver[3]: GET获取到通知结果,index=[450],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
kvserver[3]: pre删除通道index: 450
kvserver[3]: begin删除通道index: 450
2023/09/23 03:26:58 kvserver[3]: 成功删除通道index: 450
OK:i num is 2, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:26:58 0: client new append x 0 10 y
---------------
3接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 9 y) 1199091860389120805 24},term is 23,len is 453
---------------
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 24},term is 23,len is 454
---------------
---------------
3接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 10 y) 3648117293085908437 24},term is 23,len is 455
---------------
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 450, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：0节点term为23，leader发送term为23, 接收5个, PrevLogIndex is 450
updateIndex = 450, lastIndex = 0
0更新log，长度455
测试：1节点term为23，leader发送term为23, 接收5个, PrevLogIndex is 450
updateIndex = 450, lastIndex = 0
测试：0节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
[0][23][0] apply index = 441, commit is 450
0:{441}unlock now
0:{441}unlock end
0:{441}lock now
0:{441}lock end
[0][23][0] apply index = 442, commit is 450
0:{442}unlock now
0:{442}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
4 begin to append 0
prevlogindex = 435, lastIndex = 0
4 begin to append 1
prevlogindex = 435, lastIndex = 0
4 begin to append 2
prevlogindex = 455, lastIndex = 0
4 begin to append 3
prevlogindex = 445, lastIndex = 0
4 AppOutOfDate follow -> candidate
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
0:{442}lock now
0:{442}lock end
[0][23][0] apply index = 443, commit is 450
0:{443}unlock now
0:{443}unlock end
0:{443}lock now
0:{443}lock end
[0][23][0] apply index = 444, commit is 450
0:{444}unlock now
0:{444}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
0:{444}lock now
0:{444}lock end
[0][23][0] apply index = 445, commit is 450
0:{445}unlock now
0:{445}unlock end
0:{445}lock now
0:{445}lock end
[0][23][0] apply index = 446, commit is 450
0:{446}unlock now
0:{446}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
0:{446}lock now
0:{446}lock end
[0][23][0] apply index = 447, commit is 450
0:{447}unlock now
0:{447}unlock end
0:{447}lock now
0:{447}lock end
[0][23][0] apply index = 448, commit is 450
0:{448}unlock now
0:{448}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
0:{448}lock now
0:{448}lock end
[0][23][0] apply index = 449, commit is 450
0:{449}unlock now
0:{449}unlock end
0:{449}lock now
0:{449}lock end
[0][23][0] apply index = 450, commit is 450
0:{450}unlock now
0:{450}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
0:{450}lock now
0:{450}lock end
0:rf.commitIndex = 450, rf.lastApplied = 450
测试：2节点term为21，leader发送term为21, 接收0个, PrevLogIndex is 455
2:rf.commitIndex = 445, rf.lastApplied = 445
测试：0节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收5个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
1更新log，长度455
[1][23][0] apply index = 441, commit is 450
1:{441}unlock now
1:{441}unlock end
1:{441}lock now
1:{441}lock end
[1][23][0] apply index = 442, commit is 450
1:{442}unlock now
1:{442}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
1:{442}lock now
1:{442}lock end
[1][23][0] apply index = 443, commit is 450
1:{443}unlock now
1:{443}unlock end
1:{443}lock now
1:{443}lock end
[1][23][0] apply index = 444, commit is 450
1:{444}unlock now
1:{444}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
1 return success! num is 1
nextIndex = 451, lastIndex = 0, len = 455
1:{444}lock now
1:{444}lock end
[1][23][0] apply index = 445, commit is 450
1:{445}unlock now
1:{445}unlock end
1:{445}lock now
1:{445}lock end
[1][23][0] apply index = 446, commit is 450
1:{446}unlock now
1:{446}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
1:{446}lock now
1:{446}lock end
[1][23][0] apply index = 447, commit is 450
1:{447}unlock now
1:{447}unlock end
1:{447}lock now
1:{447}lock end
[1][23][0] apply index = 448, commit is 450
1:{448}unlock now
1:{448}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
1:{448}lock now
1:{448}lock end
[1][23][0] apply index = 449, commit is 450
1:{449}unlock now
1:{449}unlock end
1:{449}lock now
1:{449}lock end
[1][23][0] apply index = 450, commit is 450
1:{450}unlock now
1:{450}unlock end
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:26:58 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
1:{450}lock now
1:{450}lock end
1:rf.commitIndex = 450, rf.lastApplied = 450
测试：0节点term为23，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
0:投票检查455,435,23,18,21,23
0 vote refuse 1 -> 4
测试：0节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收10个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
4: vote is out of date
测试：0节点term为23，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收5个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：0节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 455, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 455
1:rf.commitIndex = 450, rf.lastApplied = 450
测试：0节点term为23，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
1 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
4 follow -> candidate
4 begin to elect
4 term is 24
0:投票检查455,455,23,21,24,23
2:投票检查455,455,21,21,24,21
2 vote now -> 4
4: vote num is 2
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 455, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 455
1:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 455, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 455
1 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
1:rf.commitIndex = 450, rf.lastApplied = 450
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 455, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 455
1:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 455
2023/09/23 03:26:59 kvserver[3]: GET处理请求超时: {Get 4  2502059193987234581 24}
kvserver[3]: pre删除通道index: 451
kvserver[3]: begin删除通道index: 451
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 451
---------------
3接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 24},term is 23,len is 456
---------------
2023/09/23 03:26:59 kvserver[3]: PUTAPPEND处理请求超时: {Append 1 x 1 13 y 3167394946904760106 24}
kvserver[3]: pre删除通道index: 452
kvserver[3]: begin删除通道index: 452
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 452
---------------
3接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 13 y) 3167394946904760106 24},term is 23,len is 457
---------------
2023/09/23 03:26:59 kvserver[3]: PUTAPPEND处理请求超时: {Append 3 x 3 9 y 1199091860389120805 24}
kvserver[3]: pre删除通道index: 453
kvserver[3]: begin删除通道index: 453
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 453
2023/09/23 03:26:59 kvserver[3]: GET处理请求超时: {Get 2  1111049196432932634 24}
kvserver[3]: pre删除通道index: 454
kvserver[3]: begin删除通道index: 454
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 454
---------------
3接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 9 y) 1199091860389120805 24},term is 23,len is 458
---------------
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 24},term is 23,len is 459
---------------
2023/09/23 03:26:59 kvserver[3]: PUTAPPEND处理请求超时: {Append 0 x 0 10 y 3648117293085908437 24}
kvserver[3]: pre删除通道index: 455
kvserver[3]: begin删除通道index: 455
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 455
---------------
3接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 10 y) 3648117293085908437 24},term is 23,len is 460
---------------
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 455, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收5个, PrevLogIndex is 455
updateIndex = 455, lastIndex = 0
1更新log，长度460
1:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 456, lastIndex = 0, len = 460
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 460, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 460
1:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 461, lastIndex = 0, len = 460
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 460, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 460
1:rf.commitIndex = 450, rf.lastApplied = 450
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
1 return success! num is 1
nextIndex = 461, lastIndex = 0, len = 460
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 460, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 460
1:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 461, lastIndex = 0, len = 460
2 follow -> candidate
2 begin to elect
2 term is 25
0:投票检查455,455,23,21,25,24
4:投票检查455,455,21,21,25,24
4 vote now -> 2
2: vote num is 2
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 460, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收0个, PrevLogIndex is 460
1:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 461, lastIndex = 0, len = 460
2023/09/23 03:26:59 kvserver[3]: GET处理请求超时: {Get 4  2502059193987234581 24}
kvserver[3]: pre删除通道index: 456
kvserver[3]: begin删除通道index: 456
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 456
---------------
3接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 24},term is 23,len is 461
---------------
2023/09/23 03:26:59 kvserver[3]: PUTAPPEND处理请求超时: {Append 1 x 1 13 y 3167394946904760106 24}
kvserver[3]: pre删除通道index: 457
kvserver[3]: begin删除通道index: 457
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 457
---------------
3接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 13 y) 3167394946904760106 24},term is 23,len is 462
---------------
0 follow -> candidate
0 begin to elect
0 term is 26
2023/09/23 03:26:59 kvserver[3]: PUTAPPEND处理请求超时: {Append 3 x 3 9 y 1199091860389120805 24}
kvserver[3]: pre删除通道index: 458
kvserver[3]: begin删除通道index: 458
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 458
2023/09/23 03:26:59 kvserver[3]: PUTAPPEND处理请求超时: {Append 0 x 0 10 y 3648117293085908437 24}
kvserver[3]: pre删除通道index: 460
kvserver[3]: begin删除通道index: 460
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 460
2023/09/23 03:26:59 kvserver[3]: GET处理请求超时: {Get 2  1111049196432932634 24}
kvserver[3]: pre删除通道index: 459
kvserver[3]: begin删除通道index: 459
2023/09/23 03:26:59 kvserver[3]: 成功删除通道index: 459
2:投票检查455,455,21,23,26,25
2 vote now -> 0
4:投票检查455,455,21,23,26,25
4 vote now -> 0
0: vote num is 2
0: vote num is 3
0 is leader
---------------
3接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 9 y) 1199091860389120805 24},term is 23,len is 463
---------------
---------------
3接受新命令{%!d(string=Append) %!d(string=0) %!d(string=x 0 10 y) 3648117293085908437 24},term is 23,len is 464
---------------
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 24},term is 23,len is 465
---------------
3 begin to append 0
prevlogindex = 450, lastIndex = 0
3 begin to append 1
prevlogindex = 460, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：1节点term为23，leader发送term为23, 接收5个, PrevLogIndex is 460
updateIndex = 460, lastIndex = 0
1更新log，长度465
1:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 461, lastIndex = 0, len = 465
0 begin to append 1
prevlogindex = 455, lastIndex = 0
0 begin to append 2
prevlogindex = 455, lastIndex = 0
0 begin to append 3
prevlogindex = 455, lastIndex = 0
0 begin to append 4
prevlogindex = 455, lastIndex = 0
测试：4节点term为26，leader发送term为26, 接收0个, PrevLogIndex is 455
不匹配,args = 455,lastIndex = 0,len = 455
log.term = 21, lastTerm = 0, args.term = 23
xindex = 436, last = 0
x is 446, len is 455
0 nextIndex change to 446
nextIndex = 446, lastIndex = 0, len = 455
测试：2节点term为26，leader发送term为26, 接收0个, PrevLogIndex is 455
不匹配,args = 455,lastIndex = 0,len = 455
log.term = 21, lastTerm = 0, args.term = 23
xindex = 436, last = 0
x is 446, len is 455
0 nextIndex change to 446
nextIndex = 446, lastIndex = 0, len = 455
测试：4节点term为26，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
3 AppOutOfDate follow -> candidate
测试：1节点term为23，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：4节点term为26，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：4节点term为26，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：0节点term为26，leader发送term为23, 接收10个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
测试：1节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：4节点term为26，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：4节点term为26，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：0节点term为26，leader发送term为23, 接收10个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
测试：1节点term为23，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：1节点term为23，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：4节点term为26，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：0节点term为26，leader发送term为23, 接收5个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
1:投票检查465,435,23,18,21,23
1 vote refuse 1 -> 4
1:投票检查465,455,23,21,24,23
测试：4节点term为26，leader发送term为23, 接收20个, PrevLogIndex is 445
测试：0节点term为26，leader发送term为23, 接收10个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
测试：3节点term为26，leader发送term为21, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：3节点term为26，leader发送term为21, 接收5个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：0节点term为26，leader发送term为23, 接收5个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
测试：0节点term为26，leader发送term为23, 接收5个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
测试：1节点term为24，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：1节点term为24，leader发送term为21, 接收10个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：1节点term为24，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
3 follow -> candidate
3 begin to elect
3 term is 27
测试：0节点term为26，leader发送term为23, 接收15个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
测试：0节点term为26，leader发送term为23, 接收10个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
网络分区AppOutOfDate,reply is 1
4: vote is out of date
测试：1节点term为24，leader发送term为21, 接收5个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
1:投票检查465,465,23,23,27,24
1 vote now -> 3
测试：4节点term为26，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
0:投票检查455,465,23,23,27,26
0 vote now -> 3
3:投票检查465,455,23,23,26,27
3 vote refuse 1 -> 0
测试：0节点term为27，leader发送term为23, 接收5个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
4:投票检查455,440,21,18,20,26
4 vote refuse 1 -> 1
3: vote num is 2
测试：3节点term为27，leader发送term为21, 接收5个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
4:投票检查455,445,21,21,23,26
4 vote refuse 1 -> 3
测试：1节点term为27，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：1节点term为27，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
3: vote num is 3
3 is leader
测试：1节点term为27，leader发送term为21, 接收5个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
1:投票检查465,455,23,23,26,27
1 vote refuse 1 -> 0
测试：0节点term为27，leader发送term为23, 接收10个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
0: vote is out of date
测试：3节点term为27，leader发送term为21, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：3节点term为27，leader发送term为21, 接收5个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：3节点term为27，leader发送term为21, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：3节点term为27，leader发送term为21, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：3节点term为27，leader发送term为21, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：3节点term为27，leader发送term为21, 接收5个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：3节点term为27，leader发送term为21, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：3节点term为27，leader发送term为21, 接收5个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
4: vote is out of date
1: vote is out of date
0: vote is out of date
测试：3节点term为27，leader发送term为26, 接收0个, PrevLogIndex is 455
网络分区AppOutOfDate,reply is 1
3: vote is out of date
测试：4节点term为26，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
4:投票检查455,440,21,18,21,26
4 vote refuse 1 -> 1
4:投票检查455,465,21,23,27,26
4 vote now -> 3
1: vote is out of date
测试：1节点term为27，leader发送term为26, 接收0个, PrevLogIndex is 455
网络分区AppOutOfDate,reply is 1
测试：0节点term为27，leader发送term为23, 接收5个, PrevLogIndex is 450
网络分区AppOutOfDate,reply is 1
测试：4节点term为27，leader发送term为23, 接收0个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
4:投票检查455,440,21,18,22,27
4 vote refuse 1 -> 1
3: vote num is 1
测试：1节点term为27，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：1节点term为27，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
3:投票检查465,455,23,21,24,27
3 vote refuse 1 -> 4
测试：1节点term为27，leader发送term为21, 接收20个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
1: vote is out of date
测试：4节点term为27，leader发送term为23, 接收0个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：4节点term为27，leader发送term为23, 接收5个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：4节点term为27，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：1节点term为27，leader发送term为21, 接收15个, PrevLogIndex is 435
网络分区AppOutOfDate,reply is 1
测试：4节点term为27，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
4: vote is out of date
测试：3节点term为27，leader发送term为21, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
3 begin to append 0
prevlogindex = 465, lastIndex = 0
3 begin to append 1
prevlogindex = 465, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 465, lastIndex = 0
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 465
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 465
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 465
1:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 466, lastIndex = 0, len = 465
3 begin to append 0
prevlogindex = 455, lastIndex = 0
3 begin to append 1
prevlogindex = 465, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 455
updateIndex = 455, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 465
1:rf.commitIndex = 450, rf.lastApplied = 450
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 455, lastIndex = 0
1 return success! num is 1
nextIndex = 466, lastIndex = 0, len = 465
测试：4节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 455
不匹配,args = 455,lastIndex = 0,len = 455
log.term = 21, lastTerm = 0, args.term = 23
xindex = 436, last = 0
x is 446, len is 465
3 nextIndex change to 446
nextIndex = 446, lastIndex = 0, len = 465
0更新log，长度465
0:rf.commitIndex = 450, rf.lastApplied = 450
0 return success! num is 2
nextIndex = 456, lastIndex = 0, len = 465
1 max is 465
2 max is 465
return because max = 465, last = 0, 23 != 27
2023/09/23 03:27:00 kvserver[3]: GET处理请求超时: {Get 4  2502059193987234581 24}
kvserver[3]: pre删除通道index: 461
kvserver[3]: begin删除通道index: 461
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 461
---------------
3接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 2502059193987234581 24},term is 27,len is 466
---------------
2023/09/23 03:27:00 kvserver[3]: PUTAPPEND处理请求超时: {Append 1 x 1 13 y 3167394946904760106 24}
kvserver[3]: pre删除通道index: 462
kvserver[3]: begin删除通道index: 462
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 462
---------------
3接受新命令{%!d(string=Append) %!d(string=1) %!d(string=x 1 13 y) 3167394946904760106 24},term is 27,len is 467
---------------
3 begin to append 0
prevlogindex = 465, lastIndex = 0
3 begin to append 1
prevlogindex = 465, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 445, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收2个, PrevLogIndex is 465
updateIndex = 465, lastIndex = 0
0更新log，长度467
测试：1节点term为27，leader发送term为27, 接收2个, PrevLogIndex is 465
updateIndex = 465, lastIndex = 0
1更新log，长度467
1:rf.commitIndex = 450, rf.lastApplied = 450
0:rf.commitIndex = 450, rf.lastApplied = 450
1 return success! num is 1
nextIndex = 466, lastIndex = 0, len = 467
0 return success! num is 2
nextIndex = 466, lastIndex = 0, len = 467
1 max is 467
2 max is 467
3:commitIndex -> 467
[3][27][0] apply index = 451, commit is 467
3:{451}unlock now
3:{451}unlock end
3:{451}lock now
3:{451}lock end
[3][27][0] apply index = 452, commit is 467
3:{452}unlock now
3:{452}unlock end
测试：4节点term为27，leader发送term为27, 接收22个, PrevLogIndex is 445
updateIndex = 445, lastIndex = 0
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{452}lock now
3:{452}lock end
[3][27][0] apply index = 453, commit is 467
3:{453}unlock now
3:{453}unlock end
[3]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{453}lock now
3:{453}lock end
[3][27][0] apply index = 454, commit is 467
3:{454}unlock now
3:{454}unlock end
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{454}lock now
3:{454}lock end
[3][27][0] apply index = 455, commit is 467
3:{455}unlock now
3:{455}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{455}lock now
3:{455}lock end
[3][27][0] apply index = 456, commit is 467
3:{456}unlock now
3:{456}unlock end
[3]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{456}lock now
3:{456}lock end
[3][27][0] apply index = 457, commit is 467
3:{457}unlock now
3:{457}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{457}lock now
3:{457}lock end
[3][27][0] apply index = 458, commit is 467
3:{458}unlock now
3:{458}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{458}lock now
3:{458}lock end
[3][27][0] apply index = 459, commit is 467
3:{459}unlock now
3:{459}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{459}lock now
3:{459}lock end
[3][27][0] apply index = 460, commit is 467
3:{460}unlock now
3:{460}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{460}lock now
3:{460}lock end
[3][27][0] apply index = 461, commit is 467
3:{461}unlock now
3:{461}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{461}lock now
3:{461}lock end
[3][27][0] apply index = 462, commit is 467
3:{462}unlock now
3:{462}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{462}lock now
3:{462}lock end
[3][27][0] apply index = 463, commit is 467
3:{463}unlock now
3:{463}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{463}lock now
3:{463}lock end
[3][27][0] apply index = 464, commit is 467
3:{464}unlock now
3:{464}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{464}lock now
3:{464}lock end
[3][27][0] apply index = 465, commit is 467
3:{465}unlock now
3:{465}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{465}lock now
3:{465}lock end
[3][27][0] apply index = 466, commit is 467
3:{466}unlock now
3:{466}unlock end
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 2  1111049196432932634 24} 465 23 false [] 0 0}处理完成,通知index = [465]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 2  1111049196432932634 24} 465 23 false [] 0 0}处理完成,通知完成index = [465]的channel
2023/09/23 03:27:00 CommandApply!!!!!!!!!
3:{466}lock now
3:{466}lock end
[3][27][0] apply index = 467, commit is 467
3:{467}unlock now
3:{467}unlock end
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 kvserver[3]: GET获取到通知结果,index=[465],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 4  2502059193987234581 24} 466 27 false [] 0 0}处理完成,通知index = [466]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 4  2502059193987234581 24} 466 27 false [] 0 0}处理完成,通知完成index = [466]的channel
2023/09/23 03:27:00 CommandApply!!!!!!!!!
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
kvserver[3]: pre删除通道index: 465
kvserver[3]: begin删除通道index: 465
3:{467}lock now
3:{467}lock end
3:rf.commitIndex = 467, rf.lastApplied = 467
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 465
2023/09/23 03:27:00 kvserver[3]: GET获取到通知结果,index=[466],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
OK:i num is 1, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 2: client new get 2
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 25},term is 27,len is 468
---------------
kvserver[3]: pre删除通道index: 466
kvserver[3]: begin删除通道index: 466
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 466
OK:i num is 0, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 4: client new append x 4 11 y
4更新log，长度467
---------------
3接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 11 y) 2502059193987234581 25},term is 27,len is 469
---------------
[4][27][0] apply index = 446, commit is 450
4:{446}unlock now
4:{446}unlock end
4:{446}lock now
4:{446}lock end
[4][27][0] apply index = 447, commit is 450
4:{447}unlock now
4:{447}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
4 return success! num is 1
nextIndex = 446, lastIndex = 0, len = 469
4:{447}lock now
4:{447}lock end
[4][27][0] apply index = 448, commit is 450
4:{448}unlock now
4:{448}unlock end
4:{448}lock now
4:{448}lock end
[4][27][0] apply index = 449, commit is 450
4:{449}unlock now
4:{449}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
4:{449}lock now
4:{449}lock end
[4][27][0] apply index = 450, commit is 450
4:{450}unlock now
4:{450}unlock end
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
4:{450}lock now
4:{450}lock end
4:rf.commitIndex = 450, rf.lastApplied = 450
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:27:00 kvserver[3]: PUTAPPEND处理请求超时: {Append 3 x 3 9 y 1199091860389120805 24}
kvserver[3]: pre删除通道index: 463
kvserver[3]: begin删除通道index: 463
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 463
2023/09/23 03:27:00 kvserver[3]: PUTAPPEND处理请求超时: {Append 0 x 0 10 y 3648117293085908437 24}
kvserver[3]: pre删除通道index: 464
kvserver[3]: begin删除通道index: 464
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 464
2023/09/23 03:27:00 0: client new get 0
---------------
3接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 25},term is 27,len is 470
---------------
2023/09/23 03:27:00 3: client new get 3
---------------
3接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 1199091860389120805 25},term is 27,len is 471
---------------
3 begin to append 0
prevlogindex = 467, lastIndex = 0
3 begin to append 1
prevlogindex = 467, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 467, lastIndex = 0
测试：4节点term为27，leader发送term为27, 接收4个, PrevLogIndex is 467
updateIndex = 467, lastIndex = 0
4更新log，长度471
4 return success! num is 1
nextIndex = 468, lastIndex = 0, len = 471
[4][27][0] apply index = 451, commit is 467
4:{451}unlock now
4:{451}unlock end
4:{451}lock now
4:{451}lock end
[4][27][0] apply index = 452, commit is 467
4:{452}unlock now
4:{452}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
4:{452}lock now
4:{452}lock end
[4][27][0] apply index = 453, commit is 467
4:{453}unlock now
4:{453}unlock end
4:{453}lock now
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
测试：0节点term为27，leader发送term为27, 接收4个, PrevLogIndex is 467
updateIndex = 467, lastIndex = 0
0更新log，长度471
4:{453}lock end
[4][27][0] apply index = 454, commit is 467
4:{454}unlock now
4:{454}unlock end
4:{454}lock now
4:{454}lock end
[4][27][0] apply index = 455, commit is 467
4:{455}unlock now
4:{455}unlock end
0 return success! num is 2
nextIndex = 468, lastIndex = 0, len = 471
1 max is 471
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2 max is 471
3:commitIndex -> 471
[0][27][0] apply index = 451, commit is 467
0:{451}unlock now
0:{451}unlock end
0:{451}lock now
2023/09/23 03:27:00 CommandApply!!!!!!!!!
0:{451}lock end
[0][27][0] apply index = 452, commit is 467
0:{452}unlock now
0:{452}unlock end
测试：1节点term为27，leader发送term为27, 接收4个, PrevLogIndex is 467
updateIndex = 467, lastIndex = 0
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3][27][0] apply index = 468, commit is 471
3:{468}unlock now
3:{468}unlock end
3:{468}lock now
3:{468}lock end
[3][27][0] apply index = 469, commit is 471
3:{469}unlock now
3:{469}unlock end
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
4:{455}lock now
4:{455}lock end
[4][27][0] apply index = 456, commit is 467
4:{456}unlock now
4:{456}unlock end
0:{452}lock now
0:{452}lock end
[0][27][0] apply index = 453, commit is 467
0:{453}unlock now
0:{453}unlock end
[0]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
0:{453}lock now
0:{453}lock end
[0][27][0] apply index = 454, commit is 467
0:{454}unlock now
0:{454}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 2  1111049196432932634 25} 468 27 false [] 0 0}处理完成,通知index = [468]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 2  1111049196432932634 25} 468 27 false [] 0 0}处理完成,通知完成index = [468]的channel
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Append 4 x 4 11 y 2502059193987234581 25} 469 27 false [] 0 0}处理完成,通知index = [469]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Append 4 x 4 11 y 2502059193987234581 25} 469 27 false [] 0 0}处理完成,通知完成index = [469]的channel
2023/09/23 03:27:00 kvserver[3]: PUTAPPEND获取到通知结果,index=[469],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y 27 true}
kvserver[3]: pre删除通道index: 469
kvserver[3]: begin删除通道index: 469
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 469
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
3:{469}lock now
3:{469}lock end
[3][27][0] apply index = 470, commit is 471
3:{470}unlock now
3:{470}unlock end
3:{470}lock now
3:{470}lock end
[3][27][0] apply index = 471, commit is 471
3:{471}unlock now
3:{471}unlock end
2023/09/23 03:27:00 kvserver[3]: GET获取到通知结果,index=[468],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
kvserver[3]: pre删除通道index: 468
kvserver[3]: begin删除通道index: 468
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 468
OK:i num is 1, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 2: client new get 2
4:{456}lock now
4:{456}lock end
[4][27][0] apply index = 457, commit is 467
4:{457}unlock now
4:{457}unlock end
4:{457}lock now
4:{457}lock end
[4][27][0] apply index = 458, commit is 467
4:{458}unlock now
4:{458}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
4:{458}lock now
4:{458}lock end
[4][27][0] apply index = 459, commit is 467
4:{459}unlock now
4:{459}unlock end
4:{459}lock now
4:{459}lock end
[4][27][0] apply index = 460, commit is 467
4:{460}unlock now
4:{460}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 0  3648117293085908437 25} 470 27 false [] 0 0}处理完成,通知index = [470]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 0  3648117293085908437 25} 470 27 false [] 0 0}处理完成,通知完成index = [470]的channel
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 3  1199091860389120805 25} 471 27 false [] 0 0}处理完成,通知index = [471]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 3  1199091860389120805 25} 471 27 false [] 0 0}处理完成,通知完成index = [471]的channel
2023/09/23 03:27:00 kvserver[3]: GET获取到通知结果,index=[471],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
kvserver[3]: pre删除通道index: 471
kvserver[3]: begin删除通道index: 471
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 471
2023/09/23 03:27:00 4: client new append x 4 12 y
4:{460}lock now
4:{460}lock end
[4][27][0] apply index = 461, commit is 467
4:{461}unlock now
4:{461}unlock end
4:{461}lock now
4:{461}lock end
[4][27][0] apply index = 462, commit is 467
4:{462}unlock now
4:{462}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
4:{462}lock now
4:{462}lock end
[4][27][0] apply index = 463, commit is 467
4:{463}unlock now
4:{463}unlock end
4:{463}lock now
4:{463}lock end
[4][27][0] apply index = 464, commit is 467
4:{464}unlock now
4:{464}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
4:{464}lock now
4:{464}lock end
[4][27][0] apply index = 465, commit is 467
4:{465}unlock now
4:{465}unlock end
4:{465}lock now
4:{465}lock end
[4][27][0] apply index = 466, commit is 467
4:{466}unlock now
4:{466}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
4:{466}lock now
4:{466}lock end
[4][27][0] apply index = 467, commit is 467
4:{467}unlock now
4:{467}unlock end
4:{467}lock now
4:{467}lock end
4:rf.commitIndex = 467, rf.lastApplied = 467
3:{471}lock now
3:{471}lock end
3:rf.commitIndex = 471, rf.lastApplied = 471
2023/09/23 03:27:00 kvserver[3]: GET获取到通知结果,index=[470],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
kvserver[3]: pre删除通道index: 470
kvserver[3]: begin删除通道index: 470
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 470
2023/09/23 03:27:00 CommandApply!!!!!!!!!
OK:i num is 2, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 0: client new get 0
OK:i num is 3, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:27:00 3: client new append x 3 10 y
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 1111049196432932634 26},term is 27,len is 472
---------------
1更新log，长度471
[1][27][0] apply index = 451, commit is 467
1:{451}unlock now
1:{451}unlock end
1:{451}lock now
1:{451}lock end
[1][27][0] apply index = 452, commit is 467
1:{452}unlock now
1:{452}unlock end
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
0:{454}lock now
0:{454}lock end
[0][27][0] apply index = 455, commit is 467
0:{455}unlock now
0:{455}unlock end
0:{455}lock now
0:{455}lock end
[0][27][0] apply index = 456, commit is 467
0:{456}unlock now
0:{456}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
0:{456}lock now
0:{456}lock end
[0][27][0] apply index = 457, commit is 467
0:{457}unlock now
0:{457}unlock end
0:{457}lock now
0:{457}lock end
[0][27][0] apply index = 458, commit is 467
0:{458}unlock now
0:{458}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
0:{458}lock now
0:{458}lock end
[0][27][0] apply index = 459, commit is 467
0:{459}unlock now
0:{459}unlock end
0:{459}lock now
0:{459}lock end
[0][27][0] apply index = 460, commit is 467
0:{460}unlock now
0:{460}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
1:{452}lock now
1:{452}lock end
[1][27][0] apply index = 453, commit is 467
1:{453}unlock now
1:{453}unlock end
1:{453}lock now
1:{453}lock end
[1][27][0] apply index = 454, commit is 467
1:{454}unlock now
1:{454}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
0:{460}lock now
0:{460}lock end
[0][27][0] apply index = 461, commit is 467
0:{461}unlock now
0:{461}unlock end
0:{461}lock now
0:{461}lock end
[0][27][0] apply index = 462, commit is 467
0:{462}unlock now
0:{462}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
1:{454}lock now
1:{454}lock end
[1][27][0] apply index = 455, commit is 467
1:{455}unlock now
1:{455}unlock end
1:{455}lock now
1:{455}lock end
[1][27][0] apply index = 456, commit is 467
1:{456}unlock now
1:{456}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
0:{462}lock now
0:{462}lock end
[0][27][0] apply index = 463, commit is 467
0:{463}unlock now
0:{463}unlock end
0:{463}lock now
0:{463}lock end
[0][27][0] apply index = 464, commit is 467
0:{464}unlock now
0:{464}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
1:{456}lock now
1:{456}lock end
[1][27][0] apply index = 457, commit is 467
1:{457}unlock now
1:{457}unlock end
1:{457}lock now
1:{457}lock end
[1][27][0] apply index = 458, commit is 467
1:{458}unlock now
1:{458}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
1:{458}lock now
1:{458}lock end
[1][27][0] apply index = 459, commit is 467
1:{459}unlock now
1:{459}unlock end
1:{459}lock now
1:{459}lock end
[1][27][0] apply index = 460, commit is 467
1:{460}unlock now
1:{460}unlock end
0:{464}lock now
0:{464}lock end
[0][27][0] apply index = 465, commit is 467
0:{465}unlock now
0:{465}unlock end
0:{465}lock now
0:{465}lock end
[0][27][0] apply index = 466, commit is 467
0:{466}unlock now
0:{466}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
0:{466}lock now
0:{466}lock end
[0][27][0] apply index = 467, commit is 467
0:{467}unlock now
0:{467}unlock end
0:{467}lock now
0:{467}lock end
0:rf.commitIndex = 467, rf.lastApplied = 467
1:{460}lock now
1:{460}lock end
[1][27][0] apply index = 461, commit is 467
1:{461}unlock now
1:{461}unlock end
1:{461}lock now
1:{461}lock end
[1][27][0] apply index = 462, commit is 467
1:{462}unlock now
1:{462}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
1:{462}lock now
1:{462}lock end
[1][27][0] apply index = 463, commit is 467
1:{463}unlock now
1:{463}unlock end
1:{463}lock now
1:{463}lock end
[1][27][0] apply index = 464, commit is 467
1:{464}unlock now
1:{464}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
1:{464}lock now
1:{464}lock end
[1][27][0] apply index = 465, commit is 467
1:{465}unlock now
1:{465}unlock end
1:{465}lock now
1:{465}lock end
[1][27][0] apply index = 466, commit is 467
1:{466}unlock now
1:{466}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
1:{466}lock now
1:{466}lock end
[1][27][0] apply index = 467, commit is 467
1:{467}unlock now
1:{467}unlock end
1:{467}lock now
1:{467}lock end
1:rf.commitIndex = 467, rf.lastApplied = 467
2023/09/23 03:27:00 CommandApply!!!!!!!!!
---------------
3接受新命令{%!d(string=Append) %!d(string=4) %!d(string=x 4 12 y) 2502059193987234581 26},term is 27,len is 473
---------------
---------------
3接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 3648117293085908437 26},term is 27,len is 474
---------------
---------------
3接受新命令{%!d(string=Append) %!d(string=3) %!d(string=x 3 10 y) 1199091860389120805 26},term is 27,len is 475
---------------
1 return success! num is 1
nextIndex = 468, lastIndex = 0, len = 475
3 begin to append 0
prevlogindex = 471, lastIndex = 0
3 begin to append 1
prevlogindex = 471, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 471, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收4个, PrevLogIndex is 471
updateIndex = 471, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收4个, PrevLogIndex is 471
updateIndex = 471, lastIndex = 0
1更新log，长度475
[1][27][0] apply index = 468, commit is 471
1:{468}unlock now
1:{468}unlock end
1:{468}lock now
1:{468}lock end
[1][27][0] apply index = 469, commit is 471
1:{469}unlock now
1:{469}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
1:{469}lock now
1:{469}lock end
[1][27][0] apply index = 470, commit is 471
1:{470}unlock now
1:{470}unlock end
1:{470}lock now
1:{470}lock end
[1][27][0] apply index = 471, commit is 471
1:{471}unlock now
1:{471}unlock end
1 return success! num is 1
nextIndex = 472, lastIndex = 0, len = 475
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
1:{471}lock now
1:{471}lock end
1:rf.commitIndex = 471, rf.lastApplied = 471
测试：4节点term为27，leader发送term为27, 接收4个, PrevLogIndex is 471
updateIndex = 471, lastIndex = 0
0更新log，长度475
[0][27][0] apply index = 468, commit is 471
0:{468}unlock now
0:{468}unlock end
0:{468}lock now
0:{468}lock end
[0][27][0] apply index = 469, commit is 471
0:{469}unlock now
0:{469}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
0:{469}lock now
0:{469}lock end
[0][27][0] apply index = 470, commit is 471
0:{470}unlock now
0:{470}unlock end
0:{470}lock now
0:{470}lock end
[0][27][0] apply index = 471, commit is 471
0:{471}unlock now
0:{471}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
0:{471}lock now
0:{471}lock end
0:rf.commitIndex = 471, rf.lastApplied = 471
0 return success! num is 2
nextIndex = 472, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
[3][27][0] apply index = 472, commit is 475
3:{472}unlock now
3:{472}unlock end
3:{472}lock now
3:{472}lock end
[3][27][0] apply index = 473, commit is 475
3:{473}unlock now
3:{473}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 2  1111049196432932634 26} 472 27 false [] 0 0}处理完成,通知index = [472]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 2  1111049196432932634 26} 472 27 false [] 0 0}处理完成,通知完成index = [472]的channel
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Append 4 x 4 12 y 2502059193987234581 26} 473 27 false [] 0 0}处理完成,通知index = [473]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Append 4 x 4 12 y 2502059193987234581 26} 473 27 false [] 0 0}处理完成,通知完成index = [473]的channel
2023/09/23 03:27:00 kvserver[3]: GET获取到通知结果,index=[472],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
kvserver[3]: pre删除通道index: 472
kvserver[3]: begin删除通道index: 472
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 472
3:{473}lock now
3:{473}lock end
[3][27][0] apply index = 474, commit is 475
3:{474}unlock now
3:{474}unlock end
3:{474}lock now
3:{474}lock end
[3][27][0] apply index = 475, commit is 475
3:{475}unlock now
3:{475}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 0  3648117293085908437 26} 474 27 false [] 0 0}处理完成,通知index = [474]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Get 0  3648117293085908437 26} 474 27 false [] 0 0}处理完成,通知完成index = [474]的channel
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[3]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Append 3 x 3 10 y 1199091860389120805 26} 475 27 false [] 0 0}处理完成,通知index = [475]的channel
2023/09/23 03:27:00 kvserver[3]: applyMsg: {true {Append 3 x 3 10 y 1199091860389120805 26} 475 27 false [] 0 0}处理完成,通知完成index = [475]的channel
2023/09/23 03:27:00 kvserver[3]: PUTAPPEND获取到通知结果,index=[473],replyMsg: {x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y 27 true}
kvserver[3]: pre删除通道index: 473
kvserver[3]: begin删除通道index: 473
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 473
OK:i num is 1, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 kvserver[3]: GET获取到通知结果,index=[474],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
kvserver[3]: pre删除通道index: 474
kvserver[3]: begin删除通道index: 474
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 474
OK:i num is 2, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
3:{475}lock now
3:{475}lock end
3:rf.commitIndex = 475, rf.lastApplied = 475
2023/09/23 03:27:00 kvserver[3]: PUTAPPEND获取到通知结果,index=[475],replyMsg: {x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y 27 true}
kvserver[3]: pre删除通道index: 475
kvserver[3]: begin删除通道index: 475
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 475
4更新log，长度475
[4][27][0] apply index = 468, commit is 471
4:{468}unlock now
4:{468}unlock end
4:{468}lock now
4:{468}lock end
[4][27][0] apply index = 469, commit is 471
4:{469}unlock now
4:{469}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
4 return success! num is 1
nextIndex = 472, lastIndex = 0, len = 475
4:{469}lock now
4:{469}lock end
[4][27][0] apply index = 470, commit is 471
4:{470}unlock now
4:{470}unlock end
4:{470}lock now
4:{470}lock end
[4][27][0] apply index = 471, commit is 471
4:{471}unlock now
4:{471}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
4:{471}lock now
4:{471}lock end
4:rf.commitIndex = 471, rf.lastApplied = 471
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
[0][27][0] apply index = 472, commit is 475
0:{472}unlock now
0:{472}unlock end
0:{472}lock now
0:{472}lock end
[0][27][0] apply index = 473, commit is 475
0:{473}unlock now
0:{473}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
[1][27][0] apply index = 472, commit is 475
1:{472}unlock now
1:{472}unlock end
1:{472}lock now
1:{472}lock end
[1][27][0] apply index = 473, commit is 475
1:{473}unlock now
1:{473}unlock end
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
0:{473}lock now
0:{473}lock end
[0][27][0] apply index = 474, commit is 475
0:{474}unlock now
0:{474}unlock end
0:{474}lock now
0:{474}lock end
[0][27][0] apply index = 475, commit is 475
0:{475}unlock now
0:{475}unlock end
0 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
1:{473}lock now
1:{473}lock end
[1][27][0] apply index = 474, commit is 475
1:{474}unlock now
1:{474}unlock end
1:{474}lock now
1:{474}lock end
[1][27][0] apply index = 475, commit is 475
1:{475}unlock now
2023/09/23 03:27:00 CommandApply!!!!!!!!!
1:{475}unlock end
3:rf.commitIndex = 475, rf.lastApplied = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
[4][27][0] apply index = 472, commit is 475
4:{472}unlock now
4:{472}unlock end
4:{472}lock now
4:{472}lock end
[4][27][0] apply index = 473, commit is 475
4:{473}unlock now
4:{473}unlock end
4 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[0]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
0:{475}lock now
0:{475}lock end
0:rf.commitIndex = 475, rf.lastApplied = 475
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
1:{475}lock now
1:{475}lock end
1:rf.commitIndex = 475, rf.lastApplied = 475
4:{473}lock now
4:{473}lock end
[4][27][0] apply index = 474, commit is 475
4:{474}unlock now
4:{474}unlock end
[4]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[1]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
4:{474}lock now
4:{474}lock end
[4][27][0] apply index = 475, commit is 475
4:{475}unlock now
4:{475}unlock end
4:{475}lock now
4:{475}lock end
4:rf.commitIndex = 475, rf.lastApplied = 475
2023/09/23 03:27:00 CommandApply!!!!!!!!!
[4]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
1:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
0:rf.commitIndex = 475, rf.lastApplied = 475
3:rf.commitIndex = 475, rf.lastApplied = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
1 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
4:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
3:rf.commitIndex = 475, rf.lastApplied = 475
2023/09/23 03:27:00 kvserver[3]: PUTAPPEND处理请求超时: {Append 1 x 1 13 y 3167394946904760106 24}
kvserver[3]: pre删除通道index: 467
kvserver[3]: begin删除通道index: 467
2023/09/23 03:27:00 kvserver[3]: 成功删除通道index: 467
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
0:rf.commitIndex = 475, rf.lastApplied = 475
1 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
2 follow -> candidate
2 begin to elect
2 term is 27
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
4:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
3:rf.commitIndex = 475, rf.lastApplied = 475
测试：2节点term为27，leader发送term为23, 接收0个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 465, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
测试：2节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
4 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
2:投票检查455,440,21,18,21,27
2 vote refuse 1 -> 1
1: vote is out of date
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
3:投票检查475,455,27,21,25,27
3 vote refuse 1 -> 2
测试：2节点term为27，leader发送term为23, 接收5个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：2节点term为27，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：2节点term为27，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：2节点term为27，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
2: vote is out of date
测试：2节点term为27，leader发送term为23, 接收20个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：2节点term为27，leader发送term为23, 接收0个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：2节点term为27，leader发送term为27, 接收2个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
测试：2节点term为27，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：2节点term为27，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
4:投票检查475,455,27,21,27,27
测试：2节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
测试：2节点term为27，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
2:投票检查455,465,21,23,27,27
2 vote refuse 2 -> 3
测试：2节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
1:投票检查475,455,27,21,25,27
1 vote refuse 1 -> 2
测试：2节点term为27，leader发送term为23, 接收15个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：2节点term为27，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
测试：2节点term为27，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
2:投票检查455,440,21,18,20,27
2 vote refuse 1 -> 1
测试：2节点term为27，leader发送term为23, 接收10个, PrevLogIndex is 445
网络分区AppOutOfDate,reply is 1
3:投票检查475,455,27,21,27,27
0:投票检查475,455,27,21,27,27
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
2:投票检查455,440,21,18,22,27
2 vote refuse 1 -> 1
测试：2节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 465
1: vote is out of date
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
1: vote is out of date
1:投票检查475,455,27,21,27,27
不匹配,args = 465,lastIndex = 0,len = 455
2: vote is out of date
2:投票检查455,445,21,21,23,27
2 vote refuse 1 -> 3
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
测试：2节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
3: vote is out of date
测试：2节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
测试：2节点term为27，leader发送term为27, 接收6个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
测试：2节点term为27，leader发送term为27, 接收10个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 465
不匹配,args = 465,lastIndex = 0,len = 455
reply XLen is 456
3 nextIndex change to 456
nextIndex = 456, lastIndex = 0, len = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 455, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：2节点term为27，leader发送term为27, 接收20个, PrevLogIndex is 455
不匹配,args = 455,lastIndex = 0,len = 455
log.term = 21, lastTerm = 0, args.term = 23
xindex = 436, last = 0
x is 446, len is 475
3 nextIndex change to 446
nextIndex = 446, lastIndex = 0, len = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 445, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
测试：2节点term为27，leader发送term为27, 接收30个, PrevLogIndex is 445
updateIndex = 445, lastIndex = 0
2更新log，长度475
1:rf.commitIndex = 475, rf.lastApplied = 475
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
4 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
3:rf.commitIndex = 475, rf.lastApplied = 475
[2][27][0] apply index = 446, commit is 475
2:{446}unlock now
2:{446}unlock end
2:{446}lock now
2:{446}lock end
[2][27][0] apply index = 447, commit is 475
2:{447}unlock now
2:{447}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2:{447}lock now
2:{447}lock end
[2][27][0] apply index = 448, commit is 475
2:{448}unlock now
2:{448}unlock end
2:{448}lock now
2:{448}lock end
[2][27][0] apply index = 449, commit is 475
2:{449}unlock now
2:{449}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 y
2:{449}lock now
2:{449}lock end
[2][27][0] apply index = 450, commit is 475
2:{450}unlock now
2:{450}unlock end
2:{450}lock now
2:{450}lock end
[2][27][0] apply index = 451, commit is 475
2:{451}unlock now
2:{451}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2:{451}lock now
2:{451}lock end
[2][27][0] apply index = 452, commit is 475
2:{452}unlock now
2:{452}unlock end
2:{452}lock now
2:{452}lock end
[2][27][0] apply index = 453, commit is 475
2:{453}unlock now
2:{453}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]append key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2:{453}lock now
2:{453}lock end
[2][27][0] apply index = 454, commit is 475
2:{454}unlock now
2:{454}unlock end
2:{454}lock now
2:{454}lock end
[2][27][0] apply index = 455, commit is 475
2:{455}unlock now
2:{455}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]append key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2:{455}lock now
2:{455}lock end
[2][27][0] apply index = 456, commit is 475
2:{456}unlock now
2:{456}unlock end
2:{456}lock now
2:{456}lock end
[2][27][0] apply index = 457, commit is 475
2:{457}unlock now
2:{457}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
2:{457}lock now
2:{457}lock end
[2][27][0] apply index = 458, commit is 475
2:{458}unlock now
2:{458}unlock end
2:{458}lock now
2:{458}lock end
[2][27][0] apply index = 459, commit is 475
2:{459}unlock now
2:{459}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2:{459}lock now
2:{459}lock end
[2][27][0] apply index = 460, commit is 475
2:{460}unlock now
2:{460}unlock end
2:{460}lock now
2:{460}lock end
[2][27][0] apply index = 461, commit is 475
2:{461}unlock now
2:{461}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2:{461}lock now
2:{461}lock end
[2][27][0] apply index = 462, commit is 475
2:{462}unlock now
2:{462}unlock end
2:{462}lock now
2:{462}lock end
[2][27][0] apply index = 463, commit is 475
2:{463}unlock now
2:{463}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
2023/09/23 03:27:01 CommandApply!!!!!!!!!
2:{463}lock now
2:{463}lock end
[2][27][0] apply index = 464, commit is 475
2:{464}unlock now
2:{464}unlock end
2:{464}lock now
2:{464}lock end
[2][27][0] apply index = 465, commit is 475
2:{465}unlock now
2:{465}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2:{465}lock now
2:{465}lock end
[2][27][0] apply index = 466, commit is 475
2:{466}unlock now
2:{466}unlock end
2:{466}lock now
2:{466}lock end
[2][27][0] apply index = 467, commit is 475
2:{467}unlock now
2:{467}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
2:{467}lock now
2:{467}lock end
[2][27][0] apply index = 468, commit is 475
2:{468}unlock now
2:{468}unlock end
2:{468}lock now
2:{468}lock end
[2][27][0] apply index = 469, commit is 475
2:{469}unlock now
2:{469}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 y
2:{469}lock now
2:{469}lock end
[2][27][0] apply index = 470, commit is 475
2:{470}unlock now
2:{470}unlock end
2:{470}lock now
2:{470}lock end
[2][27][0] apply index = 471, commit is 475
2:{471}unlock now
2:{471}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 y
2:{471}lock now
2:{471}lock end
[2][27][0] apply index = 472, commit is 475
2:{472}unlock now
2:{472}unlock end
2:{472}lock now
2:{472}lock end
[2][27][0] apply index = 473, commit is 475
2:{473}unlock now
2:{473}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]append key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2:{473}lock now
2:{473}lock end
[2][27][0] apply index = 474, commit is 475
2:{474}unlock now
2:{474}unlock end
2:{474}lock now
2:{474}lock end
[2][27][0] apply index = 475, commit is 475
2:{475}unlock now
2:{475}unlock end
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[2]append key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2:{475}lock now
2:{475}lock end
2:rf.commitIndex = 475, rf.lastApplied = 475
2 return success! num is 2
nextIndex = 446, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 475, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
1:rf.commitIndex = 475, rf.lastApplied = 475
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2:rf.commitIndex = 475, rf.lastApplied = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
4:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 475, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
1 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
2 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 475, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
0 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2:rf.commitIndex = 475, rf.lastApplied = 475
2 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 475, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2:rf.commitIndex = 475, rf.lastApplied = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
4:rf.commitIndex = 475, rf.lastApplied = 475
2 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
1 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 475, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
4 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2:rf.commitIndex = 475, rf.lastApplied = 475
2 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
0:rf.commitIndex = 475, rf.lastApplied = 475
3:rf.commitIndex = 475, rf.lastApplied = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 475, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1:rf.commitIndex = 475, rf.lastApplied = 475
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2:rf.commitIndex = 475, rf.lastApplied = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
1 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
2 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
4:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 475, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：2节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2:rf.commitIndex = 475, rf.lastApplied = 475
测试：4节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
4:rf.commitIndex = 475, rf.lastApplied = 475
测试：1节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
2 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
测试：0节点term为27，leader发送term为27, 接收0个, PrevLogIndex is 475
0:rf.commitIndex = 475, rf.lastApplied = 475
1:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 475
4 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 475
1 max is 475
2 max is 475
3:commitIndex -> 475
3:rf.commitIndex = 475, rf.lastApplied = 475
2023/09/23 03:27:01 wait for clients
2023/09/23 03:27:01 read from clients 0
2023/09/23 03:27:01 Check 11 for client 0
---------------
3接受新命令{%!d(string=Get) %!d(string=0) %!d(string=) 481371401344628756 11},term is 27,len is 476
---------------
3 begin to append 0
prevlogindex = 475, lastIndex = 0
3 begin to append 1
prevlogindex = 475, lastIndex = 0
3 begin to append 2
prevlogindex = 475, lastIndex = 0
3 begin to append 4
prevlogindex = 475, lastIndex = 0
测试：4节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 475
updateIndex = 475, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 475
updateIndex = 475, lastIndex = 0
4更新log，长度476
4:rf.commitIndex = 475, rf.lastApplied = 475
4 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 476
测试：1节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 475
updateIndex = 475, lastIndex = 0
测试：2节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 475
updateIndex = 475, lastIndex = 0
0更新log，长度476
0:rf.commitIndex = 475, rf.lastApplied = 475
0 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 476
1 max is 476
2 max is 476
3:commitIndex -> 476
1更新log，长度476
1 return success! num is 1
nextIndex = 476, lastIndex = 0, len = 476
2更新log，长度476
2:rf.commitIndex = 475, rf.lastApplied = 475
[3][27][0] apply index = 476, commit is 476
3:{476}unlock now
3:{476}unlock end
3:{476}lock now
3:{476}lock end
1:rf.commitIndex = 475, rf.lastApplied = 475
2023/09/23 03:27:01 CommandApply!!!!!!!!!
[3]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
3:rf.commitIndex = 476, rf.lastApplied = 476
2 return success! num is 2
nextIndex = 476, lastIndex = 0, len = 476
1 max is 476
2 max is 476
3:commitIndex -> 476
3:rf.commitIndex = 476, rf.lastApplied = 476
2023/09/23 03:27:01 kvserver[3]: applyMsg: {true {Get 0  481371401344628756 11} 476 27 false [] 0 0}处理完成,通知index = [476]的channel
2023/09/23 03:27:01 kvserver[3]: applyMsg: {true {Get 0  481371401344628756 11} 476 27 false [] 0 0}处理完成,通知完成index = [476]的channel
2023/09/23 03:27:01 kvserver[3]: GET获取到通知结果,index=[476],replyMsg.value: x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
reply value is x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
kvserver[3]: pre删除通道index: 476
kvserver[3]: begin删除通道index: 476
2023/09/23 03:27:01 kvserver[3]: 成功删除通道index: 476
OK:i num is 4, key is 0, return x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
2023/09/23 03:27:01 read from clients 1
2023/09/23 03:27:01 Check 14 for client 1
---------------
3接受新命令{%!d(string=Get) %!d(string=1) %!d(string=) 481371401344628756 12},term is 27,len is 477
---------------
3 begin to append 0
prevlogindex = 476, lastIndex = 0
3 begin to append 1
prevlogindex = 476, lastIndex = 0
3 begin to append 2
prevlogindex = 476, lastIndex = 0
3 begin to append 4
prevlogindex = 476, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 476
updateIndex = 476, lastIndex = 0
1更新log，长度477
测试：0节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 476
updateIndex = 476, lastIndex = 0
0更新log，长度477
测试：2节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 476
updateIndex = 476, lastIndex = 0
[0][27][0] apply index = 476, commit is 476
0:{476}unlock now
0:{476}unlock end
0:{476}lock now
2023/09/23 03:27:02 CommandApply!!!!!!!!!
0:{476}lock end
0:rf.commitIndex = 476, rf.lastApplied = 476
[0]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
测试：4节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 476
updateIndex = 476, lastIndex = 0
2更新log，长度477
[2][27][0] apply index = 476, commit is 476
2:{476}unlock now
2:{476}unlock end
2:{476}lock now
2:{476}lock end
2:rf.commitIndex = 476, rf.lastApplied = 476
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[2]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
1 return success! num is 1
nextIndex = 477, lastIndex = 0, len = 477
0 return success! num is 2
nextIndex = 477, lastIndex = 0, len = 477
1 max is 477
2 max is 477
3:commitIndex -> 477
2 return success! num is 1
nextIndex = 477, lastIndex = 0, len = 477
[3][27][0] apply index = 477, commit is 477
3:{477}unlock now
3:{477}unlock end
3:{477}lock now
3:{477}lock end
3:rf.commitIndex = 477, rf.lastApplied = 477
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[3]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:27:02 kvserver[3]: applyMsg: {true {Get 1  481371401344628756 12} 477 27 false [] 0 0}处理完成,通知index = [477]的channel
2023/09/23 03:27:02 kvserver[3]: applyMsg: {true {Get 1  481371401344628756 12} 477 27 false [] 0 0}处理完成,通知完成index = [477]的channel
2023/09/23 03:27:02 kvserver[3]: GET获取到通知结果,index=[477],replyMsg.value: x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
reply value is x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
kvserver[3]: pre删除通道index: 477
kvserver[3]: begin删除通道index: 477
2023/09/23 03:27:02 kvserver[3]: 成功删除通道index: 477
[1][27][0] apply index = 476, commit is 476
1:{476}unlock now
1:{476}unlock end
1:{476}lock now
1:{476}lock end
1:rf.commitIndex = 476, rf.lastApplied = 476
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[1]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
OK:i num is 4, key is 1, return x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2023/09/23 03:27:02 read from clients 2
2023/09/23 03:27:02 Check 8 for client 2
---------------
3接受新命令{%!d(string=Get) %!d(string=2) %!d(string=) 481371401344628756 13},term is 27,len is 478
---------------
4更新log，长度477
[4][27][0] apply index = 476, commit is 476
4:{476}unlock now
4:{476}unlock end
4:{476}lock now
4:{476}lock end
4:rf.commitIndex = 476, rf.lastApplied = 476
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[4]Get key:0, x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 y
4 return success! num is 2
nextIndex = 477, lastIndex = 0, len = 478
1 max is 477
2 max is 477
3:commitIndex -> 477
3:rf.commitIndex = 477, rf.lastApplied = 477
3 begin to append 0
prevlogindex = 477, lastIndex = 0
3 begin to append 1
prevlogindex = 477, lastIndex = 0
3 begin to append 2
prevlogindex = 477, lastIndex = 0
3 begin to append 4
prevlogindex = 477, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 477
updateIndex = 477, lastIndex = 0
0更新log，长度478
测试：4节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 477
updateIndex = 477, lastIndex = 0
4更新log，长度478
0 return success! num is 1
nextIndex = 478, lastIndex = 0, len = 478
测试：1节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 477
updateIndex = 477, lastIndex = 0
4 return success! num is 2
nextIndex = 478, lastIndex = 0, len = 478
1 max is 478
2 max is 478
3:commitIndex -> 478
[4][27][0] apply index = 477, commit is 477
4:{477}unlock now
4:{477}unlock end
4:{477}lock now
4:{477}lock end
4:rf.commitIndex = 477, rf.lastApplied = 477
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[4]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
[3][27][0] apply index = 478, commit is 478
3:{478}unlock now
3:{478}unlock end
3:{478}lock now
3:{478}lock end
3:rf.commitIndex = 478, rf.lastApplied = 478
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[3]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:02 kvserver[3]: applyMsg: {true {Get 2  481371401344628756 13} 478 27 false [] 0 0}处理完成,通知index = [478]的channel
2023/09/23 03:27:02 kvserver[3]: applyMsg: {true {Get 2  481371401344628756 13} 478 27 false [] 0 0}处理完成,通知完成index = [478]的channel
2023/09/23 03:27:02 kvserver[3]: GET获取到通知结果,index=[478],replyMsg.value: x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
reply value is x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
kvserver[3]: pre删除通道index: 478
kvserver[3]: begin删除通道index: 478
2023/09/23 03:27:02 kvserver[3]: 成功删除通道index: 478
OK:i num is 4, key is 2, return x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:02 read from clients 3
2023/09/23 03:27:02 Check 11 for client 3
测试：2节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 477
updateIndex = 477, lastIndex = 0
[0][27][0] apply index = 477, commit is 477
0:{477}unlock now
0:{477}unlock end
0:{477}lock now
0:{477}lock end
0:rf.commitIndex = 477, rf.lastApplied = 477
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[0]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
2更新log，长度478
[2][27][0] apply index = 477, commit is 477
2:{477}unlock now
2:{477}unlock end
2:{477}lock now
2:{477}lock end
2:rf.commitIndex = 477, rf.lastApplied = 477
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[2]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
1更新log，长度478
[1][27][0] apply index = 477, commit is 477
1:{477}unlock now
1:{477}unlock end
1:{477}lock now
1:{477}lock end
1:rf.commitIndex = 477, rf.lastApplied = 477
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[1]Get key:1, x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 y
---------------
3接受新命令{%!d(string=Get) %!d(string=3) %!d(string=) 481371401344628756 14},term is 27,len is 479
---------------
2 return success! num is 1
nextIndex = 478, lastIndex = 0, len = 479
1 return success! num is 2
nextIndex = 478, lastIndex = 0, len = 479
1 max is 478
2 max is 478
3:commitIndex -> 478
3:rf.commitIndex = 478, rf.lastApplied = 478
3 begin to append 0
prevlogindex = 478, lastIndex = 0
3 begin to append 1
prevlogindex = 478, lastIndex = 0
3 begin to append 2
prevlogindex = 478, lastIndex = 0
3 begin to append 4
prevlogindex = 478, lastIndex = 0
测试：2节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 478
updateIndex = 478, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 478
updateIndex = 478, lastIndex = 0
2更新log，长度479
2 return success! num is 1
nextIndex = 479, lastIndex = 0, len = 479
测试：4节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 478
updateIndex = 478, lastIndex = 0
[2][27][0] apply index = 478, commit is 478
2:{478}unlock now
2:{478}unlock end
2:{478}lock now
2:{478}lock end
2:rf.commitIndex = 478, rf.lastApplied = 478
测试：1节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 478
updateIndex = 478, lastIndex = 0
2023/09/23 03:27:02 CommandApply!!!!!!!!!
0更新log，长度479
[0][27][0] apply index = 478, commit is 478
0:{478}unlock now
0:{478}unlock end
0:{478}lock now
0:{478}lock end
0:rf.commitIndex = 478, rf.lastApplied = 478
0 return success! num is 2
nextIndex = 479, lastIndex = 0, len = 479
1 max is 479
2 max is 479
3:commitIndex -> 479
[3][27][0] apply index = 479, commit is 479
3:{479}unlock now
3:{479}unlock end
3:{479}lock now
3:{479}lock end
3:rf.commitIndex = 479, rf.lastApplied = 479
[2]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[0]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[3]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:27:02 kvserver[3]: applyMsg: {true {Get 3  481371401344628756 14} 479 27 false [] 0 0}处理完成,通知index = [479]的channel
2023/09/23 03:27:02 kvserver[3]: applyMsg: {true {Get 3  481371401344628756 14} 479 27 false [] 0 0}处理完成,通知完成index = [479]的channel
2023/09/23 03:27:02 kvserver[3]: GET获取到通知结果,index=[479],replyMsg.value: x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
reply value is x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
kvserver[3]: pre删除通道index: 479
kvserver[3]: begin删除通道index: 479
2023/09/23 03:27:02 kvserver[3]: 成功删除通道index: 479
OK:i num is 4, key is 3, return x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:27:02 read from clients 4
2023/09/23 03:27:02 Check 13 for client 4
1更新log，长度479
[1][27][0] apply index = 478, commit is 478
1:{478}unlock now
1:{478}unlock end
1:{478}lock now
1:{478}lock end
1:rf.commitIndex = 478, rf.lastApplied = 478
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[1]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
4更新log，长度479
[4][27][0] apply index = 478, commit is 478
4:{478}unlock now
4:{478}unlock end
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[4]Get key:2, x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 y
4:{478}lock now
4:{478}lock end
4:rf.commitIndex = 478, rf.lastApplied = 478
---------------
3接受新命令{%!d(string=Get) %!d(string=4) %!d(string=) 481371401344628756 15},term is 27,len is 480
---------------
1 return success! num is 1
nextIndex = 479, lastIndex = 0, len = 480
4 return success! num is 2
nextIndex = 479, lastIndex = 0, len = 480
1 max is 479
2 max is 479
3:commitIndex -> 479
3:rf.commitIndex = 479, rf.lastApplied = 479
3 begin to append 0
prevlogindex = 479, lastIndex = 0
3 begin to append 1
prevlogindex = 479, lastIndex = 0
3 begin to append 2
prevlogindex = 479, lastIndex = 0
3 begin to append 4
prevlogindex = 479, lastIndex = 0
测试：0节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 479
updateIndex = 479, lastIndex = 0
测试：4节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 479
updateIndex = 479, lastIndex = 0
0更新log，长度480
[0][27][0] apply index = 479, commit is 479
0:{479}unlock now
0:{479}unlock end
0:{479}lock now
0:{479}lock end
0:rf.commitIndex = 479, rf.lastApplied = 479
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[0]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
0 return success! num is 1
nextIndex = 480, lastIndex = 0, len = 480
测试：2节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 479
updateIndex = 479, lastIndex = 0
测试：1节点term为27，leader发送term为27, 接收1个, PrevLogIndex is 479
updateIndex = 479, lastIndex = 0
2更新log，长度480
2 return success! num is 2
nextIndex = 480, lastIndex = 0, len = 480
1 max is 480
2 max is 480
3:commitIndex -> 480
[3][27][0] apply index = 480, commit is 480
3:{480}unlock now
[2][27][0] apply index = 479, commit is 479
2:{479}unlock now
2:{479}unlock end
2:{479}lock now
2:{479}lock end
2:rf.commitIndex = 479, rf.lastApplied = 479
3:{480}unlock end
3:{480}lock now
3:{480}lock end
3:rf.commitIndex = 480, rf.lastApplied = 480
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[2]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[3]Get key:4, x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
2023/09/23 03:27:02 kvserver[3]: applyMsg: {true {Get 4  481371401344628756 15} 480 27 false [] 0 0}处理完成,通知index = [480]的channel
2023/09/23 03:27:02 kvserver[3]: applyMsg: {true {Get 4  481371401344628756 15} 480 27 false [] 0 0}处理完成,通知完成index = [480]的channel
2023/09/23 03:27:02 kvserver[3]: GET获取到通知结果,index=[480],replyMsg.value: x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
reply value is x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
kvserver[3]: pre删除通道index: 480
kvserver[3]: begin删除通道index: 480
2023/09/23 03:27:02 kvserver[3]: 成功删除通道index: 480
OK:i num is 4, key is 4, return x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 y
4更新log，长度480
1更新log，长度480
1 return success! num is 1
nextIndex = 480, lastIndex = 0, len = 480
[1][27][0] apply index = 479, commit is 479
1:{479}unlock now
1:{479}unlock end
1:{479}lock now
1:{479}lock end
1:rf.commitIndex = 479, rf.lastApplied = 479
[4][27][0] apply index = 479, commit is 479
4:{479}unlock now
4:{479}unlock end
4:{479}lock now
4:{479}lock end
4:rf.commitIndex = 479, rf.lastApplied = 479
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[4]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
2023/09/23 03:27:02 CommandApply!!!!!!!!!
[1]Get key:3, x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 y
4 return success! num is 2
nextIndex = 480, lastIndex = 0, len = 480
1 max is 480
2 max is 480
3:commitIndex -> 480
3:rf.commitIndex = 480, rf.lastApplied = 480
  ... Passed --  24.1  5 17603  438
PASS
ok  	6.824/kvraft	24.172s
